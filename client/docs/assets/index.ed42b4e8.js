(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const p of n.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();const lt={};function pr(c){lt.context=c}const gr=(c,i)=>c===i,mr=Symbol("solid-track"),Vi={equals:gr};let zs=to;const At=1,Ei=2,Xs={owned:null,cleanups:null,context:null,owner:null};var Ae=null;let Lt=null,Pe=null,Me=null,gt=null,pn=0;function Ti(c,i){const t=Pe,s=Ae,r=c.length===0,n=r?Xs:{owned:null,cleanups:null,context:null,owner:i||s},p=r?c:()=>c(()=>Ct(()=>Ni(n)));Ae=n,Pe=null;try{return si(p,!0)}finally{Pe=t,Ae=s}}function Y(c,i){i=i?Object.assign({},Vi,i):Vi;const t={value:c,observers:null,observerSlots:null,comparator:i.equals||void 0},s=r=>(typeof r=="function"&&(r=r(t.value)),eo(t,r));return[Zs.bind(t),s]}function wt(c,i,t){const s=gn(c,i,!1,At);ni(s)}function vr(c,i,t){zs=xr;const s=gn(c,i,!1,At);s.user=!0,gt?gt.push(s):ni(s)}function mt(c,i,t){t=t?Object.assign({},Vi,t):Vi;const s=gn(c,i,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=t.equals||void 0,ni(s),Zs.bind(s)}function Ct(c){const i=Pe;Pe=null;try{return c()}finally{Pe=i}}function vt(c){vr(()=>Ct(c))}function Js(c){return Ae===null||(Ae.cleanups===null?Ae.cleanups=[c]:Ae.cleanups.push(c)),c}function wr(c,i){const t=Symbol("context");return{id:t,Provider:Cr(t),defaultValue:c}}function br(c){let i;return(i=so(Ae,c.id))!==void 0?i:c.defaultValue}function yr(c){const i=mt(c),t=mt(()=>un(i()));return t.toArray=()=>{const s=t();return Array.isArray(s)?s:s!=null?[s]:[]},t}function Zs(){const c=Lt;if(this.sources&&(this.state||c))if(this.state===At||c)ni(this);else{const i=Me;Me=null,si(()=>Si(this),!1),Me=i}if(Pe){const i=this.observers?this.observers.length:0;Pe.sources?(Pe.sources.push(this),Pe.sourceSlots.push(i)):(Pe.sources=[this],Pe.sourceSlots=[i]),this.observers?(this.observers.push(Pe),this.observerSlots.push(Pe.sources.length-1)):(this.observers=[Pe],this.observerSlots=[Pe.sources.length-1])}return this.value}function eo(c,i,t){let s=c.value;return(!c.comparator||!c.comparator(s,i))&&(c.value=i,c.observers&&c.observers.length&&si(()=>{for(let r=0;r<c.observers.length;r+=1){const n=c.observers[r],p=Lt&&Lt.running;p&&Lt.disposed.has(n),(p&&!n.tState||!p&&!n.state)&&(n.pure?Me.push(n):gt.push(n),n.observers&&io(n)),p||(n.state=At)}if(Me.length>1e6)throw Me=[],new Error},!1)),i}function ni(c){if(!c.fn)return;Ni(c);const i=Ae,t=Pe,s=pn;Pe=Ae=c,_r(c,c.value,s),Pe=t,Ae=i}function _r(c,i,t){let s;try{s=c.fn(i)}catch(r){c.pure&&(c.state=At,c.owned&&c.owned.forEach(Ni),c.owned=null),no(r)}(!c.updatedAt||c.updatedAt<=t)&&(c.updatedAt!=null&&"observers"in c?eo(c,s):c.value=s,c.updatedAt=t)}function gn(c,i,t,s=At,r){const n={fn:c,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:i,owner:Ae,context:null,pure:t};return Ae===null||Ae!==Xs&&(Ae.owned?Ae.owned.push(n):Ae.owned=[n]),n}function Ii(c){const i=Lt;if(c.state===0||i)return;if(c.state===Ei||i)return Si(c);if(c.suspense&&Ct(c.suspense.inFallback))return c.suspense.effects.push(c);const t=[c];for(;(c=c.owner)&&(!c.updatedAt||c.updatedAt<pn);)(c.state||i)&&t.push(c);for(let s=t.length-1;s>=0;s--)if(c=t[s],c.state===At||i)ni(c);else if(c.state===Ei||i){const r=Me;Me=null,si(()=>Si(c,t[0]),!1),Me=r}}function si(c,i){if(Me)return c();let t=!1;i||(Me=[]),gt?t=!0:gt=[],pn++;try{const s=c();return Pr(t),s}catch(s){Me||(gt=null),no(s)}}function Pr(c){if(Me&&(to(Me),Me=null),c)return;const i=gt;gt=null,i.length&&si(()=>zs(i),!1)}function to(c){for(let i=0;i<c.length;i++)Ii(c[i])}function xr(c){let i,t=0;for(i=0;i<c.length;i++){const s=c[i];s.user?c[t++]=s:Ii(s)}for(lt.context&&pr(),i=0;i<t;i++)Ii(c[i])}function Si(c,i){const t=Lt;c.state=0;for(let s=0;s<c.sources.length;s+=1){const r=c.sources[s];r.sources&&(r.state===At||t?r!==i&&Ii(r):(r.state===Ei||t)&&Si(r,i))}}function io(c){const i=Lt;for(let t=0;t<c.observers.length;t+=1){const s=c.observers[t];(!s.state||i)&&(s.state=Ei,s.pure?Me.push(s):gt.push(s),s.observers&&io(s))}}function Ni(c){let i;if(c.sources)for(;c.sources.length;){const t=c.sources.pop(),s=c.sourceSlots.pop(),r=t.observers;if(r&&r.length){const n=r.pop(),p=t.observerSlots.pop();s<r.length&&(n.sourceSlots[p]=s,r[s]=n,t.observerSlots[s]=p)}}if(c.owned){for(i=0;i<c.owned.length;i++)Ni(c.owned[i]);c.owned=null}if(c.cleanups){for(i=0;i<c.cleanups.length;i++)c.cleanups[i]();c.cleanups=null}c.state=0,c.context=null}function Ar(c){return c instanceof Error||typeof c=="string"?c:new Error("Unknown error")}function no(c){throw c=Ar(c),c}function so(c,i){return c?c.context&&c.context[i]!==void 0?c.context[i]:so(c.owner,i):void 0}function un(c){if(typeof c=="function"&&!c.length)return un(c());if(Array.isArray(c)){const i=[];for(let t=0;t<c.length;t++){const s=un(c[t]);Array.isArray(s)?i.push.apply(i,s):i.push(s)}return i}return c}function Cr(c,i){return function(s){let r;return wt(()=>r=Ct(()=>(Ae.context={[c]:s.value},yr(()=>s.children))),void 0),r}}const Tr=Symbol("fallback");function qs(c){for(let i=0;i<c.length;i++)c[i]()}function kr(c,i,t={}){let s=[],r=[],n=[],p=0,a=i.length>1?[]:null;return Js(()=>qs(n)),()=>{let f=c()||[],y,_;return f[mr],Ct(()=>{let D=f.length,k,S,Q,X,N,R,V,T,B;if(D===0)p!==0&&(qs(n),n=[],s=[],r=[],p=0,a&&(a=[])),t.fallback&&(s=[Tr],r[0]=Ti($=>(n[0]=$,t.fallback())),p=1);else if(p===0){for(r=new Array(D),_=0;_<D;_++)s[_]=f[_],r[_]=Ti(q);p=D}else{for(Q=new Array(D),X=new Array(D),a&&(N=new Array(D)),R=0,V=Math.min(p,D);R<V&&s[R]===f[R];R++);for(V=p-1,T=D-1;V>=R&&T>=R&&s[V]===f[T];V--,T--)Q[T]=r[V],X[T]=n[V],a&&(N[T]=a[V]);for(k=new Map,S=new Array(T+1),_=T;_>=R;_--)B=f[_],y=k.get(B),S[_]=y===void 0?-1:y,k.set(B,_);for(y=R;y<=V;y++)B=s[y],_=k.get(B),_!==void 0&&_!==-1?(Q[_]=r[y],X[_]=n[y],a&&(N[_]=a[y]),_=S[_],k.set(B,_)):n[y]();for(_=R;_<D;_++)_ in Q?(r[_]=Q[_],n[_]=X[_],a&&(a[_]=N[_],a[_](_))):r[_]=Ti(q);r=r.slice(0,p=D),s=f.slice(0)}return r});function q(D){if(n[_]=D,a){const[k,S]=Y(_);return a[_]=S,i(f[_],k)}return i(f[_])}}}function ae(c,i){return Ct(()=>c(i||{}))}function mn(c){const i="fallback"in c&&{fallback:()=>c.fallback};return mt(kr(()=>c.each,c.children,i||void 0))}function Je(c){let i=!1;const t=c.keyed,s=mt(()=>c.when,void 0,{equals:(r,n)=>i?r===n:!r==!n});return mt(()=>{const r=s();if(r){const n=c.children,p=typeof n=="function"&&n.length>0;return i=t||p,p?Ct(()=>n(r)):n}return c.fallback},void 0,void 0)}function Vr(c,i,t){let s=t.length,r=i.length,n=s,p=0,a=0,f=i[r-1].nextSibling,y=null;for(;p<r||a<n;){if(i[p]===t[a]){p++,a++;continue}for(;i[r-1]===t[n-1];)r--,n--;if(r===p){const _=n<s?a?t[a-1].nextSibling:t[n-a]:f;for(;a<n;)c.insertBefore(t[a++],_)}else if(n===a)for(;p<r;)(!y||!y.has(i[p]))&&i[p].remove(),p++;else if(i[p]===t[n-1]&&t[a]===i[r-1]){const _=i[--r].nextSibling;c.insertBefore(t[a++],i[p++].nextSibling),c.insertBefore(t[--n],_),i[r]=t[n]}else{if(!y){y=new Map;let q=a;for(;q<n;)y.set(t[q],q++)}const _=y.get(i[p]);if(_!=null)if(a<_&&_<n){let q=p,D=1,k;for(;++q<r&&q<n&&!((k=y.get(i[q]))==null||k!==_+D);)D++;if(D>_-a){const S=i[p];for(;a<_;)c.insertBefore(t[a++],S)}else c.replaceChild(t[a++],i[p++])}else p++;else i[p++].remove()}}}const js="_$DX_DELEGATE";function Er(c,i,t,s={}){let r;return Ti(n=>{r=n,i===document?c():Ve(i,c(),i.firstChild?null:void 0,t)},s.owner),()=>{r(),i.textContent=""}}function Ce(c,i,t){const s=document.createElement("template");s.innerHTML=c;let r=s.content.firstChild;return t&&(r=r.firstChild),r}function Gt(c,i=window.document){const t=i[js]||(i[js]=new Set);for(let s=0,r=c.length;s<r;s++){const n=c[s];t.has(n)||(t.add(n),i.addEventListener(n,Sr))}}function Mi(c,i,t){t==null?c.removeAttribute(i):c.setAttribute(i,t)}function Bi(c,i){i==null?c.removeAttribute("class"):c.className=i}function Ir(c,i,t,s){if(s)Array.isArray(t)?(c[`$$${i}`]=t[0],c[`$$${i}Data`]=t[1]):c[`$$${i}`]=t;else if(Array.isArray(t)){const r=t[0];c.addEventListener(i,t[0]=n=>r.call(c,t[1],n))}else c.addEventListener(i,t)}function oo(c,i,t){if(!i)return t?Mi(c,"style"):i;const s=c.style;if(typeof i=="string")return s.cssText=i;typeof t=="string"&&(s.cssText=t=void 0),t||(t={}),i||(i={});let r,n;for(n in t)i[n]==null&&s.removeProperty(n),delete t[n];for(n in i)r=i[n],r!==t[n]&&(s.setProperty(n,r),t[n]=r);return t}function Hs(c,i,t){return Ct(()=>c(i,t))}function Ve(c,i,t,s){if(t!==void 0&&!s&&(s=[]),typeof i!="function")return Li(c,i,s,t);wt(r=>Li(c,i(),r,t),s)}function Sr(c){const i=`$$${c.type}`;let t=c.composedPath&&c.composedPath()[0]||c.target;for(c.target!==t&&Object.defineProperty(c,"target",{configurable:!0,value:t}),Object.defineProperty(c,"currentTarget",{configurable:!0,get(){return t||document}}),lt.registry&&!lt.done&&(lt.done=!0,document.querySelectorAll("[id^=pl-]").forEach(s=>{for(;s&&s.nodeType!==8&&s.nodeValue!=="pl-"+c;){let r=s.nextSibling;s.remove(),s=r}s&&s.remove()}));t;){const s=t[i];if(s&&!t.disabled){const r=t[`${i}Data`];if(r!==void 0?s.call(t,r,c):s.call(t,c),c.cancelBubble)return}t=t._$host||t.parentNode||t.host}}function Li(c,i,t,s,r){for(lt.context&&!t&&(t=[...c.childNodes]);typeof t=="function";)t=t();if(i===t)return t;const n=typeof i,p=s!==void 0;if(c=p&&t[0]&&t[0].parentNode||c,n==="string"||n==="number"){if(lt.context)return t;if(n==="number"&&(i=i.toString()),p){let a=t[0];a&&a.nodeType===3?a.data=i:a=document.createTextNode(i),t=Wt(c,t,s,a)}else t!==""&&typeof t=="string"?t=c.firstChild.data=i:t=c.textContent=i}else if(i==null||n==="boolean"){if(lt.context)return t;t=Wt(c,t,s)}else{if(n==="function")return wt(()=>{let a=i();for(;typeof a=="function";)a=a();t=Li(c,a,t,s)}),()=>t;if(Array.isArray(i)){const a=[],f=t&&Array.isArray(t);if(dn(a,i,t,r))return wt(()=>t=Li(c,a,t,s,!0)),()=>t;if(lt.context){if(!a.length)return t;for(let y=0;y<a.length;y++)if(a[y].parentNode)return t=a}if(a.length===0){if(t=Wt(c,t,s),p)return t}else f?t.length===0?Ws(c,a,s):Vr(c,t,a):(t&&Wt(c),Ws(c,a));t=a}else if(i instanceof Node){if(lt.context&&i.parentNode)return t=p?[i]:i;if(Array.isArray(t)){if(p)return t=Wt(c,t,s,i);Wt(c,t,null,i)}else t==null||t===""||!c.firstChild?c.appendChild(i):c.replaceChild(i,c.firstChild);t=i}}return t}function dn(c,i,t,s){let r=!1;for(let n=0,p=i.length;n<p;n++){let a=i[n],f=t&&t[n];if(a instanceof Node)c.push(a);else if(!(a==null||a===!0||a===!1))if(Array.isArray(a))r=dn(c,a,f)||r;else if(typeof a=="function")if(s){for(;typeof a=="function";)a=a();r=dn(c,Array.isArray(a)?a:[a],Array.isArray(f)?f:[f])||r}else c.push(a),r=!0;else{const y=String(a);f&&f.nodeType===3&&f.data===y?c.push(f):c.push(document.createTextNode(y))}}return r}function Ws(c,i,t=null){for(let s=0,r=i.length;s<r;s++)c.insertBefore(i[s],t)}function Wt(c,i,t,s){if(t===void 0)return c.textContent="";const r=s||document.createTextNode("");if(i.length){let n=!1;for(let p=i.length-1;p>=0;p--){const a=i[p];if(r!==a){const f=a.parentNode===c;!n&&!p?f?c.replaceChild(r,a):c.insertBefore(r,t):f&&a.remove()}else n=!0}}else c.insertBefore(r,t);return[r]}var Mr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Br={exports:{}};/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(c,i){(function(t,s){c.exports=s()})(Mr,function(){const t="transitionend",s=l=>{let e=l.getAttribute("data-bs-target");if(!e||e==="#"){let o=l.getAttribute("href");if(!o||!o.includes("#")&&!o.startsWith("."))return null;o.includes("#")&&!o.startsWith("#")&&(o=`#${o.split("#")[1]}`),e=o&&o!=="#"?o.trim():null}return e},r=l=>{const e=s(l);return e&&document.querySelector(e)?e:null},n=l=>{const e=s(l);return e?document.querySelector(e):null},p=l=>{l.dispatchEvent(new Event(t))},a=l=>!(!l||typeof l!="object")&&(l.jquery!==void 0&&(l=l[0]),l.nodeType!==void 0),f=l=>a(l)?l.jquery?l[0]:l:typeof l=="string"&&l.length>0?document.querySelector(l):null,y=l=>{if(!a(l)||l.getClientRects().length===0)return!1;const e=getComputedStyle(l).getPropertyValue("visibility")==="visible",o=l.closest("details:not([open])");if(!o)return e;if(o!==l){const h=l.closest("summary");if(h&&h.parentNode!==o||h===null)return!1}return e},_=l=>!l||l.nodeType!==Node.ELEMENT_NODE||!!l.classList.contains("disabled")||(l.disabled!==void 0?l.disabled:l.hasAttribute("disabled")&&l.getAttribute("disabled")!=="false"),q=l=>{if(!document.documentElement.attachShadow)return null;if(typeof l.getRootNode=="function"){const e=l.getRootNode();return e instanceof ShadowRoot?e:null}return l instanceof ShadowRoot?l:l.parentNode?q(l.parentNode):null},D=()=>{},k=l=>{l.offsetHeight},S=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Q=[],X=()=>document.documentElement.dir==="rtl",N=l=>{var e;e=()=>{const o=S();if(o){const h=l.NAME,u=o.fn[h];o.fn[h]=l.jQueryInterface,o.fn[h].Constructor=l,o.fn[h].noConflict=()=>(o.fn[h]=u,l.jQueryInterface)}},document.readyState==="loading"?(Q.length||document.addEventListener("DOMContentLoaded",()=>{for(const o of Q)o()}),Q.push(e)):e()},R=l=>{typeof l=="function"&&l()},V=(l,e,o=!0)=>{if(!o)return void R(l);const h=(v=>{if(!v)return 0;let{transitionDuration:b,transitionDelay:x}=window.getComputedStyle(v);const I=Number.parseFloat(b),M=Number.parseFloat(x);return I||M?(b=b.split(",")[0],x=x.split(",")[0],1e3*(Number.parseFloat(b)+Number.parseFloat(x))):0})(e)+5;let u=!1;const d=({target:v})=>{v===e&&(u=!0,e.removeEventListener(t,d),R(l))};e.addEventListener(t,d),setTimeout(()=>{u||p(e)},h)},T=(l,e,o,h)=>{const u=l.length;let d=l.indexOf(e);return d===-1?!o&&h?l[u-1]:l[0]:(d+=o?1:-1,h&&(d=(d+u)%u),l[Math.max(0,Math.min(d,u-1))])},B=/[^.]*(?=\..*)\.|.*/,$=/\..*/,L=/::\d+$/,ne={};let Be=1;const Ee={mouseenter:"mouseover",mouseleave:"mouseout"},_e=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Le(l,e){return e&&`${e}::${Be++}`||l.uidEvent||Be++}function ce(l){const e=Le(l);return l.uidEvent=e,ne[e]=ne[e]||{},ne[e]}function qe(l,e,o=null){return Object.values(l).find(h=>h.callable===e&&h.delegationSelector===o)}function le(l,e,o){const h=typeof e=="string",u=h?o:e||o;let d=E(l);return _e.has(d)||(d=l),[h,u,d]}function J(l,e,o,h,u){if(typeof e!="string"||!l)return;let[d,v,b]=le(e,o,h);e in Ee&&(v=(K=>function(U){if(!U.relatedTarget||U.relatedTarget!==U.delegateTarget&&!U.delegateTarget.contains(U.relatedTarget))return K.call(this,U)})(v));const x=ce(l),I=x[b]||(x[b]={}),M=qe(I,v,d?o:null);if(M)return void(M.oneOff=M.oneOff&&u);const C=Le(v,e.replace(B,"")),ee=d?function(F,K,U){return function G(pe){const ve=F.querySelectorAll(K);for(let{target:ie}=pe;ie&&ie!==this;ie=ie.parentNode)for(const he of ve)if(he===ie)return H(pe,{delegateTarget:ie}),G.oneOff&&m.off(F,pe.type,K,U),U.apply(ie,[pe])}}(l,o,v):function(F,K){return function U(G){return H(G,{delegateTarget:F}),U.oneOff&&m.off(F,G.type,K),K.apply(F,[G])}}(l,v);ee.delegationSelector=d?o:null,ee.callable=v,ee.oneOff=u,ee.uidEvent=C,I[C]=ee,l.addEventListener(b,ee,d)}function se(l,e,o,h,u){const d=qe(e[o],h,u);d&&(l.removeEventListener(o,d,Boolean(u)),delete e[o][d.uidEvent])}function P(l,e,o,h){const u=e[o]||{};for(const d of Object.keys(u))if(d.includes(h)){const v=u[d];se(l,e,o,v.callable,v.delegationSelector)}}function E(l){return l=l.replace($,""),Ee[l]||l}const m={on(l,e,o,h){J(l,e,o,h,!1)},one(l,e,o,h){J(l,e,o,h,!0)},off(l,e,o,h){if(typeof e!="string"||!l)return;const[u,d,v]=le(e,o,h),b=v!==e,x=ce(l),I=x[v]||{},M=e.startsWith(".");if(d===void 0){if(M)for(const C of Object.keys(x))P(l,x,C,e.slice(1));for(const C of Object.keys(I)){const ee=C.replace(L,"");if(!b||e.includes(ee)){const F=I[C];se(l,x,v,F.callable,F.delegationSelector)}}}else{if(!Object.keys(I).length)return;se(l,x,v,d,u?o:null)}},trigger(l,e,o){if(typeof e!="string"||!l)return null;const h=S();let u=null,d=!0,v=!0,b=!1;e!==E(e)&&h&&(u=h.Event(e,o),h(l).trigger(u),d=!u.isPropagationStopped(),v=!u.isImmediatePropagationStopped(),b=u.isDefaultPrevented());let x=new Event(e,{bubbles:d,cancelable:!0});return x=H(x,o),b&&x.preventDefault(),v&&l.dispatchEvent(x),x.defaultPrevented&&u&&u.preventDefault(),x}};function H(l,e){for(const[o,h]of Object.entries(e||{}))try{l[o]=h}catch{Object.defineProperty(l,o,{configurable:!0,get:()=>h})}return l}const j=new Map,fe={set(l,e,o){j.has(l)||j.set(l,new Map);const h=j.get(l);h.has(e)||h.size===0?h.set(e,o):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(h.keys())[0]}.`)},get:(l,e)=>j.has(l)&&j.get(l).get(e)||null,remove(l,e){if(!j.has(l))return;const o=j.get(l);o.delete(e),o.size===0&&j.delete(l)}};function be(l){if(l==="true")return!0;if(l==="false")return!1;if(l===Number(l).toString())return Number(l);if(l===""||l==="null")return null;if(typeof l!="string")return l;try{return JSON.parse(decodeURIComponent(l))}catch{return l}}function Ie(l){return l.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const je={setDataAttribute(l,e,o){l.setAttribute(`data-bs-${Ie(e)}`,o)},removeDataAttribute(l,e){l.removeAttribute(`data-bs-${Ie(e)}`)},getDataAttributes(l){if(!l)return{};const e={},o=Object.keys(l.dataset).filter(h=>h.startsWith("bs")&&!h.startsWith("bsConfig"));for(const h of o){let u=h.replace(/^bs/,"");u=u.charAt(0).toLowerCase()+u.slice(1,u.length),e[u]=be(l.dataset[h])}return e},getDataAttribute:(l,e)=>be(l.getAttribute(`data-bs-${Ie(e)}`))};class tt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,o){const h=a(o)?je.getDataAttribute(o,"config"):{};return{...this.constructor.Default,...typeof h=="object"?h:{},...a(o)?je.getDataAttributes(o):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,o=this.constructor.DefaultType){for(const u of Object.keys(o)){const d=o[u],v=e[u],b=a(v)?"element":(h=v)==null?`${h}`:Object.prototype.toString.call(h).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(d).test(b))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${u}" provided type "${b}" but expected type "${d}".`)}var h}}class Oe extends tt{constructor(e,o){super(),(e=f(e))&&(this._element=e,this._config=this._getConfig(o),fe.set(this._element,this.constructor.DATA_KEY,this))}dispose(){fe.remove(this._element,this.constructor.DATA_KEY),m.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,o,h=!0){V(e,o,h)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return fe.get(f(e),this.DATA_KEY)}static getOrCreateInstance(e,o={}){return this.getInstance(e)||new this(e,typeof o=="object"?o:null)}static get VERSION(){return"5.2.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const at=(l,e="hide")=>{const o=`click.dismiss${l.EVENT_KEY}`,h=l.NAME;m.on(document,o,`[data-bs-dismiss="${h}"]`,function(u){if(["A","AREA"].includes(this.tagName)&&u.preventDefault(),_(this))return;const d=n(this)||this.closest(`.${h}`);l.getOrCreateInstance(d)[e]()})};class it extends Oe{static get NAME(){return"alert"}close(){if(m.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),m.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(e){return this.each(function(){const o=it.getOrCreateInstance(this);if(typeof e=="string"){if(o[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);o[e](this)}})}}at(it,"close"),N(it);const Yt='[data-bs-toggle="button"]';class bt extends Oe{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each(function(){const o=bt.getOrCreateInstance(this);e==="toggle"&&o[e]()})}}m.on(document,"click.bs.button.data-api",Yt,l=>{l.preventDefault();const e=l.target.closest(Yt);bt.getOrCreateInstance(e).toggle()}),N(bt);const z={find:(l,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,l)),findOne:(l,e=document.documentElement)=>Element.prototype.querySelector.call(e,l),children:(l,e)=>[].concat(...l.children).filter(o=>o.matches(e)),parents(l,e){const o=[];let h=l.parentNode.closest(e);for(;h;)o.push(h),h=h.parentNode.closest(e);return o},prev(l,e){let o=l.previousElementSibling;for(;o;){if(o.matches(e))return[o];o=o.previousElementSibling}return[]},next(l,e){let o=l.nextElementSibling;for(;o;){if(o.matches(e))return[o];o=o.nextElementSibling}return[]},focusableChildren(l){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(o=>`${o}:not([tabindex^="-"])`).join(",");return this.find(e,l).filter(o=>!_(o)&&y(o))}},oi={endCallback:null,leftCallback:null,rightCallback:null},ri={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class O extends tt{constructor(e,o){super(),this._element=e,e&&O.isSupported()&&(this._config=this._getConfig(o),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return oi}static get DefaultType(){return ri}static get NAME(){return"swipe"}dispose(){m.off(this._element,".bs.swipe")}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),R(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const o=e/this._deltaX;this._deltaX=0,o&&R(o>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(m.on(this._element,"pointerdown.bs.swipe",e=>this._start(e)),m.on(this._element,"pointerup.bs.swipe",e=>this._end(e)),this._element.classList.add("pointer-event")):(m.on(this._element,"touchstart.bs.swipe",e=>this._start(e)),m.on(this._element,"touchmove.bs.swipe",e=>this._move(e)),m.on(this._element,"touchend.bs.swipe",e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType==="pen"||e.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const g="next",Z="prev",W="left",yt="right",Te="slid.bs.carousel",Se="carousel",Qe="active",ct={ArrowLeft:yt,ArrowRight:W},ht={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ut={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ke extends Oe{constructor(e,o){super(e,o),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=z.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Se&&this.cycle()}static get Default(){return ht}static get DefaultType(){return ut}static get NAME(){return"carousel"}next(){this._slide(g)}nextWhenVisible(){!document.hidden&&y(this._element)&&this.next()}prev(){this._slide(Z)}pause(){this._isSliding&&p(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?m.one(this._element,Te,()=>this.cycle()):this.cycle())}to(e){const o=this._getItems();if(e>o.length-1||e<0)return;if(this._isSliding)return void m.one(this._element,Te,()=>this.to(e));const h=this._getItemIndex(this._getActive());if(h===e)return;const u=e>h?g:Z;this._slide(u,o[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&m.on(this._element,"keydown.bs.carousel",e=>this._keydown(e)),this._config.pause==="hover"&&(m.on(this._element,"mouseenter.bs.carousel",()=>this.pause()),m.on(this._element,"mouseleave.bs.carousel",()=>this._maybeEnableCycle())),this._config.touch&&O.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const o of z.find(".carousel-item img",this._element))m.on(o,"dragstart.bs.carousel",h=>h.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(W)),rightCallback:()=>this._slide(this._directionToOrder(yt)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new O(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const o=ct[e.key];o&&(e.preventDefault(),this._slide(this._directionToOrder(o)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const o=z.findOne(".active",this._indicatorsElement);o.classList.remove(Qe),o.removeAttribute("aria-current");const h=z.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);h&&(h.classList.add(Qe),h.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const o=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=o||this._config.defaultInterval}_slide(e,o=null){if(this._isSliding)return;const h=this._getActive(),u=e===g,d=o||T(this._getItems(),h,u,this._config.wrap);if(d===h)return;const v=this._getItemIndex(d),b=C=>m.trigger(this._element,C,{relatedTarget:d,direction:this._orderToDirection(e),from:this._getItemIndex(h),to:v});if(b("slide.bs.carousel").defaultPrevented||!h||!d)return;const x=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(v),this._activeElement=d;const I=u?"carousel-item-start":"carousel-item-end",M=u?"carousel-item-next":"carousel-item-prev";d.classList.add(M),k(d),h.classList.add(I),d.classList.add(I),this._queueCallback(()=>{d.classList.remove(I,M),d.classList.add(Qe),h.classList.remove(Qe,M,I),this._isSliding=!1,b(Te)},h,this._isAnimated()),x&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return z.findOne(".active.carousel-item",this._element)}_getItems(){return z.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return X()?e===W?Z:g:e===W?g:Z}_orderToDirection(e){return X()?e===Z?W:yt:e===Z?yt:W}static jQueryInterface(e){return this.each(function(){const o=Ke.getOrCreateInstance(this,e);if(typeof e!="number"){if(typeof e=="string"){if(o[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);o[e]()}}else o.to(e)})}}m.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(l){const e=n(this);if(!e||!e.classList.contains(Se))return;l.preventDefault();const o=Ke.getOrCreateInstance(e),h=this.getAttribute("data-bs-slide-to");return h?(o.to(h),void o._maybeEnableCycle()):je.getDataAttribute(this,"slide")==="next"?(o.next(),void o._maybeEnableCycle()):(o.prev(),void o._maybeEnableCycle())}),m.on(window,"load.bs.carousel.data-api",()=>{const l=z.find('[data-bs-ride="carousel"]');for(const e of l)Ke.getOrCreateInstance(e)}),N(Ke);const dt="show",li="collapse",ai="collapsing",Di='[data-bs-toggle="collapse"]',ho={parent:null,toggle:!0},uo={parent:"(null|element)",toggle:"boolean"};class Ot extends Oe{constructor(e,o){super(e,o),this._isTransitioning=!1,this._triggerArray=[];const h=z.find(Di);for(const u of h){const d=r(u),v=z.find(d).filter(b=>b===this._element);d!==null&&v.length&&this._triggerArray.push(u)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ho}static get DefaultType(){return uo}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(u=>u!==this._element).map(u=>Ot.getOrCreateInstance(u,{toggle:!1}))),e.length&&e[0]._isTransitioning||m.trigger(this._element,"show.bs.collapse").defaultPrevented)return;for(const u of e)u.hide();const o=this._getDimension();this._element.classList.remove(li),this._element.classList.add(ai),this._element.style[o]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const h=`scroll${o[0].toUpperCase()+o.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ai),this._element.classList.add(li,dt),this._element.style[o]="",m.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[o]=`${this._element[h]}px`}hide(){if(this._isTransitioning||!this._isShown()||m.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,k(this._element),this._element.classList.add(ai),this._element.classList.remove(li,dt);for(const o of this._triggerArray){const h=n(o);h&&!this._isShown(h)&&this._addAriaAndCollapsedClass([o],!1)}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ai),this._element.classList.add(li),m.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(e=this._element){return e.classList.contains(dt)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=f(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Di);for(const o of e){const h=n(o);h&&this._addAriaAndCollapsedClass([o],this._isShown(h))}}_getFirstLevelChildren(e){const o=z.find(":scope .collapse .collapse",this._config.parent);return z.find(e,this._config.parent).filter(h=>!o.includes(h))}_addAriaAndCollapsedClass(e,o){if(e.length)for(const h of e)h.classList.toggle("collapsed",!o),h.setAttribute("aria-expanded",o)}static jQueryInterface(e){const o={};return typeof e=="string"&&/show|hide/.test(e)&&(o.toggle=!1),this.each(function(){const h=Ot.getOrCreateInstance(this,o);if(typeof e=="string"){if(h[e]===void 0)throw new TypeError(`No method named "${e}"`);h[e]()}})}}m.on(document,"click.bs.collapse.data-api",Di,function(l){(l.target.tagName==="A"||l.delegateTarget&&l.delegateTarget.tagName==="A")&&l.preventDefault();const e=r(this),o=z.find(e);for(const h of o)Ot.getOrCreateInstance(h,{toggle:!1}).toggle()}),N(Ot);var Ne="top",He="bottom",We="right",De="left",ci="auto",Nt=[Ne,He,We,De],Tt="start",Dt="end",vn="clippingParents",Ri="viewport",Rt="popper",wn="reference",$i=Nt.reduce(function(l,e){return l.concat([e+"-"+Tt,e+"-"+Dt])},[]),Fi=[].concat(Nt,[ci]).reduce(function(l,e){return l.concat([e,e+"-"+Tt,e+"-"+Dt])},[]),bn="beforeRead",yn="read",_n="afterRead",Pn="beforeMain",xn="main",An="afterMain",Cn="beforeWrite",Tn="write",kn="afterWrite",Vn=[bn,yn,_n,Pn,xn,An,Cn,Tn,kn];function nt(l){return l?(l.nodeName||"").toLowerCase():null}function Ge(l){if(l==null)return window;if(l.toString()!=="[object Window]"){var e=l.ownerDocument;return e&&e.defaultView||window}return l}function kt(l){return l instanceof Ge(l).Element||l instanceof Element}function Ye(l){return l instanceof Ge(l).HTMLElement||l instanceof HTMLElement}function qi(l){return typeof ShadowRoot<"u"&&(l instanceof Ge(l).ShadowRoot||l instanceof ShadowRoot)}const ji={name:"applyStyles",enabled:!0,phase:"write",fn:function(l){var e=l.state;Object.keys(e.elements).forEach(function(o){var h=e.styles[o]||{},u=e.attributes[o]||{},d=e.elements[o];Ye(d)&&nt(d)&&(Object.assign(d.style,h),Object.keys(u).forEach(function(v){var b=u[v];b===!1?d.removeAttribute(v):d.setAttribute(v,b===!0?"":b)}))})},effect:function(l){var e=l.state,o={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,o.popper),e.styles=o,e.elements.arrow&&Object.assign(e.elements.arrow.style,o.arrow),function(){Object.keys(e.elements).forEach(function(h){var u=e.elements[h],d=e.attributes[h]||{},v=Object.keys(e.styles.hasOwnProperty(h)?e.styles[h]:o[h]).reduce(function(b,x){return b[x]="",b},{});Ye(u)&&nt(u)&&(Object.assign(u.style,v),Object.keys(d).forEach(function(b){u.removeAttribute(b)}))})}},requires:["computeStyles"]};function st(l){return l.split("-")[0]}var Vt=Math.max,hi=Math.min,$t=Math.round;function Hi(){var l=navigator.userAgentData;return l!=null&&l.brands?l.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function En(){return!/^((?!chrome|android).)*safari/i.test(Hi())}function Ft(l,e,o){e===void 0&&(e=!1),o===void 0&&(o=!1);var h=l.getBoundingClientRect(),u=1,d=1;e&&Ye(l)&&(u=l.offsetWidth>0&&$t(h.width)/l.offsetWidth||1,d=l.offsetHeight>0&&$t(h.height)/l.offsetHeight||1);var v=(kt(l)?Ge(l):window).visualViewport,b=!En()&&o,x=(h.left+(b&&v?v.offsetLeft:0))/u,I=(h.top+(b&&v?v.offsetTop:0))/d,M=h.width/u,C=h.height/d;return{width:M,height:C,top:I,right:x+M,bottom:I+C,left:x,x,y:I}}function Wi(l){var e=Ft(l),o=l.offsetWidth,h=l.offsetHeight;return Math.abs(e.width-o)<=1&&(o=e.width),Math.abs(e.height-h)<=1&&(h=e.height),{x:l.offsetLeft,y:l.offsetTop,width:o,height:h}}function In(l,e){var o=e.getRootNode&&e.getRootNode();if(l.contains(e))return!0;if(o&&qi(o)){var h=e;do{if(h&&l.isSameNode(h))return!0;h=h.parentNode||h.host}while(h)}return!1}function ft(l){return Ge(l).getComputedStyle(l)}function fo(l){return["table","td","th"].indexOf(nt(l))>=0}function _t(l){return((kt(l)?l.ownerDocument:l.document)||window.document).documentElement}function ui(l){return nt(l)==="html"?l:l.assignedSlot||l.parentNode||(qi(l)?l.host:null)||_t(l)}function Sn(l){return Ye(l)&&ft(l).position!=="fixed"?l.offsetParent:null}function zt(l){for(var e=Ge(l),o=Sn(l);o&&fo(o)&&ft(o).position==="static";)o=Sn(o);return o&&(nt(o)==="html"||nt(o)==="body"&&ft(o).position==="static")?e:o||function(h){var u=/firefox/i.test(Hi());if(/Trident/i.test(Hi())&&Ye(h)&&ft(h).position==="fixed")return null;var d=ui(h);for(qi(d)&&(d=d.host);Ye(d)&&["html","body"].indexOf(nt(d))<0;){var v=ft(d);if(v.transform!=="none"||v.perspective!=="none"||v.contain==="paint"||["transform","perspective"].indexOf(v.willChange)!==-1||u&&v.willChange==="filter"||u&&v.filter&&v.filter!=="none")return d;d=d.parentNode}return null}(l)||e}function Ui(l){return["top","bottom"].indexOf(l)>=0?"x":"y"}function Xt(l,e,o){return Vt(l,hi(e,o))}function Mn(l){return Object.assign({},{top:0,right:0,bottom:0,left:0},l)}function Bn(l,e){return e.reduce(function(o,h){return o[h]=l,o},{})}const Ln={name:"arrow",enabled:!0,phase:"main",fn:function(l){var e,o=l.state,h=l.name,u=l.options,d=o.elements.arrow,v=o.modifiersData.popperOffsets,b=st(o.placement),x=Ui(b),I=[De,We].indexOf(b)>=0?"height":"width";if(d&&v){var M=function(ge,de){return Mn(typeof(ge=typeof ge=="function"?ge(Object.assign({},de.rects,{placement:de.placement})):ge)!="number"?ge:Bn(ge,Nt))}(u.padding,o),C=Wi(d),ee=x==="y"?Ne:De,F=x==="y"?He:We,K=o.rects.reference[I]+o.rects.reference[x]-v[x]-o.rects.popper[I],U=v[x]-o.rects.reference[x],G=zt(d),pe=G?x==="y"?G.clientHeight||0:G.clientWidth||0:0,ve=K/2-U/2,ie=M[ee],he=pe-C[I]-M[F],te=pe/2-C[I]/2+ve,oe=Xt(ie,te,he),ue=x;o.modifiersData[h]=((e={})[ue]=oe,e.centerOffset=oe-te,e)}},effect:function(l){var e=l.state,o=l.options.element,h=o===void 0?"[data-popper-arrow]":o;h!=null&&(typeof h!="string"||(h=e.elements.popper.querySelector(h)))&&In(e.elements.popper,h)&&(e.elements.arrow=h)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function qt(l){return l.split("-")[1]}var po={top:"auto",right:"auto",bottom:"auto",left:"auto"};function On(l){var e,o=l.popper,h=l.popperRect,u=l.placement,d=l.variation,v=l.offsets,b=l.position,x=l.gpuAcceleration,I=l.adaptive,M=l.roundOffsets,C=l.isFixed,ee=v.x,F=ee===void 0?0:ee,K=v.y,U=K===void 0?0:K,G=typeof M=="function"?M({x:F,y:U}):{x:F,y:U};F=G.x,U=G.y;var pe=v.hasOwnProperty("x"),ve=v.hasOwnProperty("y"),ie=De,he=Ne,te=window;if(I){var oe=zt(o),ue="clientHeight",ge="clientWidth";oe===Ge(o)&&ft(oe=_t(o)).position!=="static"&&b==="absolute"&&(ue="scrollHeight",ge="scrollWidth"),(u===Ne||(u===De||u===We)&&d===Dt)&&(he=He,U-=(C&&oe===te&&te.visualViewport?te.visualViewport.height:oe[ue])-h.height,U*=x?1:-1),u!==De&&(u!==Ne&&u!==He||d!==Dt)||(ie=We,F-=(C&&oe===te&&te.visualViewport?te.visualViewport.width:oe[ge])-h.width,F*=x?1:-1)}var de,ye=Object.assign({position:b},I&&po),Ue=M===!0?function(et){var Re=et.x,ze=et.y,$e=window.devicePixelRatio||1;return{x:$t(Re*$e)/$e||0,y:$t(ze*$e)/$e||0}}({x:F,y:U}):{x:F,y:U};return F=Ue.x,U=Ue.y,x?Object.assign({},ye,((de={})[he]=ve?"0":"",de[ie]=pe?"0":"",de.transform=(te.devicePixelRatio||1)<=1?"translate("+F+"px, "+U+"px)":"translate3d("+F+"px, "+U+"px, 0)",de)):Object.assign({},ye,((e={})[he]=ve?U+"px":"",e[ie]=pe?F+"px":"",e.transform="",e))}const Qi={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(l){var e=l.state,o=l.options,h=o.gpuAcceleration,u=h===void 0||h,d=o.adaptive,v=d===void 0||d,b=o.roundOffsets,x=b===void 0||b,I={placement:st(e.placement),variation:qt(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:u,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,On(Object.assign({},I,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:v,roundOffsets:x})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,On(Object.assign({},I,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:x})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var di={passive:!0};const Ki={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(l){var e=l.state,o=l.instance,h=l.options,u=h.scroll,d=u===void 0||u,v=h.resize,b=v===void 0||v,x=Ge(e.elements.popper),I=[].concat(e.scrollParents.reference,e.scrollParents.popper);return d&&I.forEach(function(M){M.addEventListener("scroll",o.update,di)}),b&&x.addEventListener("resize",o.update,di),function(){d&&I.forEach(function(M){M.removeEventListener("scroll",o.update,di)}),b&&x.removeEventListener("resize",o.update,di)}},data:{}};var go={left:"right",right:"left",bottom:"top",top:"bottom"};function fi(l){return l.replace(/left|right|bottom|top/g,function(e){return go[e]})}var mo={start:"end",end:"start"};function Nn(l){return l.replace(/start|end/g,function(e){return mo[e]})}function Gi(l){var e=Ge(l);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Yi(l){return Ft(_t(l)).left+Gi(l).scrollLeft}function zi(l){var e=ft(l),o=e.overflow,h=e.overflowX,u=e.overflowY;return/auto|scroll|overlay|hidden/.test(o+u+h)}function Dn(l){return["html","body","#document"].indexOf(nt(l))>=0?l.ownerDocument.body:Ye(l)&&zi(l)?l:Dn(ui(l))}function Jt(l,e){var o;e===void 0&&(e=[]);var h=Dn(l),u=h===((o=l.ownerDocument)==null?void 0:o.body),d=Ge(h),v=u?[d].concat(d.visualViewport||[],zi(h)?h:[]):h,b=e.concat(v);return u?b:b.concat(Jt(ui(v)))}function Xi(l){return Object.assign({},l,{left:l.x,top:l.y,right:l.x+l.width,bottom:l.y+l.height})}function Rn(l,e,o){return e===Ri?Xi(function(h,u){var d=Ge(h),v=_t(h),b=d.visualViewport,x=v.clientWidth,I=v.clientHeight,M=0,C=0;if(b){x=b.width,I=b.height;var ee=En();(ee||!ee&&u==="fixed")&&(M=b.offsetLeft,C=b.offsetTop)}return{width:x,height:I,x:M+Yi(h),y:C}}(l,o)):kt(e)?function(h,u){var d=Ft(h,!1,u==="fixed");return d.top=d.top+h.clientTop,d.left=d.left+h.clientLeft,d.bottom=d.top+h.clientHeight,d.right=d.left+h.clientWidth,d.width=h.clientWidth,d.height=h.clientHeight,d.x=d.left,d.y=d.top,d}(e,o):Xi(function(h){var u,d=_t(h),v=Gi(h),b=(u=h.ownerDocument)==null?void 0:u.body,x=Vt(d.scrollWidth,d.clientWidth,b?b.scrollWidth:0,b?b.clientWidth:0),I=Vt(d.scrollHeight,d.clientHeight,b?b.scrollHeight:0,b?b.clientHeight:0),M=-v.scrollLeft+Yi(h),C=-v.scrollTop;return ft(b||d).direction==="rtl"&&(M+=Vt(d.clientWidth,b?b.clientWidth:0)-x),{width:x,height:I,x:M,y:C}}(_t(l)))}function $n(l){var e,o=l.reference,h=l.element,u=l.placement,d=u?st(u):null,v=u?qt(u):null,b=o.x+o.width/2-h.width/2,x=o.y+o.height/2-h.height/2;switch(d){case Ne:e={x:b,y:o.y-h.height};break;case He:e={x:b,y:o.y+o.height};break;case We:e={x:o.x+o.width,y:x};break;case De:e={x:o.x-h.width,y:x};break;default:e={x:o.x,y:o.y}}var I=d?Ui(d):null;if(I!=null){var M=I==="y"?"height":"width";switch(v){case Tt:e[I]=e[I]-(o[M]/2-h[M]/2);break;case Dt:e[I]=e[I]+(o[M]/2-h[M]/2)}}return e}function jt(l,e){e===void 0&&(e={});var o=e,h=o.placement,u=h===void 0?l.placement:h,d=o.strategy,v=d===void 0?l.strategy:d,b=o.boundary,x=b===void 0?vn:b,I=o.rootBoundary,M=I===void 0?Ri:I,C=o.elementContext,ee=C===void 0?Rt:C,F=o.altBoundary,K=F!==void 0&&F,U=o.padding,G=U===void 0?0:U,pe=Mn(typeof G!="number"?G:Bn(G,Nt)),ve=ee===Rt?wn:Rt,ie=l.rects.popper,he=l.elements[K?ve:ee],te=function(Re,ze,$e,ke){var ot=ze==="clippingParents"?function(me){var Fe=Jt(ui(me)),Xe=["absolute","fixed"].indexOf(ft(me).position)>=0&&Ye(me)?zt(me):me;return kt(Xe)?Fe.filter(function(Pt){return kt(Pt)&&In(Pt,Xe)&&nt(Pt)!=="body"}):[]}(Re):[].concat(ze),rt=[].concat(ot,[$e]),Ht=rt[0],xe=rt.reduce(function(me,Fe){var Xe=Rn(Re,Fe,ke);return me.top=Vt(Xe.top,me.top),me.right=hi(Xe.right,me.right),me.bottom=hi(Xe.bottom,me.bottom),me.left=Vt(Xe.left,me.left),me},Rn(Re,Ht,ke));return xe.width=xe.right-xe.left,xe.height=xe.bottom-xe.top,xe.x=xe.left,xe.y=xe.top,xe}(kt(he)?he:he.contextElement||_t(l.elements.popper),x,M,v),oe=Ft(l.elements.reference),ue=$n({reference:oe,element:ie,strategy:"absolute",placement:u}),ge=Xi(Object.assign({},ie,ue)),de=ee===Rt?ge:oe,ye={top:te.top-de.top+pe.top,bottom:de.bottom-te.bottom+pe.bottom,left:te.left-de.left+pe.left,right:de.right-te.right+pe.right},Ue=l.modifiersData.offset;if(ee===Rt&&Ue){var et=Ue[u];Object.keys(ye).forEach(function(Re){var ze=[We,He].indexOf(Re)>=0?1:-1,$e=[Ne,He].indexOf(Re)>=0?"y":"x";ye[Re]+=et[$e]*ze})}return ye}function vo(l,e){e===void 0&&(e={});var o=e,h=o.placement,u=o.boundary,d=o.rootBoundary,v=o.padding,b=o.flipVariations,x=o.allowedAutoPlacements,I=x===void 0?Fi:x,M=qt(h),C=M?b?$i:$i.filter(function(K){return qt(K)===M}):Nt,ee=C.filter(function(K){return I.indexOf(K)>=0});ee.length===0&&(ee=C);var F=ee.reduce(function(K,U){return K[U]=jt(l,{placement:U,boundary:u,rootBoundary:d,padding:v})[st(U)],K},{});return Object.keys(F).sort(function(K,U){return F[K]-F[U]})}const Fn={name:"flip",enabled:!0,phase:"main",fn:function(l){var e=l.state,o=l.options,h=l.name;if(!e.modifiersData[h]._skip){for(var u=o.mainAxis,d=u===void 0||u,v=o.altAxis,b=v===void 0||v,x=o.fallbackPlacements,I=o.padding,M=o.boundary,C=o.rootBoundary,ee=o.altBoundary,F=o.flipVariations,K=F===void 0||F,U=o.allowedAutoPlacements,G=e.options.placement,pe=st(G),ve=x||(pe!==G&&K?function(me){if(st(me)===ci)return[];var Fe=fi(me);return[Nn(me),Fe,Nn(Fe)]}(G):[fi(G)]),ie=[G].concat(ve).reduce(function(me,Fe){return me.concat(st(Fe)===ci?vo(e,{placement:Fe,boundary:M,rootBoundary:C,padding:I,flipVariations:K,allowedAutoPlacements:U}):Fe)},[]),he=e.rects.reference,te=e.rects.popper,oe=new Map,ue=!0,ge=ie[0],de=0;de<ie.length;de++){var ye=ie[de],Ue=st(ye),et=qt(ye)===Tt,Re=[Ne,He].indexOf(Ue)>=0,ze=Re?"width":"height",$e=jt(e,{placement:ye,boundary:M,rootBoundary:C,altBoundary:ee,padding:I}),ke=Re?et?We:De:et?He:Ne;he[ze]>te[ze]&&(ke=fi(ke));var ot=fi(ke),rt=[];if(d&&rt.push($e[Ue]<=0),b&&rt.push($e[ke]<=0,$e[ot]<=0),rt.every(function(me){return me})){ge=ye,ue=!1;break}oe.set(ye,rt)}if(ue)for(var Ht=function(me){var Fe=ie.find(function(Xe){var Pt=oe.get(Xe);if(Pt)return Pt.slice(0,me).every(function(xi){return xi})});if(Fe)return ge=Fe,"break"},xe=K?3:1;xe>0&&Ht(xe)!=="break";xe--);e.placement!==ge&&(e.modifiersData[h]._skip=!0,e.placement=ge,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function qn(l,e,o){return o===void 0&&(o={x:0,y:0}),{top:l.top-e.height-o.y,right:l.right-e.width+o.x,bottom:l.bottom-e.height+o.y,left:l.left-e.width-o.x}}function jn(l){return[Ne,We,He,De].some(function(e){return l[e]>=0})}const Hn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(l){var e=l.state,o=l.name,h=e.rects.reference,u=e.rects.popper,d=e.modifiersData.preventOverflow,v=jt(e,{elementContext:"reference"}),b=jt(e,{altBoundary:!0}),x=qn(v,h),I=qn(b,u,d),M=jn(x),C=jn(I);e.modifiersData[o]={referenceClippingOffsets:x,popperEscapeOffsets:I,isReferenceHidden:M,hasPopperEscaped:C},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":M,"data-popper-escaped":C})}},Wn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(l){var e=l.state,o=l.options,h=l.name,u=o.offset,d=u===void 0?[0,0]:u,v=Fi.reduce(function(M,C){return M[C]=function(ee,F,K){var U=st(ee),G=[De,Ne].indexOf(U)>=0?-1:1,pe=typeof K=="function"?K(Object.assign({},F,{placement:ee})):K,ve=pe[0],ie=pe[1];return ve=ve||0,ie=(ie||0)*G,[De,We].indexOf(U)>=0?{x:ie,y:ve}:{x:ve,y:ie}}(C,e.rects,d),M},{}),b=v[e.placement],x=b.x,I=b.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=x,e.modifiersData.popperOffsets.y+=I),e.modifiersData[h]=v}},Ji={name:"popperOffsets",enabled:!0,phase:"read",fn:function(l){var e=l.state,o=l.name;e.modifiersData[o]=$n({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},Un={name:"preventOverflow",enabled:!0,phase:"main",fn:function(l){var e=l.state,o=l.options,h=l.name,u=o.mainAxis,d=u===void 0||u,v=o.altAxis,b=v!==void 0&&v,x=o.boundary,I=o.rootBoundary,M=o.altBoundary,C=o.padding,ee=o.tether,F=ee===void 0||ee,K=o.tetherOffset,U=K===void 0?0:K,G=jt(e,{boundary:x,rootBoundary:I,padding:C,altBoundary:M}),pe=st(e.placement),ve=qt(e.placement),ie=!ve,he=Ui(pe),te=he==="x"?"y":"x",oe=e.modifiersData.popperOffsets,ue=e.rects.reference,ge=e.rects.popper,de=typeof U=="function"?U(Object.assign({},e.rects,{placement:e.placement})):U,ye=typeof de=="number"?{mainAxis:de,altAxis:de}:Object.assign({mainAxis:0,altAxis:0},de),Ue=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,et={x:0,y:0};if(oe){if(d){var Re,ze=he==="y"?Ne:De,$e=he==="y"?He:We,ke=he==="y"?"height":"width",ot=oe[he],rt=ot+G[ze],Ht=ot-G[$e],xe=F?-ge[ke]/2:0,me=ve===Tt?ue[ke]:ge[ke],Fe=ve===Tt?-ge[ke]:-ue[ke],Xe=e.elements.arrow,Pt=F&&Xe?Wi(Xe):{width:0,height:0},xi=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Es=xi[ze],Is=xi[$e],Ai=Xt(0,ue[ke],Pt[ke]),rr=ie?ue[ke]/2-xe-Ai-Es-ye.mainAxis:me-Ai-Es-ye.mainAxis,lr=ie?-ue[ke]/2+xe+Ai+Is+ye.mainAxis:Fe+Ai+Is+ye.mainAxis,rn=e.elements.arrow&&zt(e.elements.arrow),ar=rn?he==="y"?rn.clientTop||0:rn.clientLeft||0:0,Ss=(Re=Ue?.[he])!=null?Re:0,cr=ot+lr-Ss,Ms=Xt(F?hi(rt,ot+rr-Ss-ar):rt,ot,F?Vt(Ht,cr):Ht);oe[he]=Ms,et[he]=Ms-ot}if(b){var Bs,hr=he==="x"?Ne:De,ur=he==="x"?He:We,Bt=oe[te],Ci=te==="y"?"height":"width",Ls=Bt+G[hr],Os=Bt-G[ur],ln=[Ne,De].indexOf(pe)!==-1,Ns=(Bs=Ue?.[te])!=null?Bs:0,Ds=ln?Ls:Bt-ue[Ci]-ge[Ci]-Ns+ye.altAxis,Rs=ln?Bt+ue[Ci]+ge[Ci]-Ns-ye.altAxis:Os,$s=F&&ln?function(dr,fr,an){var Fs=Xt(dr,fr,an);return Fs>an?an:Fs}(Ds,Bt,Rs):Xt(F?Ds:Ls,Bt,F?Rs:Os);oe[te]=$s,et[te]=$s-Bt}e.modifiersData[h]=et}},requiresIfExists:["offset"]};function wo(l,e,o){o===void 0&&(o=!1);var h,u,d=Ye(e),v=Ye(e)&&function(C){var ee=C.getBoundingClientRect(),F=$t(ee.width)/C.offsetWidth||1,K=$t(ee.height)/C.offsetHeight||1;return F!==1||K!==1}(e),b=_t(e),x=Ft(l,v,o),I={scrollLeft:0,scrollTop:0},M={x:0,y:0};return(d||!d&&!o)&&((nt(e)!=="body"||zi(b))&&(I=(h=e)!==Ge(h)&&Ye(h)?{scrollLeft:(u=h).scrollLeft,scrollTop:u.scrollTop}:Gi(h)),Ye(e)?((M=Ft(e,!0)).x+=e.clientLeft,M.y+=e.clientTop):b&&(M.x=Yi(b))),{x:x.left+I.scrollLeft-M.x,y:x.top+I.scrollTop-M.y,width:x.width,height:x.height}}function bo(l){var e=new Map,o=new Set,h=[];function u(d){o.add(d.name),[].concat(d.requires||[],d.requiresIfExists||[]).forEach(function(v){if(!o.has(v)){var b=e.get(v);b&&u(b)}}),h.push(d)}return l.forEach(function(d){e.set(d.name,d)}),l.forEach(function(d){o.has(d.name)||u(d)}),h}var Qn={placement:"bottom",modifiers:[],strategy:"absolute"};function Kn(){for(var l=arguments.length,e=new Array(l),o=0;o<l;o++)e[o]=arguments[o];return!e.some(function(h){return!(h&&typeof h.getBoundingClientRect=="function")})}function pi(l){l===void 0&&(l={});var e=l,o=e.defaultModifiers,h=o===void 0?[]:o,u=e.defaultOptions,d=u===void 0?Qn:u;return function(v,b,x){x===void 0&&(x=d);var I,M,C={placement:"bottom",orderedModifiers:[],options:Object.assign({},Qn,d),modifiersData:{},elements:{reference:v,popper:b},attributes:{},styles:{}},ee=[],F=!1,K={state:C,setOptions:function(G){var pe=typeof G=="function"?G(C.options):G;U(),C.options=Object.assign({},d,C.options,pe),C.scrollParents={reference:kt(v)?Jt(v):v.contextElement?Jt(v.contextElement):[],popper:Jt(b)};var ve,ie,he=function(te){var oe=bo(te);return Vn.reduce(function(ue,ge){return ue.concat(oe.filter(function(de){return de.phase===ge}))},[])}((ve=[].concat(h,C.options.modifiers),ie=ve.reduce(function(te,oe){var ue=te[oe.name];return te[oe.name]=ue?Object.assign({},ue,oe,{options:Object.assign({},ue.options,oe.options),data:Object.assign({},ue.data,oe.data)}):oe,te},{}),Object.keys(ie).map(function(te){return ie[te]})));return C.orderedModifiers=he.filter(function(te){return te.enabled}),C.orderedModifiers.forEach(function(te){var oe=te.name,ue=te.options,ge=ue===void 0?{}:ue,de=te.effect;if(typeof de=="function"){var ye=de({state:C,name:oe,instance:K,options:ge});ee.push(ye||function(){})}}),K.update()},forceUpdate:function(){if(!F){var G=C.elements,pe=G.reference,ve=G.popper;if(Kn(pe,ve)){C.rects={reference:wo(pe,zt(ve),C.options.strategy==="fixed"),popper:Wi(ve)},C.reset=!1,C.placement=C.options.placement,C.orderedModifiers.forEach(function(de){return C.modifiersData[de.name]=Object.assign({},de.data)});for(var ie=0;ie<C.orderedModifiers.length;ie++)if(C.reset!==!0){var he=C.orderedModifiers[ie],te=he.fn,oe=he.options,ue=oe===void 0?{}:oe,ge=he.name;typeof te=="function"&&(C=te({state:C,options:ue,name:ge,instance:K})||C)}else C.reset=!1,ie=-1}}},update:(I=function(){return new Promise(function(G){K.forceUpdate(),G(C)})},function(){return M||(M=new Promise(function(G){Promise.resolve().then(function(){M=void 0,G(I())})})),M}),destroy:function(){U(),F=!0}};if(!Kn(v,b))return K;function U(){ee.forEach(function(G){return G()}),ee=[]}return K.setOptions(x).then(function(G){!F&&x.onFirstUpdate&&x.onFirstUpdate(G)}),K}}var yo=pi(),_o=pi({defaultModifiers:[Ki,Ji,Qi,ji]}),Zi=pi({defaultModifiers:[Ki,Ji,Qi,ji,Wn,Fn,Un,Ln,Hn]});const Gn=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:pi,detectOverflow:jt,createPopperBase:yo,createPopper:Zi,createPopperLite:_o,top:Ne,bottom:He,right:We,left:De,auto:ci,basePlacements:Nt,start:Tt,end:Dt,clippingParents:vn,viewport:Ri,popper:Rt,reference:wn,variationPlacements:$i,placements:Fi,beforeRead:bn,read:yn,afterRead:_n,beforeMain:Pn,main:xn,afterMain:An,beforeWrite:Cn,write:Tn,afterWrite:kn,modifierPhases:Vn,applyStyles:ji,arrow:Ln,computeStyles:Qi,eventListeners:Ki,flip:Fn,hide:Hn,offset:Wn,popperOffsets:Ji,preventOverflow:Un},Symbol.toStringTag,{value:"Module"})),Yn="dropdown",Po="ArrowUp",zn="ArrowDown",Xn="click.bs.dropdown.data-api",Jn="keydown.bs.dropdown.data-api",Zt="show",Et='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',xo=`${Et}.show`,gi=".dropdown-menu",Ao=X()?"top-end":"top-start",Co=X()?"top-start":"top-end",To=X()?"bottom-end":"bottom-start",ko=X()?"bottom-start":"bottom-end",Vo=X()?"left-start":"right-start",Eo=X()?"right-start":"left-start",Io={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},So={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ze extends Oe{constructor(e,o){super(e,o),this._popper=null,this._parent=this._element.parentNode,this._menu=z.next(this._element,gi)[0]||z.prev(this._element,gi)[0]||z.findOne(gi,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Io}static get DefaultType(){return So}static get NAME(){return Yn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(_(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!m.trigger(this._element,"show.bs.dropdown",e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const o of[].concat(...document.body.children))m.on(o,"mouseover",D);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Zt),this._element.classList.add(Zt),m.trigger(this._element,"shown.bs.dropdown",e)}}hide(){if(_(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!m.trigger(this._element,"hide.bs.dropdown",e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))m.off(o,"mouseover",D);this._popper&&this._popper.destroy(),this._menu.classList.remove(Zt),this._element.classList.remove(Zt),this._element.setAttribute("aria-expanded","false"),je.removeDataAttribute(this._menu,"popper"),m.trigger(this._element,"hidden.bs.dropdown",e)}}_getConfig(e){if(typeof(e=super._getConfig(e)).reference=="object"&&!a(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${Yn.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(Gn===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:a(this._config.reference)?e=f(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const o=this._getPopperConfig();this._popper=Zi(e,this._menu,o)}_isShown(){return this._menu.classList.contains(Zt)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return Vo;if(e.classList.contains("dropstart"))return Eo;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const o=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains("dropup")?o?Co:Ao:o?ko:To}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(o=>Number.parseInt(o,10)):typeof e=="function"?o=>e(o,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(je.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...typeof this._config.popperConfig=="function"?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:o}){const h=z.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(u=>y(u));h.length&&T(h,o,e===zn,!h.includes(o)).focus()}static jQueryInterface(e){return this.each(function(){const o=Ze.getOrCreateInstance(this,e);if(typeof e=="string"){if(o[e]===void 0)throw new TypeError(`No method named "${e}"`);o[e]()}})}static clearMenus(e){if(e.button===2||e.type==="keyup"&&e.key!=="Tab")return;const o=z.find(xo);for(const h of o){const u=Ze.getInstance(h);if(!u||u._config.autoClose===!1)continue;const d=e.composedPath(),v=d.includes(u._menu);if(d.includes(u._element)||u._config.autoClose==="inside"&&!v||u._config.autoClose==="outside"&&v||u._menu.contains(e.target)&&(e.type==="keyup"&&e.key==="Tab"||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const b={relatedTarget:u._element};e.type==="click"&&(b.clickEvent=e),u._completeHide(b)}}static dataApiKeydownHandler(e){const o=/input|textarea/i.test(e.target.tagName),h=e.key==="Escape",u=[Po,zn].includes(e.key);if(!u&&!h||o&&!h)return;e.preventDefault();const d=this.matches(Et)?this:z.prev(this,Et)[0]||z.next(this,Et)[0]||z.findOne(Et,e.delegateTarget.parentNode),v=Ze.getOrCreateInstance(d);if(u)return e.stopPropagation(),v.show(),void v._selectMenuItem(e);v._isShown()&&(e.stopPropagation(),v.hide(),d.focus())}}m.on(document,Jn,Et,Ze.dataApiKeydownHandler),m.on(document,Jn,gi,Ze.dataApiKeydownHandler),m.on(document,Xn,Ze.clearMenus),m.on(document,"keyup.bs.dropdown.data-api",Ze.clearMenus),m.on(document,Xn,Et,function(l){l.preventDefault(),Ze.getOrCreateInstance(this).toggle()}),N(Ze);const Zn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",es=".sticky-top",mi="padding-right",ts="margin-right";class en{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,mi,o=>o+e),this._setElementAttributes(Zn,mi,o=>o+e),this._setElementAttributes(es,ts,o=>o-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,mi),this._resetElementAttributes(Zn,mi),this._resetElementAttributes(es,ts)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,o,h){const u=this.getWidth();this._applyManipulationCallback(e,d=>{if(d!==this._element&&window.innerWidth>d.clientWidth+u)return;this._saveInitialAttribute(d,o);const v=window.getComputedStyle(d).getPropertyValue(o);d.style.setProperty(o,`${h(Number.parseFloat(v))}px`)})}_saveInitialAttribute(e,o){const h=e.style.getPropertyValue(o);h&&je.setDataAttribute(e,o,h)}_resetElementAttributes(e,o){this._applyManipulationCallback(e,h=>{const u=je.getDataAttribute(h,o);u!==null?(je.removeDataAttribute(h,o),h.style.setProperty(o,u)):h.style.removeProperty(o)})}_applyManipulationCallback(e,o){if(a(e))o(e);else for(const h of z.find(e,this._element))o(h)}}const is="show",ns="mousedown.bs.backdrop",Mo={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Bo={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class ss extends tt{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Mo}static get DefaultType(){return Bo}static get NAME(){return"backdrop"}show(e){if(!this._config.isVisible)return void R(e);this._append();const o=this._getElement();this._config.isAnimated&&k(o),o.classList.add(is),this._emulateAnimation(()=>{R(e)})}hide(e){this._config.isVisible?(this._getElement().classList.remove(is),this._emulateAnimation(()=>{this.dispose(),R(e)})):R(e)}dispose(){this._isAppended&&(m.off(this._element,ns),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=f(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),m.on(e,ns,()=>{R(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){V(e,this._getElement(),this._config.isAnimated)}}const os=".bs.focustrap",rs="backward",Lo={autofocus:!0,trapElement:null},Oo={autofocus:"boolean",trapElement:"element"};class ls extends tt{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Lo}static get DefaultType(){return Oo}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),m.off(document,os),m.on(document,"focusin.bs.focustrap",e=>this._handleFocusin(e)),m.on(document,"keydown.tab.bs.focustrap",e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,m.off(document,os))}_handleFocusin(e){const{trapElement:o}=this._config;if(e.target===document||e.target===o||o.contains(e.target))return;const h=z.focusableChildren(o);h.length===0?o.focus():this._lastTabNavDirection===rs?h[h.length-1].focus():h[0].focus()}_handleKeydown(e){e.key==="Tab"&&(this._lastTabNavDirection=e.shiftKey?rs:"forward")}}const as="hidden.bs.modal",cs="show.bs.modal",hs="modal-open",us="show",tn="modal-static",No={backdrop:!0,focus:!0,keyboard:!0},Do={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class It extends Oe{constructor(e,o){super(e,o),this._dialog=z.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new en,this._addEventListeners()}static get Default(){return No}static get DefaultType(){return Do}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||m.trigger(this._element,cs,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(hs),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){this._isShown&&!this._isTransitioning&&(m.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(us),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){for(const e of[window,this._dialog])m.off(e,".bs.modal");this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new ss({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ls({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const o=z.findOne(".modal-body",this._dialog);o&&(o.scrollTop=0),k(this._element),this._element.classList.add(us),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,m.trigger(this._element,"shown.bs.modal",{relatedTarget:e})},this._dialog,this._isAnimated())}_addEventListeners(){m.on(this._element,"keydown.dismiss.bs.modal",e=>{if(e.key==="Escape")return this._config.keyboard?(e.preventDefault(),void this.hide()):void this._triggerBackdropTransition()}),m.on(window,"resize.bs.modal",()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),m.on(this._element,"mousedown.dismiss.bs.modal",e=>{m.one(this._element,"click.dismiss.bs.modal",o=>{this._element===e.target&&this._element===o.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(hs),this._resetAdjustments(),this._scrollBar.reset(),m.trigger(this._element,as)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(m.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,o=this._element.style.overflowY;o==="hidden"||this._element.classList.contains(tn)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(tn),this._queueCallback(()=>{this._element.classList.remove(tn),this._queueCallback(()=>{this._element.style.overflowY=o},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,o=this._scrollBar.getWidth(),h=o>0;if(h&&!e){const u=X()?"paddingLeft":"paddingRight";this._element.style[u]=`${o}px`}if(!h&&e){const u=X()?"paddingRight":"paddingLeft";this._element.style[u]=`${o}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,o){return this.each(function(){const h=It.getOrCreateInstance(this,e);if(typeof e=="string"){if(h[e]===void 0)throw new TypeError(`No method named "${e}"`);h[e](o)}})}}m.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(l){const e=n(this);["A","AREA"].includes(this.tagName)&&l.preventDefault(),m.one(e,cs,h=>{h.defaultPrevented||m.one(e,as,()=>{y(this)&&this.focus()})});const o=z.findOne(".modal.show");o&&It.getInstance(o).hide(),It.getOrCreateInstance(e).toggle(this)}),at(It),N(It);const ds="show",fs="showing",ps="hiding",gs=".offcanvas.show",ms="hidePrevented.bs.offcanvas",vs="hidden.bs.offcanvas",Ro={backdrop:!0,keyboard:!0,scroll:!1},$o={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class pt extends Oe{constructor(e,o){super(e,o),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Ro}static get DefaultType(){return $o}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||m.trigger(this._element,"show.bs.offcanvas",{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new en().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(fs),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(ds),this._element.classList.remove(fs),m.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:e})},this._element,!0))}hide(){this._isShown&&(m.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(ps),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(ds,ps),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new en().reset(),m.trigger(this._element,vs)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new ss({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{this._config.backdrop!=="static"?this.hide():m.trigger(this._element,ms)}:null})}_initializeFocusTrap(){return new ls({trapElement:this._element})}_addEventListeners(){m.on(this._element,"keydown.dismiss.bs.offcanvas",e=>{e.key==="Escape"&&(this._config.keyboard?this.hide():m.trigger(this._element,ms))})}static jQueryInterface(e){return this.each(function(){const o=pt.getOrCreateInstance(this,e);if(typeof e=="string"){if(o[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);o[e](this)}})}}m.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(l){const e=n(this);if(["A","AREA"].includes(this.tagName)&&l.preventDefault(),_(this))return;m.one(e,vs,()=>{y(this)&&this.focus()});const o=z.findOne(gs);o&&o!==e&&pt.getInstance(o).hide(),pt.getOrCreateInstance(e).toggle(this)}),m.on(window,"load.bs.offcanvas.data-api",()=>{for(const l of z.find(gs))pt.getOrCreateInstance(l).show()}),m.on(window,"resize.bs.offcanvas",()=>{for(const l of z.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(l).position!=="fixed"&&pt.getOrCreateInstance(l).hide()}),at(pt),N(pt);const Fo=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),qo=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,jo=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Ho=(l,e)=>{const o=l.nodeName.toLowerCase();return e.includes(o)?!Fo.has(o)||Boolean(qo.test(l.nodeValue)||jo.test(l.nodeValue)):e.filter(h=>h instanceof RegExp).some(h=>h.test(o))},ws={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Wo={allowList:ws,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Uo={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Qo={entry:"(string|element|function|null)",selector:"(string|element)"};class Ko extends tt{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Wo}static get DefaultType(){return Uo}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[u,d]of Object.entries(this._config.content))this._setContent(e,d,u);const o=e.children[0],h=this._resolvePossibleFunction(this._config.extraClass);return h&&o.classList.add(...h.split(" ")),o}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[o,h]of Object.entries(e))super._typeCheckConfig({selector:o,entry:h},Qo)}_setContent(e,o,h){const u=z.findOne(h,e);u&&((o=this._resolvePossibleFunction(o))?a(o)?this._putElementInTemplate(f(o),u):this._config.html?u.innerHTML=this._maybeSanitize(o):u.textContent=o:u.remove())}_maybeSanitize(e){return this._config.sanitize?function(o,h,u){if(!o.length)return o;if(u&&typeof u=="function")return u(o);const d=new window.DOMParser().parseFromString(o,"text/html"),v=[].concat(...d.body.querySelectorAll("*"));for(const b of v){const x=b.nodeName.toLowerCase();if(!Object.keys(h).includes(x)){b.remove();continue}const I=[].concat(...b.attributes),M=[].concat(h["*"]||[],h[x]||[]);for(const C of I)Ho(C,M)||b.removeAttribute(C.nodeName)}return d.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return typeof e=="function"?e(this):e}_putElementInTemplate(e,o){if(this._config.html)return o.innerHTML="",void o.append(e);o.textContent=e.textContent}}const Go=new Set(["sanitize","allowList","sanitizeFn"]),nn="fade",vi="show",bs=".modal",ys="hide.bs.modal",wi="hover",_s="focus",Yo={AUTO:"auto",TOP:"top",RIGHT:X()?"left":"right",BOTTOM:"bottom",LEFT:X()?"right":"left"},zo={allowList:ws,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Xo={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class St extends Oe{constructor(e,o){if(Gn===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,o),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return zo}static get DefaultType(){return Xo}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),m.off(this._element.closest(bs),ys,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=m.trigger(this._element,this.constructor.eventName("show")),o=(q(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!o)return;this._disposePopper();const h=this._getTipElement();this._element.setAttribute("aria-describedby",h.getAttribute("id"));const{container:u}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(u.append(h),m.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(h),h.classList.add(vi),"ontouchstart"in document.documentElement)for(const d of[].concat(...document.body.children))m.on(d,"mouseover",D);this._queueCallback(()=>{m.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!m.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(vi),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))m.off(e,"mouseover",D);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),m.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const o=this._getTemplateFactory(e).toHtml();if(!o)return null;o.classList.remove(nn,vi),o.classList.add(`bs-${this.constructor.NAME}-auto`);const h=(u=>{do u+=Math.floor(1e6*Math.random());while(document.getElementById(u));return u})(this.constructor.NAME).toString();return o.setAttribute("id",h),this._isAnimated()&&o.classList.add(nn),o}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Ko({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(nn)}_isShown(){return this.tip&&this.tip.classList.contains(vi)}_createPopper(e){const o=typeof this._config.placement=="function"?this._config.placement.call(this,e,this._element):this._config.placement,h=Yo[o.toUpperCase()];return Zi(this._element,e,this._getPopperConfig(h))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(o=>Number.parseInt(o,10)):typeof e=="function"?o=>e(o,this._element):e}_resolvePossibleFunction(e){return typeof e=="function"?e.call(this._element):e}_getPopperConfig(e){const o={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:h=>{this._getTipElement().setAttribute("data-popper-placement",h.state.placement)}}]};return{...o,...typeof this._config.popperConfig=="function"?this._config.popperConfig(o):this._config.popperConfig}}_setListeners(){const e=this._config.trigger.split(" ");for(const o of e)if(o==="click")m.on(this._element,this.constructor.eventName("click"),this._config.selector,h=>{this._initializeOnDelegatedTarget(h).toggle()});else if(o!=="manual"){const h=o===wi?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),u=o===wi?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");m.on(this._element,h,this._config.selector,d=>{const v=this._initializeOnDelegatedTarget(d);v._activeTrigger[d.type==="focusin"?_s:wi]=!0,v._enter()}),m.on(this._element,u,this._config.selector,d=>{const v=this._initializeOnDelegatedTarget(d);v._activeTrigger[d.type==="focusout"?_s:wi]=v._element.contains(d.relatedTarget),v._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},m.on(this._element.closest(bs),ys,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,o){clearTimeout(this._timeout),this._timeout=setTimeout(e,o)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const o=je.getDataAttributes(this._element);for(const h of Object.keys(o))Go.has(h)&&delete o[h];return e={...o,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:f(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const o in this._config)this.constructor.Default[o]!==this._config[o]&&(e[o]=this._config[o]);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const o=St.getOrCreateInstance(this,e);if(typeof e=="string"){if(o[e]===void 0)throw new TypeError(`No method named "${e}"`);o[e]()}})}}N(St);const Jo={...St.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Zo={...St.DefaultType,content:"(null|string|element|function)"};class bi extends St{static get Default(){return Jo}static get DefaultType(){return Zo}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const o=bi.getOrCreateInstance(this,e);if(typeof e=="string"){if(o[e]===void 0)throw new TypeError(`No method named "${e}"`);o[e]()}})}}N(bi);const Ps="click.bs.scrollspy",ei="active",xs="[href]",er={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},tr={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ti extends Oe{constructor(e,o){super(e,o),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return er}static get DefaultType(){return tr}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=f(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(o=>Number.parseFloat(o))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(m.off(this._config.target,Ps),m.on(this._config.target,Ps,xs,e=>{const o=this._observableSections.get(e.target.hash);if(o){e.preventDefault();const h=this._rootElement||window,u=o.offsetTop-this._element.offsetTop;if(h.scrollTo)return void h.scrollTo({top:u,behavior:"smooth"});h.scrollTop=u}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(o=>this._observerCallback(o),e)}_observerCallback(e){const o=v=>this._targetLinks.get(`#${v.target.id}`),h=v=>{this._previousScrollData.visibleEntryTop=v.target.offsetTop,this._process(o(v))},u=(this._rootElement||document.documentElement).scrollTop,d=u>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=u;for(const v of e){if(!v.isIntersecting){this._activeTarget=null,this._clearActiveClass(o(v));continue}const b=v.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(d&&b){if(h(v),!u)return}else d||b||h(v)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=z.find(xs,this._config.target);for(const o of e){if(!o.hash||_(o))continue;const h=z.findOne(o.hash,this._element);y(h)&&(this._targetLinks.set(o.hash,o),this._observableSections.set(o.hash,h))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(ei),this._activateParents(e),m.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))z.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(ei);else for(const o of z.parents(e,".nav, .list-group"))for(const h of z.prev(o,".nav-link, .nav-item > .nav-link, .list-group-item"))h.classList.add(ei)}_clearActiveClass(e){e.classList.remove(ei);const o=z.find("[href].active",e);for(const h of o)h.classList.remove(ei)}static jQueryInterface(e){return this.each(function(){const o=ti.getOrCreateInstance(this,e);if(typeof e=="string"){if(o[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);o[e]()}})}}m.on(window,"load.bs.scrollspy.data-api",()=>{for(const l of z.find('[data-bs-spy="scroll"]'))ti.getOrCreateInstance(l)}),N(ti);const ir="ArrowLeft",As="ArrowRight",nr="ArrowUp",Cs="ArrowDown",yi="active",Ts="fade",sn="show",ks='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',on=`.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${ks}`;class Mt extends Oe{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),m.on(this._element,"keydown.bs.tab",o=>this._keydown(o)))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const o=this._getActiveElem(),h=o?m.trigger(o,"hide.bs.tab",{relatedTarget:e}):null;m.trigger(e,"show.bs.tab",{relatedTarget:o}).defaultPrevented||h&&h.defaultPrevented||(this._deactivate(o,e),this._activate(e,o))}_activate(e,o){e&&(e.classList.add(yi),this._activate(n(e)),this._queueCallback(()=>{e.getAttribute("role")==="tab"?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),m.trigger(e,"shown.bs.tab",{relatedTarget:o})):e.classList.add(sn)},e,e.classList.contains(Ts)))}_deactivate(e,o){e&&(e.classList.remove(yi),e.blur(),this._deactivate(n(e)),this._queueCallback(()=>{e.getAttribute("role")==="tab"?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),m.trigger(e,"hidden.bs.tab",{relatedTarget:o})):e.classList.remove(sn)},e,e.classList.contains(Ts)))}_keydown(e){if(![ir,As,nr,Cs].includes(e.key))return;e.stopPropagation(),e.preventDefault();const o=[As,Cs].includes(e.key),h=T(this._getChildren().filter(u=>!_(u)),e.target,o,!0);h&&(h.focus({preventScroll:!0}),Mt.getOrCreateInstance(h).show())}_getChildren(){return z.find(on,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,o){this._setAttributeIfNotExists(e,"role","tablist");for(const h of o)this._setInitialAttributesOnChild(h)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const o=this._elemIsActive(e),h=this._getOuterElement(e);e.setAttribute("aria-selected",o),h!==e&&this._setAttributeIfNotExists(h,"role","presentation"),o||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const o=n(e);o&&(this._setAttributeIfNotExists(o,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(o,"aria-labelledby",`#${e.id}`))}_toggleDropDown(e,o){const h=this._getOuterElement(e);if(!h.classList.contains("dropdown"))return;const u=(d,v)=>{const b=z.findOne(d,h);b&&b.classList.toggle(v,o)};u(".dropdown-toggle",yi),u(".dropdown-menu",sn),h.setAttribute("aria-expanded",o)}_setAttributeIfNotExists(e,o,h){e.hasAttribute(o)||e.setAttribute(o,h)}_elemIsActive(e){return e.classList.contains(yi)}_getInnerElement(e){return e.matches(on)?e:z.findOne(on,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each(function(){const o=Mt.getOrCreateInstance(this);if(typeof e=="string"){if(o[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);o[e]()}})}}m.on(document,"click.bs.tab",ks,function(l){["A","AREA"].includes(this.tagName)&&l.preventDefault(),_(this)||Mt.getOrCreateInstance(this).show()}),m.on(window,"load.bs.tab",()=>{for(const l of z.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))Mt.getOrCreateInstance(l)}),N(Mt);const Vs="hide",_i="show",Pi="showing",sr={animation:"boolean",autohide:"boolean",delay:"number"},or={animation:!0,autohide:!0,delay:5e3};class ii extends Oe{constructor(e,o){super(e,o),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return or}static get DefaultType(){return sr}static get NAME(){return"toast"}show(){m.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Vs),k(this._element),this._element.classList.add(_i,Pi),this._queueCallback(()=>{this._element.classList.remove(Pi),m.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(m.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(Pi),this._queueCallback(()=>{this._element.classList.add(Vs),this._element.classList.remove(Pi,_i),m.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(_i),super.dispose()}isShown(){return this._element.classList.contains(_i)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,o){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=o;break;case"focusin":case"focusout":this._hasKeyboardInteraction=o}if(o)return void this._clearTimeout();const h=e.relatedTarget;this._element===h||this._element.contains(h)||this._maybeScheduleHide()}_setListeners(){m.on(this._element,"mouseover.bs.toast",e=>this._onInteraction(e,!0)),m.on(this._element,"mouseout.bs.toast",e=>this._onInteraction(e,!1)),m.on(this._element,"focusin.bs.toast",e=>this._onInteraction(e,!0)),m.on(this._element,"focusout.bs.toast",e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const o=ii.getOrCreateInstance(this,e);if(typeof e=="string"){if(o[e]===void 0)throw new TypeError(`No method named "${e}"`);o[e](this)}})}}return at(ii),N(ii),{Alert:it,Button:bt,Carousel:Ke,Collapse:Ot,Dropdown:Ze,Modal:It,Offcanvas:pt,Popover:bi,ScrollSpy:ti,Tab:Mt,Toast:ii,Tooltip:St}})})(Br);const Ut="b",Qt="k",cn="n",Us="p",Kt="q";class A{x;y;state=!0;constructor(i,t){this.x=i,this.y=t}}class w{start;end;boardStartIndex;boardEndIndex;constructor(i,t,s,r){if(s&&(this.start=s),r&&(this.end=r),s&&r){this.boardStartIndex=this.convertToBoardIndex(s),this.boardEndIndex=this.convertToBoardIndex(r);return}i&&t?(this.boardStartIndex=i.x+i.y*8,this.boardEndIndex=t.x+t.y*8,this.start=this.convertToBoardPosition(this.boardStartIndex),this.end=this.convertToBoardPosition(this.boardEndIndex)):(this.start="a8",this.end="a8",this.boardStartIndex=0,this.boardEndIndex=0)}toString(){return this.start+"-"+this.end}convertToBoardIndex(i){if(i.length!=2)throw new Error("Invalid position");let t=i[0],s=i[1],r=t.charCodeAt(0)-97,n=8-parseInt(s);return r+n*8}convertToBoardPosition(i){if(i<0||i>63)throw new Error("Invalid index: "+i);let t=i%8,s=Math.floor(i/8),r=String.fromCharCode(t+97),n=8-s;return r+n}testConverToBoardIndex(){let i=[];i.push(this.convertToBoardIndex("a8")==0),i.push(this.convertToBoardIndex("b8")==1),i.push(this.convertToBoardIndex("c8")==2),i.push(this.convertToBoardIndex("d8")==3),i.push(this.convertToBoardIndex("e8")==4),i.push(this.convertToBoardIndex("f8")==5),i.push(this.convertToBoardIndex("g8")==6),i.push(this.convertToBoardIndex("h8")==7),i.push(this.convertToBoardIndex("a7")==8),i.push(this.convertToBoardIndex("b7")==9),i.push(this.convertToBoardIndex("c7")==10),i.push(this.convertToBoardIndex("d7")==11),i.push(this.convertToBoardIndex("e7")==12),i.push(this.convertToBoardIndex("f7")==13),i.push(this.convertToBoardIndex("g7")==14),i.push(this.convertToBoardIndex("h7")==15),i.push(this.convertToBoardIndex("a6")==16);for(let t=0;t<i.length;t++)if(!i[t])throw new Error("Convert to board Index failed failed")}runAllTests(){this.testConverToBoardIndex(),console.log("All tests ran for move class")}}class xt{position;pos;boardIndex;constructor(i,t){i?(this.position=i,this.boardIndex=this.convertToBoardIndex(i),this.pos=new A(this.convertToBoardIndex(i)%8,Math.floor(this.convertToBoardIndex(i)/8))):t?(this.boardIndex=t,this.position=this.convertToBoardPosition(t),this.pos=new A(t%8,Math.floor(t/8))):(this.position="a8",this.boardIndex=0,this.pos=new A(0,0))}moveTo(i){this.position=i,this.boardIndex=this.convertToBoardIndex(i),this.pos=new A(this.boardIndex%8,Math.floor(this.boardIndex/8))}getPosition(){return this.position}getIndex(){return this.boardIndex}convertToBoardIndex(i){if(i.length!=2)throw new Error("Invalid position");let t=i[0],s=i[1],r=t.charCodeAt(0)-97,n=8-parseInt(s);return r+n*8}testConvertToBoardIndex(){let i=[];i.push(this.convertToBoardIndex("a8")==0),i.push(this.convertToBoardIndex("b8")==1),i.push(this.convertToBoardIndex("c8")==2),i.push(this.convertToBoardIndex("d8")==3),i.push(this.convertToBoardIndex("e8")==4),i.push(this.convertToBoardIndex("f8")==5),i.push(this.convertToBoardIndex("g8")==6),i.push(this.convertToBoardIndex("h8")==7),i.push(this.convertToBoardIndex("a7")==8),i.push(this.convertToBoardIndex("b7")==9),i.push(this.convertToBoardIndex("c7")==10),i.push(this.convertToBoardIndex("d7")==11),i.push(this.convertToBoardIndex("e7")==12),i.push(this.convertToBoardIndex("f7")==13),i.push(this.convertToBoardIndex("g7")==14),i.push(this.convertToBoardIndex("h7")==15),i.push(this.convertToBoardIndex("a6")==16);for(let t=0;t<i.length;t++)if(!i[t])throw new Error("Convert to board Index failed failed")}convertToBoardPosition(i){let t=i%8,s=Math.floor(i/8),r=String.fromCharCode(t+97),n=8-s;return r+n}testConvertToPosition(){let i=[];i.push(this.convertToBoardPosition(0)=="a8"),i.push(this.convertToBoardPosition(0)=="a8"),i.push(this.convertToBoardPosition(0)=="a8"),i.push(this.convertToBoardPosition(1)=="b8"),i.push(this.convertToBoardPosition(2)=="c8"),i.push(this.convertToBoardPosition(3)=="d8"),i.push(this.convertToBoardPosition(4)=="e8"),i.push(this.convertToBoardPosition(5)=="f8"),i.push(this.convertToBoardPosition(6)=="g8"),i.push(this.convertToBoardPosition(7)=="h8"),i.push(this.convertToBoardPosition(8)=="a7"),i.push(this.convertToBoardPosition(9)=="b7"),i.push(this.convertToBoardPosition(10)=="c7"),i.push(this.convertToBoardPosition(11)=="d7"),i.push(this.convertToBoardPosition(12)=="e7"),i.push(this.convertToBoardPosition(13)=="f7"),i.push(this.convertToBoardPosition(14)=="g7"),i.push(this.convertToBoardPosition(15)=="h7"),i.push(this.convertToBoardPosition(16)=="a6");for(let t=0;t<i.length;t++)if(!i[t])throw new Error("Convert to position failed")}runAllTests(){this.testConvertToBoardIndex(),this.testConvertToPosition(),console.log("All tests ran for position class")}}class we{position;color;type;constructor(i,t,s){this.position=new xt(i),this.color=t,this.type=s}move(i){this.position.moveTo(i)}getPosition(){return this.position.getPosition()}getIndex(){return this.position.getIndex()}getPos(){return this.position}convertToBoardIndex(i){if(i.length!=2)throw new Error("Invalid position");let t=i[0],s=i[1],r=t.charCodeAt(0)-97,n=8-parseInt(s);return r+n*8}testConverToBoardIndex(){let i=[];i.push(this.convertToBoardIndex("a8")==0),i.push(this.convertToBoardIndex("b8")==1),i.push(this.convertToBoardIndex("c8")==2),i.push(this.convertToBoardIndex("d8")==3),i.push(this.convertToBoardIndex("e8")==4),i.push(this.convertToBoardIndex("f8")==5),i.push(this.convertToBoardIndex("g8")==6),i.push(this.convertToBoardIndex("h8")==7),i.push(this.convertToBoardIndex("a7")==8),i.push(this.convertToBoardIndex("b7")==9),i.push(this.convertToBoardIndex("c7")==10),i.push(this.convertToBoardIndex("d7")==11),i.push(this.convertToBoardIndex("e7")==12),i.push(this.convertToBoardIndex("f7")==13),i.push(this.convertToBoardIndex("g7")==14),i.push(this.convertToBoardIndex("h7")==15),i.push(this.convertToBoardIndex("a6")==16);for(let t=0;t<i.length;t++)if(!i[t])throw new Error("Convert to board Index failed failed")}runAllTests(){this.testConverToBoardIndex(),console.log("All tests ran for piece class")}}class re{Pieces;currentTurnColor="white";fen="";board=[];halfMoveClock=0;fullMoveNumber=1;castlingRights="KQkq";enPassantTargetSquare="-";legalMoves=[];inCheck=!1;checkMate=!1;capturedPieces=[];constructor(i,t){i||(i=["r","n","b","q","k","b","n","r","p","p","p","p","p","p","p","p"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","P","P","P","P","P","P","P","P","R","N","B","Q","K","B","N","R"]);const s=/^([rnbqkpRNBQKP1-8]+\/){7}([rnbqkpRNBQKP1-8]+)\s[bw]\s(-|K?Q?k?q?)\s(-|[a-h][36])\s(0|[1-9][0-9]*)\s([1-9][0-9]*)/;if(t!=null&&t.match(s)){let r=t.split(" ");i=this.fenToBoard(t),this.castlingRights=r[2],this.enPassantTargetSquare=r[3],r[1]==="w"?this.currentTurnColor="white":this.currentTurnColor="black",this.halfMoveClock=parseInt(r[4]),this.fullMoveNumber=parseInt(r[5])}else if(t!=null&&!t.match(s))throw new Error("Invalid fen: "+t);this.Pieces=[];for(let r=0;r<i.length;r++){let n=i[r];if(n!=" "){let p=n==n.toUpperCase()?"white":"black",a=n.toLowerCase(),f=this.convertToPosition(r);this.Pieces.push(new we(f,p,a))}}this.board=i,t!=null?this.fen=t:this.fen=this.boardToFen()}convertToPosition(i){let t=String.fromCharCode(97+i%8),s=8-Math.floor(i/8);return t+s}displayBoard(){let i="";for(let t=0;t<8;t++){for(let s=0;s<8;s++)i+=this.Piece(new A(s,t))===" "?" - ":" "+(this.Piece(new A(s,t)).color==="black"?this.Piece(new A(s,t)).type:this.Piece(new A(s,t)).type.toUpperCase())+" ";i!=null&&console.log(`${8-t}| `+i),i=""}console.log("    _  _  _  _  _  _  _  _"),console.log("    A  B  C  D  E  F  G  H")}fenToBoard(i){let t=[],n=i.split(" ")[0].split("/");for(let p=0;p<n.length;p++){let f=n[p].split("");for(let y=0;y<f.length;y++){let _=f[y];if(_.match(/[1-8]/))for(let q=0;q<parseInt(_);q++)t.push(" ");else t.push(_)}}return t.length===63&&t.push(" "),t}boardToFen(){let i="",t=0;for(let s=0;s<64;s++){let r=this.getPieceAtBoardIndex(s);r===""?(t++,(t===8||s%8===7)&&(i+=t,s!=63&&(i+="/"),t=0)):(t!==0&&(i+=t,t=0),i+=r.color==="white"?r.type.toUpperCase():r.type.toLowerCase(),r.getIndex()%8===7&&s!==63&&(i+="/",t=0))}return i+=" "+this.currentTurnColor[0]+" ",i+=this.castlingRights+" ",i+=this.enPassantTargetSquare+" ",i+=this.halfMoveClock+" ",i+=this.fullMoveNumber,i}getPieceAtBoardIndex(i){for(let t=0;t<this.Pieces.length;t++)if(this.Pieces[t].getIndex()===i)return this.Pieces[t];return""}movePiece(i,t){let s=new w(void 0,void 0,i,t);s.boardEndIndex;let r=this.getPieceIndex(i),n=this.Pieces[r];if(n?.type===void 0)throw this.displayBoard(),console.log(this.Pieces),console.log(this.fen),console.log(i),new Error("Invalid move");if(n.type!="p"?this.halfMoveClock++:this.halfMoveClock=0,this.enPassantTargetSquare!="-"&&n.type==="p"){let p=new xt(i),a=new xt(t);if(n.color==="white"&&p.pos.y===3&&a.position===t){let f=a.boardIndex+8,y=this.getPieceAtBoardIndex(f);this.board[f]=" ",this.Pieces.splice(this.Pieces.indexOf(y),1)}if(n.color==="black"&&p.pos.y===4&&a.position===t){let f=a.boardIndex-8,y=this.getPieceAtBoardIndex(f);this.board[f]=" ",this.Pieces.splice(this.Pieces.indexOf(y),1)}}if(n.type=="p"&&Math.abs(n.getIndex()-s.boardEndIndex)==16){let p="-";n.color==="white"?p=this.convertToPosition(s.boardEndIndex+8):p=this.convertToPosition(s.boardEndIndex-8),this.enPassantTargetSquare=p}else this.enPassantTargetSquare="-";if(n.type==="k"){if(n.color==="white"){let p=new xt(i),a=new xt(t);if(p.pos.x-a.pos.x===2&&this.castlingRights.includes("Q")){this.convertToPosition(p.boardIndex-4);let f=this.convertToPosition(p.boardIndex-1),y=this.getPieceAtBoardIndex(p.boardIndex-4);this.castlingRights=this.castlingRights.replace("KQ",""),y.color!=null&&y.move(f)}if(p.pos.x-a.pos.x===-2&&this.castlingRights.includes("K")){this.convertToPosition(p.boardIndex+3);let f=this.convertToPosition(p.boardIndex+1),y=this.getPieceAtBoardIndex(p.boardIndex+3);console.log(f),console.log(y),this.castlingRights=this.castlingRights.replace("KQ",""),y.color!=null&&y.move(f)}this.castlingRights=this.castlingRights.replace("KQ","")}else{let p=new xt(i),a=new xt(t);if(p.pos.x-a.pos.x===2&&this.castlingRights.includes("q")){this.convertToPosition(p.boardIndex-4);let f=this.convertToPosition(p.boardIndex-1),y=this.getPieceAtBoardIndex(p.boardIndex-4);this.castlingRights=this.castlingRights.replace("kq",""),y.color!=null&&y.move(f)}if(p.pos.x-a.pos.x===-2&&this.castlingRights.includes("k")){this.convertToPosition(p.boardIndex+3);let f=this.convertToPosition(p.boardIndex+1),y=this.getPieceAtBoardIndex(p.boardIndex+3);this.castlingRights=this.castlingRights.replace("kq",""),y.color!=null&&y.move(f)}this.castlingRights=this.castlingRights.replace("kq","")}this.castlingRights===""&&(this.castlingRights="-")}if(this.currentTurnColor==="black"&&this.fullMoveNumber++,n.type==="r"&&(n.color==="white"?n.getIndex()===0?this.castlingRights=this.castlingRights.replace("Q",""):n.getIndex()===7&&(this.castlingRights=this.castlingRights.replace("K","")):n.getIndex()===56?this.castlingRights=this.castlingRights.replace("q",""):n.getIndex()===63&&(this.castlingRights=this.castlingRights.replace("k",""))),this.getPieceIndex(t)!==-1){let p=this.getPieceIndex(t),a=this.Pieces[p];a.type==="r"&&(a.color==="white"?a.getIndex()===56?this.castlingRights=this.castlingRights.replace("Q",""):a.getIndex()===63&&(this.castlingRights=this.castlingRights.replace("K","")):a.getIndex()===0?this.castlingRights=this.castlingRights.replace("q",""):a.getIndex()===7&&(this.castlingRights=this.castlingRights.replace("k",""))),this.capturedPieces.push(a),this.Pieces.splice(p,1),this.halfMoveClock=0}n.move(t),this.currentTurnColor=this.currentTurnColor==="white"?"black":"white",this.fen=this.boardToFen(),this.board=this.fenToBoard(this.fen),this.inCheck=this.isInCheck(this)}getPieceIndex(i){let t=-1;for(let s=0;s<this.Pieces.length;s++)if(this.Pieces[s].getPosition()==i){t=s;break}return t}getPieceAtPosition(i){let t="";for(let s=0;s<this.Pieces.length;s++){let r=this.Pieces[s];if(r.getPosition()==i)return r}return t}testConvertToPosition(){let i=[];i.push(this.convertToPosition(0)=="a8"),i.push(this.convertToPosition(1)=="b8"),i.push(this.convertToPosition(2)=="c8"),i.push(this.convertToPosition(3)=="d8"),i.push(this.convertToPosition(4)=="e8"),i.push(this.convertToPosition(5)=="f8"),i.push(this.convertToPosition(6)=="g8"),i.push(this.convertToPosition(7)=="h8"),i.push(this.convertToPosition(8)=="a7"),i.push(this.convertToPosition(9)=="b7"),i.push(this.convertToPosition(10)=="c7"),i.push(this.convertToPosition(11)=="d7"),i.push(this.convertToPosition(12)=="e7"),i.push(this.convertToPosition(13)=="f7"),i.push(this.convertToPosition(14)=="g7"),i.push(this.convertToPosition(15)=="h7"),i.push(this.convertToPosition(16)=="a6");for(let t=0;t<i.length;t++)if(!i[t])throw new Error("Convert to position failed")}testFenToBoard(){let i=[];i.push(this.fenToBoard("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1")),i.push(this.fenToBoard("rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1"));for(let s=0;s<i.length;s++)if(!i[s])throw new Error("Fen to board failed");t(i[0],["r","n","b","q","k","b","n","r","p","p","p","p","p","p","p","p"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","P","P","P","P","P","P","P","P","R","N","B","Q","K","B","N","R"]),t(i[1],["r","n","b","q","k","b","n","r","p","p","p","p","p","p","p","p"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","P"," "," "," "," "," "," "," "," "," "," "," ","P","P","P","P"," ","P","P","P","R","N","B","Q","K","B","N","R"]);function t(s,r){if(s===r)return!0;if(s==null||r==null)throw console.log(s,r),new Error("Fen to board failed");if(s.length!==r.length)throw console.log(s,r),new Error("Fen to board failed");for(var n=0;n<s.length;++n)if(s[n]!==r[n])throw console.log(s,r),new Error("Fen to board failed");return!0}}testBoardToFen(){let i=[],t=new re;i.push(t.boardToFen()=="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"),t.movePiece("e2","e4"),i.push(t.boardToFen()=="rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1");for(let s=0;s<i.length;s++)if(!i[s])throw new Error("Board to fen failed, test "+(s+1)+" failed"+t.boardToFen())}testConstructors(){let i=new re,t=[];t.push(i.Pieces[0]?.getPosition()=="a8"),t.push(i.Pieces[0].color=="black"),t.push(i.Pieces[0].type=="r"),t.push(i.Pieces[1]?.getPosition()=="b8"),t.push(i.Pieces[1].color=="black"),t.push(i.Pieces[1].type=="n"),t.push(i.Pieces[2]?.getPosition()=="c8"),t.push(i.Pieces[2].color=="black"),t.push(i.Pieces[2].type=="b"),t.push(i.Pieces[3]?.getPosition()=="d8");for(let n=0;n<t.length;n++)if(!t[n])throw new Error("Board constructor 1 failed "+n);let s=new re([],"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1");t=[],t.push(s.Pieces[0]?.getPosition()=="a8"),t.push(s.Pieces[0].color=="black"),t.push(s.Pieces[0].type=="r"),t.push(s.Pieces[1]?.getPosition()=="b8"),t.push(s.Pieces[1].color=="black"),t.push(s.Pieces[1].type=="n"),t.push(s.Pieces[2]?.getPosition()=="c8"),t.push(s.Pieces[2].color=="black"),t.push(s.Pieces[2].type=="b"),t.push(s.Pieces[3]?.getPosition()=="d8");for(let n=0;n<t.length;n++)if(!t[n])throw new Error("Board constructor 2 failed"+n);let r=new re([],"rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1");t=[],t.push(r.Pieces[0]?.getPosition()=="a8"),t.push(r.Pieces[0].color=="black"),t.push(r.Pieces[0].type=="r"),t.push(r.currentTurnColor=="black");for(let n=0;n<t.length;n++)if(!t[n])throw new Error("Board constructor 3 failed"+n)}findPseudoLegalMoves(i){let t=[];for(let s=0;s<i.Pieces.length;s++){let r=i.Pieces[s];if(i.currentTurnColor===r.color)switch(r.type){case"p":t.push(...this.findPawnMoves(r,i));break;case"r":t.push(...this.findRookMoves(r,i));break;case"n":t.push(...this.findKnightMoves(r,i));break;case"b":t.push(...this.findBishopMoves(r,i));break;case"q":t.push(...this.findQueenMoves(r,i));break;case"k":t.push(...this.findKingMoves(r,i));break}}return t}testFindPseudoLegalMoves(){let i=new re,t=this.findPseudoLegalMoves(i),s=[];s.push(t.length==20);for(let r=0;r<s.length;r++)if(!s[r])throw new Error("Find legal moves failed, test "+(r+1)+" failed");i=new re([],"rnbqkbnr/1ppp1ppp/8/p3pP2/4P3/8/PPPP2PP/RNBQKBNR w KQkq e6 0 4"),t=this.findPseudoLegalMoves(i),s=[],s.push(t.length==30);for(let r=0;r<s.length;r++)if(!s[r])throw new Error("Find legal moves failed, test "+(r+1)+" failed")}findLegalMoves(i){let t=i.findPseudoLegalMoves(i),s=[];for(let r=0;r<t.length;r++){let n=new re([],i.boardToFen());n.movePiece(t[r].start,t[r].end),n.currentTurnColor=n.currentTurnColor==="white"?"black":"white",this.isInCheck(n)||s.push(t[r])}return s}testFindLegalMoves(){let i=new re,t=this.findLegalMoves(i),s=[];s.push(t.length==20),i=new re([],"rnb1k1nr/pppp1ppp/8/2b1p3/P3q3/8/1PPP1PPP/RNBQKB1R w KQkq - 0 6"),t=this.findLegalMoves(i),s.push(t.length==2),i=new re([],"rnbqkbnr/1ppp1ppp/8/p3Q3/4P3/8/PPPP1PPP/RNB1KBNR b KQkq - 0 3"),t=this.findLegalMoves(i),s.push(t.length==3),i=new re([],"rnbqkbnr/p1p1pppp/1p6/3pP3/8/8/PPPP1PPP/RNBQKBNR w KQkq d6 0 3"),t=this.findLegalMoves(i),s.push(t.length==31);for(let r=0;r<s.length;r++)if(!s[r])throw new Error("Find legal moves failed, test "+(r+1)+" failed")}isInCheck(i){let t=new re([],i.boardToFen()),s=!0;for(let p=0;p<t.board.length;p++)t.board[p]!="-"&&(s=!1);s&&(console.log("empty board"),console.log(i.boardToFen())),t.currentTurnColor=t.currentTurnColor=="white"?"black":"white";let r=t.findPseudoLegalMoves(t),n;for(let p=0;p<i.Pieces.length;p++)i.Pieces[p].type=="k"&&i.Pieces[p].color==i.currentTurnColor&&(n=i.Pieces[p].getIndex());r.length==0&&(console.log("main board"),i.displayBoard(),console.log(i.fen),console.log("thingy"),t.displayBoard(),console.log(t.fen));for(let p=0;p<r.length;p++)if(r[p].boardEndIndex==n)return!0;return!1}testIsInCheck(){let i=new re,t=[];t.push(!this.isInCheck(i));for(let s=0;s<t.length;s++)if(!t[s])throw new Error("Is in check failed, test "+(s+1)+" failed")}Piece(i){let t=i.x+i.y*8;for(let s=0;s<this.Pieces.length;s++)if(this.Pieces[s].getIndex()==t)return this.Pieces[s];return" "}addPiece(i){this.Pieces.push(i),this.board[i.getIndex()]!=null&&this.board[i.getIndex()]!=" "&&console.log("ERROR: PIECE ALREADY EXISTS AT THIS LOCATION",i),this.board[i.getIndex()]=i.type}findPawnMoves(i,t){let s=[],r=i.getIndex(),n=new A(r%8,Math.floor(r/8)),p=i.color;if(p!=this.currentTurnColor)return s;if(p=="white"){let a=new A(n.x,n.y-1);t.Piece(a)==" "&&n.y!=0&&s.push(new w(n,a));let f=new A(n.x,n.y-2);t.Piece(f)==" "&&t.Piece(a)==" "&&n.y==6&&s.push(new w(n,f));let y=new A(n.x-1,n.y-1);t.Piece(y)!=" "&&t.Piece(y)?.color=="black"&&n.x-1>=0&&n.y-1>=0&&s.push(new w(n,y));let _=new A(n.x+1,n.y-1);if(t.Piece(_)!=" "&&t.Piece(_)?.color=="black"&&n.x+1<=7&&n.y-1>=0&&s.push(new w(n,_)),t.enPassantTargetSquare!="-"&&r<=31&&r>=24){let q=new A(t.enPassantTargetSquare.charCodeAt(0)-97,8-parseInt(t.enPassantTargetSquare[1]));fn(q,_)===!0&&s.push(new w(n,_)),fn(q,y)===!0&&s.push(new w(n,y))}}else{let a=new A(n.x,n.y+1);t.Piece(a)==" "&&n.y!=7&&s.push(new w(n,a));let f=new A(n.x,n.y+2);t.Piece(f)==" "&&t.Piece(a)==" "&&n.y==1&&s.push(new w(n,f));let y=new A(n.x-1,n.y+1);t.Piece(y)!=" "&&t.Piece(y)?.color=="white"&&n.x-1>=0&&n.y+1<=7&&s.push(new w(n,y));let _=new A(n.x+1,n.y+1);if(t.Piece(_)!=" "&&t.Piece(_)?.color=="white"&&n.x+1<=7&&n.y+1<=7&&s.push(new w(n,_)),t.enPassantTargetSquare!="-"&&r<=15&&r>=8){let q=new A(t.enPassantTargetSquare.charCodeAt(0)-97,8-parseInt(t.enPassantTargetSquare[1]));_==q&&s.push(new w(n,_)),y==q&&s.push(new w(n,y))}}return s}testFindPawnMoves(){let i=new re,t=this.findPawnMoves(i.Piece(new A(0,6)),i),s=[];s.push(t.length==2),s.push(t[0].toString()=="a2-a3"),s.push(t[1].toString()=="a2-a4");for(let n=0;n<s.length;n++)if(s[n]==!1){console.log("testFindPawnMoves failed");return}s=[],t=this.findPawnMoves(i.Pieces[16],i),s.push(t.length==2),s.push(t[0].toString()=="a2-a3"),s.push(t[1].toString()=="a2-a4");for(let n=0;n<s.length;n++)if(s[n]==!1){console.log("testFindPawnMoves failed");return}i=new re([]);let r=new we("a5","black",Us);i.addPiece(r),r=new we("a4","white",Us),i.addPiece(r),t=this.findPawnMoves(r,i),s=[],s.push(t.length==0);for(let n=0;n<s.length;n++)if(s[n]==!1){console.error("testFindPawnMoves failed");return}}findRookMoves(i,t){let s=[],r=i.getIndex(),n=new A(r%8,Math.floor(r/8)),p=i.color;if(p!=t.currentTurnColor)return s;if(p==="white"){for(let a=n.y-1;a>=0;a--){let f=new A(n.x,a);if(t.Piece(f)===" ")s.push(new w(n,f));else if(t.Piece(f)?.color==="black"){s.push(new w(n,f));break}else break}for(let a=n.y+1;a<=7;a++){let f=new A(n.x,a);if(t.Piece(f)===" ")s.push(new w(n,f));else if(t.Piece(f)?.color==="black"){s.push(new w(n,f));break}else break}for(let a=n.x-1;a>=0;a--){let f=new A(a,n.y);if(t.Piece(f)===" ")s.push(new w(n,f));else if(t.Piece(f)?.color==="black"){s.push(new w(n,f));break}else break}for(let a=n.x+1;a<=7;a++){let f=new A(a,n.y);if(t.Piece(f)===" ")s.push(new w(n,f));else if(t.Piece(f)?.color==="black"){s.push(new w(n,f));break}else break}}else{for(let a=n.y-1;a>=0;a--){let f=new A(n.x,a);if(t.Piece(f)===" ")s.push(new w(n,f));else if(t.Piece(f)?.color==="white"){s.push(new w(n,f));break}else break}for(let a=n.y+1;a<=7;a++){let f=new A(n.x,a);if(t.Piece(f)===" ")s.push(new w(n,f));else if(t.Piece(f)?.color==="white"){s.push(new w(n,f));break}else break}for(let a=n.x-1;a>=0;a--){let f=new A(a,n.y);if(t.Piece(f)===" ")s.push(new w(n,f));else if(t.Piece(f)?.color==="white"){s.push(new w(n,f));break}else break}for(let a=n.x+1;a<=7;a++){let f=new A(a,n.y);if(t.Piece(f)===" ")s.push(new w(n,f));else if(t.Piece(f)?.color==="white"){s.push(new w(n,f));break}else break}}return s}testFindRookMoves(){let i=new re([],"rnbqkbnr/1ppppppp/8/p7/P7/8/1PPPPPPP/RNBQKBNR w KQkq a6 0 2"),t=i.findRookMoves(i.Piece(new A(0,7)),i),s=[];s.push(t.length===2);for(let r=0;r<s.length;r++)if(s[r]==!1){console.log("testFindRookMoves failed");return}}findKnightMoves(i,t){let s=[],r=i.getIndex(),n=new A(r%8,Math.floor(r/8)),p=i.color;if(p!=t.currentTurnColor)return s;if(p==="white"){if(n.x-2>=0&&n.y-1>=0){let a=new A(n.x-2,n.y-1);t.Piece(a)===" "?s.push(new w(n,a)):t.Piece(a)?.color==="black"&&s.push(new w(n,a))}if(n.x+2<=7&&n.y-1>=0){let a=new A(n.x+2,n.y-1);t.Piece(a)===" "?s.push(new w(n,a)):t.Piece(a)?.color==="black"&&s.push(new w(n,a))}if(n.x-2>=0&&n.y+1<=7){let a=new A(n.x-2,n.y+1);t.Piece(a)===" "?s.push(new w(n,a)):t.Piece(a)?.color==="black"&&s.push(new w(n,a))}if(n.x+2<=7&&n.y+1<=7){let a=new A(n.x+2,n.y+1);t.Piece(a)===" "?s.push(new w(n,a)):t.Piece(a)?.color==="black"&&s.push(new w(n,a))}if(n.x-1>=0&&n.y-2>=0){let a=new A(n.x-1,n.y-2);t.Piece(a)===" "?s.push(new w(n,a)):t.Piece(a)?.color==="black"&&s.push(new w(n,a))}if(n.x-1>=0&&n.y+2<=7){let a=new A(n.x-1,n.y+2);t.Piece(a)===" "?s.push(new w(n,a)):t.Piece(a)?.color==="black"&&s.push(new w(n,a))}if(n.x+1<=7&&n.y-2>=0){let a=new A(n.x+1,n.y-2);t.Piece(a)===" "?s.push(new w(n,a)):t.Piece(a)?.color==="black"&&s.push(new w(n,a))}if(n.x+1<=7&&n.y+2<=7){let a=new A(n.x+1,n.y+2);t.Piece(a)===" "?s.push(new w(n,a)):t.Piece(a)?.color==="black"&&s.push(new w(n,a))}}else{if(n.x-2>=0&&n.y-1>=0){let a=new A(n.x-2,n.y-1);t.Piece(a)===" "?s.push(new w(n,a)):t.Piece(a)?.color==="white"&&s.push(new w(n,a))}if(n.x+2<=7&&n.y-1>=0){let a=new A(n.x+2,n.y-1);t.Piece(a)===" "?s.push(new w(n,a)):t.Piece(a)?.color==="white"&&s.push(new w(n,a))}if(n.x-2>=0&&n.y+1<=7){let a=new A(n.x-2,n.y+1);t.Piece(a)===" "?s.push(new w(n,a)):t.Piece(a)?.color==="white"&&s.push(new w(n,a))}if(n.x+2<=7&&n.y+1<=7){let a=new A(n.x+2,n.y+1);t.Piece(a)===" "?s.push(new w(n,a)):t.Piece(a)?.color==="white"&&s.push(new w(n,a))}if(n.x-1>=0&&n.y-2>=0){let a=new A(n.x-1,n.y-2);t.Piece(a)===" "?s.push(new w(n,a)):t.Piece(a)?.color==="white"&&s.push(new w(n,a))}if(n.x-1>=0&&n.y+2<=7){let a=new A(n.x-1,n.y+2);t.Piece(a)===" "?s.push(new w(n,a)):t.Piece(a)?.color==="white"&&s.push(new w(n,a))}if(n.x+1<=7&&n.y-2>=0){let a=new A(n.x+1,n.y-2);t.Piece(a)===" "?s.push(new w(n,a)):t.Piece(a)?.color==="white"&&s.push(new w(n,a))}if(n.x+1<=7&&n.y+2<=7){let a=new A(n.x+1,n.y+2);t.Piece(a)===" "?s.push(new w(n,a)):t.Piece(a)?.color==="white"&&s.push(new w(n,a))}}return s}testFindKnightMoves(){let i=new re([]),t=[];i.currentTurnColor="white";let s=new we("c3","white",cn);i.addPiece(s);let r=i.findKnightMoves(s,i);t.push(r.length===8),i=new re([]),s=new we("c3","black",cn),i.addPiece(s),i.currentTurnColor="black",r=i.findKnightMoves(s,i),t.push(r.length===8),i=new re([]),s=new we("a1","white",cn),i.addPiece(s),r=i.findKnightMoves(s,i),t.push(r.length===2);for(let n=0;n<t.length;n++)if(!t[n]){console.log("testFindKnightMoves failed at test "+n);return}}findBishopMoves(i,t){let s=[],r=i.getIndex(),n=new A(r%8,Math.floor(r/8)),p=i.color;if(p!=t.currentTurnColor)return s;if(p==="white"){for(let a=1;a<=7&&!(n.x-a<0||n.y-a<0);a++){let f=new A(n.x-a,n.y-a);if(t.Piece(f)===" ")s.push(new w(n,f));else if(t.Piece(f)?.color==="black"){s.push(new w(n,f));break}else break}for(let a=1;a<=7&&!(n.x+a>7||n.y-a<0);a++){let f=new A(n.x+a,n.y-a);if(t.Piece(f)===" ")s.push(new w(n,f));else if(t.Piece(f)?.color==="black"){s.push(new w(n,f));break}else break}for(let a=1;a<=7&&!(n.x-a<0||n.y+a>7);a++){let f=new A(n.x-a,n.y+a);if(t.Piece(f)===" ")s.push(new w(n,f));else if(t.Piece(f)?.color==="black"){s.push(new w(n,f));break}else break}for(let a=1;a<=7&&!(n.x+a>7||n.y+a>7);a++){let f=new A(n.x+a,n.y+a);if(t.Piece(f)===" ")s.push(new w(n,f));else if(t.Piece(f)?.color==="black"){s.push(new w(n,f));break}else break}}else{for(let a=1;a<=7&&!(n.x-a<0||n.y+a>7);a++){let f=new A(n.x-a,n.y+a);if(t.Piece(f)===" ")s.push(new w(n,f));else if(t.Piece(f)?.color==="white"){s.push(new w(n,f));break}else break}for(let a=1;a<=7&&!(n.x+a>7||n.y+a>7);a++){let f=new A(n.x+a,n.y+a);if(t.Piece(f)===" ")s.push(new w(n,f));else if(t.Piece(f)?.color==="white"){s.push(new w(n,f));break}else break}for(let a=1;a<=7&&!(n.x-a<0||n.y-a<0);a++){let f=new A(n.x-a,n.y-a);if(t.Piece(f)===" ")s.push(new w(n,f));else if(t.Piece(f)?.color==="white"){s.push(new w(n,f));break}else break}for(let a=1;a<=7&&!(n.x+a>7||n.y-a<0);a++){let f=new A(n.x+a,n.y-a);if(t.Piece(f)===" ")s.push(new w(n,f));else if(t.Piece(f)?.color==="white"){s.push(new w(n,f));break}else break}}return s}testFindBishopMoves(){let i=new re([]),t=new we("a2","white",Ut);i.addPiece(t);let s=i.findBishopMoves(t,i);if(s.length!==7){console.log("testFindBishopMoves failed 0");return}if(i=new re([]),t=new we("a2","black",Ut),i.addPiece(t),i.currentTurnColor="black",s=i.findBishopMoves(t,i),s.length!==7){console.log("testFindBishopMoves failed 1");return}if(i=new re([]),t=new we("a2","white",Ut),i.addPiece(t),i.currentTurnColor="black",t=new we("b3","black",Ut),i.addPiece(t),s=i.findBishopMoves(t,i),s.length!==9){console.log("testFindBishopMoves failed 2");return}if(i=new re([]),t=new we("a2","black",Ut),i.addPiece(t),t=new we("b3","white",Ut),i.addPiece(t),s=i.findBishopMoves(t,i),s.length!==9){console.log("testFindBishopMoves failed 3");return}}findQueenMoves(i,t){let s=this.findRookMoves(i,t);return s.push(...this.findBishopMoves(i,t)),s}testFindQueenMoves(){let i=new re([]),t=new we("a2","white",Kt);i.addPiece(t);let s=i.findQueenMoves(t,i);if(s.length!==21){console.log(s),console.error("testFindQueenMoves failed 0");return}if(i=new re([]),t=new we("a2","black",Kt),i.addPiece(t),i.currentTurnColor="black",s=i.findQueenMoves(t,i),s.length!==21){i.displayBoard(),console.log(s),console.error("testFindQueenMoves failed 1");return}if(i=new re([]),t=new we("a2","white",Kt),i.addPiece(t),i.currentTurnColor="black",t=new we("b3","black",Kt),i.addPiece(t),s=i.findQueenMoves(t,i),s.length!==23){console.error("testFindQueenMoves failed 2");return}if(i=new re([]),t=new we("a2","black",Kt),i.addPiece(t),t=new we("b3","white",Kt),i.addPiece(t),s=i.findQueenMoves(t,i),s.length!==23){console.error("testFindQueenMoves failed 3");return}}findKingMoves(i,t){let s=[],r=i.getPos().pos;if(i.color==="black"){let n=new A(r.x,r.y+1);t.Piece(n)===" "&&r.y+1<=7?s.push(new w(r,n)):t.Piece(n)?.color==="white"&&r.y+1<=7&&s.push(new w(r,n)),n=new A(r.x,r.y-1),t.Piece(n)===" "&&r.y-1>=0?s.push(new w(r,n)):t.Piece(n)?.color==="white"&&r.y-1>=0&&s.push(new w(r,n)),n=new A(r.x+1,r.y),t.Piece(n)===" "&&r.x+1<=7?s.push(new w(r,n)):t.Piece(n)?.color==="white"&&r.x+1<=7&&s.push(new w(r,n)),n=new A(r.x-1,r.y),t.Piece(n)===" "&&r.x-1>=0?s.push(new w(r,n)):t.Piece(n)?.color==="white"&&r.x-1>=0&&s.push(new w(r,n)),n=new A(r.x+1,r.y+1),t.Piece(n)===" "&&r.x+1<=7&&r.y+1<=7?s.push(new w(r,n)):t.Piece(n)?.color==="white"&&r.x+1<=7&&r.y+1<=7&&s.push(new w(r,n)),n=new A(r.x-1,r.y+1),t.Piece(n)===" "&&r.x-1>=0&&r.y+1<=7?s.push(new w(r,n)):t.Piece(n)?.color==="white"&&r.x-1>=0&&r.y+1<=7&&s.push(new w(r,n)),n=new A(r.x+1,r.y-1),t.Piece(n)===" "&&r.x+1<=7&&r.y-1>=0?s.push(new w(r,n)):t.Piece(n)?.color==="white"&&r.x+1<=7&&r.y-1>=0&&s.push(new w(r,n)),n=new A(r.x-1,r.y-1),t.Piece(n)===" "&&r.x-1>=0&&r.y-1>=0?s.push(new w(r,n)):t.Piece(n)?.color==="white"&&r.x-1>=0&&r.y-1>=0&&s.push(new w(r,n)),n=new A(r.x+2,r.y),t.Piece(n)===" "&&r.x+2===6&&r.y===0&&this.inCheck===!1&&t.Piece(new A(r.x+1,r.y))===" "&&t.castlingRights.includes("k")&&s.push(new w(r,n)),n=new A(r.x-2,r.y),t.Piece(n)===" "&&r.x-2===2&&r.y===0&&this.inCheck===!1&&t.Piece(new A(r.x-1,r.y))===" "&&t.Piece(n)===" "&&t.castlingRights.includes("q")&&s.push(new w(r,n))}else{let n=new A(r.x,r.y+1);t.Piece(n)===" "&&r.y+1<=7?s.push(new w(r,n)):t.Piece(n)?.color==="black"&&r.y+1<=7&&s.push(new w(r,n)),n=new A(r.x,r.y-1),t.Piece(n)===" "&&r.y-1>=0?s.push(new w(r,n)):t.Piece(n)?.color==="black"&&r.y-1>=0&&s.push(new w(r,n)),n=new A(r.x+1,r.y),t.Piece(n)===" "&&r.x+1<=7?s.push(new w(r,n)):t.Piece(n)?.color==="black"&&r.x+1<=7&&s.push(new w(r,n)),n=new A(r.x-1,r.y),t.Piece(n)===" "&&r.x-1>=0?s.push(new w(r,n)):t.Piece(n)?.color==="black"&&r.x-1>=0&&s.push(new w(r,n)),n=new A(r.x+1,r.y+1),t.Piece(n)===" "&&r.x+1<=7&&r.y+1<=7?s.push(new w(r,n)):t.Piece(n)?.color==="black"&&r.x+1<=7&&r.y+1<=7&&s.push(new w(r,n)),n=new A(r.x-1,r.y+1),t.Piece(n)===" "&&r.x-1>=0&&r.y+1<=7?s.push(new w(r,n)):t.Piece(n)?.color==="black"&&r.x-1>=0&&r.y+1<=7&&s.push(new w(r,n)),n=new A(r.x+1,r.y-1),t.Piece(n)===" "&&r.x+1<=7&&r.y-1>=0?s.push(new w(r,n)):t.Piece(n)?.color==="black"&&r.x+1<=7&&r.y-1>=0&&s.push(new w(r,n)),n=new A(r.x-1,r.y-1),t.Piece(n)===" "&&r.x-1>=0&&r.y-1>=0?s.push(new w(r,n)):t.Piece(n)?.color==="black"&&r.x-1>=0&&r.y-1>=0&&s.push(new w(r,n)),n=new A(r.x+2,r.y),t.Piece(n)===" "&&r.x+2===6&&r.y===7&&this.inCheck===!1&&t.Piece(new A(r.x+1,r.y))===" "&&t.castlingRights.includes("K")&&s.push(new w(r,n)),n=new A(r.x-2,r.y),t.Piece(n)===" "&&r.x-2===2&&r.y===7&&this.inCheck===!1&&t.Piece(new A(r.x-1,r.y))===" "&&t.Piece(n)===" "&&t.castlingRights.includes("Q")&&s.push(new w(r,n))}return s}testFindKingMoves(){let i=new re([]),t=new we("a2","white",Qt);i.addPiece(t);let s=i.findKingMoves(t,i);if(s.length!==5){console.error("testFindKingMoves failed 0",s);return}if(i=new re([]),t=new we("a2","black",Qt),i.addPiece(t),i.currentTurnColor="black",s=i.findKingMoves(t,i),s.length!==5){console.error("testFindKingMoves failed 1");return}if(i=new re([]),t=new we("a2","white",Qt),i.addPiece(t),i.currentTurnColor="black",t=new we("b3","black",Qt),i.addPiece(t),s=i.findKingMoves(t,i),s.length!==8){console.error("testFindKingMoves failed 2");return}if(i=new re([]),t=new we("a2","black",Qt),i.addPiece(t),t=new we("b3","white",Qt),i.addPiece(t),s=i.findKingMoves(t,i),s.length!==8){console.error("testFindKingMoves failed 3");return}}runAllTests(){this.testConvertToPosition(),this.testConstructors(),this.testBoardToFen(),this.testFenToBoard(),this.testFindPawnMoves(),this.testFindRookMoves(),this.testFindKnightMoves(),this.testFindBishopMoves(),this.testFindQueenMoves(),this.testFindKingMoves(),this.testFindPseudoLegalMoves(),this.testIsInCheck(),this.testFindLegalMoves(),console.log("All tests ran for board class")}}class ro{runAllTests(){new w(void 0,void 0,"a2","a4").runAllTests(),new xt("a2").runAllTests(),new we("a2","white","pawn").runAllTests(),new re().runAllTests(),console.log("All tests ran for chessClasses.ts")}}function fn(c,i){return c&&i&&typeof c=="object"&&typeof i=="object"?Object.keys(c).length===Object.keys(i).length&&Object.keys(c).reduce(function(t,s){return t&&fn(c[s],i[s])},!0):c===i}const lo=wr();function ao(c){const[i,t]=Y({x:0,y:0}),[s,r]=Y({x:0,y:0}),[n,p]=Y(!1),[a,f]=Y(null),[y,_]=Y(null),[q,D]=Y({x:0,y:0}),[k,S]=Y(null),[Q,X]=Y(null),[N,R]=Y({x:0,y:0}),[V,T]=Y({x:0,y:0}),[B,$]=Y(!1),[L,ne]=Y(null),[Be,Ee]=Y(null),[_e,Le]=Y({x:0,y:0}),[ce,qe]=Y(null),[le,J]=Y(null),[se,P]=Y([]),E=[],m=[];vt(()=>{document.addEventListener("pointermove",O=>{t({x:O.clientX,y:O.clientY}),n()&&a()&&(a().ref.style.transform=`translate(${i().x-s().x+q().x}px, ${i().y-s().y+q().y}px)`,a().ref.style.zIndex=100,a().rectangle=a().ref.getBoundingClientRect(),k()?.length>0&&X(bt(k())))}),document.addEventListener("pointerup",()=>{a()!=null&&(a().dragEnd(Q()),m.forEach(O=>{O()}),a()?.ref&&(a().ref.style.transform=`translate(${0}px, ${.1}px)`,a().ref.style.zIndex=0),p(!1),_(a()),f(null))}),document.addEventListener("virtualpointermove",O=>{R({x:O.clientX,y:O.clientY}),B()&&L()&&(console.log("virtual mouse move"),L().ref.style.transform=`translate(${N().x-V().x+_e().x}px, ${N().y-V().y+_e().y}px)`,L().ref.style.zIndex=100,L().rectangle=L().ref.getBoundingClientRect(),ce()?.length>0&&J(ri(ce())))}),document.addEventListener("virtualpointerup",()=>{L()!=null&&(L().dragEnd(le()),m.forEach(O=>{O()}),L()?.ref&&(L().ref.style.transform=`translate(${0}px, ${.1}px)`,L().ref.style.zIndex=0),$(!1),Ee(L()),ne(null))})});const H=(O,g)=>{g!==void 0&&g.dragStart.push(O)},j=O=>{E.push(O)},fe=O=>{m.push(O)},be=(O,g)=>{g!==void 0&&(g.dragEnd=O)},Ie=(O,g)=>{g!==void 0&&(g.hoverOver=O)},je=(O,g)=>{g!==void 0&&(g.hoverOut=O)},tt=O=>{let g={id:O,startingPosition:{x:0,y:0},dragStart:[],dragEnd:()=>{},ref:null,rectangle:null,data:{}};return vt(()=>{g.ref.addEventListener("pointerdown",Z=>{if(!g.ref.classList.contains("noDrag")){f(g);for(let W=0;W<g.dragStart.length;W++)g.dragStart[W](g);for(let W=0;W<E.length;W++)E[W](g);D(at(Z.target.getAttribute("style"))),r({x:Z.clientX,y:Z.clientY}),p(!0),g.rectangle=g.ref.getBoundingClientRect()}}),g.ref.addEventListener("virtualpointerdown",Z=>{ne(g);for(let W=0;W<g.dragStart.length;W++)g.dragStart[W](g);for(let W=0;W<E.length;W++)E[W](g);Le(at(Z.target.getAttribute("style"))),T({x:Z.clientX,y:Z.clientY}),$(!0),g.rectangle=g.ref.getBoundingClientRect()})}),g},Oe=O=>{let g={id:O,startingPosition:{x:0,y:0},hoverOver:()=>{},hoverOut:()=>{},ref:null,rectangle:null,hovering:!1,occupied:!1,droppable:!0};return P([...se(),g]),vt(()=>{g.rectangle=g.ref.getBoundingClientRect(),g.ref.querySelector(".piece")!==null&&(g.occupied=!0),document.addEventListener("pointermove",()=>{if(a()==null||a().rectangle==null)return;let Z=a().ref.getBoundingClientRect(),W=g.ref.getBoundingClientRect();if(Z.top>W.bottom||Z.right<W.left||Z.bottom<W.top||Z.left>W.right){if(Yt(g),!g.hovering)return;g.hovering=!1,g.hoverOut(a())}else{if(g.ref===Q()?.ref){if(g.hovering)return;g.hovering=!0,g.hoverOver(a())}else g.hovering=!1,g.hoverOut(a());it(g)}}),document.addEventListener("pointerdown",()=>{if(a()==null||a().rectangle==null)return;let Z=a().ref.getBoundingClientRect(),W=g.ref.getBoundingClientRect();if(Z.top>W.bottom||Z.right<W.left||Z.bottom<W.top||Z.left>W.right){if(Yt(g),!g.hovering)return;g.hovering=!1,g.hoverOut(a())}else{if(g.ref===Q()?.ref){if(g.hovering)return;g.hovering=!0,g.hoverOver(a())}else g.hovering=!1,g.hoverOut(a());it(g)}k()?.length>0&&X(bt(k()))}),document.addEventListener("pointerup",()=>{!g.hovering||(g.hovering=!1,g.hoverOut(y()),console.log("hi"),y()!=null&&g.droppable!==!1&&(g.ref.querySelector(".piece")!==null?(g.ref.querySelector(".piece").remove(),console.log("PIECE REMOVED")):g.ref.querySelector(".circle")!==null&&g.ref.querySelector(".circle").remove(),g.ref.appendChild(y().ref)))}),document.addEventListener("virtualpointermove",()=>{if(L()==null||L().rectangle==null)return;let Z=L().ref.getBoundingClientRect(),W=g.ref.getBoundingClientRect();if(Z.top>W.bottom||Z.right<W.left||Z.bottom<W.top||Z.left>W.right){if(oi(g),!g.hovering)return;g.hovering=!1,g.hoverOut(L())}else{if(g.ref===le()?.ref){if(g.hovering)return;g.hovering=!0,g.hoverOver(L())}else g.hovering=!1,g.hoverOut(L());z(g)}}),document.addEventListener("virtualpointerdown",()=>{if(L()==null||L().rectangle==null)return;let Z=L().ref.getBoundingClientRect(),W=g.ref.getBoundingClientRect();if(Z.top>W.bottom||Z.right<W.left||Z.bottom<W.top||Z.left>W.right){if(oi(g),!g.hovering)return;g.hovering=!1,g.hoverOut(L())}else{if(g.ref===le()?.ref){if(g.hovering)return;g.hovering=!0,g.hoverOver(L())}else g.hovering=!1,g.hoverOut(L());z(g)}ce()?.length>0&&J(ri(ce()))}),document.addEventListener("virtualpointerup",()=>{!g.hovering||(g.hovering=!1,g.hoverOut(Be()),console.log("hi"),Be()!=null&&g.droppable!==!1&&(g.ref.querySelector(".piece")!==null?(g.ref.querySelector(".piece").remove(),console.log("PIECE REMOVED")):g.ref.querySelector(".circle")!==null&&g.ref.querySelector(".circle").remove(),g.ref.appendChild(Be().ref)))})}),se()[se().length-1]};function at(O){if(O===null)return{x:0,y:0};let g=O.split("translate(")[0],Z;return g&&(Z=O.split("translate(")[1].split(")")[0].split("px, ")),{x:parseInt(Z[0]),y:parseInt(Z[1])}}function it(O){k()==null&&S([O]),!k().includes(O)&&(k()?.includes(O)||S([...k(),O]))}function Yt(O){k()!=null&&(!k()?.includes(O)||k().includes(O)&&S(k()?.filter(g=>g!==O)))}function bt(O){if(O==null)return;let g=a().ref.getBoundingClientRect();return O.sort((W,yt)=>{let Te=W.ref.getBoundingClientRect(),Se=yt.ref.getBoundingClientRect(),Qe,ct,ht,ut,Ke,dt;return g.x>Te.x?Qe=Te.right-g.x:Qe=g.right-Te.x,g.bottom>Te.bottom?ct=Te.bottom-g.top:ct=g.bottom-Te.top,Ke=Qe*ct,g.x>Se.x?ht=Se.right-g.x:ht=g.right-Se.x,g.bottom>Se.bottom?ut=Se.bottom-g.top:ut=g.bottom-Se.top,dt=ht*ut,dt-Ke})[0]}function z(O){ce()==null&&qe([O]),!ce().includes(O)&&(ce()?.includes(O)||qe([...ce(),O]))}function oi(O){ce()!=null&&(!ce()?.includes(O)||ce().includes(O)&&qe(ce()?.filter(g=>g!==O)))}function ri(O){if(O==null)return;let g=L().ref.getBoundingClientRect();return O.sort((W,yt)=>{let Te=W.ref.getBoundingClientRect(),Se=yt.ref.getBoundingClientRect(),Qe,ct,ht,ut,Ke,dt;return g.x>Te.x?Qe=Te.right-g.x:Qe=g.right-Te.x,g.bottom>Te.bottom?ct=Te.bottom-g.top:ct=g.bottom-Te.top,Ke=Qe*ct,g.x>Se.x?ht=Se.right-g.x:ht=g.right-Se.x,g.bottom>Se.bottom?ut=Se.bottom-g.top:ut=g.bottom-Se.top,dt=ht*ut,dt-Ke})[0]}return ae(lo.Provider,{value:{onDragEnd:be,onDragStart:H,createDraggable:tt,onHoverOver:Ie,createDroppable:Oe,onHoverOut:je,onGlobalDragStart:j,onGlobalDragEnd:fe},get children(){return c.children}})}const Qs=()=>br(lo);class Lr{from;to;type;constructor(i,t,s){this.from=i,this.to=t,this.type=s}}class Oi{id;username;CatUrl;last_seen=Date.now();inGame=!1;constructor(i,t,s){this.id=i,this.username=t,this.CatUrl=s}}class Or{from;fromUserColor;to;gameID;type="createGame";constructor(i,t){this.from=i,this.to=t,this.fromUserColor=Math.random()>.5?"white":"black",this.gameID=this.generateRandomId()}generateRandomId(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}}class ki{x;y;constructor(i,t){this.x=i,this.y=t}}class hn{from;to;position;screen;type="virtualMouseEvent";eventType;chessBoardWidth;constructor(i,t,s,r,n){this.from=i,this.to=t,this.position=s,this.screen=new ki(window.innerWidth,window.innerHeight),this.chessBoardWidth=r,this.eventType=n}}class Nr{from;to;previousFen;crowning=!1;eating=!1;atePiece="";crownedTo="";constructor(i,t,s){this.from=i,this.to=t,this.previousFen=s}}class Dr{fen;from;to;type="chessGameUpdate";turn;moves;constructor(i,t,s,r,n){this.fen=i,this.from=t,this.to=s,this.turn=r,this.moves=n}}const Rr=Ce('<div class="number-right" style="pointer-events: none;"></div>'),$r=Ce('<div class="number-left" style="pointer-events: none;"></div>'),Fr=Ce("<div></div>"),qr=Ce('<section><div class=""> </div></section>');function co({pieceClassName:c,className:i,id:t,board:s,draggableId:r,updateBoard:n,eatenPieces:p,setDisplayInlay:a,setDisplayInlayX:f,inlaySelection:y,displayInlay:_,style:q,color:D,setLastMove:k,lastMove:S,movePieceSound:Q,capturePieceSound:X,setMoves:N,moves:R}){vt(()=>{window.movePiece=function($,L){s().movePiece($,L),n()},window.board=s});const V=({id:$,className:L,draggable:ne,draggableClass:Be})=>{const{onHoverOver:Ee,createDroppable:_e,onHoverOut:Le,onGlobalDragStart:ce,onGlobalDragEnd:qe}=Qs(),le=_e($);return Ee(J=>{le.ref.classList.add("hovered")},le),Le(J=>{le.ref.classList.remove("hovered")},le),ce(J=>{if(!_())if(J.data.legalPieceMoves.includes(le.id)){if(le.ref.children.length===0||le.ref.querySelector(".piece")==null){le.droppable=!0;let se=document.createElement("section");se.classList.add("circle"),le.ref.appendChild(se)}else if(le.ref.children.length>0&&le.ref.querySelector(".piece")!=null){le.droppable=!0;let se;for(let P=0;P<le.ref.children.length;P++)le.ref.children[P].classList.contains("piece")&&(se=le.ref.children[P]);se.children[0]?.classList.add("circle")}}else le.droppable=!1}),qe(J=>{let se=le.ref.querySelectorAll("section.circle");for(let E=0;E<se.length;E++)se[E].remove();let P=le.ref.querySelectorAll("div.circle");for(let E=0;E<P.length;E++)P[E].classList.remove("circle")}),ne.getAttribute("class").length===0&&(ne=void 0),(()=>{const J=Fr.cloneNode(!0),se=le.ref;return typeof se=="function"?Hs(se,J):le.ref=J,Mi(J,"id",$),Bi(J,L),Ve(J,ae(Je,{when:ne!=null,children:ne}),null),Ve(J,ae(Je,{get when(){return $[1]==="8"&&D==="black"||$[1]==="1"&&D==="white"},get children(){const P=Rr.cloneNode(!0);return Ve(P,()=>$[0]),P}}),null),Ve(J,ae(Je,{get when(){return $[0]==="h"&&D==="black"||$[0]==="a"&&D==="white"},get children(){const P=$r.cloneNode(!0);return Ve(P,()=>$[1]),P}}),null),wt(P=>oo(J,q,P)),J})()},T=({className:$,id:L})=>{const{onDragStart:ne,onDragEnd:Be,createDraggable:Ee}=Qs(),_e=Ee(L);let Le,ce;ne(()=>{if(_())return;Le=_e.ref.parentElement.id;let J=s().findLegalMoves(s());J.length===0&&(s().checkMate=!0);let se=[];for(let P=0;P<J.length;P++)J[P].start==Le&&se.push(J[P].end);_e.data.legalPieceMoves=se},_e),Be(async J=>{if(_()||J===null||(J.occupied=!1,J.ref.querySelector(".circle")===null))return;let se=J.ref.querySelector(".piece");if(await B(1),se?.id===_e?.id?ce=_e.ref.parentElement.id:ce=J.ref.id,ce===Le)return;s().board;let P=new Nr(Le,ce,s().fen);s().movePiece(Le,ce),se?.classList?.contains("piece")?(p.push(se),P.eating=!0,P.atePiece=s().getPieceAtPosition(ce)?.type,X.play()):Q.play();let E=s().getPieceAtPosition(ce);E.type==="p"&&E.color===D&&(ce[1]==="8"||ce[1]==="1")&&(P.crowning=!0,a(!0),f(E.position.pos.x)),N([...R(),P]),n(),(se?.classList?.contains("number-right")||se?.classList?.contains("number-left"))&&J.ref.appendChild(se),k({from:Le,to:ce});let m=document.querySelectorAll(".chessSquare");for(let H=0;H<m.length;H++)m[H].id===S().from||m[H].id===S().to?m[H]?.classList?.add("lastMove"):m[H]?.classList?.remove("lastMove")},_e);const qe=c.toUpperCase()===c?"white":"black",le=D===qe;return(()=>{const J=qr.cloneNode(!0),se=_e.ref;return typeof se=="function"?Hs(se,J):_e.ref=J,Bi(J,`${$} ${le?"canDrag":"noDrag "}`),Mi(J,"id",L),J})()},B=$=>new Promise(L=>setTimeout(L,$));return ae(V,{className:i,get draggable(){return ae(T,{className:`${c!=" "?c+" piece":""}`,id:r})},id:t})}const jr=Ce('<div><div class="chessInlaySquare" id="queenSelection"><div class="piece Q"></div></div><div class="chessInlaySquare" id="knightSelection"><div class="piece N"></div></div><div class="chessInlaySquare" id="rookSelection"><div class="piece R"></div></div><div class="chessInlaySquare" id="bishopSelection"><div class="piece B"></div></div></div>'),Hr=Ce('<div class="chessBoard"></div>');let Wr=new ro;Wr.runAllTests();function Ur({board:c,updateBoard:i,setLastMove:t,lastMove:s,movePieceSound:r,capturePieceSound:n,setMoves:p,moves:a}){c().displayBoard();let f=y();function y(){let V=[];for(let T=0;T<8;T++)for(let B=0;B<8;B++)V.push(`${String.fromCharCode(97+B)}${8-T}`);return V}let _=[];const[q,D]=Y(!1),[k,S]=Y("00"),[Q,X]=Y("");k()+"";async function N(V){X(V),D(!1);let T=a()[a().length-1];T.crownedTo=V.toLowerCase();let B=a().splice(0,a().length-1);B.push(T),p(B);let $=c().getPieceAtBoardIndex(parseInt(k())),L=$.type;$.type=V.toLowerCase(),c().board[parseInt(k())]=V,c().fen=c().boardToFen(),console.log($);let ne=document.getElementById($.position.position)?.children[0];console.log("previous type:"+L),ne?.classList.remove(L.toUpperCase()),ne?.classList.add(V.toUpperCase()),await R(10),i()}function R(V){return new Promise(T=>setTimeout(T,V))}return(()=>{const V=Hr.cloneNode(!0);return Ve(V,ae(ao,{get children(){return[ae(Je,{get when(){return q()},get children(){const T=jr.cloneNode(!0),B=T.firstChild,$=B.nextSibling,L=$.nextSibling,ne=L.nextSibling;return B.$$click=()=>N("Q"),$.$$click=()=>N("N"),L.$$click=()=>N("R"),ne.$$click=()=>N("B"),wt(()=>Bi(T,`chessInlay ml-[${k()}]`)),T}}),ae(mn,{get each(){return c().board},children:(T,B)=>ae(co,{get style(){return B()},get pieceClassName(){return c().board[B()]},get className(){return`chessSquare ${B()%16<8?B()%2==0?"lighterBackground":"":B()%2==0?"":"lighterBackground"}`},get id(){return f[B()]},board:c,updateBoard:i,get draggableId(){return Qr()},eatenPieces:_,setDisplayInlay:D,setDisplayInlayX:S,inlaySelection:Q,displayInlay:q,color:"white",setLastMove:t,lastMove:s,movePieceSound:r,capturePieceSound:n,setMoves:p,moves:a})})]}})),V})()}function Qr(){return Math.random().toString(36).substr(2,9)}Gt(["click"]);const Kr=Ce('<div><div class="chessInlaySquare" id="queenSelection"><div class="piece q"></div></div><div class="chessInlaySquare" id="knightSelection"><div class="piece n"></div></div><div class="chessInlaySquare" id="rookSelection"><div class="piece r"></div></div><div class="chessInlaySquare" id="bishopSelection"><div class="piece b"></div></div></div>'),Gr=Ce('<div class="chessBoard"></div>');let Yr=new ro;Yr.runAllTests();function zr({board:c,updateBlackBoard:i,setLastMove:t,lastMove:s,movePieceSound:r,capturePieceSound:n,setMoves:p,moves:a}){c().displayBoard();let f=y();function y(){let V=[];for(let T=0;T<8;T++)for(let B=0;B<8;B++)V.push(`${String.fromCharCode(97+B)}${8-T}`);return V}let _=[];const[q,D]=Y(!1),[k,S]=Y("00"),[Q,X]=Y("");async function N(V){X(V),D(!1);let T=c().getPieceAtBoardIndex(63-(7-parseInt(k()))),B=T.type;console.log(T),T.type=V,c().board[63-(7-parseInt(k()))]=V,c().fen=c().boardToFen(),console.log(T);let $=document.getElementById(T.position.position)?.children[0];console.log("previous type:"+B),$?.classList.remove(B),$?.classList.add(V),await R(10),i()}function R(V){return new Promise(T=>setTimeout(T,V))}return(()=>{const V=Gr.cloneNode(!0);return Ve(V,ae(ao,{get children(){return[ae(Je,{get when(){return q()},get children(){const T=Kr.cloneNode(!0),B=T.firstChild,$=B.nextSibling,L=$.nextSibling,ne=L.nextSibling;return B.$$click=()=>N("q"),$.$$click=()=>N("n"),L.$$click=()=>N("r"),ne.$$click=()=>N("b"),wt(()=>Bi(T,`chessInlay ml-[${7-parseInt(k())}]`)),T}}),ae(mn,{get each(){return c().board},children:(T,B)=>ae(co,{get style(){return B()},get pieceClassName(){return c().board[c().board.length-1-B()]},get className(){return`chessSquare ${(c().board.length-1-B())%16<8?(c().board.length-1-B())%2==0?"lighterBackground":"":(c().board.length-1-B())%2==0?"":"lighterBackground"}`},get id(){return f[c().board.length-1-B()]},board:c,updateBoard:i,get draggableId(){return Xr()},eatenPieces:_,setDisplayInlay:D,setDisplayInlayX:S,inlaySelection:Q,displayInlay:q,color:"black",setLastMove:t,lastMove:s,movePieceSound:r,capturePieceSound:n,setMoves:p,moves:a})})]}})),V})()}function Xr(){return Math.random().toString(36).substr(2,9)}Gt(["click"]);const Jr=Ce(`<div class="glassOverlay"><label for="username">Choose your username</label><div class="userNameInput"><input type="username" placeholder="username" id="userNameInput"></div><button class="submitUsernameButton">LET'S GO<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 arrow"><path stroke-linecap="round" stroke-linejoin="round" d="M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"></path></svg></button></div>`),Zr=({user:c,setUser:i,setInSession:t,chessWebSocket:s})=>{let r="";const[n,p]=Y(""),a=async()=>{if(r===""){alert("Please enter a username");return}if(r.length>10&&(r=r.slice(0,10)),r===c()?.username){let _=new Oi(Ks(),r,n());i(_),t(!0),s.beginPinging(c);return}let y=new Oi(Ks(),r,n());i(y),console.log(),s.beginPinging(c),console.log(y,y.id),s.pingWebSocket(y),sessionStorage.setItem("gabrielmalek/chess.data",JSON.stringify({id:y.id,username:y.username,CatUrl:y.CatUrl})),localStorage.setItem("gabrielmalek/chess.data",JSON.stringify({id:y.id,username:y.username,CatUrl:y.CatUrl})),t(!0)};async function f(){return(await(await fetch("https://api.thecatapi.com/v1/images/search")).json())[0].url}return vt(()=>{document.addEventListener("keyup",function(_){_.key==="Enter"&&a()});let y=document.getElementById("userNameInput");y?.focus(),console.log(c()?.username),c()?.username!==void 0&&(y.value=c()?.username,r=y.value),f().then(_=>{p(_)})}),(()=>{const y=Jr.cloneNode(!0),_=y.firstChild,q=_.nextSibling,D=q.firstChild,k=q.nextSibling;return D.$$keyup=S=>r=S.currentTarget.value,k.$$click=()=>a(),y})()};function Ks(){let c="";for(let i=0;i<20;i++)c+=Math.floor(Math.random()*10);return c}Gt(["keyup","click"]);const el=Ce('<div class="catLogo"></div>');function Gs({catLink:c}){return(()=>{const i=el.cloneNode(!0);return wt(t=>oo(i,`background-image: url(${c})`,t)),i})()}const tl=Ce('<div class="bellContainer"><div class="dropdown"><button class="bellIcon" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="dropdownMenuButton"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16"><path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0M3.124 7.5A8.969 8.969 0 015.292 3m13.416 0a8.969 8.969 0 012.168 4.5"></path></svg></button><div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div></div></div>');function il({onClick:c,notifications:i}){return c=()=>{console.log("bell clicked"),console.log(i());let t=document.querySelector(".dropdown-menu");console.log(t),t.style.display=="block"?t.style.display="none":t.style.display="block",t.innerHTML="";for(let s=0;s<i().length;s++){let r=document.createElement("div"),n=document.createElement("div"),p=document.createElement("div");p.classList.add("username"),p.innerText=i()[s].from.username,r.classList.add("dropdown-item"),r.id=i()[s].from.id,n.classList.add("text"),n.classList.add("notificationText"),n.appendChild(p),n.innerHTML="\u{1F514}&nbsp"+n.innerHTML+"&nbsp wants to play ",r.appendChild(n),t.appendChild(r),console.log(r,"hi")}},vt(()=>{document.addEventListener("click",function(t){let s=document.querySelector(".dropdown-menu"),r=document.querySelector(".bellIcon"),n=t.target;do{if(n==r)return;n=n.parentNode}while(n);s.style.display="none"})}),(()=>{const t=tl.cloneNode(!0),s=t.firstChild,r=s.firstChild;return Ir(r,"click",c,!0),t})()}Gt(["click"]);const nl=Ce('<div class="glassOverlay"><ul class="list"><li class="listItem" id="mainUser"><div class="text"></div></li></ul></div>'),sl=Ce('<div class="absolute left-3 text-red-500">Notification sent!</div>'),ol=Ce('<div class="modal fade " id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"><div class="modal-dialog absolute top-[39vh] left-1/ "><div class="modal-content w-[50px] "><div class="modal-header"><h1 class="modal-title fs-5" id="exampleModalLabel">Play Chess with </h1><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body">Play online with this player right now!</div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button><button type="button" class="btn btn-primary">Play Chess</button></div></div></div></div>'),rl=Ce('<li class="listItem" data-bs-toggle="modal" data-bs-target="#exampleModal"><div class="text"></div></li>');function ll({users:c,user:i,setNotificationUser:t,onNotificationReceived:s,chessWebSocket:r}){const[n,p]=Y(),[a,f]=Y(!1),[y,_]=Y([]),[q,D]=Y([]),[k,S]=Y(!1);vt(()=>{document.addEventListener("notification",N=>{console.log("notification event received");const R=JSON.parse(N.data);if(s(R),R.type!="promptForGame")return;t(R.from),console.log("notification received:",R);for(let T=0;T<y().length;T++)if(y()[T].from.id==R.from.id)return;let V=y();V.push(R),_(V),S(!0)})});function Q(N){p(N),document.getElementById("exampleModal")?.style.setProperty("display","flex")}async function X(N){for(let V=0;V<q().length;V++)if(q()[V].to.id==N.to.id)return;let R=q();R.push(N),D(R),r.sendNotification(N)}return[ae(Je,{get when(){return k()},get children(){return ae(il,{notifications:y,onClick:()=>{}})}}),(()=>{const N=nl.cloneNode(!0),R=N.firstChild,V=R.firstChild,T=V.firstChild;return Ve(T,()=>i().username),Ve(V,ae(Gs,{get catLink(){return i().CatUrl}}),null),Ve(R,ae(mn,{get each(){return c()},children:B=>(()=>{const $=rl.cloneNode(!0),L=$.firstChild;return $.$$click=()=>Q(B),Ve(L,()=>B.username),Ve($,ae(Gs,{get catLink(){return B.CatUrl}}),null),wt(()=>Mi($,"id",B.id)),$})()}),null),N})(),(()=>{const N=ol.cloneNode(!0),R=N.firstChild,V=R.firstChild,T=V.firstChild,B=T.firstChild;B.firstChild;const $=T.nextSibling,L=$.nextSibling,ne=L.firstChild,Be=ne.nextSibling;return Ve(B,(()=>{const Ee=mt(()=>n()!=null);return()=>Ee()?`${n()?.username}`:""})(),null),Ve(L,ae(Je,{get when(){return a()},get children(){return sl.cloneNode(!0)}}),ne),Be.$$click=()=>{let Ee=new Lr(i(),n(),"promptForGame");X(Ee),a()==!1&&f(!0)},N})()]}Gt(["click"]);const al="data:audio/mpeg;base64,SUQzBAAAAAABH1RFTkMAAAALAAADUHJvIFRvb2xzAFRYWFgAAAAjAAADb3JpZ2luYXRvcl9yZWZlcmVuY2UAYWFPNEt0IUJLdlNrAFREUkMAAAAMAAADMjAxOS0wNC0yMQBUWFhYAAAAGgAAA3RpbWVfcmVmZXJlbmNlADE3MjgwMDAwMABUU1NFAAAADwAAA0xhdmY1OC4yOS4xMDAAAAAAAAAAAAAAAP/7VAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEluZm8AAAAPAAAACAAADMAALS0tLS0tLS0tLS0tS0tLS0tLS0tLS0tLaWlpaWlpaWlpaWlpaYeHh4eHh4eHh4eHh6WlpaWlpaWlpaWlpaXDw8PDw8PDw8PDw8Ph4eHh4eHh4eHh4eHh////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQE5gAAAAAAAAzAei0vIf/7lGQAAAMuHciFc0ACKuFWcqGYABC8uU9ZrIAQvopiQzUgADDQIHQuY1I5kkbmEQMZCOBo5LGfhoY3Q5wCCG7FcZeABikmmUyCEDYxYSDJgwFBCeTceaYaoQlKYUGq8uYBgjTQICBQBgl7O5DEOXqSxunjcvp8+///nXp6enpKSkpMGQ8AAAAAVASoEJwMWaIIFnEIOBiwgDC0xA4+sH1AgUBA4XeD/KHP/KOBB2Iz/8oc4PgAAAV9uRSW0SBsALDmsjFUiIVimojFGpsmc0mEHFEgmImJJGdXBQmCU7d1xiRADooPLkDg3Tlo1aDtFMBZFBHFy8KHqaa4WEtu/DhbYDWszG5ukhTXYo8butg1ayrU0pl/f/3Wgvdbk5SZ3O1cr+W98/79S93//LKmEAY9bwE5c274qni5H6i+zFmyQGVb9iwZ0OLDTNIQtIz9JN/B44YsS8DsQxmDdxty3QJkkDLoPRNX/t/KqgA/AQBAxudAcqzBpfMoGwyjGTUw1P/7lGQKjNP7PEoXciAAMKIIwuy8AA40mRItpHRAvgnjjPSKCMvrY0aVAMPiIWG3ouayUpjwZmEhIIwqYgDJigBC2gLABTENAWoLgckQqLhHCQIMjBYcIJGJAiDJF01GVNT02U5w6Ymqkkq1o2RZToLqSUtSSWu3mJrRpLqW1J/3WrutaKKLTM9mwMnW54TBIAGFVQwoBg8EHKXCBUOHL9KRM69DVlqA5E1S5NUpxHiEnmW4ucVtnVdo/gj6n/RrCIeMjIUgxXINrUzbAEyO4OajQEgBVIMREDMUw3IcNDWTru83qTNagzJCciABx9FmgqgQNEgUFMWrKzNaZW77AQ0wAJsgbBUUAkiSRY4CjAJEG/tUL0goDpAuD7n0KNdIodOvt29UXOgUNVm1Xu+z+ixQcg53hkEpCFI8eoMUHKeQUgQEE6BpMpOCCDHKVHHAfXCFxiNQbqBdFFRRHGsgUjbVBCADEgMKGps3iDRM0aBOSPgcfGbNBjqeY45m9Uxgif/7lGQPjNNfIsMTeCtANMJ4kWMpOguUTwwtZYzA/InhQawhmKXTNCmRp5MVDOU1/A3D4dVADBS8Vgh54GUt0FgsCkLuOpTUciUDuFmhr2R5aCScrDJHGOjw66jPSLou5cks/9C9hKt65fbxCGR12hUqwEw5IgHIQUIpsF3EyB3sSWMNwxgDIjKkoDEJCkU5YqdqzP3kiKhkneX0NGrTjtZSzCLdP2oAvMgcm5DmDHnTqnTWgKIZwydHMZpYcXMG3Bt2YmmGDjFGj4raZzajqdEAqPzLvQY5a44rs5OAqNDz21SsJBpx2pinhsBHHrW6/1ertWxdFC6kMRXqeq2l96eK5CnRDHlY0HNg1NPRF9R0w4mMNcRMn+KTIFYmDImSMBQgecB/CuAHYZKokKsCz36tsNXiyaeNwksVdC/8AWiwSWpCUIAsSwTGQoGE5hscCkptEJssKg5g0Z4VZyyhxHhwBZka4OGGSIGtSk0ZRZGMcFkRqGWmOqxCsj40bgcsg//7lGQfDtL/IEKDellwSQKIMGd4Ggx4TwYtc0aQ9YjhxbxoiEeWJ246o3+K9t3wx/VytFNdclWyUV6+1Ewr6jWhvrdlvy7wBZExnztBL8DMEbOFGyERtxgBEo3SGNxVTKjcRm5goKBAZYM1YvPWgqY0vRfEJQYKCmjsZVFld0+7h4ZWtQ7INGw/RkkC4uXSEQASUYVRANQMqMZhOkDBSQBXoyqRgwynKh+YKFAOjRgYHGFinQIGNAGJiCxhMkeBpgsjas4THpuGIRFo9NXbv3KaRCRxwqNLAit5UBKeWi307S2//I2KJEsq76Nt/4yVZ5uowi25CHEwEGMPDjNogxGOkjbc0CMEoJ5YcfMmRAyV/VhDJiCyQVAQQlsvFb87ZgZrzKqCpZj33R4SVdrRuYprI0BmkhpQXnap5yP+ZKqm3zZoTMZ/CmI8x4x0UOBzKYbeIobmZZnPGnjEiqIxKMmVoPGMFvHCFY0ZCIG9y4BQc8VVaYkmvvbDXrbOXaenpf/7lGQoD/LbH7+DemMwTSPIEG8naExogvgObYlBTY8fwb0lmG8tWwfjGz//yvZ9DkAYHAycYyUNTOTEjXGAw93MsfQSemCox1SgYKamTuhACElghTDoSIA01gsyEMAQVAGwRiDsIeuwhTFYKi8s1AzCwOaim284yvHVLQpWNhUnmREkJOALFU5M6DY6jOKQg5wPTn6uNFagMsH4gRybSBkMxAAK2U6onMOOzPyQxolMHAAQPD0WAQhHNO0OS1Fl9LggA2EY4m68tDf4XfhirsVuZi09Z1pL3R5AzknH//5ZsRAhmPAprSYnqbRmmHpgBwDVDA4kfNdWThk0ws5PiQTJFsylw4pAQHjwZTABS3LZwqgGRzdV9MuZ6mgtQRAECyM45NEvStZXzx+ZDLxXpzYYF/TVjAIHzBxIwIbM7FDG1QARhqB+dPJg6bOtfTyVY5NBOCcDBjsxsOMtNjGFk+4TM3NCI2BTHbFVlWoy3gIyABx4io7bFXutzXJA8+c1Z//7lGQmD/LYID6DeTPAVgQH0G8GhAuUgPYOaStBNI5fgbyVoQtTT/eYX/qrSCTKRW1TaF9Eo2ckRFDeLgZlGodSREXAO5JprwOmJjBgdOpmDFpgRAZHHArOMiGTUhswQCDB4vsYTDB0+4Id8yjW4509JXslUzGzSylk0HbW/di7Kmi9cC2LF6nrVOIAYZ5NRnwWjKgNKL4xsDjRsrM1EQBU8xIyQRJCNGexCePiaCuCQZuUpkFZi05gnIhQJfGfTrmeZ2RIc4Sb87CHCkDGZC2OhaKsZ3tXO6yFwpH46V1YhPrzT2d8SVVVgQFGNFxltsaWxHmtAEXCagNShSFHCRo1IVMXMwRicYxvGnBCBBTfVdAVGGS1gplphc5orBJt93mg+/NOKgdzXJ21IPMQRVAHJ211RoSJjscXTKEAS9TSRI3dZPKOTVyQzsxBcYmEb8SGJqZk4OaeDmHXp7+i4giUIFAEe/zhP+glTdbmyd35Q1vCW7BxY8gc7PsyvK9Jqf/7lGQmj/KeID2DeTOwVEPH0HNoPgoQUPYMbyGJVA8egc0Nce6rSTHaP6X/GAYJDUWIBggPmP4cZ2HoVCgQ2GgDppP+bPLmsmh1LMZoWGFBRNGFwS9AyRCgYFwUDAosBtEwaECgJNK9bmWWapqtCGGGVVnvt9yzd4hzBHBtDuoCGEETSxADNAKJThz4zIDMPPDTUoyI5OINzb0gy8sNQgTOCYyNTNOGzSjUyZgsSJHGIKZCKACRqbNacVmzgSOJtN+rqZjk/pNV7tqigVI2yiT5MEggw0NRYTmPkYaBdpuogGWwWYPA5FKzcg6OTpI8uQ2yEyI8w+g2uc9VApSEo4HVyyCcZqmaQCtrpMPZIw3sSZDIL2dZ62a73yt3lIubUMfRLMwVMCeNOSMA/Hxp18xg7J6iJxZAoVNJFMVgDUUE/zU1cQeZCgs1Bsx8IywQ1ZwVDgoq8S7nGglUrxqavVA0t1vVXdmta2bz/+YYVVJJdGFVFF83z0w841aMFgTShP/7lEQtj/JfFLiDW9ICSeJ3AGssWEAAAaQAAAAgAAA0gAAABDSGTXyjF3DZrwOZO9wyHRWAyzQOCZKSCAoKLog0RDMMJROf90k9mHq9BI7ULmz05WPEhs0x27/3fUSJTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",cl=""+new URL("capture.7158a77f.mp3",import.meta.url).href,hl=Ce('<div class="canvas-container"><canvas id="canvas"></canvas></div>');function ul({}){return vt(()=>{const c=document.getElementById("canvas"),i=c.getContext("2d");c.width=window.innerWidth,c.height=window.innerHeight;const t=300,s=8;let r=[8,18,51],n=[.5,1];class p{constructor(S,Q,X,N,R){this.x=S,this.y=Q,this.speed_x=X,this.speed_y=N,this.radius=R,this.color="rgb(255, 255, 255, .2)"}update(){this.x+=this.speed_x,this.y+=this.speed_y,(this.x+this.radius>c.width||this.x-this.radius<0)&&(this.speed_x*=-1),(this.y+this.radius>c.height||this.y-this.radius<0)&&(this.speed_y*=-1),this.handleCollisions()}handleCollisions(){for(const S of a)if(S!==this){const Q=S.x-this.x,X=S.y-this.y,N=Math.sqrt(Q**2+X**2);if(N<2*this.radius){const R=2*this.radius-N,V=Math.atan2(X,Q);this.x-=.5*R*Math.cos(V),this.y-=.5*R*Math.sin(V);const T=Math.atan2(X,Q),B=Math.atan2(this.speed_y,this.speed_x),$=Math.sqrt(this.speed_x**2+this.speed_y**2),L=Math.sqrt(S.speed_x**2+S.speed_y**2),ne=($*Math.cos(B-T)*(this.radius-S.radius)+2*S.radius*L*Math.cos(T))/(this.radius+S.radius),Be=($*Math.sin(B-T)*(this.radius-S.radius)+2*S.radius*L*Math.sin(T))/(this.radius+S.radius),Ee=(L*Math.cos(T-B)*(S.radius-this.radius)+2*this.radius*$*Math.cos(T))/(this.radius+S.radius),_e=(L*Math.sin(T-B)*(S.radius-this.radius)+2*this.radius*$*Math.sin(T))/(this.radius+S.radius);this.speed_x=ne,this.speed_y=Be,S.speed_x=Ee,S.speed_y=_e}}}draw(S){S.beginPath(),S.arc(this.x,this.y,this.radius,0,Math.PI*2),S.fillStyle=this.color,S.fill(),S.closePath()}}const a=[];for(let k=0;k<t;k++){const S=y(s,c.width-s),Q=y(s,c.height-s),X=_(...n)*q(),N=_(...n)*q(),R=new p(S,Q,X,N,s);a.push(R)}function f(){requestAnimationFrame(f),i.fillStyle=`rgb(${r[0]}, ${r[1]}, ${r[2]})`,i.fillRect(0,0,c.width,c.height);for(const k of a)k.update(),k.draw(i)}f();function y(k,S){return Math.floor(Math.random()*(S-k+1))+k}function _(k,S){return Math.random()*(S-k)+k}function q(){return Math.random()<.5?-1:1}window.addEventListener("resize",()=>{console.log("resize");let k=window.innerWidth,S=window.innerHeight;c.width=k,c.height=S;for(const Q of a)Q.x=D(Q.x,k,Q.radius),Q.y=D(Q.y,S,Q.radius)});function D(k,S,Q){return Math.min(Math.max(k,Q),S-Q)}}),hl.cloneNode(!0)}class dl{url="wss://gabrielmalek.com/v1/api/chessSub";ws;setWS;pingsSinceResponse=0;board;setBoard;setUser;user;pings=0;crownedIndex=-1;constructor(i,t,s,r){this.board=i,this.setBoard=t,this.setUser=r,this.user=s;let[n,p]=Y(this.createWS(this.url));this.ws=n,console.log("ws",this.ws()),this.setWS=p,this.createListeners()}sendChessUpdate(i,t,s,r){let n=new Dr(i.fen,t,s,i.currentTurnColor,r);this.ws().send(JSON.stringify(n))}unloadWebSockets(){window.onbeforeunload=()=>{this.ws().close()}}createWS(i){return new WebSocket(i)}pingWebSocket(i){if(this.ws().readyState!=3&&this.ws().readyState===1){if(this.pings<-10&&(this.pings=0),this.pings>5){this.ws().close(),this.pings=0;return}this.pings++,this.ws().send(JSON.stringify(i))}}beginPinging(i){setInterval(()=>{this.pingWebSocket(i())},3e3)}reconnectWebSocket(){this.setWS(this.createWS(this.url)),this.createListeners()}createListeners(){this.ws().addEventListener("open",()=>{console.log("ws open")}),this.ws().addEventListener("close",()=>{console.log("ws closed"),this.reconnectWebSocket()}),this.ws().addEventListener("message",i=>{this.pings--;let t=JSON.parse(i.data);if(t.users){this.pingsSinceResponse--;let s=new CustomEvent("usersUpdated");s.data=t.users,document.dispatchEvent(s)}if(t.type==="promptForGame"||t.type=="createGame"){let s=new CustomEvent("notification");s.data=t,document.dispatchEvent(s)}if(t.type==="chessGameUpdate"&&(console.log("chess game update",t),t.fen!=this.board().fen)){let s=new re(void 0,t.fen);if(this.pawnsAtEndOfBoard()){console.log("crowned");let n=new CustomEvent("crowned");n.data=s,document.dispatchEvent(n)}}})}sendNotification(i){console.log("sending notification",i),this.ws().send(JSON.stringify(i))}pawnsAtEndOfBoard(){let i=[],t=[];for(let s=0;s<8;s++)this.board().board[s]==="P"&&(i.push(this.board().board[s]),this.crownedIndex=s);for(let s=56;s<64;s++)this.board().board[s]==="p"&&(t.push(this.board().board[s]),this.crownedIndex=s);return i.length>0||t.length>0}close(){this.ws().close()}generateUserid(){let i="";for(let t=0;t<20;t++)i+=Math.floor(Math.random()*10);return i}}class Ys{ws;initialized=!1;virtualCursor;self;opponent;constructor(i,t,s){this.ws=i,this.virtualCursor=this.createVirtualCursor(),this.self=t,this.opponent=s}init(){this.initialized=!0,this.catchWedSocketEvents(),this.sendMouseEvents()}catchWedSocketEvents(){this.ws().addEventListener("message",i=>{if(JSON.parse(i.data).type!="virtualMouseEvent")return;let s=JSON.parse(i.data);this.triggerVirtualMouseEvent(s),console.log("virtual mouse event",s)}),this.ws().addEventListener("close",async()=>{await this.sleep(1e3),this.catchWedSocketEvents()})}triggerVirtualMouseEvent(i){let t,s,r,n;switch(i.eventType){case"pointermove":s=this.setVirtualPosition(i),t=new Event("virtualpointermove"),t.clientX=s.x,t.clientY=s.y,document.dispatchEvent(t);break;case"pointerdown":if(s=this.setVirtualPosition(i),r=document.elementsFromPoint(s.x,s.y),n=r[1],n.classList.contains("canDrag"))return;t=new Event("virtualpointerdown"),t.clientX=s.x,t.clientY=s.y,n.dispatchEvent(t),document.dispatchEvent(t),this.virtualCursor.style.backgroundColor="rgba(255, 0, 0, 0.541)";break;case"pointerup":t=new Event("virtualpointerup"),document.dispatchEvent(t),this.virtualCursor.style.backgroundColor="rgba(255, 0, 0, 0)";break}}sendMouseEvents(){let i=document.querySelector(".chessBoard");document.addEventListener("pointermove",t=>{if(!this.initialized)return;let s=i?.offsetWidth,r=new ki(t.clientX,t.clientY),n=new hn(this.self,this.opponent,r,s,"pointermove");this.ws().send(JSON.stringify(n))}),document.addEventListener("pointerdown",t=>{let s=i?.offsetWidth,r=new ki(t.clientX,t.clientY),n=new hn(this.self,this.opponent,r,s,"pointerdown");this.ws().send(JSON.stringify(n))}),document.addEventListener("pointerup",t=>{let s=i?.offsetWidth,r=new ki(t.clientX,t.clientY),n=new hn(this.self,this.opponent,r,s,"pointerup");this.ws().send(JSON.stringify(n))})}setVirtualPosition(i){let t=document.querySelector(".oponentsCursor"),s=window.innerWidth,r=window.innerHeight,n=i.position.x,p=i.position.y,a=i.screen.x/2,f=i.screen.y/2,y=n-a,_=p-f,q=s/2,D=r/2,k=document.querySelector(".chessBoard").offsetWidth,S=k,Q=k/i.chessBoardWidth,X=S/i.chessBoardWidth,N=y*Q,R=_*X;q=window.innerWidth/2,D=window.innerHeight/2;let V=q-N,T=D-R;return t.style.transform=`translate(${V-this.cursorWidth/2}px, ${T-this.cursorWidth/2}px)`,{x:V,y:T}}createVirtualCursor(){let i=document.createElement("div");return i.classList.add("oponentsCursor"),document.body.appendChild(i),this.cursorWidth=i.offsetHeight,i}async sleep(i){return new Promise(t=>setTimeout(t,i))}}const fl=Ce('<div id="notificationButton" data-bs-toggle="modal" data-bs-target="#notificationModal"></div>'),pl=Ce(`<div class="modal fade " id="notificationModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"><div class="modal-dialog absolute top-[39vh] left-1/ "><div class="modal-content w-[50px] "><div class="modal-header"><h1 class="modal-title fs-5" id="exampleModalLabel">Play Chess with "<!>"</h1><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body">You've recieved a notification from "<!>" to play chess. Do you accept?</div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button><button type="button" class="btn btn-primary">Play Chess</button></div></div></div></div>`);function gl({}){const c=new Audio(al),i=new Audio(cl),[t,s]=Y(new re),[r,n]=Y(!1),[p,a]=Y("");Y([]);const[f,y]=Y();Y(!1);const[_,q]=Y([]),[D,k]=Y(),[S,Q]=Y(),[X,N]=Y([]),[R,V]=Y(!1),[T,B]=Y(),[$,L]=Y(null),ne=new dl(t,s,D,k);Js(()=>{ne.ws()&&ne.close()}),vt(async()=>{window.users=X,Le(),Be(),document.addEventListener("mousedown",P=>_e(P)),document.ws=ne.ws()});function Be(){document.addEventListener("usersUpdated",P=>{let E=P.data.filter(m=>D().id!=m.id);N([...E])}),document.addEventListener("notification",P=>{le(P.data)}),document.addEventListener("updateUser",P=>{console.log("update user event received",P.data.CatUrl);let E=document.querySelector("#mainUser");console.log(E.querySelector(".catLogo")),E.querySelector(".catLogo").style.backgroundImage="nothing"}),document.addEventListener("updateBoard",P=>{qe(P.data)}),document.addEventListener("crowned",P=>{console.log("listened to crowned event"),Ee(P.data)})}function Ee(P){console.log("crowned event received",P);let E=ne.crownedIndex;console.log("crowned index",E);let m=t().getPieceAtBoardIndex(E);console.log("crowned pawn",m);let H=m.type;console.log("previous type",H);let j=P.board[E];console.log("new piece type",j);let fe=j.toLowerCase();m.type=fe,t().board[E]=j;let be=document.getElementById(m.position.position)?.children[0];be?.classList.remove(H),be?.classList.add(j),ce()}function _e(P){P.detail>1&&P.preventDefault()}async function Le(){let P=sessionStorage.getItem("gabrielmalek/chess.data"),E=JSON.parse(P);if(P==null)console.log("session storage null");else{console.log("session storage not null");let m=new Oi(E.id,E.username,E.CatUrl);k(m),V(!0),ne.beginPinging(D),console.log("should be pinging");return}if(P=localStorage.getItem("gabrielmalek/chess.data"),E=JSON.parse(P),P==null)console.log("local storage null");else{let m=new Oi(E.id,E.username,E.CatUrl);if(m.username==""||m.username==null)return;k(m),V(!1)}}function ce(){let P=document.querySelectorAll(".chessSquare"),E=document.querySelectorAll("section.piece");if(p()=="white"){for(let H=0;H<E.length;H++)E[H].remove();let m=[];for(let H=0;H<t().board.length;H++)if(t().board[H]!=" "){for(let j=0;j<E.length;j++)if(E[j].classList.contains(t().board[H])&&!m.includes(j)){P[H].appendChild(E[j]),m.push(j);break}}for(let H=0;H<t().board.length;H++){let j=P[H]?.querySelector(".piece");if(j!=null&&t().board[H]!=" ")if(j.classList.contains(t().board[H]))console.log("piece is correct");else{console.log("something is funky"),console.log("piece",j),console.log("board",t().board[H]);break}else if(j==null&&t().board[H]!=" "){console.log("something is funky"),console.log("piece",j),console.log("board",t().board[H]);for(let fe=0;fe<E.length;fe++)if((E[fe].classList.contains("p")||E[fe].classList.contains("P"))&&!m.includes(fe)){console.log("found piece",E[fe]);let be=E[fe];be.classList.contains("p")?(be.classList.remove("p"),be.classList.add(t().board[H])):(be.classList.remove("P"),be.classList.add(t().board[H])),P[H].appendChild(be)}break}}}else if(p()=="black"){for(let j=0;j<E.length;j++)E[j].remove();let m=[],H=0;for(let j=t().board.length-1;j>=0;j--){if(t().board[j]!=" "){for(let fe=0;fe<E.length;fe++)if(E[fe].classList.contains(t().board[j])&&!m.includes(fe)){P[H].appendChild(E[fe]),m.push(fe);break}}H++}H=0;for(let j=t().board.length-1;j>=0;j--){let fe=P[H]?.querySelector(".piece");if(fe!=null&&t().board[j]!=" "){if(!fe.classList.contains(t().board[j]))break}else if(fe==null&&t().board[j]!=" "){for(let be=0;be<E.length;be++)if((E[be].classList.contains("p")||E[be].classList.contains("P"))&&!m.includes(be)){let Ie=E[be];Ie.classList.contains("p")?(Ie.classList.remove("p"),Ie.classList.add(t().board[j])):(Ie.classList.remove("P"),Ie.classList.add(t().board[j])),P[H].appendChild(Ie)}break}H++}}t().displayBoard()}async function qe(P){if(P===void 0){console.log("updating boards"),ce(),ne.sendChessUpdate(t(),D(),S(),_());return}}function le(P){if(L(P),P.type=="promptForGame")L(P),console.log("prompt for game"),document.querySelector("#notificationButton").click();else if(P.type=="createGame"){console.log("received create game notification",P),L(P),a(P.fromUserColor),n(!0),Q(P.to);let E=new Ys(ne.ws,D(),P.to);E.init(),console.log(E),se(),console.log("in game",r()),console.log("in game color",p())}else P.type=="position"&&console.log(P)}async function J(P){console.log("we must create a game");let E=new Or(P.from,P.to);try{ne.ws().send(JSON.stringify(E)),a(E.fromUserColor==="white"?"black":"white"),n(!0),Q(P.from);let m=new Ys(ne.ws,D(),P.from);m.init(),console.log(m),se()}catch(m){console.log("error: ",m)}}function se(){let P=document.querySelector(".modal-backdrop ");P?.remove()}return[ae(ul,{}),ae(Je,{get when(){return mt(()=>!R())()&&r()==!1},get children(){return ae(Zr,{user:D,setUser:k,setInSession:V,chessWebSocket:ne})}}),ae(Je,{get when(){return mt(()=>!!R())()&&r()==!1},get children(){return ae(ll,{users:X,user:D,setNotificationUser:B,onNotificationReceived:le,chessWebSocket:ne})}}),ae(Je,{get when(){return mt(()=>p()=="white")()&&r()==!0},get children(){return ae(Ur,{board:t,updateBoard:qe,setLastMove:y,lastMove:f,movePieceSound:c,capturePieceSound:i,setMoves:q,moves:_})}}),ae(Je,{get when(){return r()==!1||p()=="black"&&r()==!0},get children(){return ae(zr,{board:t,updateBlackBoard:qe,setLastMove:y,lastMove:f,movePieceSound:c,capturePieceSound:i,setMoves:q,moves:_})}}),ae(Je,{get when(){return r()==!1},get children(){return[fl.cloneNode(!0),(()=>{const P=pl.cloneNode(!0),E=P.firstChild,m=E.firstChild,H=m.firstChild,j=H.firstChild,fe=j.firstChild,be=fe.nextSibling;be.nextSibling;const Ie=H.nextSibling,je=Ie.firstChild,tt=je.nextSibling;tt.nextSibling;const Oe=Ie.nextSibling,at=Oe.firstChild,it=at.nextSibling;return P.style.setProperty("display","none"),Ve(j,()=>T()?.username,be),Ve(Ie,()=>T()?.username,tt),it.$$click=()=>{J($())},P})()]}})]}Gt(["click"]);const ml=()=>ae(gl,{});Er(()=>ae(ml,{}),document.getElementById("root"));
