(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const p of n.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();const st={};function pr(c){st.context=c}const gr=(c,i)=>c===i,mr=Symbol("solid-track"),Vi={equals:gr};let zs=to;const xt=1,Ei=2,Xs={owned:null,cleanups:null,context:null,owner:null};var xe=null;let Lt=null,_e=null,Se=null,ft=null,pn=0;function Ti(c,i){const t=_e,o=xe,r=c.length===0,n=r?Xs:{owned:null,cleanups:null,context:null,owner:i||o},p=r?c:()=>c(()=>At(()=>Ni(n)));xe=n,_e=null;try{return si(p,!0)}finally{_e=t,xe=o}}function z(c,i){i=i?Object.assign({},Vi,i):Vi;const t={value:c,observers:null,observerSlots:null,comparator:i.equals||void 0},o=r=>(typeof r=="function"&&(r=r(t.value)),eo(t,r));return[Zs.bind(t),o]}function mt(c,i,t){const o=gn(c,i,!1,xt);ni(o)}function vr(c,i,t){zs=xr;const o=gn(c,i,!1,xt);o.user=!0,ft?ft.push(o):ni(o)}function pt(c,i,t){t=t?Object.assign({},Vi,t):Vi;const o=gn(c,i,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=t.equals||void 0,ni(o),Zs.bind(o)}function At(c){const i=_e;_e=null;try{return c()}finally{_e=i}}function gt(c){vr(()=>At(c))}function Js(c){return xe===null||(xe.cleanups===null?xe.cleanups=[c]:xe.cleanups.push(c)),c}function wr(c,i){const t=Symbol("context");return{id:t,Provider:Cr(t),defaultValue:c}}function br(c){let i;return(i=so(xe,c.id))!==void 0?i:c.defaultValue}function yr(c){const i=pt(c),t=pt(()=>un(i()));return t.toArray=()=>{const o=t();return Array.isArray(o)?o:o!=null?[o]:[]},t}function Zs(){const c=Lt;if(this.sources&&(this.state||c))if(this.state===xt||c)ni(this);else{const i=Se;Se=null,si(()=>Si(this),!1),Se=i}if(_e){const i=this.observers?this.observers.length:0;_e.sources?(_e.sources.push(this),_e.sourceSlots.push(i)):(_e.sources=[this],_e.sourceSlots=[i]),this.observers?(this.observers.push(_e),this.observerSlots.push(_e.sources.length-1)):(this.observers=[_e],this.observerSlots=[_e.sources.length-1])}return this.value}function eo(c,i,t){let o=c.value;return(!c.comparator||!c.comparator(o,i))&&(c.value=i,c.observers&&c.observers.length&&si(()=>{for(let r=0;r<c.observers.length;r+=1){const n=c.observers[r],p=Lt&&Lt.running;p&&Lt.disposed.has(n),(p&&!n.tState||!p&&!n.state)&&(n.pure?Se.push(n):ft.push(n),n.observers&&io(n)),p||(n.state=xt)}if(Se.length>1e6)throw Se=[],new Error},!1)),i}function ni(c){if(!c.fn)return;Ni(c);const i=xe,t=_e,o=pn;_e=xe=c,_r(c,c.value,o),_e=t,xe=i}function _r(c,i,t){let o;try{o=c.fn(i)}catch(r){c.pure&&(c.state=xt,c.owned&&c.owned.forEach(Ni),c.owned=null),no(r)}(!c.updatedAt||c.updatedAt<=t)&&(c.updatedAt!=null&&"observers"in c?eo(c,o):c.value=o,c.updatedAt=t)}function gn(c,i,t,o=xt,r){const n={fn:c,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:i,owner:xe,context:null,pure:t};return xe===null||xe!==Xs&&(xe.owned?xe.owned.push(n):xe.owned=[n]),n}function Ii(c){const i=Lt;if(c.state===0||i)return;if(c.state===Ei||i)return Si(c);if(c.suspense&&At(c.suspense.inFallback))return c.suspense.effects.push(c);const t=[c];for(;(c=c.owner)&&(!c.updatedAt||c.updatedAt<pn);)(c.state||i)&&t.push(c);for(let o=t.length-1;o>=0;o--)if(c=t[o],c.state===xt||i)ni(c);else if(c.state===Ei||i){const r=Se;Se=null,si(()=>Si(c,t[0]),!1),Se=r}}function si(c,i){if(Se)return c();let t=!1;i||(Se=[]),ft?t=!0:ft=[],pn++;try{const o=c();return Pr(t),o}catch(o){Se||(ft=null),no(o)}}function Pr(c){if(Se&&(to(Se),Se=null),c)return;const i=ft;ft=null,i.length&&si(()=>zs(i),!1)}function to(c){for(let i=0;i<c.length;i++)Ii(c[i])}function xr(c){let i,t=0;for(i=0;i<c.length;i++){const o=c[i];o.user?c[t++]=o:Ii(o)}for(st.context&&pr(),i=0;i<t;i++)Ii(c[i])}function Si(c,i){const t=Lt;c.state=0;for(let o=0;o<c.sources.length;o+=1){const r=c.sources[o];r.sources&&(r.state===xt||t?r!==i&&Ii(r):(r.state===Ei||t)&&Si(r,i))}}function io(c){const i=Lt;for(let t=0;t<c.observers.length;t+=1){const o=c.observers[t];(!o.state||i)&&(o.state=Ei,o.pure?Se.push(o):ft.push(o),o.observers&&io(o))}}function Ni(c){let i;if(c.sources)for(;c.sources.length;){const t=c.sources.pop(),o=c.sourceSlots.pop(),r=t.observers;if(r&&r.length){const n=r.pop(),p=t.observerSlots.pop();o<r.length&&(n.sourceSlots[p]=o,r[o]=n,t.observerSlots[o]=p)}}if(c.owned){for(i=0;i<c.owned.length;i++)Ni(c.owned[i]);c.owned=null}if(c.cleanups){for(i=0;i<c.cleanups.length;i++)c.cleanups[i]();c.cleanups=null}c.state=0,c.context=null}function Ar(c){return c instanceof Error||typeof c=="string"?c:new Error("Unknown error")}function no(c){throw c=Ar(c),c}function so(c,i){return c?c.context&&c.context[i]!==void 0?c.context[i]:so(c.owner,i):void 0}function un(c){if(typeof c=="function"&&!c.length)return un(c());if(Array.isArray(c)){const i=[];for(let t=0;t<c.length;t++){const o=un(c[t]);Array.isArray(o)?i.push.apply(i,o):i.push(o)}return i}return c}function Cr(c,i){return function(o){let r;return mt(()=>r=At(()=>(xe.context={[c]:o.value},yr(()=>o.children))),void 0),r}}const Tr=Symbol("fallback");function qs(c){for(let i=0;i<c.length;i++)c[i]()}function kr(c,i,t={}){let o=[],r=[],n=[],p=0,a=i.length>1?[]:null;return Js(()=>qs(n)),()=>{let f=c()||[],y,_;return f[mr],At(()=>{let D=f.length,V,S,Q,X,N,R,E,C,B;if(D===0)p!==0&&(qs(n),n=[],o=[],r=[],p=0,a&&(a=[])),t.fallback&&(o=[Tr],r[0]=Ti($=>(n[0]=$,t.fallback())),p=1);else if(p===0){for(r=new Array(D),_=0;_<D;_++)o[_]=f[_],r[_]=Ti(q);p=D}else{for(Q=new Array(D),X=new Array(D),a&&(N=new Array(D)),R=0,E=Math.min(p,D);R<E&&o[R]===f[R];R++);for(E=p-1,C=D-1;E>=R&&C>=R&&o[E]===f[C];E--,C--)Q[C]=r[E],X[C]=n[E],a&&(N[C]=a[E]);for(V=new Map,S=new Array(C+1),_=C;_>=R;_--)B=f[_],y=V.get(B),S[_]=y===void 0?-1:y,V.set(B,_);for(y=R;y<=E;y++)B=o[y],_=V.get(B),_!==void 0&&_!==-1?(Q[_]=r[y],X[_]=n[y],a&&(N[_]=a[y]),_=S[_],V.set(B,_)):n[y]();for(_=R;_<D;_++)_ in Q?(r[_]=Q[_],n[_]=X[_],a&&(a[_]=N[_],a[_](_))):r[_]=Ti(q);r=r.slice(0,p=D),o=f.slice(0)}return r});function q(D){if(n[_]=D,a){const[V,S]=z(_);return a[_]=S,i(f[_],V)}return i(f[_])}}}function le(c,i){return At(()=>c(i||{}))}function mn(c){const i="fallback"in c&&{fallback:()=>c.fallback};return pt(kr(()=>c.each,c.children,i||void 0))}function Xe(c){let i=!1;const t=c.keyed,o=pt(()=>c.when,void 0,{equals:(r,n)=>i?r===n:!r==!n});return pt(()=>{const r=o();if(r){const n=c.children,p=typeof n=="function"&&n.length>0;return i=t||p,p?At(()=>n(r)):n}return c.fallback},void 0,void 0)}function Vr(c,i,t){let o=t.length,r=i.length,n=o,p=0,a=0,f=i[r-1].nextSibling,y=null;for(;p<r||a<n;){if(i[p]===t[a]){p++,a++;continue}for(;i[r-1]===t[n-1];)r--,n--;if(r===p){const _=n<o?a?t[a-1].nextSibling:t[n-a]:f;for(;a<n;)c.insertBefore(t[a++],_)}else if(n===a)for(;p<r;)(!y||!y.has(i[p]))&&i[p].remove(),p++;else if(i[p]===t[n-1]&&t[a]===i[r-1]){const _=i[--r].nextSibling;c.insertBefore(t[a++],i[p++].nextSibling),c.insertBefore(t[--n],_),i[r]=t[n]}else{if(!y){y=new Map;let q=a;for(;q<n;)y.set(t[q],q++)}const _=y.get(i[p]);if(_!=null)if(a<_&&_<n){let q=p,D=1,V;for(;++q<r&&q<n&&!((V=y.get(i[q]))==null||V!==_+D);)D++;if(D>_-a){const S=i[p];for(;a<_;)c.insertBefore(t[a++],S)}else c.replaceChild(t[a++],i[p++])}else p++;else i[p++].remove()}}}const js="_$DX_DELEGATE";function Er(c,i,t,o={}){let r;return Ti(n=>{r=n,i===document?c():Ve(i,c(),i.firstChild?null:void 0,t)},o.owner),()=>{r(),i.textContent=""}}function Ae(c,i,t){const o=document.createElement("template");o.innerHTML=c;let r=o.content.firstChild;return t&&(r=r.firstChild),r}function Gt(c,i=window.document){const t=i[js]||(i[js]=new Set);for(let o=0,r=c.length;o<r;o++){const n=c[o];t.has(n)||(t.add(n),i.addEventListener(n,Sr))}}function Mi(c,i,t){t==null?c.removeAttribute(i):c.setAttribute(i,t)}function Bi(c,i){i==null?c.removeAttribute("class"):c.className=i}function Ir(c,i,t,o){if(o)Array.isArray(t)?(c[`$$${i}`]=t[0],c[`$$${i}Data`]=t[1]):c[`$$${i}`]=t;else if(Array.isArray(t)){const r=t[0];c.addEventListener(i,t[0]=n=>r.call(c,t[1],n))}else c.addEventListener(i,t)}function oo(c,i,t){if(!i)return t?Mi(c,"style"):i;const o=c.style;if(typeof i=="string")return o.cssText=i;typeof t=="string"&&(o.cssText=t=void 0),t||(t={}),i||(i={});let r,n;for(n in t)i[n]==null&&o.removeProperty(n),delete t[n];for(n in i)r=i[n],r!==t[n]&&(o.setProperty(n,r),t[n]=r);return t}function Hs(c,i,t){return At(()=>c(i,t))}function Ve(c,i,t,o){if(t!==void 0&&!o&&(o=[]),typeof i!="function")return Li(c,i,o,t);mt(r=>Li(c,i(),r,t),o)}function Sr(c){const i=`$$${c.type}`;let t=c.composedPath&&c.composedPath()[0]||c.target;for(c.target!==t&&Object.defineProperty(c,"target",{configurable:!0,value:t}),Object.defineProperty(c,"currentTarget",{configurable:!0,get(){return t||document}}),st.registry&&!st.done&&(st.done=!0,document.querySelectorAll("[id^=pl-]").forEach(o=>{for(;o&&o.nodeType!==8&&o.nodeValue!=="pl-"+c;){let r=o.nextSibling;o.remove(),o=r}o&&o.remove()}));t;){const o=t[i];if(o&&!t.disabled){const r=t[`${i}Data`];if(r!==void 0?o.call(t,r,c):o.call(t,c),c.cancelBubble)return}t=t._$host||t.parentNode||t.host}}function Li(c,i,t,o,r){for(st.context&&!t&&(t=[...c.childNodes]);typeof t=="function";)t=t();if(i===t)return t;const n=typeof i,p=o!==void 0;if(c=p&&t[0]&&t[0].parentNode||c,n==="string"||n==="number"){if(st.context)return t;if(n==="number"&&(i=i.toString()),p){let a=t[0];a&&a.nodeType===3?a.data=i:a=document.createTextNode(i),t=Ut(c,t,o,a)}else t!==""&&typeof t=="string"?t=c.firstChild.data=i:t=c.textContent=i}else if(i==null||n==="boolean"){if(st.context)return t;t=Ut(c,t,o)}else{if(n==="function")return mt(()=>{let a=i();for(;typeof a=="function";)a=a();t=Li(c,a,t,o)}),()=>t;if(Array.isArray(i)){const a=[],f=t&&Array.isArray(t);if(dn(a,i,t,r))return mt(()=>t=Li(c,a,t,o,!0)),()=>t;if(st.context){if(!a.length)return t;for(let y=0;y<a.length;y++)if(a[y].parentNode)return t=a}if(a.length===0){if(t=Ut(c,t,o),p)return t}else f?t.length===0?Us(c,a,o):Vr(c,t,a):(t&&Ut(c),Us(c,a));t=a}else if(i instanceof Node){if(st.context&&i.parentNode)return t=p?[i]:i;if(Array.isArray(t)){if(p)return t=Ut(c,t,o,i);Ut(c,t,null,i)}else t==null||t===""||!c.firstChild?c.appendChild(i):c.replaceChild(i,c.firstChild);t=i}}return t}function dn(c,i,t,o){let r=!1;for(let n=0,p=i.length;n<p;n++){let a=i[n],f=t&&t[n];if(a instanceof Node)c.push(a);else if(!(a==null||a===!0||a===!1))if(Array.isArray(a))r=dn(c,a,f)||r;else if(typeof a=="function")if(o){for(;typeof a=="function";)a=a();r=dn(c,Array.isArray(a)?a:[a],Array.isArray(f)?f:[f])||r}else c.push(a),r=!0;else{const y=String(a);f&&f.nodeType===3&&f.data===y?c.push(f):c.push(document.createTextNode(y))}}return r}function Us(c,i,t=null){for(let o=0,r=i.length;o<r;o++)c.insertBefore(i[o],t)}function Ut(c,i,t,o){if(t===void 0)return c.textContent="";const r=o||document.createTextNode("");if(i.length){let n=!1;for(let p=i.length-1;p>=0;p--){const a=i[p];if(r!==a){const f=a.parentNode===c;!n&&!p?f?c.replaceChild(r,a):c.insertBefore(r,t):f&&a.remove()}else n=!0}}else c.insertBefore(r,t);return[r]}var Mr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Br={exports:{}};/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(c,i){(function(t,o){c.exports=o()})(Mr,function(){const t="transitionend",o=l=>{let e=l.getAttribute("data-bs-target");if(!e||e==="#"){let s=l.getAttribute("href");if(!s||!s.includes("#")&&!s.startsWith("."))return null;s.includes("#")&&!s.startsWith("#")&&(s=`#${s.split("#")[1]}`),e=s&&s!=="#"?s.trim():null}return e},r=l=>{const e=o(l);return e&&document.querySelector(e)?e:null},n=l=>{const e=o(l);return e?document.querySelector(e):null},p=l=>{l.dispatchEvent(new Event(t))},a=l=>!(!l||typeof l!="object")&&(l.jquery!==void 0&&(l=l[0]),l.nodeType!==void 0),f=l=>a(l)?l.jquery?l[0]:l:typeof l=="string"&&l.length>0?document.querySelector(l):null,y=l=>{if(!a(l)||l.getClientRects().length===0)return!1;const e=getComputedStyle(l).getPropertyValue("visibility")==="visible",s=l.closest("details:not([open])");if(!s)return e;if(s!==l){const h=l.closest("summary");if(h&&h.parentNode!==s||h===null)return!1}return e},_=l=>!l||l.nodeType!==Node.ELEMENT_NODE||!!l.classList.contains("disabled")||(l.disabled!==void 0?l.disabled:l.hasAttribute("disabled")&&l.getAttribute("disabled")!=="false"),q=l=>{if(!document.documentElement.attachShadow)return null;if(typeof l.getRootNode=="function"){const e=l.getRootNode();return e instanceof ShadowRoot?e:null}return l instanceof ShadowRoot?l:l.parentNode?q(l.parentNode):null},D=()=>{},V=l=>{l.offsetHeight},S=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Q=[],X=()=>document.documentElement.dir==="rtl",N=l=>{var e;e=()=>{const s=S();if(s){const h=l.NAME,u=s.fn[h];s.fn[h]=l.jQueryInterface,s.fn[h].Constructor=l,s.fn[h].noConflict=()=>(s.fn[h]=u,l.jQueryInterface)}},document.readyState==="loading"?(Q.length||document.addEventListener("DOMContentLoaded",()=>{for(const s of Q)s()}),Q.push(e)):e()},R=l=>{typeof l=="function"&&l()},E=(l,e,s=!0)=>{if(!s)return void R(l);const h=(v=>{if(!v)return 0;let{transitionDuration:b,transitionDelay:x}=window.getComputedStyle(v);const I=Number.parseFloat(b),M=Number.parseFloat(x);return I||M?(b=b.split(",")[0],x=x.split(",")[0],1e3*(Number.parseFloat(b)+Number.parseFloat(x))):0})(e)+5;let u=!1;const d=({target:v})=>{v===e&&(u=!0,e.removeEventListener(t,d),R(l))};e.addEventListener(t,d),setTimeout(()=>{u||p(e)},h)},C=(l,e,s,h)=>{const u=l.length;let d=l.indexOf(e);return d===-1?!s&&h?l[u-1]:l[0]:(d+=s?1:-1,h&&(d=(d+u)%u),l[Math.max(0,Math.min(d,u-1))])},B=/[^.]*(?=\..*)\.|.*/,$=/\..*/,L=/::\d+$/,ne={};let Ce=1;const Ee={mouseenter:"mouseover",mouseleave:"mouseout"},ye=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Me(l,e){return e&&`${e}::${Ce++}`||l.uidEvent||Ce++}function re(l){const e=Me(l);return l.uidEvent=e,ne[e]=ne[e]||{},ne[e]}function qe(l,e,s=null){return Object.values(l).find(h=>h.callable===e&&h.delegationSelector===s)}function ae(l,e,s){const h=typeof e=="string",u=h?s:e||s;let d=G(l);return ye.has(d)||(d=l),[h,u,d]}function J(l,e,s,h,u){if(typeof e!="string"||!l)return;let[d,v,b]=ae(e,s,h);e in Ee&&(v=(W=>function(H){if(!H.relatedTarget||H.relatedTarget!==H.delegateTarget&&!H.delegateTarget.contains(H.relatedTarget))return W.call(this,H)})(v));const x=re(l),I=x[b]||(x[b]={}),M=qe(I,v,d?s:null);if(M)return void(M.oneOff=M.oneOff&&u);const T=Me(v,e.replace(B,"")),ee=d?function(F,W,H){return function K(fe){const me=F.querySelectorAll(W);for(let{target:ie}=fe;ie&&ie!==this;ie=ie.parentNode)for(const he of me)if(he===ie)return U(fe,{delegateTarget:ie}),K.oneOff&&g.off(F,fe.type,W,H),H.apply(ie,[fe])}}(l,s,v):function(F,W){return function H(K){return U(K,{delegateTarget:F}),H.oneOff&&g.off(F,K.type,W),W.apply(F,[K])}}(l,v);ee.delegationSelector=d?s:null,ee.callable=v,ee.oneOff=u,ee.uidEvent=T,I[T]=ee,l.addEventListener(b,ee,d)}function P(l,e,s,h,u){const d=qe(e[s],h,u);d&&(l.removeEventListener(s,d,Boolean(u)),delete e[s][d.uidEvent])}function k(l,e,s,h){const u=e[s]||{};for(const d of Object.keys(u))if(d.includes(h)){const v=u[d];P(l,e,s,v.callable,v.delegationSelector)}}function G(l){return l=l.replace($,""),Ee[l]||l}const g={on(l,e,s,h){J(l,e,s,h,!1)},one(l,e,s,h){J(l,e,s,h,!0)},off(l,e,s,h){if(typeof e!="string"||!l)return;const[u,d,v]=ae(e,s,h),b=v!==e,x=re(l),I=x[v]||{},M=e.startsWith(".");if(d===void 0){if(M)for(const T of Object.keys(x))k(l,x,T,e.slice(1));for(const T of Object.keys(I)){const ee=T.replace(L,"");if(!b||e.includes(ee)){const F=I[T];P(l,x,v,F.callable,F.delegationSelector)}}}else{if(!Object.keys(I).length)return;P(l,x,v,d,u?s:null)}},trigger(l,e,s){if(typeof e!="string"||!l)return null;const h=S();let u=null,d=!0,v=!0,b=!1;e!==G(e)&&h&&(u=h.Event(e,s),h(l).trigger(u),d=!u.isPropagationStopped(),v=!u.isImmediatePropagationStopped(),b=u.isDefaultPrevented());let x=new Event(e,{bubbles:d,cancelable:!0});return x=U(x,s),b&&x.preventDefault(),v&&l.dispatchEvent(x),x.defaultPrevented&&u&&u.preventDefault(),x}};function U(l,e){for(const[s,h]of Object.entries(e||{}))try{l[s]=h}catch{Object.defineProperty(l,s,{configurable:!0,get:()=>h})}return l}const ce=new Map,we={set(l,e,s){ce.has(l)||ce.set(l,new Map);const h=ce.get(l);h.has(e)||h.size===0?h.set(e,s):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(h.keys())[0]}.`)},get:(l,e)=>ce.has(l)&&ce.get(l).get(e)||null,remove(l,e){if(!ce.has(l))return;const s=ce.get(l);s.delete(e),s.size===0&&ce.delete(l)}};function Be(l){if(l==="true")return!0;if(l==="false")return!1;if(l===Number(l).toString())return Number(l);if(l===""||l==="null")return null;if(typeof l!="string")return l;try{return JSON.parse(decodeURIComponent(l))}catch{return l}}function Ct(l){return l.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Fe={setDataAttribute(l,e,s){l.setAttribute(`data-bs-${Ct(e)}`,s)},removeDataAttribute(l,e){l.removeAttribute(`data-bs-${Ct(e)}`)},getDataAttributes(l){if(!l)return{};const e={},s=Object.keys(l.dataset).filter(h=>h.startsWith("bs")&&!h.startsWith("bsConfig"));for(const h of s){let u=h.replace(/^bs/,"");u=u.charAt(0).toLowerCase()+u.slice(1,u.length),e[u]=Be(l.dataset[h])}return e},getDataAttribute:(l,e)=>Be(l.getAttribute(`data-bs-${Ct(e)}`))};class ot{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,s){const h=a(s)?Fe.getDataAttribute(s,"config"):{};return{...this.constructor.Default,...typeof h=="object"?h:{},...a(s)?Fe.getDataAttributes(s):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,s=this.constructor.DefaultType){for(const u of Object.keys(s)){const d=s[u],v=e[u],b=a(v)?"element":(h=v)==null?`${h}`:Object.prototype.toString.call(h).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(d).test(b))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${u}" provided type "${b}" but expected type "${d}".`)}var h}}class Le extends ot{constructor(e,s){super(),(e=f(e))&&(this._element=e,this._config=this._getConfig(s),we.set(this._element,this.constructor.DATA_KEY,this))}dispose(){we.remove(this._element,this.constructor.DATA_KEY),g.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,s,h=!0){E(e,s,h)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return we.get(f(e),this.DATA_KEY)}static getOrCreateInstance(e,s={}){return this.getInstance(e)||new this(e,typeof s=="object"?s:null)}static get VERSION(){return"5.2.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const rt=(l,e="hide")=>{const s=`click.dismiss${l.EVENT_KEY}`,h=l.NAME;g.on(document,s,`[data-bs-dismiss="${h}"]`,function(u){if(["A","AREA"].includes(this.tagName)&&u.preventDefault(),_(this))return;const d=n(this)||this.closest(`.${h}`);l.getOrCreateInstance(d)[e]()})};class vt extends Le{static get NAME(){return"alert"}close(){if(g.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),g.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(e){return this.each(function(){const s=vt.getOrCreateInstance(this);if(typeof e=="string"){if(s[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);s[e](this)}})}}rt(vt,"close"),N(vt);const Yt='[data-bs-toggle="button"]';class wt extends Le{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each(function(){const s=wt.getOrCreateInstance(this);e==="toggle"&&s[e]()})}}g.on(document,"click.bs.button.data-api",Yt,l=>{l.preventDefault();const e=l.target.closest(Yt);wt.getOrCreateInstance(e).toggle()}),N(wt);const Y={find:(l,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,l)),findOne:(l,e=document.documentElement)=>Element.prototype.querySelector.call(e,l),children:(l,e)=>[].concat(...l.children).filter(s=>s.matches(e)),parents(l,e){const s=[];let h=l.parentNode.closest(e);for(;h;)s.push(h),h=h.parentNode.closest(e);return s},prev(l,e){let s=l.previousElementSibling;for(;s;){if(s.matches(e))return[s];s=s.previousElementSibling}return[]},next(l,e){let s=l.nextElementSibling;for(;s;){if(s.matches(e))return[s];s=s.nextElementSibling}return[]},focusableChildren(l){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(s=>`${s}:not([tabindex^="-"])`).join(",");return this.find(e,l).filter(s=>!_(s)&&y(s))}},oi={endCallback:null,leftCallback:null,rightCallback:null},ri={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class O extends ot{constructor(e,s){super(),this._element=e,e&&O.isSupported()&&(this._config=this._getConfig(s),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return oi}static get DefaultType(){return ri}static get NAME(){return"swipe"}dispose(){g.off(this._element,".bs.swipe")}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),R(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const s=e/this._deltaX;this._deltaX=0,s&&R(s>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(g.on(this._element,"pointerdown.bs.swipe",e=>this._start(e)),g.on(this._element,"pointerup.bs.swipe",e=>this._end(e)),this._element.classList.add("pointer-event")):(g.on(this._element,"touchstart.bs.swipe",e=>this._start(e)),g.on(this._element,"touchmove.bs.swipe",e=>this._move(e)),g.on(this._element,"touchend.bs.swipe",e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType==="pen"||e.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const m="next",Z="prev",j="left",bt="right",Te="slid.bs.carousel",Ie="carousel",Qe="active",lt={ArrowLeft:bt,ArrowRight:j},at={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ct={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class We extends Le{constructor(e,s){super(e,s),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Y.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Ie&&this.cycle()}static get Default(){return at}static get DefaultType(){return ct}static get NAME(){return"carousel"}next(){this._slide(m)}nextWhenVisible(){!document.hidden&&y(this._element)&&this.next()}prev(){this._slide(Z)}pause(){this._isSliding&&p(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?g.one(this._element,Te,()=>this.cycle()):this.cycle())}to(e){const s=this._getItems();if(e>s.length-1||e<0)return;if(this._isSliding)return void g.one(this._element,Te,()=>this.to(e));const h=this._getItemIndex(this._getActive());if(h===e)return;const u=e>h?m:Z;this._slide(u,s[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&g.on(this._element,"keydown.bs.carousel",e=>this._keydown(e)),this._config.pause==="hover"&&(g.on(this._element,"mouseenter.bs.carousel",()=>this.pause()),g.on(this._element,"mouseleave.bs.carousel",()=>this._maybeEnableCycle())),this._config.touch&&O.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of Y.find(".carousel-item img",this._element))g.on(s,"dragstart.bs.carousel",h=>h.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(j)),rightCallback:()=>this._slide(this._directionToOrder(bt)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new O(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const s=lt[e.key];s&&(e.preventDefault(),this._slide(this._directionToOrder(s)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const s=Y.findOne(".active",this._indicatorsElement);s.classList.remove(Qe),s.removeAttribute("aria-current");const h=Y.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);h&&(h.classList.add(Qe),h.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const s=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=s||this._config.defaultInterval}_slide(e,s=null){if(this._isSliding)return;const h=this._getActive(),u=e===m,d=s||C(this._getItems(),h,u,this._config.wrap);if(d===h)return;const v=this._getItemIndex(d),b=T=>g.trigger(this._element,T,{relatedTarget:d,direction:this._orderToDirection(e),from:this._getItemIndex(h),to:v});if(b("slide.bs.carousel").defaultPrevented||!h||!d)return;const x=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(v),this._activeElement=d;const I=u?"carousel-item-start":"carousel-item-end",M=u?"carousel-item-next":"carousel-item-prev";d.classList.add(M),V(d),h.classList.add(I),d.classList.add(I),this._queueCallback(()=>{d.classList.remove(I,M),d.classList.add(Qe),h.classList.remove(Qe,M,I),this._isSliding=!1,b(Te)},h,this._isAnimated()),x&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Y.findOne(".active.carousel-item",this._element)}_getItems(){return Y.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return X()?e===j?Z:m:e===j?m:Z}_orderToDirection(e){return X()?e===Z?j:bt:e===Z?bt:j}static jQueryInterface(e){return this.each(function(){const s=We.getOrCreateInstance(this,e);if(typeof e!="number"){if(typeof e=="string"){if(s[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);s[e]()}}else s.to(e)})}}g.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(l){const e=n(this);if(!e||!e.classList.contains(Ie))return;l.preventDefault();const s=We.getOrCreateInstance(e),h=this.getAttribute("data-bs-slide-to");return h?(s.to(h),void s._maybeEnableCycle()):Fe.getDataAttribute(this,"slide")==="next"?(s.next(),void s._maybeEnableCycle()):(s.prev(),void s._maybeEnableCycle())}),g.on(window,"load.bs.carousel.data-api",()=>{const l=Y.find('[data-bs-ride="carousel"]');for(const e of l)We.getOrCreateInstance(e)}),N(We);const ht="show",li="collapse",ai="collapsing",Di='[data-bs-toggle="collapse"]',ho={parent:null,toggle:!0},uo={parent:"(null|element)",toggle:"boolean"};class Ot extends Le{constructor(e,s){super(e,s),this._isTransitioning=!1,this._triggerArray=[];const h=Y.find(Di);for(const u of h){const d=r(u),v=Y.find(d).filter(b=>b===this._element);d!==null&&v.length&&this._triggerArray.push(u)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ho}static get DefaultType(){return uo}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(u=>u!==this._element).map(u=>Ot.getOrCreateInstance(u,{toggle:!1}))),e.length&&e[0]._isTransitioning||g.trigger(this._element,"show.bs.collapse").defaultPrevented)return;for(const u of e)u.hide();const s=this._getDimension();this._element.classList.remove(li),this._element.classList.add(ai),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const h=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ai),this._element.classList.add(li,ht),this._element.style[s]="",g.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[s]=`${this._element[h]}px`}hide(){if(this._isTransitioning||!this._isShown()||g.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,V(this._element),this._element.classList.add(ai),this._element.classList.remove(li,ht);for(const s of this._triggerArray){const h=n(s);h&&!this._isShown(h)&&this._addAriaAndCollapsedClass([s],!1)}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ai),this._element.classList.add(li),g.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(e=this._element){return e.classList.contains(ht)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=f(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Di);for(const s of e){const h=n(s);h&&this._addAriaAndCollapsedClass([s],this._isShown(h))}}_getFirstLevelChildren(e){const s=Y.find(":scope .collapse .collapse",this._config.parent);return Y.find(e,this._config.parent).filter(h=>!s.includes(h))}_addAriaAndCollapsedClass(e,s){if(e.length)for(const h of e)h.classList.toggle("collapsed",!s),h.setAttribute("aria-expanded",s)}static jQueryInterface(e){const s={};return typeof e=="string"&&/show|hide/.test(e)&&(s.toggle=!1),this.each(function(){const h=Ot.getOrCreateInstance(this,s);if(typeof e=="string"){if(h[e]===void 0)throw new TypeError(`No method named "${e}"`);h[e]()}})}}g.on(document,"click.bs.collapse.data-api",Di,function(l){(l.target.tagName==="A"||l.delegateTarget&&l.delegateTarget.tagName==="A")&&l.preventDefault();const e=r(this),s=Y.find(e);for(const h of s)Ot.getOrCreateInstance(h,{toggle:!1}).toggle()}),N(Ot);var Oe="top",je="bottom",He="right",Ne="left",ci="auto",Nt=[Oe,je,He,Ne],Tt="start",Dt="end",vn="clippingParents",Ri="viewport",Rt="popper",wn="reference",$i=Nt.reduce(function(l,e){return l.concat([e+"-"+Tt,e+"-"+Dt])},[]),Fi=[].concat(Nt,[ci]).reduce(function(l,e){return l.concat([e,e+"-"+Tt,e+"-"+Dt])},[]),bn="beforeRead",yn="read",_n="afterRead",Pn="beforeMain",xn="main",An="afterMain",Cn="beforeWrite",Tn="write",kn="afterWrite",Vn=[bn,yn,_n,Pn,xn,An,Cn,Tn,kn];function et(l){return l?(l.nodeName||"").toLowerCase():null}function Ke(l){if(l==null)return window;if(l.toString()!=="[object Window]"){var e=l.ownerDocument;return e&&e.defaultView||window}return l}function kt(l){return l instanceof Ke(l).Element||l instanceof Element}function Ge(l){return l instanceof Ke(l).HTMLElement||l instanceof HTMLElement}function qi(l){return typeof ShadowRoot<"u"&&(l instanceof Ke(l).ShadowRoot||l instanceof ShadowRoot)}const ji={name:"applyStyles",enabled:!0,phase:"write",fn:function(l){var e=l.state;Object.keys(e.elements).forEach(function(s){var h=e.styles[s]||{},u=e.attributes[s]||{},d=e.elements[s];Ge(d)&&et(d)&&(Object.assign(d.style,h),Object.keys(u).forEach(function(v){var b=u[v];b===!1?d.removeAttribute(v):d.setAttribute(v,b===!0?"":b)}))})},effect:function(l){var e=l.state,s={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,s.popper),e.styles=s,e.elements.arrow&&Object.assign(e.elements.arrow.style,s.arrow),function(){Object.keys(e.elements).forEach(function(h){var u=e.elements[h],d=e.attributes[h]||{},v=Object.keys(e.styles.hasOwnProperty(h)?e.styles[h]:s[h]).reduce(function(b,x){return b[x]="",b},{});Ge(u)&&et(u)&&(Object.assign(u.style,v),Object.keys(d).forEach(function(b){u.removeAttribute(b)}))})}},requires:["computeStyles"]};function tt(l){return l.split("-")[0]}var Vt=Math.max,hi=Math.min,$t=Math.round;function Hi(){var l=navigator.userAgentData;return l!=null&&l.brands?l.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function En(){return!/^((?!chrome|android).)*safari/i.test(Hi())}function Ft(l,e,s){e===void 0&&(e=!1),s===void 0&&(s=!1);var h=l.getBoundingClientRect(),u=1,d=1;e&&Ge(l)&&(u=l.offsetWidth>0&&$t(h.width)/l.offsetWidth||1,d=l.offsetHeight>0&&$t(h.height)/l.offsetHeight||1);var v=(kt(l)?Ke(l):window).visualViewport,b=!En()&&s,x=(h.left+(b&&v?v.offsetLeft:0))/u,I=(h.top+(b&&v?v.offsetTop:0))/d,M=h.width/u,T=h.height/d;return{width:M,height:T,top:I,right:x+M,bottom:I+T,left:x,x,y:I}}function Ui(l){var e=Ft(l),s=l.offsetWidth,h=l.offsetHeight;return Math.abs(e.width-s)<=1&&(s=e.width),Math.abs(e.height-h)<=1&&(h=e.height),{x:l.offsetLeft,y:l.offsetTop,width:s,height:h}}function In(l,e){var s=e.getRootNode&&e.getRootNode();if(l.contains(e))return!0;if(s&&qi(s)){var h=e;do{if(h&&l.isSameNode(h))return!0;h=h.parentNode||h.host}while(h)}return!1}function ut(l){return Ke(l).getComputedStyle(l)}function fo(l){return["table","td","th"].indexOf(et(l))>=0}function yt(l){return((kt(l)?l.ownerDocument:l.document)||window.document).documentElement}function ui(l){return et(l)==="html"?l:l.assignedSlot||l.parentNode||(qi(l)?l.host:null)||yt(l)}function Sn(l){return Ge(l)&&ut(l).position!=="fixed"?l.offsetParent:null}function zt(l){for(var e=Ke(l),s=Sn(l);s&&fo(s)&&ut(s).position==="static";)s=Sn(s);return s&&(et(s)==="html"||et(s)==="body"&&ut(s).position==="static")?e:s||function(h){var u=/firefox/i.test(Hi());if(/Trident/i.test(Hi())&&Ge(h)&&ut(h).position==="fixed")return null;var d=ui(h);for(qi(d)&&(d=d.host);Ge(d)&&["html","body"].indexOf(et(d))<0;){var v=ut(d);if(v.transform!=="none"||v.perspective!=="none"||v.contain==="paint"||["transform","perspective"].indexOf(v.willChange)!==-1||u&&v.willChange==="filter"||u&&v.filter&&v.filter!=="none")return d;d=d.parentNode}return null}(l)||e}function Qi(l){return["top","bottom"].indexOf(l)>=0?"x":"y"}function Xt(l,e,s){return Vt(l,hi(e,s))}function Mn(l){return Object.assign({},{top:0,right:0,bottom:0,left:0},l)}function Bn(l,e){return e.reduce(function(s,h){return s[h]=l,s},{})}const Ln={name:"arrow",enabled:!0,phase:"main",fn:function(l){var e,s=l.state,h=l.name,u=l.options,d=s.elements.arrow,v=s.modifiersData.popperOffsets,b=tt(s.placement),x=Qi(b),I=[Ne,He].indexOf(b)>=0?"height":"width";if(d&&v){var M=function(pe,de){return Mn(typeof(pe=typeof pe=="function"?pe(Object.assign({},de.rects,{placement:de.placement})):pe)!="number"?pe:Bn(pe,Nt))}(u.padding,s),T=Ui(d),ee=x==="y"?Oe:Ne,F=x==="y"?je:He,W=s.rects.reference[I]+s.rects.reference[x]-v[x]-s.rects.popper[I],H=v[x]-s.rects.reference[x],K=zt(d),fe=K?x==="y"?K.clientHeight||0:K.clientWidth||0:0,me=W/2-H/2,ie=M[ee],he=fe-T[I]-M[F],te=fe/2-T[I]/2+me,se=Xt(ie,te,he),ue=x;s.modifiersData[h]=((e={})[ue]=se,e.centerOffset=se-te,e)}},effect:function(l){var e=l.state,s=l.options.element,h=s===void 0?"[data-popper-arrow]":s;h!=null&&(typeof h!="string"||(h=e.elements.popper.querySelector(h)))&&In(e.elements.popper,h)&&(e.elements.arrow=h)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function qt(l){return l.split("-")[1]}var po={top:"auto",right:"auto",bottom:"auto",left:"auto"};function On(l){var e,s=l.popper,h=l.popperRect,u=l.placement,d=l.variation,v=l.offsets,b=l.position,x=l.gpuAcceleration,I=l.adaptive,M=l.roundOffsets,T=l.isFixed,ee=v.x,F=ee===void 0?0:ee,W=v.y,H=W===void 0?0:W,K=typeof M=="function"?M({x:F,y:H}):{x:F,y:H};F=K.x,H=K.y;var fe=v.hasOwnProperty("x"),me=v.hasOwnProperty("y"),ie=Ne,he=Oe,te=window;if(I){var se=zt(s),ue="clientHeight",pe="clientWidth";se===Ke(s)&&ut(se=yt(s)).position!=="static"&&b==="absolute"&&(ue="scrollHeight",pe="scrollWidth"),(u===Oe||(u===Ne||u===He)&&d===Dt)&&(he=je,H-=(T&&se===te&&te.visualViewport?te.visualViewport.height:se[ue])-h.height,H*=x?1:-1),u!==Ne&&(u!==Oe&&u!==je||d!==Dt)||(ie=He,F-=(T&&se===te&&te.visualViewport?te.visualViewport.width:se[pe])-h.width,F*=x?1:-1)}var de,be=Object.assign({position:b},I&&po),Ue=M===!0?function(Ze){var De=Ze.x,Ye=Ze.y,Re=window.devicePixelRatio||1;return{x:$t(De*Re)/Re||0,y:$t(Ye*Re)/Re||0}}({x:F,y:H}):{x:F,y:H};return F=Ue.x,H=Ue.y,x?Object.assign({},be,((de={})[he]=me?"0":"",de[ie]=fe?"0":"",de.transform=(te.devicePixelRatio||1)<=1?"translate("+F+"px, "+H+"px)":"translate3d("+F+"px, "+H+"px, 0)",de)):Object.assign({},be,((e={})[he]=me?H+"px":"",e[ie]=fe?F+"px":"",e.transform="",e))}const Wi={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(l){var e=l.state,s=l.options,h=s.gpuAcceleration,u=h===void 0||h,d=s.adaptive,v=d===void 0||d,b=s.roundOffsets,x=b===void 0||b,I={placement:tt(e.placement),variation:qt(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:u,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,On(Object.assign({},I,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:v,roundOffsets:x})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,On(Object.assign({},I,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:x})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var di={passive:!0};const Ki={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(l){var e=l.state,s=l.instance,h=l.options,u=h.scroll,d=u===void 0||u,v=h.resize,b=v===void 0||v,x=Ke(e.elements.popper),I=[].concat(e.scrollParents.reference,e.scrollParents.popper);return d&&I.forEach(function(M){M.addEventListener("scroll",s.update,di)}),b&&x.addEventListener("resize",s.update,di),function(){d&&I.forEach(function(M){M.removeEventListener("scroll",s.update,di)}),b&&x.removeEventListener("resize",s.update,di)}},data:{}};var go={left:"right",right:"left",bottom:"top",top:"bottom"};function fi(l){return l.replace(/left|right|bottom|top/g,function(e){return go[e]})}var mo={start:"end",end:"start"};function Nn(l){return l.replace(/start|end/g,function(e){return mo[e]})}function Gi(l){var e=Ke(l);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Yi(l){return Ft(yt(l)).left+Gi(l).scrollLeft}function zi(l){var e=ut(l),s=e.overflow,h=e.overflowX,u=e.overflowY;return/auto|scroll|overlay|hidden/.test(s+u+h)}function Dn(l){return["html","body","#document"].indexOf(et(l))>=0?l.ownerDocument.body:Ge(l)&&zi(l)?l:Dn(ui(l))}function Jt(l,e){var s;e===void 0&&(e=[]);var h=Dn(l),u=h===((s=l.ownerDocument)==null?void 0:s.body),d=Ke(h),v=u?[d].concat(d.visualViewport||[],zi(h)?h:[]):h,b=e.concat(v);return u?b:b.concat(Jt(ui(v)))}function Xi(l){return Object.assign({},l,{left:l.x,top:l.y,right:l.x+l.width,bottom:l.y+l.height})}function Rn(l,e,s){return e===Ri?Xi(function(h,u){var d=Ke(h),v=yt(h),b=d.visualViewport,x=v.clientWidth,I=v.clientHeight,M=0,T=0;if(b){x=b.width,I=b.height;var ee=En();(ee||!ee&&u==="fixed")&&(M=b.offsetLeft,T=b.offsetTop)}return{width:x,height:I,x:M+Yi(h),y:T}}(l,s)):kt(e)?function(h,u){var d=Ft(h,!1,u==="fixed");return d.top=d.top+h.clientTop,d.left=d.left+h.clientLeft,d.bottom=d.top+h.clientHeight,d.right=d.left+h.clientWidth,d.width=h.clientWidth,d.height=h.clientHeight,d.x=d.left,d.y=d.top,d}(e,s):Xi(function(h){var u,d=yt(h),v=Gi(h),b=(u=h.ownerDocument)==null?void 0:u.body,x=Vt(d.scrollWidth,d.clientWidth,b?b.scrollWidth:0,b?b.clientWidth:0),I=Vt(d.scrollHeight,d.clientHeight,b?b.scrollHeight:0,b?b.clientHeight:0),M=-v.scrollLeft+Yi(h),T=-v.scrollTop;return ut(b||d).direction==="rtl"&&(M+=Vt(d.clientWidth,b?b.clientWidth:0)-x),{width:x,height:I,x:M,y:T}}(yt(l)))}function $n(l){var e,s=l.reference,h=l.element,u=l.placement,d=u?tt(u):null,v=u?qt(u):null,b=s.x+s.width/2-h.width/2,x=s.y+s.height/2-h.height/2;switch(d){case Oe:e={x:b,y:s.y-h.height};break;case je:e={x:b,y:s.y+s.height};break;case He:e={x:s.x+s.width,y:x};break;case Ne:e={x:s.x-h.width,y:x};break;default:e={x:s.x,y:s.y}}var I=d?Qi(d):null;if(I!=null){var M=I==="y"?"height":"width";switch(v){case Tt:e[I]=e[I]-(s[M]/2-h[M]/2);break;case Dt:e[I]=e[I]+(s[M]/2-h[M]/2)}}return e}function jt(l,e){e===void 0&&(e={});var s=e,h=s.placement,u=h===void 0?l.placement:h,d=s.strategy,v=d===void 0?l.strategy:d,b=s.boundary,x=b===void 0?vn:b,I=s.rootBoundary,M=I===void 0?Ri:I,T=s.elementContext,ee=T===void 0?Rt:T,F=s.altBoundary,W=F!==void 0&&F,H=s.padding,K=H===void 0?0:H,fe=Mn(typeof K!="number"?K:Bn(K,Nt)),me=ee===Rt?wn:Rt,ie=l.rects.popper,he=l.elements[W?me:ee],te=function(De,Ye,Re,ke){var it=Ye==="clippingParents"?function(ge){var $e=Jt(ui(ge)),ze=["absolute","fixed"].indexOf(ut(ge).position)>=0&&Ge(ge)?zt(ge):ge;return kt(ze)?$e.filter(function(_t){return kt(_t)&&In(_t,ze)&&et(_t)!=="body"}):[]}(De):[].concat(Ye),nt=[].concat(it,[Re]),Ht=nt[0],Pe=nt.reduce(function(ge,$e){var ze=Rn(De,$e,ke);return ge.top=Vt(ze.top,ge.top),ge.right=hi(ze.right,ge.right),ge.bottom=hi(ze.bottom,ge.bottom),ge.left=Vt(ze.left,ge.left),ge},Rn(De,Ht,ke));return Pe.width=Pe.right-Pe.left,Pe.height=Pe.bottom-Pe.top,Pe.x=Pe.left,Pe.y=Pe.top,Pe}(kt(he)?he:he.contextElement||yt(l.elements.popper),x,M,v),se=Ft(l.elements.reference),ue=$n({reference:se,element:ie,strategy:"absolute",placement:u}),pe=Xi(Object.assign({},ie,ue)),de=ee===Rt?pe:se,be={top:te.top-de.top+fe.top,bottom:de.bottom-te.bottom+fe.bottom,left:te.left-de.left+fe.left,right:de.right-te.right+fe.right},Ue=l.modifiersData.offset;if(ee===Rt&&Ue){var Ze=Ue[u];Object.keys(be).forEach(function(De){var Ye=[He,je].indexOf(De)>=0?1:-1,Re=[Oe,je].indexOf(De)>=0?"y":"x";be[De]+=Ze[Re]*Ye})}return be}function vo(l,e){e===void 0&&(e={});var s=e,h=s.placement,u=s.boundary,d=s.rootBoundary,v=s.padding,b=s.flipVariations,x=s.allowedAutoPlacements,I=x===void 0?Fi:x,M=qt(h),T=M?b?$i:$i.filter(function(W){return qt(W)===M}):Nt,ee=T.filter(function(W){return I.indexOf(W)>=0});ee.length===0&&(ee=T);var F=ee.reduce(function(W,H){return W[H]=jt(l,{placement:H,boundary:u,rootBoundary:d,padding:v})[tt(H)],W},{});return Object.keys(F).sort(function(W,H){return F[W]-F[H]})}const Fn={name:"flip",enabled:!0,phase:"main",fn:function(l){var e=l.state,s=l.options,h=l.name;if(!e.modifiersData[h]._skip){for(var u=s.mainAxis,d=u===void 0||u,v=s.altAxis,b=v===void 0||v,x=s.fallbackPlacements,I=s.padding,M=s.boundary,T=s.rootBoundary,ee=s.altBoundary,F=s.flipVariations,W=F===void 0||F,H=s.allowedAutoPlacements,K=e.options.placement,fe=tt(K),me=x||(fe!==K&&W?function(ge){if(tt(ge)===ci)return[];var $e=fi(ge);return[Nn(ge),$e,Nn($e)]}(K):[fi(K)]),ie=[K].concat(me).reduce(function(ge,$e){return ge.concat(tt($e)===ci?vo(e,{placement:$e,boundary:M,rootBoundary:T,padding:I,flipVariations:W,allowedAutoPlacements:H}):$e)},[]),he=e.rects.reference,te=e.rects.popper,se=new Map,ue=!0,pe=ie[0],de=0;de<ie.length;de++){var be=ie[de],Ue=tt(be),Ze=qt(be)===Tt,De=[Oe,je].indexOf(Ue)>=0,Ye=De?"width":"height",Re=jt(e,{placement:be,boundary:M,rootBoundary:T,altBoundary:ee,padding:I}),ke=De?Ze?He:Ne:Ze?je:Oe;he[Ye]>te[Ye]&&(ke=fi(ke));var it=fi(ke),nt=[];if(d&&nt.push(Re[Ue]<=0),b&&nt.push(Re[ke]<=0,Re[it]<=0),nt.every(function(ge){return ge})){pe=be,ue=!1;break}se.set(be,nt)}if(ue)for(var Ht=function(ge){var $e=ie.find(function(ze){var _t=se.get(ze);if(_t)return _t.slice(0,ge).every(function(xi){return xi})});if($e)return pe=$e,"break"},Pe=W?3:1;Pe>0&&Ht(Pe)!=="break";Pe--);e.placement!==pe&&(e.modifiersData[h]._skip=!0,e.placement=pe,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function qn(l,e,s){return s===void 0&&(s={x:0,y:0}),{top:l.top-e.height-s.y,right:l.right-e.width+s.x,bottom:l.bottom-e.height+s.y,left:l.left-e.width-s.x}}function jn(l){return[Oe,He,je,Ne].some(function(e){return l[e]>=0})}const Hn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(l){var e=l.state,s=l.name,h=e.rects.reference,u=e.rects.popper,d=e.modifiersData.preventOverflow,v=jt(e,{elementContext:"reference"}),b=jt(e,{altBoundary:!0}),x=qn(v,h),I=qn(b,u,d),M=jn(x),T=jn(I);e.modifiersData[s]={referenceClippingOffsets:x,popperEscapeOffsets:I,isReferenceHidden:M,hasPopperEscaped:T},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":M,"data-popper-escaped":T})}},Un={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(l){var e=l.state,s=l.options,h=l.name,u=s.offset,d=u===void 0?[0,0]:u,v=Fi.reduce(function(M,T){return M[T]=function(ee,F,W){var H=tt(ee),K=[Ne,Oe].indexOf(H)>=0?-1:1,fe=typeof W=="function"?W(Object.assign({},F,{placement:ee})):W,me=fe[0],ie=fe[1];return me=me||0,ie=(ie||0)*K,[Ne,He].indexOf(H)>=0?{x:ie,y:me}:{x:me,y:ie}}(T,e.rects,d),M},{}),b=v[e.placement],x=b.x,I=b.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=x,e.modifiersData.popperOffsets.y+=I),e.modifiersData[h]=v}},Ji={name:"popperOffsets",enabled:!0,phase:"read",fn:function(l){var e=l.state,s=l.name;e.modifiersData[s]=$n({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},Qn={name:"preventOverflow",enabled:!0,phase:"main",fn:function(l){var e=l.state,s=l.options,h=l.name,u=s.mainAxis,d=u===void 0||u,v=s.altAxis,b=v!==void 0&&v,x=s.boundary,I=s.rootBoundary,M=s.altBoundary,T=s.padding,ee=s.tether,F=ee===void 0||ee,W=s.tetherOffset,H=W===void 0?0:W,K=jt(e,{boundary:x,rootBoundary:I,padding:T,altBoundary:M}),fe=tt(e.placement),me=qt(e.placement),ie=!me,he=Qi(fe),te=he==="x"?"y":"x",se=e.modifiersData.popperOffsets,ue=e.rects.reference,pe=e.rects.popper,de=typeof H=="function"?H(Object.assign({},e.rects,{placement:e.placement})):H,be=typeof de=="number"?{mainAxis:de,altAxis:de}:Object.assign({mainAxis:0,altAxis:0},de),Ue=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Ze={x:0,y:0};if(se){if(d){var De,Ye=he==="y"?Oe:Ne,Re=he==="y"?je:He,ke=he==="y"?"height":"width",it=se[he],nt=it+K[Ye],Ht=it-K[Re],Pe=F?-pe[ke]/2:0,ge=me===Tt?ue[ke]:pe[ke],$e=me===Tt?-pe[ke]:-ue[ke],ze=e.elements.arrow,_t=F&&ze?Ui(ze):{width:0,height:0},xi=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Es=xi[Ye],Is=xi[Re],Ai=Xt(0,ue[ke],_t[ke]),rr=ie?ue[ke]/2-Pe-Ai-Es-be.mainAxis:ge-Ai-Es-be.mainAxis,lr=ie?-ue[ke]/2+Pe+Ai+Is+be.mainAxis:$e+Ai+Is+be.mainAxis,rn=e.elements.arrow&&zt(e.elements.arrow),ar=rn?he==="y"?rn.clientTop||0:rn.clientLeft||0:0,Ss=(De=Ue?.[he])!=null?De:0,cr=it+lr-Ss,Ms=Xt(F?hi(nt,it+rr-Ss-ar):nt,it,F?Vt(Ht,cr):Ht);se[he]=Ms,Ze[he]=Ms-it}if(b){var Bs,hr=he==="x"?Oe:Ne,ur=he==="x"?je:He,Bt=se[te],Ci=te==="y"?"height":"width",Ls=Bt+K[hr],Os=Bt-K[ur],ln=[Oe,Ne].indexOf(fe)!==-1,Ns=(Bs=Ue?.[te])!=null?Bs:0,Ds=ln?Ls:Bt-ue[Ci]-pe[Ci]-Ns+be.altAxis,Rs=ln?Bt+ue[Ci]+pe[Ci]-Ns-be.altAxis:Os,$s=F&&ln?function(dr,fr,an){var Fs=Xt(dr,fr,an);return Fs>an?an:Fs}(Ds,Bt,Rs):Xt(F?Ds:Ls,Bt,F?Rs:Os);se[te]=$s,Ze[te]=$s-Bt}e.modifiersData[h]=Ze}},requiresIfExists:["offset"]};function wo(l,e,s){s===void 0&&(s=!1);var h,u,d=Ge(e),v=Ge(e)&&function(T){var ee=T.getBoundingClientRect(),F=$t(ee.width)/T.offsetWidth||1,W=$t(ee.height)/T.offsetHeight||1;return F!==1||W!==1}(e),b=yt(e),x=Ft(l,v,s),I={scrollLeft:0,scrollTop:0},M={x:0,y:0};return(d||!d&&!s)&&((et(e)!=="body"||zi(b))&&(I=(h=e)!==Ke(h)&&Ge(h)?{scrollLeft:(u=h).scrollLeft,scrollTop:u.scrollTop}:Gi(h)),Ge(e)?((M=Ft(e,!0)).x+=e.clientLeft,M.y+=e.clientTop):b&&(M.x=Yi(b))),{x:x.left+I.scrollLeft-M.x,y:x.top+I.scrollTop-M.y,width:x.width,height:x.height}}function bo(l){var e=new Map,s=new Set,h=[];function u(d){s.add(d.name),[].concat(d.requires||[],d.requiresIfExists||[]).forEach(function(v){if(!s.has(v)){var b=e.get(v);b&&u(b)}}),h.push(d)}return l.forEach(function(d){e.set(d.name,d)}),l.forEach(function(d){s.has(d.name)||u(d)}),h}var Wn={placement:"bottom",modifiers:[],strategy:"absolute"};function Kn(){for(var l=arguments.length,e=new Array(l),s=0;s<l;s++)e[s]=arguments[s];return!e.some(function(h){return!(h&&typeof h.getBoundingClientRect=="function")})}function pi(l){l===void 0&&(l={});var e=l,s=e.defaultModifiers,h=s===void 0?[]:s,u=e.defaultOptions,d=u===void 0?Wn:u;return function(v,b,x){x===void 0&&(x=d);var I,M,T={placement:"bottom",orderedModifiers:[],options:Object.assign({},Wn,d),modifiersData:{},elements:{reference:v,popper:b},attributes:{},styles:{}},ee=[],F=!1,W={state:T,setOptions:function(K){var fe=typeof K=="function"?K(T.options):K;H(),T.options=Object.assign({},d,T.options,fe),T.scrollParents={reference:kt(v)?Jt(v):v.contextElement?Jt(v.contextElement):[],popper:Jt(b)};var me,ie,he=function(te){var se=bo(te);return Vn.reduce(function(ue,pe){return ue.concat(se.filter(function(de){return de.phase===pe}))},[])}((me=[].concat(h,T.options.modifiers),ie=me.reduce(function(te,se){var ue=te[se.name];return te[se.name]=ue?Object.assign({},ue,se,{options:Object.assign({},ue.options,se.options),data:Object.assign({},ue.data,se.data)}):se,te},{}),Object.keys(ie).map(function(te){return ie[te]})));return T.orderedModifiers=he.filter(function(te){return te.enabled}),T.orderedModifiers.forEach(function(te){var se=te.name,ue=te.options,pe=ue===void 0?{}:ue,de=te.effect;if(typeof de=="function"){var be=de({state:T,name:se,instance:W,options:pe});ee.push(be||function(){})}}),W.update()},forceUpdate:function(){if(!F){var K=T.elements,fe=K.reference,me=K.popper;if(Kn(fe,me)){T.rects={reference:wo(fe,zt(me),T.options.strategy==="fixed"),popper:Ui(me)},T.reset=!1,T.placement=T.options.placement,T.orderedModifiers.forEach(function(de){return T.modifiersData[de.name]=Object.assign({},de.data)});for(var ie=0;ie<T.orderedModifiers.length;ie++)if(T.reset!==!0){var he=T.orderedModifiers[ie],te=he.fn,se=he.options,ue=se===void 0?{}:se,pe=he.name;typeof te=="function"&&(T=te({state:T,options:ue,name:pe,instance:W})||T)}else T.reset=!1,ie=-1}}},update:(I=function(){return new Promise(function(K){W.forceUpdate(),K(T)})},function(){return M||(M=new Promise(function(K){Promise.resolve().then(function(){M=void 0,K(I())})})),M}),destroy:function(){H(),F=!0}};if(!Kn(v,b))return W;function H(){ee.forEach(function(K){return K()}),ee=[]}return W.setOptions(x).then(function(K){!F&&x.onFirstUpdate&&x.onFirstUpdate(K)}),W}}var yo=pi(),_o=pi({defaultModifiers:[Ki,Ji,Wi,ji]}),Zi=pi({defaultModifiers:[Ki,Ji,Wi,ji,Un,Fn,Qn,Ln,Hn]});const Gn=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:pi,detectOverflow:jt,createPopperBase:yo,createPopper:Zi,createPopperLite:_o,top:Oe,bottom:je,right:He,left:Ne,auto:ci,basePlacements:Nt,start:Tt,end:Dt,clippingParents:vn,viewport:Ri,popper:Rt,reference:wn,variationPlacements:$i,placements:Fi,beforeRead:bn,read:yn,afterRead:_n,beforeMain:Pn,main:xn,afterMain:An,beforeWrite:Cn,write:Tn,afterWrite:kn,modifierPhases:Vn,applyStyles:ji,arrow:Ln,computeStyles:Wi,eventListeners:Ki,flip:Fn,hide:Hn,offset:Un,popperOffsets:Ji,preventOverflow:Qn},Symbol.toStringTag,{value:"Module"})),Yn="dropdown",Po="ArrowUp",zn="ArrowDown",Xn="click.bs.dropdown.data-api",Jn="keydown.bs.dropdown.data-api",Zt="show",Et='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',xo=`${Et}.show`,gi=".dropdown-menu",Ao=X()?"top-end":"top-start",Co=X()?"top-start":"top-end",To=X()?"bottom-end":"bottom-start",ko=X()?"bottom-start":"bottom-end",Vo=X()?"left-start":"right-start",Eo=X()?"right-start":"left-start",Io={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},So={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Je extends Le{constructor(e,s){super(e,s),this._popper=null,this._parent=this._element.parentNode,this._menu=Y.next(this._element,gi)[0]||Y.prev(this._element,gi)[0]||Y.findOne(gi,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Io}static get DefaultType(){return So}static get NAME(){return Yn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(_(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!g.trigger(this._element,"show.bs.dropdown",e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const s of[].concat(...document.body.children))g.on(s,"mouseover",D);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Zt),this._element.classList.add(Zt),g.trigger(this._element,"shown.bs.dropdown",e)}}hide(){if(_(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!g.trigger(this._element,"hide.bs.dropdown",e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))g.off(s,"mouseover",D);this._popper&&this._popper.destroy(),this._menu.classList.remove(Zt),this._element.classList.remove(Zt),this._element.setAttribute("aria-expanded","false"),Fe.removeDataAttribute(this._menu,"popper"),g.trigger(this._element,"hidden.bs.dropdown",e)}}_getConfig(e){if(typeof(e=super._getConfig(e)).reference=="object"&&!a(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${Yn.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(Gn===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:a(this._config.reference)?e=f(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const s=this._getPopperConfig();this._popper=Zi(e,this._menu,s)}_isShown(){return this._menu.classList.contains(Zt)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return Vo;if(e.classList.contains("dropstart"))return Eo;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const s=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains("dropup")?s?Co:Ao:s?ko:To}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(s=>Number.parseInt(s,10)):typeof e=="function"?s=>e(s,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Fe.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...typeof this._config.popperConfig=="function"?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:s}){const h=Y.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(u=>y(u));h.length&&C(h,s,e===zn,!h.includes(s)).focus()}static jQueryInterface(e){return this.each(function(){const s=Je.getOrCreateInstance(this,e);if(typeof e=="string"){if(s[e]===void 0)throw new TypeError(`No method named "${e}"`);s[e]()}})}static clearMenus(e){if(e.button===2||e.type==="keyup"&&e.key!=="Tab")return;const s=Y.find(xo);for(const h of s){const u=Je.getInstance(h);if(!u||u._config.autoClose===!1)continue;const d=e.composedPath(),v=d.includes(u._menu);if(d.includes(u._element)||u._config.autoClose==="inside"&&!v||u._config.autoClose==="outside"&&v||u._menu.contains(e.target)&&(e.type==="keyup"&&e.key==="Tab"||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const b={relatedTarget:u._element};e.type==="click"&&(b.clickEvent=e),u._completeHide(b)}}static dataApiKeydownHandler(e){const s=/input|textarea/i.test(e.target.tagName),h=e.key==="Escape",u=[Po,zn].includes(e.key);if(!u&&!h||s&&!h)return;e.preventDefault();const d=this.matches(Et)?this:Y.prev(this,Et)[0]||Y.next(this,Et)[0]||Y.findOne(Et,e.delegateTarget.parentNode),v=Je.getOrCreateInstance(d);if(u)return e.stopPropagation(),v.show(),void v._selectMenuItem(e);v._isShown()&&(e.stopPropagation(),v.hide(),d.focus())}}g.on(document,Jn,Et,Je.dataApiKeydownHandler),g.on(document,Jn,gi,Je.dataApiKeydownHandler),g.on(document,Xn,Je.clearMenus),g.on(document,"keyup.bs.dropdown.data-api",Je.clearMenus),g.on(document,Xn,Et,function(l){l.preventDefault(),Je.getOrCreateInstance(this).toggle()}),N(Je);const Zn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",es=".sticky-top",mi="padding-right",ts="margin-right";class en{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,mi,s=>s+e),this._setElementAttributes(Zn,mi,s=>s+e),this._setElementAttributes(es,ts,s=>s-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,mi),this._resetElementAttributes(Zn,mi),this._resetElementAttributes(es,ts)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,s,h){const u=this.getWidth();this._applyManipulationCallback(e,d=>{if(d!==this._element&&window.innerWidth>d.clientWidth+u)return;this._saveInitialAttribute(d,s);const v=window.getComputedStyle(d).getPropertyValue(s);d.style.setProperty(s,`${h(Number.parseFloat(v))}px`)})}_saveInitialAttribute(e,s){const h=e.style.getPropertyValue(s);h&&Fe.setDataAttribute(e,s,h)}_resetElementAttributes(e,s){this._applyManipulationCallback(e,h=>{const u=Fe.getDataAttribute(h,s);u!==null?(Fe.removeDataAttribute(h,s),h.style.setProperty(s,u)):h.style.removeProperty(s)})}_applyManipulationCallback(e,s){if(a(e))s(e);else for(const h of Y.find(e,this._element))s(h)}}const is="show",ns="mousedown.bs.backdrop",Mo={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Bo={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class ss extends ot{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Mo}static get DefaultType(){return Bo}static get NAME(){return"backdrop"}show(e){if(!this._config.isVisible)return void R(e);this._append();const s=this._getElement();this._config.isAnimated&&V(s),s.classList.add(is),this._emulateAnimation(()=>{R(e)})}hide(e){this._config.isVisible?(this._getElement().classList.remove(is),this._emulateAnimation(()=>{this.dispose(),R(e)})):R(e)}dispose(){this._isAppended&&(g.off(this._element,ns),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=f(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),g.on(e,ns,()=>{R(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){E(e,this._getElement(),this._config.isAnimated)}}const os=".bs.focustrap",rs="backward",Lo={autofocus:!0,trapElement:null},Oo={autofocus:"boolean",trapElement:"element"};class ls extends ot{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Lo}static get DefaultType(){return Oo}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),g.off(document,os),g.on(document,"focusin.bs.focustrap",e=>this._handleFocusin(e)),g.on(document,"keydown.tab.bs.focustrap",e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,g.off(document,os))}_handleFocusin(e){const{trapElement:s}=this._config;if(e.target===document||e.target===s||s.contains(e.target))return;const h=Y.focusableChildren(s);h.length===0?s.focus():this._lastTabNavDirection===rs?h[h.length-1].focus():h[0].focus()}_handleKeydown(e){e.key==="Tab"&&(this._lastTabNavDirection=e.shiftKey?rs:"forward")}}const as="hidden.bs.modal",cs="show.bs.modal",hs="modal-open",us="show",tn="modal-static",No={backdrop:!0,focus:!0,keyboard:!0},Do={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class It extends Le{constructor(e,s){super(e,s),this._dialog=Y.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new en,this._addEventListeners()}static get Default(){return No}static get DefaultType(){return Do}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||g.trigger(this._element,cs,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(hs),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){this._isShown&&!this._isTransitioning&&(g.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(us),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){for(const e of[window,this._dialog])g.off(e,".bs.modal");this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new ss({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ls({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const s=Y.findOne(".modal-body",this._dialog);s&&(s.scrollTop=0),V(this._element),this._element.classList.add(us),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,g.trigger(this._element,"shown.bs.modal",{relatedTarget:e})},this._dialog,this._isAnimated())}_addEventListeners(){g.on(this._element,"keydown.dismiss.bs.modal",e=>{if(e.key==="Escape")return this._config.keyboard?(e.preventDefault(),void this.hide()):void this._triggerBackdropTransition()}),g.on(window,"resize.bs.modal",()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),g.on(this._element,"mousedown.dismiss.bs.modal",e=>{g.one(this._element,"click.dismiss.bs.modal",s=>{this._element===e.target&&this._element===s.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(hs),this._resetAdjustments(),this._scrollBar.reset(),g.trigger(this._element,as)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(g.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(tn)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(tn),this._queueCallback(()=>{this._element.classList.remove(tn),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,s=this._scrollBar.getWidth(),h=s>0;if(h&&!e){const u=X()?"paddingLeft":"paddingRight";this._element.style[u]=`${s}px`}if(!h&&e){const u=X()?"paddingRight":"paddingLeft";this._element.style[u]=`${s}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,s){return this.each(function(){const h=It.getOrCreateInstance(this,e);if(typeof e=="string"){if(h[e]===void 0)throw new TypeError(`No method named "${e}"`);h[e](s)}})}}g.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(l){const e=n(this);["A","AREA"].includes(this.tagName)&&l.preventDefault(),g.one(e,cs,h=>{h.defaultPrevented||g.one(e,as,()=>{y(this)&&this.focus()})});const s=Y.findOne(".modal.show");s&&It.getInstance(s).hide(),It.getOrCreateInstance(e).toggle(this)}),rt(It),N(It);const ds="show",fs="showing",ps="hiding",gs=".offcanvas.show",ms="hidePrevented.bs.offcanvas",vs="hidden.bs.offcanvas",Ro={backdrop:!0,keyboard:!0,scroll:!1},$o={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class dt extends Le{constructor(e,s){super(e,s),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Ro}static get DefaultType(){return $o}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||g.trigger(this._element,"show.bs.offcanvas",{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new en().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(fs),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(ds),this._element.classList.remove(fs),g.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:e})},this._element,!0))}hide(){this._isShown&&(g.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(ps),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(ds,ps),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new en().reset(),g.trigger(this._element,vs)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new ss({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{this._config.backdrop!=="static"?this.hide():g.trigger(this._element,ms)}:null})}_initializeFocusTrap(){return new ls({trapElement:this._element})}_addEventListeners(){g.on(this._element,"keydown.dismiss.bs.offcanvas",e=>{e.key==="Escape"&&(this._config.keyboard?this.hide():g.trigger(this._element,ms))})}static jQueryInterface(e){return this.each(function(){const s=dt.getOrCreateInstance(this,e);if(typeof e=="string"){if(s[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);s[e](this)}})}}g.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(l){const e=n(this);if(["A","AREA"].includes(this.tagName)&&l.preventDefault(),_(this))return;g.one(e,vs,()=>{y(this)&&this.focus()});const s=Y.findOne(gs);s&&s!==e&&dt.getInstance(s).hide(),dt.getOrCreateInstance(e).toggle(this)}),g.on(window,"load.bs.offcanvas.data-api",()=>{for(const l of Y.find(gs))dt.getOrCreateInstance(l).show()}),g.on(window,"resize.bs.offcanvas",()=>{for(const l of Y.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(l).position!=="fixed"&&dt.getOrCreateInstance(l).hide()}),rt(dt),N(dt);const Fo=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),qo=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,jo=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Ho=(l,e)=>{const s=l.nodeName.toLowerCase();return e.includes(s)?!Fo.has(s)||Boolean(qo.test(l.nodeValue)||jo.test(l.nodeValue)):e.filter(h=>h instanceof RegExp).some(h=>h.test(s))},ws={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Uo={allowList:ws,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Qo={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Wo={entry:"(string|element|function|null)",selector:"(string|element)"};class Ko extends ot{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Uo}static get DefaultType(){return Qo}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[u,d]of Object.entries(this._config.content))this._setContent(e,d,u);const s=e.children[0],h=this._resolvePossibleFunction(this._config.extraClass);return h&&s.classList.add(...h.split(" ")),s}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[s,h]of Object.entries(e))super._typeCheckConfig({selector:s,entry:h},Wo)}_setContent(e,s,h){const u=Y.findOne(h,e);u&&((s=this._resolvePossibleFunction(s))?a(s)?this._putElementInTemplate(f(s),u):this._config.html?u.innerHTML=this._maybeSanitize(s):u.textContent=s:u.remove())}_maybeSanitize(e){return this._config.sanitize?function(s,h,u){if(!s.length)return s;if(u&&typeof u=="function")return u(s);const d=new window.DOMParser().parseFromString(s,"text/html"),v=[].concat(...d.body.querySelectorAll("*"));for(const b of v){const x=b.nodeName.toLowerCase();if(!Object.keys(h).includes(x)){b.remove();continue}const I=[].concat(...b.attributes),M=[].concat(h["*"]||[],h[x]||[]);for(const T of I)Ho(T,M)||b.removeAttribute(T.nodeName)}return d.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return typeof e=="function"?e(this):e}_putElementInTemplate(e,s){if(this._config.html)return s.innerHTML="",void s.append(e);s.textContent=e.textContent}}const Go=new Set(["sanitize","allowList","sanitizeFn"]),nn="fade",vi="show",bs=".modal",ys="hide.bs.modal",wi="hover",_s="focus",Yo={AUTO:"auto",TOP:"top",RIGHT:X()?"left":"right",BOTTOM:"bottom",LEFT:X()?"right":"left"},zo={allowList:ws,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Xo={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class St extends Le{constructor(e,s){if(Gn===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,s),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return zo}static get DefaultType(){return Xo}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),g.off(this._element.closest(bs),ys,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=g.trigger(this._element,this.constructor.eventName("show")),s=(q(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!s)return;this._disposePopper();const h=this._getTipElement();this._element.setAttribute("aria-describedby",h.getAttribute("id"));const{container:u}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(u.append(h),g.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(h),h.classList.add(vi),"ontouchstart"in document.documentElement)for(const d of[].concat(...document.body.children))g.on(d,"mouseover",D);this._queueCallback(()=>{g.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!g.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(vi),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))g.off(e,"mouseover",D);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),g.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const s=this._getTemplateFactory(e).toHtml();if(!s)return null;s.classList.remove(nn,vi),s.classList.add(`bs-${this.constructor.NAME}-auto`);const h=(u=>{do u+=Math.floor(1e6*Math.random());while(document.getElementById(u));return u})(this.constructor.NAME).toString();return s.setAttribute("id",h),this._isAnimated()&&s.classList.add(nn),s}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Ko({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(nn)}_isShown(){return this.tip&&this.tip.classList.contains(vi)}_createPopper(e){const s=typeof this._config.placement=="function"?this._config.placement.call(this,e,this._element):this._config.placement,h=Yo[s.toUpperCase()];return Zi(this._element,e,this._getPopperConfig(h))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(s=>Number.parseInt(s,10)):typeof e=="function"?s=>e(s,this._element):e}_resolvePossibleFunction(e){return typeof e=="function"?e.call(this._element):e}_getPopperConfig(e){const s={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:h=>{this._getTipElement().setAttribute("data-popper-placement",h.state.placement)}}]};return{...s,...typeof this._config.popperConfig=="function"?this._config.popperConfig(s):this._config.popperConfig}}_setListeners(){const e=this._config.trigger.split(" ");for(const s of e)if(s==="click")g.on(this._element,this.constructor.eventName("click"),this._config.selector,h=>{this._initializeOnDelegatedTarget(h).toggle()});else if(s!=="manual"){const h=s===wi?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),u=s===wi?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");g.on(this._element,h,this._config.selector,d=>{const v=this._initializeOnDelegatedTarget(d);v._activeTrigger[d.type==="focusin"?_s:wi]=!0,v._enter()}),g.on(this._element,u,this._config.selector,d=>{const v=this._initializeOnDelegatedTarget(d);v._activeTrigger[d.type==="focusout"?_s:wi]=v._element.contains(d.relatedTarget),v._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},g.on(this._element.closest(bs),ys,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,s){clearTimeout(this._timeout),this._timeout=setTimeout(e,s)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const s=Fe.getDataAttributes(this._element);for(const h of Object.keys(s))Go.has(h)&&delete s[h];return e={...s,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:f(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const s in this._config)this.constructor.Default[s]!==this._config[s]&&(e[s]=this._config[s]);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const s=St.getOrCreateInstance(this,e);if(typeof e=="string"){if(s[e]===void 0)throw new TypeError(`No method named "${e}"`);s[e]()}})}}N(St);const Jo={...St.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Zo={...St.DefaultType,content:"(null|string|element|function)"};class bi extends St{static get Default(){return Jo}static get DefaultType(){return Zo}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const s=bi.getOrCreateInstance(this,e);if(typeof e=="string"){if(s[e]===void 0)throw new TypeError(`No method named "${e}"`);s[e]()}})}}N(bi);const Ps="click.bs.scrollspy",ei="active",xs="[href]",er={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},tr={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ti extends Le{constructor(e,s){super(e,s),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return er}static get DefaultType(){return tr}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=f(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(s=>Number.parseFloat(s))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(g.off(this._config.target,Ps),g.on(this._config.target,Ps,xs,e=>{const s=this._observableSections.get(e.target.hash);if(s){e.preventDefault();const h=this._rootElement||window,u=s.offsetTop-this._element.offsetTop;if(h.scrollTo)return void h.scrollTo({top:u,behavior:"smooth"});h.scrollTop=u}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(s=>this._observerCallback(s),e)}_observerCallback(e){const s=v=>this._targetLinks.get(`#${v.target.id}`),h=v=>{this._previousScrollData.visibleEntryTop=v.target.offsetTop,this._process(s(v))},u=(this._rootElement||document.documentElement).scrollTop,d=u>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=u;for(const v of e){if(!v.isIntersecting){this._activeTarget=null,this._clearActiveClass(s(v));continue}const b=v.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(d&&b){if(h(v),!u)return}else d||b||h(v)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=Y.find(xs,this._config.target);for(const s of e){if(!s.hash||_(s))continue;const h=Y.findOne(s.hash,this._element);y(h)&&(this._targetLinks.set(s.hash,s),this._observableSections.set(s.hash,h))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(ei),this._activateParents(e),g.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))Y.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(ei);else for(const s of Y.parents(e,".nav, .list-group"))for(const h of Y.prev(s,".nav-link, .nav-item > .nav-link, .list-group-item"))h.classList.add(ei)}_clearActiveClass(e){e.classList.remove(ei);const s=Y.find("[href].active",e);for(const h of s)h.classList.remove(ei)}static jQueryInterface(e){return this.each(function(){const s=ti.getOrCreateInstance(this,e);if(typeof e=="string"){if(s[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);s[e]()}})}}g.on(window,"load.bs.scrollspy.data-api",()=>{for(const l of Y.find('[data-bs-spy="scroll"]'))ti.getOrCreateInstance(l)}),N(ti);const ir="ArrowLeft",As="ArrowRight",nr="ArrowUp",Cs="ArrowDown",yi="active",Ts="fade",sn="show",ks='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',on=`.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${ks}`;class Mt extends Le{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),g.on(this._element,"keydown.bs.tab",s=>this._keydown(s)))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const s=this._getActiveElem(),h=s?g.trigger(s,"hide.bs.tab",{relatedTarget:e}):null;g.trigger(e,"show.bs.tab",{relatedTarget:s}).defaultPrevented||h&&h.defaultPrevented||(this._deactivate(s,e),this._activate(e,s))}_activate(e,s){e&&(e.classList.add(yi),this._activate(n(e)),this._queueCallback(()=>{e.getAttribute("role")==="tab"?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),g.trigger(e,"shown.bs.tab",{relatedTarget:s})):e.classList.add(sn)},e,e.classList.contains(Ts)))}_deactivate(e,s){e&&(e.classList.remove(yi),e.blur(),this._deactivate(n(e)),this._queueCallback(()=>{e.getAttribute("role")==="tab"?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),g.trigger(e,"hidden.bs.tab",{relatedTarget:s})):e.classList.remove(sn)},e,e.classList.contains(Ts)))}_keydown(e){if(![ir,As,nr,Cs].includes(e.key))return;e.stopPropagation(),e.preventDefault();const s=[As,Cs].includes(e.key),h=C(this._getChildren().filter(u=>!_(u)),e.target,s,!0);h&&(h.focus({preventScroll:!0}),Mt.getOrCreateInstance(h).show())}_getChildren(){return Y.find(on,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,s){this._setAttributeIfNotExists(e,"role","tablist");for(const h of s)this._setInitialAttributesOnChild(h)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const s=this._elemIsActive(e),h=this._getOuterElement(e);e.setAttribute("aria-selected",s),h!==e&&this._setAttributeIfNotExists(h,"role","presentation"),s||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const s=n(e);s&&(this._setAttributeIfNotExists(s,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(s,"aria-labelledby",`#${e.id}`))}_toggleDropDown(e,s){const h=this._getOuterElement(e);if(!h.classList.contains("dropdown"))return;const u=(d,v)=>{const b=Y.findOne(d,h);b&&b.classList.toggle(v,s)};u(".dropdown-toggle",yi),u(".dropdown-menu",sn),h.setAttribute("aria-expanded",s)}_setAttributeIfNotExists(e,s,h){e.hasAttribute(s)||e.setAttribute(s,h)}_elemIsActive(e){return e.classList.contains(yi)}_getInnerElement(e){return e.matches(on)?e:Y.findOne(on,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each(function(){const s=Mt.getOrCreateInstance(this);if(typeof e=="string"){if(s[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);s[e]()}})}}g.on(document,"click.bs.tab",ks,function(l){["A","AREA"].includes(this.tagName)&&l.preventDefault(),_(this)||Mt.getOrCreateInstance(this).show()}),g.on(window,"load.bs.tab",()=>{for(const l of Y.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))Mt.getOrCreateInstance(l)}),N(Mt);const Vs="hide",_i="show",Pi="showing",sr={animation:"boolean",autohide:"boolean",delay:"number"},or={animation:!0,autohide:!0,delay:5e3};class ii extends Le{constructor(e,s){super(e,s),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return or}static get DefaultType(){return sr}static get NAME(){return"toast"}show(){g.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Vs),V(this._element),this._element.classList.add(_i,Pi),this._queueCallback(()=>{this._element.classList.remove(Pi),g.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(g.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(Pi),this._queueCallback(()=>{this._element.classList.add(Vs),this._element.classList.remove(Pi,_i),g.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(_i),super.dispose()}isShown(){return this._element.classList.contains(_i)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,s){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=s;break;case"focusin":case"focusout":this._hasKeyboardInteraction=s}if(s)return void this._clearTimeout();const h=e.relatedTarget;this._element===h||this._element.contains(h)||this._maybeScheduleHide()}_setListeners(){g.on(this._element,"mouseover.bs.toast",e=>this._onInteraction(e,!0)),g.on(this._element,"mouseout.bs.toast",e=>this._onInteraction(e,!1)),g.on(this._element,"focusin.bs.toast",e=>this._onInteraction(e,!0)),g.on(this._element,"focusout.bs.toast",e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const s=ii.getOrCreateInstance(this,e);if(typeof e=="string"){if(s[e]===void 0)throw new TypeError(`No method named "${e}"`);s[e](this)}})}}return rt(ii),N(ii),{Alert:vt,Button:wt,Carousel:We,Collapse:Ot,Dropdown:Je,Modal:It,Offcanvas:dt,Popover:bi,ScrollSpy:ti,Tab:Mt,Toast:ii,Tooltip:St}})})(Br);const Qt="b",Wt="k",cn="n",Qs="p",Kt="q";class A{x;y;constructor(i,t){this.x=i,this.y=t}}class w{start;end;boardStartIndex;boardEndIndex;constructor(i,t,o,r){if(o&&(this.start=o),r&&(this.end=r),o&&r){this.boardStartIndex=this.convertToBoardIndex(o),this.boardEndIndex=this.convertToBoardIndex(r);return}i&&t?(this.boardStartIndex=i.x+i.y*8,this.boardEndIndex=t.x+t.y*8,this.start=this.convertToBoardPosition(this.boardStartIndex),this.end=this.convertToBoardPosition(this.boardEndIndex)):(this.start="a8",this.end="a8",this.boardStartIndex=0,this.boardEndIndex=0)}toString(){return this.start+"-"+this.end}convertToBoardIndex(i){if(i.length!=2)throw new Error("Invalid position");let t=i[0],o=i[1],r=t.charCodeAt(0)-97,n=8-parseInt(o);return r+n*8}convertToBoardPosition(i){if(i<0||i>63)throw new Error("Invalid index: "+i);let t=i%8,o=Math.floor(i/8),r=String.fromCharCode(t+97),n=8-o;return r+n}testConverToBoardIndex(){let i=[];i.push(this.convertToBoardIndex("a8")==0),i.push(this.convertToBoardIndex("b8")==1),i.push(this.convertToBoardIndex("c8")==2),i.push(this.convertToBoardIndex("d8")==3),i.push(this.convertToBoardIndex("e8")==4),i.push(this.convertToBoardIndex("f8")==5),i.push(this.convertToBoardIndex("g8")==6),i.push(this.convertToBoardIndex("h8")==7),i.push(this.convertToBoardIndex("a7")==8),i.push(this.convertToBoardIndex("b7")==9),i.push(this.convertToBoardIndex("c7")==10),i.push(this.convertToBoardIndex("d7")==11),i.push(this.convertToBoardIndex("e7")==12),i.push(this.convertToBoardIndex("f7")==13),i.push(this.convertToBoardIndex("g7")==14),i.push(this.convertToBoardIndex("h7")==15),i.push(this.convertToBoardIndex("a6")==16);for(let t=0;t<i.length;t++)if(!i[t])throw new Error("Convert to board Index failed failed")}runAllTests(){this.testConverToBoardIndex(),console.log("All tests ran for move class")}}class Pt{position;pos;boardIndex;constructor(i,t){i?(this.position=i,this.boardIndex=this.convertToBoardIndex(i),this.pos=new A(this.convertToBoardIndex(i)%8,Math.floor(this.convertToBoardIndex(i)/8))):t?(this.boardIndex=t,this.position=this.convertToBoardPosition(t),this.pos=new A(t%8,Math.floor(t/8))):(this.position="a8",this.boardIndex=0,this.pos=new A(0,0))}moveTo(i){this.position=i,this.boardIndex=this.convertToBoardIndex(i),this.pos=new A(this.boardIndex%8,Math.floor(this.boardIndex/8))}getPosition(){return this.position}getIndex(){return this.boardIndex}convertToBoardIndex(i){if(i.length!=2)throw new Error("Invalid position");let t=i[0],o=i[1],r=t.charCodeAt(0)-97,n=8-parseInt(o);return r+n*8}testConvertToBoardIndex(){let i=[];i.push(this.convertToBoardIndex("a8")==0),i.push(this.convertToBoardIndex("b8")==1),i.push(this.convertToBoardIndex("c8")==2),i.push(this.convertToBoardIndex("d8")==3),i.push(this.convertToBoardIndex("e8")==4),i.push(this.convertToBoardIndex("f8")==5),i.push(this.convertToBoardIndex("g8")==6),i.push(this.convertToBoardIndex("h8")==7),i.push(this.convertToBoardIndex("a7")==8),i.push(this.convertToBoardIndex("b7")==9),i.push(this.convertToBoardIndex("c7")==10),i.push(this.convertToBoardIndex("d7")==11),i.push(this.convertToBoardIndex("e7")==12),i.push(this.convertToBoardIndex("f7")==13),i.push(this.convertToBoardIndex("g7")==14),i.push(this.convertToBoardIndex("h7")==15),i.push(this.convertToBoardIndex("a6")==16);for(let t=0;t<i.length;t++)if(!i[t])throw new Error("Convert to board Index failed failed")}convertToBoardPosition(i){let t=i%8,o=Math.floor(i/8),r=String.fromCharCode(t+97),n=8-o;return r+n}testConvertToPosition(){let i=[];i.push(this.convertToBoardPosition(0)=="a8"),i.push(this.convertToBoardPosition(0)=="a8"),i.push(this.convertToBoardPosition(0)=="a8"),i.push(this.convertToBoardPosition(1)=="b8"),i.push(this.convertToBoardPosition(2)=="c8"),i.push(this.convertToBoardPosition(3)=="d8"),i.push(this.convertToBoardPosition(4)=="e8"),i.push(this.convertToBoardPosition(5)=="f8"),i.push(this.convertToBoardPosition(6)=="g8"),i.push(this.convertToBoardPosition(7)=="h8"),i.push(this.convertToBoardPosition(8)=="a7"),i.push(this.convertToBoardPosition(9)=="b7"),i.push(this.convertToBoardPosition(10)=="c7"),i.push(this.convertToBoardPosition(11)=="d7"),i.push(this.convertToBoardPosition(12)=="e7"),i.push(this.convertToBoardPosition(13)=="f7"),i.push(this.convertToBoardPosition(14)=="g7"),i.push(this.convertToBoardPosition(15)=="h7"),i.push(this.convertToBoardPosition(16)=="a6");for(let t=0;t<i.length;t++)if(!i[t])throw new Error("Convert to position failed")}runAllTests(){this.testConvertToBoardIndex(),this.testConvertToPosition(),console.log("All tests ran for position class")}}class ve{position;color;type;constructor(i,t,o){this.position=new Pt(i),this.color=t,this.type=o}move(i){this.position.moveTo(i)}getPosition(){return this.position.getPosition()}getIndex(){return this.position.getIndex()}getPos(){return this.position}convertToBoardIndex(i){if(i.length!=2)throw new Error("Invalid position");let t=i[0],o=i[1],r=t.charCodeAt(0)-97,n=8-parseInt(o);return r+n*8}testConverToBoardIndex(){let i=[];i.push(this.convertToBoardIndex("a8")==0),i.push(this.convertToBoardIndex("b8")==1),i.push(this.convertToBoardIndex("c8")==2),i.push(this.convertToBoardIndex("d8")==3),i.push(this.convertToBoardIndex("e8")==4),i.push(this.convertToBoardIndex("f8")==5),i.push(this.convertToBoardIndex("g8")==6),i.push(this.convertToBoardIndex("h8")==7),i.push(this.convertToBoardIndex("a7")==8),i.push(this.convertToBoardIndex("b7")==9),i.push(this.convertToBoardIndex("c7")==10),i.push(this.convertToBoardIndex("d7")==11),i.push(this.convertToBoardIndex("e7")==12),i.push(this.convertToBoardIndex("f7")==13),i.push(this.convertToBoardIndex("g7")==14),i.push(this.convertToBoardIndex("h7")==15),i.push(this.convertToBoardIndex("a6")==16);for(let t=0;t<i.length;t++)if(!i[t])throw new Error("Convert to board Index failed failed")}runAllTests(){this.testConverToBoardIndex(),console.log("All tests ran for piece class")}}class oe{Pieces;currentTurnColor="white";fen="";board=[];halfMoveClock=0;fullMoveNumber=1;castlingRights="KQkq";enPassantTargetSquare="-";legalMoves=[];inCheck=!1;checkMate=!1;capturedPieces=[];constructor(i,t){i||(i=["r","n","b","q","k","b","n","r","p","p","p","p","p","p","p","p"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","P","P","P","P","P","P","P","P","R","N","B","Q","K","B","N","R"]);const o=/^([rnbqkpRNBQKP1-8]+\/){7}([rnbqkpRNBQKP1-8]+)\s[bw]\s(-|K?Q?k?q?)\s(-|[a-h][36])\s(0|[1-9][0-9]*)\s([1-9][0-9]*)/;if(t!=null&&t.match(o)){let r=t.split(" ");i=this.fenToBoard(t),this.castlingRights=r[2],this.enPassantTargetSquare=r[3],r[1]==="w"?this.currentTurnColor="white":this.currentTurnColor="black",this.halfMoveClock=parseInt(r[4]),this.fullMoveNumber=parseInt(r[5])}else if(t!=null&&!t.match(o))throw new Error("Invalid fen: "+t);this.Pieces=[];for(let r=0;r<i.length;r++){let n=i[r];if(n!=" "){let p=n==n.toUpperCase()?"white":"black",a=n.toLowerCase(),f=this.convertToPosition(r);this.Pieces.push(new ve(f,p,a))}}this.board=i,t!=null?this.fen=t:this.fen=this.boardToFen()}convertToPosition(i){let t=String.fromCharCode(97+i%8),o=8-Math.floor(i/8);return t+o}displayBoard(){let i="";for(let t=0;t<8;t++){for(let o=0;o<8;o++)i+=this.Piece(new A(o,t))===" "?" - ":" "+(this.Piece(new A(o,t)).color==="black"?this.Piece(new A(o,t)).type:this.Piece(new A(o,t)).type.toUpperCase())+" ";i!=null&&console.log(`${8-t}| `+i),i=""}console.log("    _  _  _  _  _  _  _  _"),console.log("    A  B  C  D  E  F  G  H")}fenToBoard(i){let t=[],n=i.split(" ")[0].split("/");for(let p=0;p<n.length;p++){let f=n[p].split("");for(let y=0;y<f.length;y++){let _=f[y];if(_.match(/[1-8]/))for(let q=0;q<parseInt(_);q++)t.push(" ");else t.push(_)}}return t.length===63&&t.push(" "),t}boardToFen(){let i="",t=0;for(let o=0;o<64;o++){let r=this.getPieceAtBoardIndex(o);r===""?(t++,(t===8||o%8===7)&&(i+=t,o!=63&&(i+="/"),t=0)):(t!==0&&(i+=t,t=0),i+=r.color==="white"?r.type.toUpperCase():r.type.toLowerCase(),r.getIndex()%8===7&&o!==63&&(i+="/",t=0))}return i+=" "+this.currentTurnColor[0]+" ",i+=this.castlingRights+" ",i+=this.enPassantTargetSquare+" ",i+=this.halfMoveClock+" ",i+=this.fullMoveNumber,i}getPieceAtBoardIndex(i){for(let t=0;t<this.Pieces.length;t++)if(this.Pieces[t].getIndex()===i)return this.Pieces[t];return""}movePiece(i,t){let o=new w(void 0,void 0,i,t);o.boardEndIndex;let r=this.getPieceIndex(i),n=this.Pieces[r];if(n?.type===void 0)throw this.displayBoard(),console.log(this.Pieces),console.log(this.fen),console.log(i),new Error("Invalid move");if(n.type!="p"?this.halfMoveClock++:this.halfMoveClock=0,this.enPassantTargetSquare!="-"&&n.type==="p"){let p=new Pt(i),a=new Pt(t);if(n.color==="white"&&p.pos.y===3&&a.position===t){let f=a.boardIndex+8,y=this.getPieceAtBoardIndex(f);this.board[f]=" ",this.Pieces.splice(this.Pieces.indexOf(y),1)}if(n.color==="black"&&p.pos.y===4&&a.position===t){let f=a.boardIndex-8,y=this.getPieceAtBoardIndex(f);this.board[f]=" ",this.Pieces.splice(this.Pieces.indexOf(y),1)}}if(n.type=="p"&&Math.abs(n.getIndex()-o.boardEndIndex)==16){let p="-";n.color==="white"?p=this.convertToPosition(o.boardEndIndex+8):p=this.convertToPosition(o.boardEndIndex-8),this.enPassantTargetSquare=p}else this.enPassantTargetSquare="-";if(n.type==="k"){if(n.color==="white"){let p=new Pt(i),a=new Pt(t);if(p.pos.x-a.pos.x===2&&this.castlingRights.includes("Q")){this.convertToPosition(p.boardIndex-4);let f=this.convertToPosition(p.boardIndex-1),y=this.getPieceAtBoardIndex(p.boardIndex-4);this.castlingRights=this.castlingRights.replace("KQ",""),y.color!=null&&y.move(f)}if(p.pos.x-a.pos.x===-2&&this.castlingRights.includes("K")){this.convertToPosition(p.boardIndex+3);let f=this.convertToPosition(p.boardIndex+1),y=this.getPieceAtBoardIndex(p.boardIndex+3);console.log(f),console.log(y),this.castlingRights=this.castlingRights.replace("KQ",""),y.color!=null&&y.move(f)}this.castlingRights=this.castlingRights.replace("KQ","")}else{let p=new Pt(i),a=new Pt(t);if(p.pos.x-a.pos.x===2&&this.castlingRights.includes("q")){this.convertToPosition(p.boardIndex-4);let f=this.convertToPosition(p.boardIndex-1),y=this.getPieceAtBoardIndex(p.boardIndex-4);this.castlingRights=this.castlingRights.replace("kq",""),y.color!=null&&y.move(f)}if(p.pos.x-a.pos.x===-2&&this.castlingRights.includes("k")){this.convertToPosition(p.boardIndex+3);let f=this.convertToPosition(p.boardIndex+1),y=this.getPieceAtBoardIndex(p.boardIndex+3);this.castlingRights=this.castlingRights.replace("kq",""),y.color!=null&&y.move(f)}this.castlingRights=this.castlingRights.replace("kq","")}this.castlingRights===""&&(this.castlingRights="-")}if(this.currentTurnColor==="black"&&this.fullMoveNumber++,n.type==="r"&&(n.color==="white"?n.getIndex()===0?this.castlingRights=this.castlingRights.replace("Q",""):n.getIndex()===7&&(this.castlingRights=this.castlingRights.replace("K","")):n.getIndex()===56?this.castlingRights=this.castlingRights.replace("q",""):n.getIndex()===63&&(this.castlingRights=this.castlingRights.replace("k",""))),this.getPieceIndex(t)!==-1){let p=this.getPieceIndex(t),a=this.Pieces[p];a.type==="r"&&(a.color==="white"?a.getIndex()===56?this.castlingRights=this.castlingRights.replace("Q",""):a.getIndex()===63&&(this.castlingRights=this.castlingRights.replace("K","")):a.getIndex()===0?this.castlingRights=this.castlingRights.replace("q",""):a.getIndex()===7&&(this.castlingRights=this.castlingRights.replace("k",""))),this.capturedPieces.push(a),this.Pieces.splice(p,1),this.halfMoveClock=0}n.move(t),this.currentTurnColor=this.currentTurnColor==="white"?"black":"white",this.fen=this.boardToFen(),this.board=this.fenToBoard(this.fen),this.inCheck=this.isInCheck(this)}getPieceIndex(i){let t=-1;for(let o=0;o<this.Pieces.length;o++)if(this.Pieces[o].getPosition()==i){t=o;break}return t}getPieceAtPosition(i){let t="";for(let o=0;o<this.Pieces.length;o++){let r=this.Pieces[o];if(r.getPosition()==i)return r}return t}testConvertToPosition(){let i=[];i.push(this.convertToPosition(0)=="a8"),i.push(this.convertToPosition(1)=="b8"),i.push(this.convertToPosition(2)=="c8"),i.push(this.convertToPosition(3)=="d8"),i.push(this.convertToPosition(4)=="e8"),i.push(this.convertToPosition(5)=="f8"),i.push(this.convertToPosition(6)=="g8"),i.push(this.convertToPosition(7)=="h8"),i.push(this.convertToPosition(8)=="a7"),i.push(this.convertToPosition(9)=="b7"),i.push(this.convertToPosition(10)=="c7"),i.push(this.convertToPosition(11)=="d7"),i.push(this.convertToPosition(12)=="e7"),i.push(this.convertToPosition(13)=="f7"),i.push(this.convertToPosition(14)=="g7"),i.push(this.convertToPosition(15)=="h7"),i.push(this.convertToPosition(16)=="a6");for(let t=0;t<i.length;t++)if(!i[t])throw new Error("Convert to position failed")}testFenToBoard(){let i=[];i.push(this.fenToBoard("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1")),i.push(this.fenToBoard("rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1"));for(let o=0;o<i.length;o++)if(!i[o])throw new Error("Fen to board failed");t(i[0],["r","n","b","q","k","b","n","r","p","p","p","p","p","p","p","p"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","P","P","P","P","P","P","P","P","R","N","B","Q","K","B","N","R"]),t(i[1],["r","n","b","q","k","b","n","r","p","p","p","p","p","p","p","p"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","P"," "," "," "," "," "," "," "," "," "," "," ","P","P","P","P"," ","P","P","P","R","N","B","Q","K","B","N","R"]);function t(o,r){if(o===r)return!0;if(o==null||r==null)throw console.log(o,r),new Error("Fen to board failed");if(o.length!==r.length)throw console.log(o,r),new Error("Fen to board failed");for(var n=0;n<o.length;++n)if(o[n]!==r[n])throw console.log(o,r),new Error("Fen to board failed");return!0}}testBoardToFen(){let i=[],t=new oe;i.push(t.boardToFen()=="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"),t.movePiece("e2","e4"),i.push(t.boardToFen()=="rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1");for(let o=0;o<i.length;o++)if(!i[o])throw new Error("Board to fen failed, test "+(o+1)+" failed"+t.boardToFen())}testConstructors(){let i=new oe,t=[];t.push(i.Pieces[0]?.getPosition()=="a8"),t.push(i.Pieces[0].color=="black"),t.push(i.Pieces[0].type=="r"),t.push(i.Pieces[1]?.getPosition()=="b8"),t.push(i.Pieces[1].color=="black"),t.push(i.Pieces[1].type=="n"),t.push(i.Pieces[2]?.getPosition()=="c8"),t.push(i.Pieces[2].color=="black"),t.push(i.Pieces[2].type=="b"),t.push(i.Pieces[3]?.getPosition()=="d8");for(let n=0;n<t.length;n++)if(!t[n])throw new Error("Board constructor 1 failed "+n);let o=new oe([],"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1");t=[],t.push(o.Pieces[0]?.getPosition()=="a8"),t.push(o.Pieces[0].color=="black"),t.push(o.Pieces[0].type=="r"),t.push(o.Pieces[1]?.getPosition()=="b8"),t.push(o.Pieces[1].color=="black"),t.push(o.Pieces[1].type=="n"),t.push(o.Pieces[2]?.getPosition()=="c8"),t.push(o.Pieces[2].color=="black"),t.push(o.Pieces[2].type=="b"),t.push(o.Pieces[3]?.getPosition()=="d8");for(let n=0;n<t.length;n++)if(!t[n])throw new Error("Board constructor 2 failed"+n);let r=new oe([],"rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1");t=[],t.push(r.Pieces[0]?.getPosition()=="a8"),t.push(r.Pieces[0].color=="black"),t.push(r.Pieces[0].type=="r"),t.push(r.currentTurnColor=="black");for(let n=0;n<t.length;n++)if(!t[n])throw new Error("Board constructor 3 failed"+n)}findPseudoLegalMoves(i){let t=[];for(let o=0;o<i.Pieces.length;o++){let r=i.Pieces[o];if(i.currentTurnColor===r.color)switch(r.type){case"p":t.push(...this.findPawnMoves(r,i));break;case"r":t.push(...this.findRookMoves(r,i));break;case"n":t.push(...this.findKnightMoves(r,i));break;case"b":t.push(...this.findBishopMoves(r,i));break;case"q":t.push(...this.findQueenMoves(r,i));break;case"k":t.push(...this.findKingMoves(r,i));break}}return t}testFindPseudoLegalMoves(){let i=new oe,t=this.findPseudoLegalMoves(i),o=[];o.push(t.length==20);for(let r=0;r<o.length;r++)if(!o[r])throw new Error("Find legal moves failed, test "+(r+1)+" failed");i=new oe([],"rnbqkbnr/1ppp1ppp/8/p3pP2/4P3/8/PPPP2PP/RNBQKBNR w KQkq e6 0 4"),t=this.findPseudoLegalMoves(i),o=[],o.push(t.length==30);for(let r=0;r<o.length;r++)if(!o[r])throw new Error("Find legal moves failed, test "+(r+1)+" failed")}findLegalMoves(i){let t=i.findPseudoLegalMoves(i),o=[];for(let r=0;r<t.length;r++){let n=new oe([],i.boardToFen());n.movePiece(t[r].start,t[r].end),n.currentTurnColor=n.currentTurnColor==="white"?"black":"white",this.isInCheck(n)||o.push(t[r])}return o}testFindLegalMoves(){let i=new oe,t=this.findLegalMoves(i),o=[];o.push(t.length==20),i=new oe([],"rnb1k1nr/pppp1ppp/8/2b1p3/P3q3/8/1PPP1PPP/RNBQKB1R w KQkq - 0 6"),t=this.findLegalMoves(i),o.push(t.length==2),i=new oe([],"rnbqkbnr/1ppp1ppp/8/p3Q3/4P3/8/PPPP1PPP/RNB1KBNR b KQkq - 0 3"),t=this.findLegalMoves(i),o.push(t.length==3),i=new oe([],"rnbqkbnr/p1p1pppp/1p6/3pP3/8/8/PPPP1PPP/RNBQKBNR w KQkq d6 0 3"),t=this.findLegalMoves(i),o.push(t.length==31);for(let r=0;r<o.length;r++)if(!o[r])throw new Error("Find legal moves failed, test "+(r+1)+" failed")}isInCheck(i){let t=new oe([],i.boardToFen()),o=!0;for(let p=0;p<t.board.length;p++)t.board[p]!="-"&&(o=!1);o&&(console.log("empty board"),console.log(i.boardToFen())),t.currentTurnColor=t.currentTurnColor=="white"?"black":"white";let r=t.findPseudoLegalMoves(t),n;for(let p=0;p<i.Pieces.length;p++)i.Pieces[p].type=="k"&&i.Pieces[p].color==i.currentTurnColor&&(n=i.Pieces[p].getIndex());r.length==0&&(console.log("main board"),i.displayBoard(),console.log(i.fen),console.log("thingy"),t.displayBoard(),console.log(t.fen));for(let p=0;p<r.length;p++)if(r[p].boardEndIndex==n)return!0;return!1}testIsInCheck(){let i=new oe,t=[];t.push(!this.isInCheck(i));for(let o=0;o<t.length;o++)if(!t[o])throw new Error("Is in check failed, test "+(o+1)+" failed")}Piece(i){let t=i.x+i.y*8;for(let o=0;o<this.Pieces.length;o++)if(this.Pieces[o].getIndex()==t)return this.Pieces[o];return" "}addPiece(i){this.Pieces.push(i),this.board[i.getIndex()]!=null&&this.board[i.getIndex()]!=" "&&console.log("ERROR: PIECE ALREADY EXISTS AT THIS LOCATION",i),this.board[i.getIndex()]=i.type}findPawnMoves(i,t){let o=[],r=i.getIndex(),n=new A(r%8,Math.floor(r/8)),p=i.color;if(p!=this.currentTurnColor)return o;if(p=="white"){let a=new A(n.x,n.y-1);t.Piece(a)==" "&&n.y!=0&&o.push(new w(n,a));let f=new A(n.x,n.y-2);t.Piece(f)==" "&&t.Piece(a)==" "&&n.y==6&&o.push(new w(n,f));let y=new A(n.x-1,n.y-1);t.Piece(y)!=" "&&t.Piece(y)?.color=="black"&&o.push(new w(n,y));let _=new A(n.x+1,n.y-1);if(t.Piece(_)!=" "&&t.Piece(_)?.color=="black"&&o.push(new w(n,_)),t.enPassantTargetSquare!="-"&&r<=31&&r>=24){let q=new A(t.enPassantTargetSquare.charCodeAt(0)-97,8-parseInt(t.enPassantTargetSquare[1]));fn(q,_)===!0&&o.push(new w(n,_)),fn(q,y)===!0&&o.push(new w(n,y))}}else{let a=new A(n.x,n.y+1);t.Piece(a)==" "&&n.y!=7&&o.push(new w(n,a));let f=new A(n.x,n.y+2);t.Piece(f)==" "&&t.Piece(a)==" "&&n.y==1&&o.push(new w(n,f));let y=new A(n.x-1,n.y+1);t.Piece(y)!=" "&&t.Piece(y)?.color=="white"&&o.push(new w(n,y));let _=new A(n.x+1,n.y+1);if(t.Piece(_)!=" "&&t.Piece(_)?.color=="white"&&o.push(new w(n,_)),t.enPassantTargetSquare!="-"&&r<=15&&r>=8){let q=new A(t.enPassantTargetSquare.charCodeAt(0)-97,8-parseInt(t.enPassantTargetSquare[1]));_==q&&o.push(new w(n,_)),y==q&&o.push(new w(n,y))}}return o}testFindPawnMoves(){let i=new oe,t=this.findPawnMoves(i.Piece(new A(0,6)),i),o=[];o.push(t.length==2),o.push(t[0].toString()=="a2-a3"),o.push(t[1].toString()=="a2-a4");for(let n=0;n<o.length;n++)if(o[n]==!1){console.log("testFindPawnMoves failed");return}o=[],t=this.findPawnMoves(i.Pieces[16],i),o.push(t.length==2),o.push(t[0].toString()=="a2-a3"),o.push(t[1].toString()=="a2-a4");for(let n=0;n<o.length;n++)if(o[n]==!1){console.log("testFindPawnMoves failed");return}i=new oe([]);let r=new ve("a5","black",Qs);i.addPiece(r),r=new ve("a4","white",Qs),i.addPiece(r),t=this.findPawnMoves(r,i),o=[],o.push(t.length==0);for(let n=0;n<o.length;n++)if(o[n]==!1){console.error("testFindPawnMoves failed");return}}findRookMoves(i,t){let o=[],r=i.getIndex(),n=new A(r%8,Math.floor(r/8)),p=i.color;if(p!=t.currentTurnColor)return o;if(p==="white"){for(let a=n.y-1;a>=0;a--){let f=new A(n.x,a);if(t.Piece(f)===" ")o.push(new w(n,f));else if(t.Piece(f)?.color==="black"){o.push(new w(n,f));break}else break}for(let a=n.y+1;a<=7;a++){let f=new A(n.x,a);if(t.Piece(f)===" ")o.push(new w(n,f));else if(t.Piece(f)?.color==="black"){o.push(new w(n,f));break}else break}for(let a=n.x-1;a>=0;a--){let f=new A(a,n.y);if(t.Piece(f)===" ")o.push(new w(n,f));else if(t.Piece(f)?.color==="black"){o.push(new w(n,f));break}else break}for(let a=n.x+1;a<=7;a++){let f=new A(a,n.y);if(t.Piece(f)===" ")o.push(new w(n,f));else if(t.Piece(f)?.color==="black"){o.push(new w(n,f));break}else break}}else{for(let a=n.y-1;a>=0;a--){let f=new A(n.x,a);if(t.Piece(f)===" ")o.push(new w(n,f));else if(t.Piece(f)?.color==="white"){o.push(new w(n,f));break}else break}for(let a=n.y+1;a<=7;a++){let f=new A(n.x,a);if(t.Piece(f)===" ")o.push(new w(n,f));else if(t.Piece(f)?.color==="white"){o.push(new w(n,f));break}else break}for(let a=n.x-1;a>=0;a--){let f=new A(a,n.y);if(t.Piece(f)===" ")o.push(new w(n,f));else if(t.Piece(f)?.color==="white"){o.push(new w(n,f));break}else break}for(let a=n.x+1;a<=7;a++){let f=new A(a,n.y);if(t.Piece(f)===" ")o.push(new w(n,f));else if(t.Piece(f)?.color==="white"){o.push(new w(n,f));break}else break}}return o}testFindRookMoves(){let i=new oe([],"rnbqkbnr/1ppppppp/8/p7/P7/8/1PPPPPPP/RNBQKBNR w KQkq a6 0 2"),t=i.findRookMoves(i.Piece(new A(0,7)),i),o=[];o.push(t.length===2);for(let r=0;r<o.length;r++)if(o[r]==!1){console.log("testFindRookMoves failed");return}}findKnightMoves(i,t){let o=[],r=i.getIndex(),n=new A(r%8,Math.floor(r/8)),p=i.color;if(p!=t.currentTurnColor)return o;if(p==="white"){if(n.x-2>=0&&n.y-1>=0){let a=new A(n.x-2,n.y-1);t.Piece(a)===" "?o.push(new w(n,a)):t.Piece(a)?.color==="black"&&o.push(new w(n,a))}if(n.x+2<=7&&n.y-1>=0){let a=new A(n.x+2,n.y-1);t.Piece(a)===" "?o.push(new w(n,a)):t.Piece(a)?.color==="black"&&o.push(new w(n,a))}if(n.x-2>=0&&n.y+1<=7){let a=new A(n.x-2,n.y+1);t.Piece(a)===" "?o.push(new w(n,a)):t.Piece(a)?.color==="black"&&o.push(new w(n,a))}if(n.x+2<=7&&n.y+1<=7){let a=new A(n.x+2,n.y+1);t.Piece(a)===" "?o.push(new w(n,a)):t.Piece(a)?.color==="black"&&o.push(new w(n,a))}if(n.x-1>=0&&n.y-2>=0){let a=new A(n.x-1,n.y-2);t.Piece(a)===" "?o.push(new w(n,a)):t.Piece(a)?.color==="black"&&o.push(new w(n,a))}if(n.x-1>=0&&n.y+2<=7){let a=new A(n.x-1,n.y+2);t.Piece(a)===" "?o.push(new w(n,a)):t.Piece(a)?.color==="black"&&o.push(new w(n,a))}if(n.x+1<=7&&n.y-2>=0){let a=new A(n.x+1,n.y-2);t.Piece(a)===" "?o.push(new w(n,a)):t.Piece(a)?.color==="black"&&o.push(new w(n,a))}if(n.x+1<=7&&n.y+2<=7){let a=new A(n.x+1,n.y+2);t.Piece(a)===" "?o.push(new w(n,a)):t.Piece(a)?.color==="black"&&o.push(new w(n,a))}}else{if(n.x-2>=0&&n.y-1>=0){let a=new A(n.x-2,n.y-1);t.Piece(a)===" "?o.push(new w(n,a)):t.Piece(a)?.color==="white"&&o.push(new w(n,a))}if(n.x+2<=7&&n.y-1>=0){let a=new A(n.x+2,n.y-1);t.Piece(a)===" "?o.push(new w(n,a)):t.Piece(a)?.color==="white"&&o.push(new w(n,a))}if(n.x-2>=0&&n.y+1<=7){let a=new A(n.x-2,n.y+1);t.Piece(a)===" "?o.push(new w(n,a)):t.Piece(a)?.color==="white"&&o.push(new w(n,a))}if(n.x+2<=7&&n.y+1<=7){let a=new A(n.x+2,n.y+1);t.Piece(a)===" "?o.push(new w(n,a)):t.Piece(a)?.color==="white"&&o.push(new w(n,a))}if(n.x-1>=0&&n.y-2>=0){let a=new A(n.x-1,n.y-2);t.Piece(a)===" "?o.push(new w(n,a)):t.Piece(a)?.color==="white"&&o.push(new w(n,a))}if(n.x-1>=0&&n.y+2<=7){let a=new A(n.x-1,n.y+2);t.Piece(a)===" "?o.push(new w(n,a)):t.Piece(a)?.color==="white"&&o.push(new w(n,a))}if(n.x+1<=7&&n.y-2>=0){let a=new A(n.x+1,n.y-2);t.Piece(a)===" "?o.push(new w(n,a)):t.Piece(a)?.color==="white"&&o.push(new w(n,a))}if(n.x+1<=7&&n.y+2<=7){let a=new A(n.x+1,n.y+2);t.Piece(a)===" "?o.push(new w(n,a)):t.Piece(a)?.color==="white"&&o.push(new w(n,a))}}return o}testFindKnightMoves(){let i=new oe([]),t=[];i.currentTurnColor="white";let o=new ve("c3","white",cn);i.addPiece(o);let r=i.findKnightMoves(o,i);t.push(r.length===8),i=new oe([]),o=new ve("c3","black",cn),i.addPiece(o),i.currentTurnColor="black",r=i.findKnightMoves(o,i),t.push(r.length===8),i=new oe([]),o=new ve("a1","white",cn),i.addPiece(o),r=i.findKnightMoves(o,i),t.push(r.length===2);for(let n=0;n<t.length;n++)if(!t[n]){console.log("testFindKnightMoves failed at test "+n);return}}findBishopMoves(i,t){let o=[],r=i.getIndex(),n=new A(r%8,Math.floor(r/8)),p=i.color;if(p!=t.currentTurnColor)return o;if(p==="white"){for(let a=1;a<=7&&!(n.x-a<0||n.y-a<0);a++){let f=new A(n.x-a,n.y-a);if(t.Piece(f)===" ")o.push(new w(n,f));else if(t.Piece(f)?.color==="black"){o.push(new w(n,f));break}else break}for(let a=1;a<=7&&!(n.x+a>7||n.y-a<0);a++){let f=new A(n.x+a,n.y-a);if(t.Piece(f)===" ")o.push(new w(n,f));else if(t.Piece(f)?.color==="black"){o.push(new w(n,f));break}else break}for(let a=1;a<=7&&!(n.x-a<0||n.y+a>7);a++){let f=new A(n.x-a,n.y+a);if(t.Piece(f)===" ")o.push(new w(n,f));else if(t.Piece(f)?.color==="black"){o.push(new w(n,f));break}else break}for(let a=1;a<=7&&!(n.x+a>7||n.y+a>7);a++){let f=new A(n.x+a,n.y+a);if(t.Piece(f)===" ")o.push(new w(n,f));else if(t.Piece(f)?.color==="black"){o.push(new w(n,f));break}else break}}else{for(let a=1;a<=7&&!(n.x-a<0||n.y+a>7);a++){let f=new A(n.x-a,n.y+a);if(t.Piece(f)===" ")o.push(new w(n,f));else if(t.Piece(f)?.color==="white"){o.push(new w(n,f));break}else break}for(let a=1;a<=7&&!(n.x+a>7||n.y+a>7);a++){let f=new A(n.x+a,n.y+a);if(t.Piece(f)===" ")o.push(new w(n,f));else if(t.Piece(f)?.color==="white"){o.push(new w(n,f));break}else break}for(let a=1;a<=7&&!(n.x-a<0||n.y-a<0);a++){let f=new A(n.x-a,n.y-a);if(t.Piece(f)===" ")o.push(new w(n,f));else if(t.Piece(f)?.color==="white"){o.push(new w(n,f));break}else break}for(let a=1;a<=7&&!(n.x+a>7||n.y-a<0);a++){let f=new A(n.x+a,n.y-a);if(t.Piece(f)===" ")o.push(new w(n,f));else if(t.Piece(f)?.color==="white"){o.push(new w(n,f));break}else break}}return o}testFindBishopMoves(){let i=new oe([]),t=new ve("a2","white",Qt);i.addPiece(t);let o=i.findBishopMoves(t,i);if(o.length!==7){console.log("testFindBishopMoves failed 0");return}if(i=new oe([]),t=new ve("a2","black",Qt),i.addPiece(t),i.currentTurnColor="black",o=i.findBishopMoves(t,i),o.length!==7){console.log("testFindBishopMoves failed 1");return}if(i=new oe([]),t=new ve("a2","white",Qt),i.addPiece(t),i.currentTurnColor="black",t=new ve("b3","black",Qt),i.addPiece(t),o=i.findBishopMoves(t,i),o.length!==9){console.log("testFindBishopMoves failed 2");return}if(i=new oe([]),t=new ve("a2","black",Qt),i.addPiece(t),t=new ve("b3","white",Qt),i.addPiece(t),o=i.findBishopMoves(t,i),o.length!==9){console.log("testFindBishopMoves failed 3");return}}findQueenMoves(i,t){let o=this.findRookMoves(i,t);return o.push(...this.findBishopMoves(i,t)),o}testFindQueenMoves(){let i=new oe([]),t=new ve("a2","white",Kt);i.addPiece(t);let o=i.findQueenMoves(t,i);if(o.length!==21){console.log(o),console.error("testFindQueenMoves failed 0");return}if(i=new oe([]),t=new ve("a2","black",Kt),i.addPiece(t),i.currentTurnColor="black",o=i.findQueenMoves(t,i),o.length!==21){i.displayBoard(),console.log(o),console.error("testFindQueenMoves failed 1");return}if(i=new oe([]),t=new ve("a2","white",Kt),i.addPiece(t),i.currentTurnColor="black",t=new ve("b3","black",Kt),i.addPiece(t),o=i.findQueenMoves(t,i),o.length!==23){console.error("testFindQueenMoves failed 2");return}if(i=new oe([]),t=new ve("a2","black",Kt),i.addPiece(t),t=new ve("b3","white",Kt),i.addPiece(t),o=i.findQueenMoves(t,i),o.length!==23){console.error("testFindQueenMoves failed 3");return}}findKingMoves(i,t){let o=[],r=i.getPos().pos,n=new A(r.x,r.y+1);return i.color==="black"?(t.Piece(n)===" "&&r.y+1<=7?o.push(new w(r,n)):t.Piece(n)?.color==="white"&&o.push(new w(r,n)),n=new A(r.x,r.y-1),t.Piece(n)===" "&&r.y-1>=0?o.push(new w(r,n)):t.Piece(n)?.color==="white"&&o.push(new w(r,n)),n=new A(r.x+1,r.y),t.Piece(n)===" "&&r.x+1<=7?o.push(new w(r,n)):t.Piece(n)?.color==="white"&&o.push(new w(r,n)),n=new A(r.x-1,r.y),t.Piece(n)===" "&&r.x-1>=0?o.push(new w(r,n)):t.Piece(n)?.color==="white"&&o.push(new w(r,n)),n=new A(r.x+1,r.y+1),t.Piece(n)===" "&&r.x+1<=7&&r.y+1<=7?o.push(new w(r,n)):t.Piece(n)?.color==="white"&&o.push(new w(r,n)),n=new A(r.x-1,r.y+1),t.Piece(n)===" "&&r.x-1>=0&&r.y+1<=7?o.push(new w(r,n)):t.Piece(n)?.color==="white"&&o.push(new w(r,n)),n=new A(r.x+1,r.y-1),t.Piece(n)===" "&&r.x+1<=7&&r.y-1>=0?o.push(new w(r,n)):t.Piece(n)?.color==="white"&&o.push(new w(r,n)),n=new A(r.x-1,r.y-1),t.Piece(n)===" "&&r.x-1>=0&&r.y-1>=0?o.push(new w(r,n)):t.Piece(n)?.color==="white"&&o.push(new w(r,n)),n=new A(r.x+2,r.y),t.Piece(n)===" "&&r.x+2===6&&r.y===0&&this.inCheck===!1&&t.Piece(new A(r.x+1,r.y))===" "&&t.castlingRights.includes("k")&&o.push(new w(r,n)),n=new A(r.x-2,r.y),t.Piece(n)===" "&&r.x-2===2&&r.y===0&&this.inCheck===!1&&t.Piece(new A(r.x-1,r.y))===" "&&t.Piece(n)===" "&&t.castlingRights.includes("q")&&o.push(new w(r,n))):(n=new A(r.x,r.y+1),t.Piece(n)===" "&&r.y+1<=7?o.push(new w(r,n)):t.Piece(n)?.color==="black"&&o.push(new w(r,n)),n=new A(r.x,r.y-1),t.Piece(n)===" "&&r.y-1>=0?o.push(new w(r,n)):t.Piece(n)?.color==="black"&&o.push(new w(r,n)),n=new A(r.x+1,r.y),t.Piece(n)===" "&&r.x+1<=7?o.push(new w(r,n)):t.Piece(n)?.color==="black"&&o.push(new w(r,n)),n=new A(r.x-1,r.y),t.Piece(n)===" "&&r.x-1>=0?o.push(new w(r,n)):t.Piece(n)?.color==="black"&&o.push(new w(r,n)),n=new A(r.x+1,r.y+1),t.Piece(n)===" "&&r.x+1<=7&&r.y+1<=7?o.push(new w(r,n)):t.Piece(n)?.color==="black"&&o.push(new w(r,n)),n=new A(r.x-1,r.y+1),t.Piece(n)===" "&&r.x-1>=0&&r.y+1<=7?o.push(new w(r,n)):t.Piece(n)?.color==="black"&&o.push(new w(r,n)),n=new A(r.x+1,r.y-1),t.Piece(n)===" "&&r.x+1<=7&&r.y-1>=0?o.push(new w(r,n)):t.Piece(n)?.color==="black"&&o.push(new w(r,n)),n=new A(r.x-1,r.y-1),t.Piece(n)===" "&&r.x-1>=0&&r.y-1>=0?o.push(new w(r,n)):t.Piece(n)?.color==="black"&&o.push(new w(r,n)),n=new A(r.x+2,r.y),t.Piece(n)===" "&&r.x+2===6&&r.y===7&&this.inCheck===!1&&t.Piece(new A(r.x+1,r.y))===" "&&t.castlingRights.includes("K")&&o.push(new w(r,n)),n=new A(r.x-2,r.y),t.Piece(n)===" "&&r.x-2===2&&r.y===7&&this.inCheck===!1&&t.Piece(new A(r.x-1,r.y))===" "&&t.Piece(n)===" "&&t.castlingRights.includes("Q")&&o.push(new w(r,n))),o}testFindKingMoves(){let i=new oe([]),t=new ve("a2","white",Wt);i.addPiece(t);let o=i.findKingMoves(t,i);if(o.length!==5){console.error("testFindKingMoves failed 0",o);return}if(i=new oe([]),t=new ve("a2","black",Wt),i.addPiece(t),i.currentTurnColor="black",o=i.findKingMoves(t,i),o.length!==5){console.error("testFindKingMoves failed 1");return}if(i=new oe([]),t=new ve("a2","white",Wt),i.addPiece(t),i.currentTurnColor="black",t=new ve("b3","black",Wt),i.addPiece(t),o=i.findKingMoves(t,i),o.length!==8){console.error("testFindKingMoves failed 2");return}if(i=new oe([]),t=new ve("a2","black",Wt),i.addPiece(t),t=new ve("b3","white",Wt),i.addPiece(t),o=i.findKingMoves(t,i),o.length!==8){console.error("testFindKingMoves failed 3");return}}runAllTests(){this.testConvertToPosition(),this.testConstructors(),this.testBoardToFen(),this.testFenToBoard(),this.testFindPawnMoves(),this.testFindRookMoves(),this.testFindKnightMoves(),this.testFindBishopMoves(),this.testFindQueenMoves(),this.testFindKingMoves(),this.testFindPseudoLegalMoves(),this.testIsInCheck(),this.testFindLegalMoves(),console.log("All tests ran for board class")}}class ro{runAllTests(){new w(void 0,void 0,"a2","a4").runAllTests(),new Pt("a2").runAllTests(),new ve("a2","white","pawn").runAllTests(),new oe().runAllTests(),console.log("All tests ran for chessClasses.ts")}}function fn(c,i){return c&&i&&typeof c=="object"&&typeof i=="object"?Object.keys(c).length===Object.keys(i).length&&Object.keys(c).reduce(function(t,o){return t&&fn(c[o],i[o])},!0):c===i}const lo=wr();function ao(c){const[i,t]=z({x:0,y:0}),[o,r]=z({x:0,y:0}),[n,p]=z(!1),[a,f]=z(null),[y,_]=z(null),[q,D]=z({x:0,y:0}),[V,S]=z(null),[Q,X]=z(null),[N,R]=z({x:0,y:0}),[E,C]=z({x:0,y:0}),[B,$]=z(!1),[L,ne]=z(null),[Ce,Ee]=z(null),[ye,Me]=z({x:0,y:0}),[re,qe]=z(null),[ae,J]=z(null),[P,k]=z([]),G=[],g=[];gt(()=>{document.addEventListener("pointermove",O=>{t({x:O.clientX,y:O.clientY}),n()&&a()&&(a().ref.style.transform=`translate(${i().x-o().x+q().x}px, ${i().y-o().y+q().y}px)`,a().ref.style.zIndex=100,a().rectangle=a().ref.getBoundingClientRect(),V()?.length>0&&X(wt(V())))}),document.addEventListener("pointerup",()=>{a()!=null&&(a().dragEnd(Q()),g.forEach(O=>{O()}),a()?.ref&&(a().ref.style.transform=`translate(${0}px, ${.1}px)`,a().ref.style.zIndex=0),p(!1),_(a()),f(null))}),document.addEventListener("virtualpointermove",O=>{R({x:O.clientX,y:O.clientY}),B()&&L()&&(console.log("virtual mouse move"),L().ref.style.transform=`translate(${N().x-E().x+ye().x}px, ${N().y-E().y+ye().y}px)`,L().ref.style.zIndex=100,L().rectangle=L().ref.getBoundingClientRect(),re()?.length>0&&J(ri(re())))}),document.addEventListener("virtualpointerup",()=>{L()!=null&&(L().dragEnd(ae()),g.forEach(O=>{O()}),L()?.ref&&(L().ref.style.transform=`translate(${0}px, ${.1}px)`,L().ref.style.zIndex=0),$(!1),Ee(L()),ne(null))})});const U=(O,m)=>{m!==void 0&&m.dragStart.push(O)},ce=O=>{G.push(O)},we=O=>{g.push(O)},Be=(O,m)=>{m!==void 0&&(m.dragEnd=O)},Ct=(O,m)=>{m!==void 0&&(m.hoverOver=O)},Fe=(O,m)=>{m!==void 0&&(m.hoverOut=O)},ot=O=>{let m={id:O,startingPosition:{x:0,y:0},dragStart:[],dragEnd:()=>{},ref:null,rectangle:null,data:{}};return gt(()=>{m.ref.addEventListener("pointerdown",Z=>{if(!m.ref.classList.contains("noDrag")){f(m);for(let j=0;j<m.dragStart.length;j++)m.dragStart[j](m);for(let j=0;j<G.length;j++)G[j](m);D(rt(Z.target.getAttribute("style"))),r({x:Z.clientX,y:Z.clientY}),p(!0),m.rectangle=m.ref.getBoundingClientRect()}}),m.ref.addEventListener("virtualpointerdown",Z=>{ne(m);for(let j=0;j<m.dragStart.length;j++)m.dragStart[j](m);for(let j=0;j<G.length;j++)G[j](m);Me(rt(Z.target.getAttribute("style"))),C({x:Z.clientX,y:Z.clientY}),$(!0),m.rectangle=m.ref.getBoundingClientRect()})}),m},Le=O=>{let m={id:O,startingPosition:{x:0,y:0},hoverOver:()=>{},hoverOut:()=>{},ref:null,rectangle:null,hovering:!1,occupied:!1,droppable:!0};return k([...P(),m]),gt(()=>{m.rectangle=m.ref.getBoundingClientRect(),m.ref.querySelector(".piece")!==null&&(m.occupied=!0),document.addEventListener("pointermove",()=>{if(a()==null||a().rectangle==null)return;let Z=a().ref.getBoundingClientRect(),j=m.ref.getBoundingClientRect();if(Z.top>j.bottom||Z.right<j.left||Z.bottom<j.top||Z.left>j.right){if(Yt(m),!m.hovering)return;m.hovering=!1,m.hoverOut(a())}else{if(m.ref===Q()?.ref){if(m.hovering)return;m.hovering=!0,m.hoverOver(a())}else m.hovering=!1,m.hoverOut(a());vt(m)}}),document.addEventListener("pointerdown",()=>{if(a()==null||a().rectangle==null)return;let Z=a().ref.getBoundingClientRect(),j=m.ref.getBoundingClientRect();if(Z.top>j.bottom||Z.right<j.left||Z.bottom<j.top||Z.left>j.right){if(Yt(m),!m.hovering)return;m.hovering=!1,m.hoverOut(a())}else{if(m.ref===Q()?.ref){if(m.hovering)return;m.hovering=!0,m.hoverOver(a())}else m.hovering=!1,m.hoverOut(a());vt(m)}V()?.length>0&&X(wt(V()))}),document.addEventListener("pointerup",()=>{!m.hovering||(m.hovering=!1,m.hoverOut(y()),console.log("hi"),y()!=null&&m.droppable!==!1&&(m.ref.querySelector(".piece")!==null?(m.ref.querySelector(".piece").remove(),console.log("PIECE REMOVED")):m.ref.querySelector(".circle")!==null&&m.ref.querySelector(".circle").remove(),m.ref.appendChild(y().ref)))}),document.addEventListener("virtualpointermove",()=>{if(L()==null||L().rectangle==null)return;let Z=L().ref.getBoundingClientRect(),j=m.ref.getBoundingClientRect();if(Z.top>j.bottom||Z.right<j.left||Z.bottom<j.top||Z.left>j.right){if(oi(m),!m.hovering)return;m.hovering=!1,m.hoverOut(L())}else{if(m.ref===ae()?.ref){if(m.hovering)return;m.hovering=!0,m.hoverOver(L())}else m.hovering=!1,m.hoverOut(L());Y(m)}}),document.addEventListener("virtualpointerdown",()=>{if(L()==null||L().rectangle==null)return;let Z=L().ref.getBoundingClientRect(),j=m.ref.getBoundingClientRect();if(Z.top>j.bottom||Z.right<j.left||Z.bottom<j.top||Z.left>j.right){if(oi(m),!m.hovering)return;m.hovering=!1,m.hoverOut(L())}else{if(m.ref===ae()?.ref){if(m.hovering)return;m.hovering=!0,m.hoverOver(L())}else m.hovering=!1,m.hoverOut(L());Y(m)}re()?.length>0&&J(ri(re()))}),document.addEventListener("virtualpointerup",()=>{!m.hovering||(m.hovering=!1,m.hoverOut(Ce()),console.log("hi"),Ce()!=null&&m.droppable!==!1&&(m.ref.querySelector(".piece")!==null?(m.ref.querySelector(".piece").remove(),console.log("PIECE REMOVED")):m.ref.querySelector(".circle")!==null&&m.ref.querySelector(".circle").remove(),m.ref.appendChild(Ce().ref)))})}),P()[P().length-1]};function rt(O){if(O===null)return{x:0,y:0};let m=O.split("translate(")[0],Z;return m&&(Z=O.split("translate(")[1].split(")")[0].split("px, ")),{x:parseInt(Z[0]),y:parseInt(Z[1])}}function vt(O){V()==null&&S([O]),!V().includes(O)&&(V()?.includes(O)||S([...V(),O]))}function Yt(O){V()!=null&&(!V()?.includes(O)||V().includes(O)&&S(V()?.filter(m=>m!==O)))}function wt(O){if(O==null)return;let m=a().ref.getBoundingClientRect();return O.sort((j,bt)=>{let Te=j.ref.getBoundingClientRect(),Ie=bt.ref.getBoundingClientRect(),Qe,lt,at,ct,We,ht;return m.x>Te.x?Qe=Te.right-m.x:Qe=m.right-Te.x,m.bottom>Te.bottom?lt=Te.bottom-m.top:lt=m.bottom-Te.top,We=Qe*lt,m.x>Ie.x?at=Ie.right-m.x:at=m.right-Ie.x,m.bottom>Ie.bottom?ct=Ie.bottom-m.top:ct=m.bottom-Ie.top,ht=at*ct,ht-We})[0]}function Y(O){re()==null&&qe([O]),!re().includes(O)&&(re()?.includes(O)||qe([...re(),O]))}function oi(O){re()!=null&&(!re()?.includes(O)||re().includes(O)&&qe(re()?.filter(m=>m!==O)))}function ri(O){if(O==null)return;let m=L().ref.getBoundingClientRect();return O.sort((j,bt)=>{let Te=j.ref.getBoundingClientRect(),Ie=bt.ref.getBoundingClientRect(),Qe,lt,at,ct,We,ht;return m.x>Te.x?Qe=Te.right-m.x:Qe=m.right-Te.x,m.bottom>Te.bottom?lt=Te.bottom-m.top:lt=m.bottom-Te.top,We=Qe*lt,m.x>Ie.x?at=Ie.right-m.x:at=m.right-Ie.x,m.bottom>Ie.bottom?ct=Ie.bottom-m.top:ct=m.bottom-Ie.top,ht=at*ct,ht-We})[0]}return le(lo.Provider,{value:{onDragEnd:Be,onDragStart:U,createDraggable:ot,onHoverOver:Ct,createDroppable:Le,onHoverOut:Fe,onGlobalDragStart:ce,onGlobalDragEnd:we},get children(){return c.children}})}const Ws=()=>br(lo);class Lr{from;to;type;constructor(i,t,o){this.from=i,this.to=t,this.type=o}}class Oi{id;username;CatUrl;last_seen=Date.now();inGame=!1;constructor(i,t,o){this.id=i,this.username=t,this.CatUrl=o}}class Or{from;fromUserColor;to;gameID;type="createGame";constructor(i,t){this.from=i,this.to=t,this.fromUserColor=Math.random()>.5?"white":"black",this.gameID=this.generateRandomId()}generateRandomId(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}}class ki{x;y;constructor(i,t){this.x=i,this.y=t}}class hn{from;to;position;screen;type="virtualMouseEvent";eventType;chessBoardWidth;constructor(i,t,o,r,n){this.from=i,this.to=t,this.position=o,this.screen=new ki(window.innerWidth,window.innerHeight),this.chessBoardWidth=r,this.eventType=n}}class Nr{from;to;previousFen;crowning=!1;eating=!1;atePiece="";crownedTo="";constructor(i,t,o){this.from=i,this.to=t,this.previousFen=o}}class Dr{fen;from;to;type="chessGameUpdate";turn;moves;constructor(i,t,o,r,n){this.fen=i,this.from=t,this.to=o,this.turn=r,this.moves=n}}const Rr=Ae('<div class="number-right" style="pointer-events: none;"></div>'),$r=Ae('<div class="number-left" style="pointer-events: none;"></div>'),Fr=Ae("<div></div>"),qr=Ae('<section><div class=""> </div></section>');function co({pieceClassName:c,className:i,id:t,board:o,draggableId:r,updateBoard:n,eatenPieces:p,setDisplayInlay:a,setDisplayInlayX:f,inlaySelection:y,displayInlay:_,style:q,color:D,setLastMove:V,lastMove:S,movePieceSound:Q,capturePieceSound:X,setMoves:N,moves:R}){gt(()=>{window.movePiece=function($,L){o().movePiece($,L),n()},window.board=o});const E=({id:$,className:L,draggable:ne,draggableClass:Ce})=>{const{onHoverOver:Ee,createDroppable:ye,onHoverOut:Me,onGlobalDragStart:re,onGlobalDragEnd:qe}=Ws(),ae=ye($);return Ee(J=>{ae.ref.classList.add("hovered")},ae),Me(J=>{ae.ref.classList.remove("hovered")},ae),re(J=>{if(!_())if(J.data.legalPieceMoves.includes(ae.id)){if(ae.ref.children.length===0||ae.ref.querySelector(".piece")==null){ae.droppable=!0;let P=document.createElement("section");P.classList.add("circle"),ae.ref.appendChild(P)}else if(ae.ref.children.length>0&&ae.ref.querySelector(".piece")!=null){ae.droppable=!0;let P;for(let k=0;k<ae.ref.children.length;k++)ae.ref.children[k].classList.contains("piece")&&(P=ae.ref.children[k]);P.children[0]?.classList.add("circle")}}else ae.droppable=!1}),qe(J=>{let P=ae.ref.querySelectorAll("section.circle");for(let G=0;G<P.length;G++)P[G].remove();let k=ae.ref.querySelectorAll("div.circle");for(let G=0;G<k.length;G++)k[G].classList.remove("circle")}),ne.getAttribute("class").length===0&&(ne=void 0),(()=>{const J=Fr.cloneNode(!0),P=ae.ref;return typeof P=="function"?Hs(P,J):ae.ref=J,Mi(J,"id",$),Bi(J,L),Ve(J,le(Xe,{when:ne!=null,children:ne}),null),Ve(J,le(Xe,{get when(){return $[1]==="8"&&D==="black"||$[1]==="1"&&D==="white"},get children(){const k=Rr.cloneNode(!0);return Ve(k,()=>$[0]),k}}),null),Ve(J,le(Xe,{get when(){return $[0]==="h"&&D==="black"||$[0]==="a"&&D==="white"},get children(){const k=$r.cloneNode(!0);return Ve(k,()=>$[1]),k}}),null),mt(k=>oo(J,q,k)),J})()},C=({className:$,id:L})=>{const{onDragStart:ne,onDragEnd:Ce,createDraggable:Ee}=Ws(),ye=Ee(L);let Me,re;ne(()=>{if(_())return;Me=ye.ref.parentElement.id;let J=o().findLegalMoves(o());J.length===0&&(o().checkMate=!0);let P=[];for(let k=0;k<J.length;k++)J[k].start==Me&&P.push(J[k].end);ye.data.legalPieceMoves=P},ye),Ce(async J=>{if(_()||J===null||(J.occupied=!1,J.ref.querySelector(".circle")===null))return;let P=J.ref.querySelector(".piece");if(await B(1),P?.id===ye?.id?re=ye.ref.parentElement.id:re=J.ref.id,re===Me)return;o().board;let k=new Nr(Me,re,o().fen);o().movePiece(Me,re),P?.classList?.contains("piece")?(p.push(P),k.eating=!0,k.atePiece=o().getPieceAtPosition(re)?.type,X.play()):Q.play();let G=o().getPieceAtPosition(re);G.type==="p"&&G.color===D&&(re[1]==="8"||re[1]==="1")&&(k.crowning=!0,a(!0),f(G.position.pos.x)),N([...R(),k]),n(),(P?.classList?.contains("number-right")||P?.classList?.contains("number-left"))&&J.ref.appendChild(P),V({from:Me,to:re});let g=document.querySelectorAll(".chessSquare");for(let U=0;U<g.length;U++)g[U].id===S().from||g[U].id===S().to?g[U]?.classList?.add("lastMove"):g[U]?.classList?.remove("lastMove")},ye);const qe=c.toUpperCase()===c?"white":"black",ae=D===qe;return(()=>{const J=qr.cloneNode(!0),P=ye.ref;return typeof P=="function"?Hs(P,J):ye.ref=J,Bi(J,`${$} ${ae?"canDrag":"noDrag"}`),Mi(J,"id",L),J})()},B=$=>new Promise(L=>setTimeout(L,$));return le(E,{className:i,get draggable(){return le(C,{className:`${c!=" "?c+" piece":""}`,id:r})},id:t})}const jr=Ae('<div><div class="chessInlaySquare" id="queenSelection"><div class="piece Q"></div></div><div class="chessInlaySquare" id="knightSelection"><div class="piece N"></div></div><div class="chessInlaySquare" id="rookSelection"><div class="piece R"></div></div><div class="chessInlaySquare" id="bishopSelection"><div class="piece B"></div></div></div>'),Hr=Ae('<div class="chessBoard"></div>');let Ur=new ro;Ur.runAllTests();function Qr({board:c,updateBoard:i,setLastMove:t,lastMove:o,movePieceSound:r,capturePieceSound:n,setMoves:p,moves:a}){c().displayBoard();let f=y();function y(){let E=[];for(let C=0;C<8;C++)for(let B=0;B<8;B++)E.push(`${String.fromCharCode(97+B)}${8-C}`);return E}let _=[];const[q,D]=z(!1),[V,S]=z("00"),[Q,X]=z("");V()+"";async function N(E){X(E),D(!1);let C=a()[a().length-1];C.crownedTo=E.toLowerCase();let B=a().splice(0,a().length-1);B.push(C),p(B);let $=c().getPieceAtBoardIndex(parseInt(V())),L=$.type;$.type=E.toLowerCase(),c().board[parseInt(V())]=E,c().fen=c().boardToFen(),console.log($);let ne=document.getElementById($.position.position)?.children[0];console.log("previous type:"+L),ne?.classList.remove(L.toUpperCase()),ne?.classList.add(E.toUpperCase()),await R(10),i();let Ce={start:C().from,end:C().to};console.log(Ce)}function R(E){return new Promise(C=>setTimeout(C,E))}return(()=>{const E=Hr.cloneNode(!0);return Ve(E,le(ao,{get children(){return[le(Xe,{get when(){return q()},get children(){const C=jr.cloneNode(!0),B=C.firstChild,$=B.nextSibling,L=$.nextSibling,ne=L.nextSibling;return B.$$click=()=>N("Q"),$.$$click=()=>N("N"),L.$$click=()=>N("R"),ne.$$click=()=>N("B"),mt(()=>Bi(C,`chessInlay ml-[${V()}]`)),C}}),le(mn,{get each(){return c().board},children:(C,B)=>le(co,{get style(){return B()},get pieceClassName(){return c().board[B()]},get className(){return`chessSquare ${B()%16<8?B()%2==0?"lighterBackground":"":B()%2==0?"":"lighterBackground"}`},get id(){return f[B()]},board:c,updateBoard:i,get draggableId(){return Wr()},eatenPieces:_,setDisplayInlay:D,setDisplayInlayX:S,inlaySelection:Q,displayInlay:q,color:"white",setLastMove:t,lastMove:o,movePieceSound:r,capturePieceSound:n,setMoves:p,moves:a})})]}})),E})()}function Wr(){return Math.random().toString(36).substr(2,9)}Gt(["click"]);const Kr=Ae('<div><div class="chessInlaySquare" id="queenSelection"><div class="piece q"></div></div><div class="chessInlaySquare" id="knightSelection"><div class="piece n"></div></div><div class="chessInlaySquare" id="rookSelection"><div class="piece r"></div></div><div class="chessInlaySquare" id="bishopSelection"><div class="piece b"></div></div></div>'),Gr=Ae('<div class="chessBoard"></div>');let Yr=new ro;Yr.runAllTests();function zr({board:c,updateBlackBoard:i,setLastMove:t,lastMove:o,movePieceSound:r,capturePieceSound:n,setMoves:p,moves:a}){c().displayBoard();let f=y();function y(){let E=[];for(let C=0;C<8;C++)for(let B=0;B<8;B++)E.push(`${String.fromCharCode(97+B)}${8-C}`);return E}let _=[];const[q,D]=z(!1),[V,S]=z("00"),[Q,X]=z("");async function N(E){X(E),D(!1);let C=c().getPieceAtBoardIndex(63-(7-parseInt(V()))),B=C.type;console.log(C),C.type=E,c().board[63-(7-parseInt(V()))]=E,c().fen=c().boardToFen(),console.log(C);let $=document.getElementById(C.position.position)?.children[0];console.log("previous type:"+B),$?.classList.remove(B),$?.classList.add(E),await R(10),i(),o().from,o().to}function R(E){return new Promise(C=>setTimeout(C,E))}return(()=>{const E=Gr.cloneNode(!0);return Ve(E,le(ao,{get children(){return[le(Xe,{get when(){return q()},get children(){const C=Kr.cloneNode(!0),B=C.firstChild,$=B.nextSibling,L=$.nextSibling,ne=L.nextSibling;return B.$$click=()=>N("q"),$.$$click=()=>N("n"),L.$$click=()=>N("r"),ne.$$click=()=>N("b"),mt(()=>Bi(C,`chessInlay ml-[${7-parseInt(V())}]`)),C}}),le(mn,{get each(){return c().board},children:(C,B)=>le(co,{get style(){return B()},get pieceClassName(){return c().board[c().board.length-1-B()]},get className(){return`chessSquare ${(c().board.length-1-B())%16<8?(c().board.length-1-B())%2==0?"lighterBackground":"":(c().board.length-1-B())%2==0?"":"lighterBackground"}`},get id(){return f[c().board.length-1-B()]},board:c,updateBoard:i,get draggableId(){return Xr()},eatenPieces:_,setDisplayInlay:D,setDisplayInlayX:S,inlaySelection:Q,displayInlay:q,color:"black",setLastMove:t,lastMove:o,movePieceSound:r,capturePieceSound:n,setMoves:p,moves:a})})]}})),E})()}function Xr(){return Math.random().toString(36).substr(2,9)}Gt(["click"]);const Jr=Ae(`<div class="glassOverlay"><label for="username">Choose your username</label><div class="userNameInput"><input type="username" placeholder="username" id="userNameInput"></div><button class="submitUsernameButton">LET'S GO<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 arrow"><path stroke-linecap="round" stroke-linejoin="round" d="M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"></path></svg></button></div>`),Zr=({user:c,setUser:i,setInSession:t,chessWebSocket:o})=>{let r="";const[n,p]=z(""),a=async()=>{if(r===""){alert("Please enter a username");return}if(r.length>10&&(r=r.slice(0,10)),r===c()?.username){let _=new Oi(Ks(),r,n());i(_),t(!0),o.beginPinging(c);return}let y=new Oi(Ks(),r,n());i(y),console.log(),o.beginPinging(c),console.log(y,y.id),o.pingWebSocket(y),sessionStorage.setItem("gabrielmalek/chess.data",JSON.stringify({id:y.id,username:y.username,CatUrl:y.CatUrl})),localStorage.setItem("gabrielmalek/chess.data",JSON.stringify({id:y.id,username:y.username,CatUrl:y.CatUrl})),t(!0)};async function f(){return(await(await fetch("https://api.thecatapi.com/v1/images/search")).json())[0].url}return gt(()=>{document.addEventListener("keyup",function(_){_.key==="Enter"&&a()});let y=document.getElementById("userNameInput");y?.focus(),console.log(c()?.username),c()?.username!==void 0&&(y.value=c()?.username,r=y.value),f().then(_=>{p(_)})}),(()=>{const y=Jr.cloneNode(!0),_=y.firstChild,q=_.nextSibling,D=q.firstChild,V=q.nextSibling;return D.$$keyup=S=>r=S.currentTarget.value,V.$$click=()=>a(),y})()};function Ks(){let c="";for(let i=0;i<20;i++)c+=Math.floor(Math.random()*10);return c}Gt(["keyup","click"]);const el=Ae('<div class="catLogo"></div>');function Gs({catLink:c}){return(()=>{const i=el.cloneNode(!0);return mt(t=>oo(i,`background-image: url(${c})`,t)),i})()}const tl=Ae('<div class="bellContainer"><div class="dropdown"><button class="bellIcon" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="dropdownMenuButton"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16"><path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0M3.124 7.5A8.969 8.969 0 015.292 3m13.416 0a8.969 8.969 0 012.168 4.5"></path></svg></button><div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div></div></div>');function il({onClick:c,notifications:i}){return c=()=>{console.log("bell clicked"),console.log(i());let t=document.querySelector(".dropdown-menu");console.log(t),t.style.display=="block"?t.style.display="none":t.style.display="block",t.innerHTML="";for(let o=0;o<i().length;o++){let r=document.createElement("div"),n=document.createElement("div"),p=document.createElement("div");p.classList.add("username"),p.innerText=i()[o].from.username,r.classList.add("dropdown-item"),r.id=i()[o].from.id,n.classList.add("text"),n.classList.add("notificationText"),n.appendChild(p),n.innerHTML="\u{1F514}&nbsp"+n.innerHTML+"&nbsp wants to play ",r.appendChild(n),t.appendChild(r),console.log(r,"hi")}},gt(()=>{document.addEventListener("click",function(t){let o=document.querySelector(".dropdown-menu"),r=document.querySelector(".bellIcon"),n=t.target;do{if(n==r)return;n=n.parentNode}while(n);o.style.display="none"})}),(()=>{const t=tl.cloneNode(!0),o=t.firstChild,r=o.firstChild;return Ir(r,"click",c,!0),t})()}Gt(["click"]);const nl=Ae('<div class="glassOverlay"><ul class="list"><li class="listItem" id="mainUser"><div class="text"></div></li></ul></div>'),sl=Ae('<div class="absolute left-3 text-red-500">Notification sent!</div>'),ol=Ae('<div class="modal fade " id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"><div class="modal-dialog absolute top-[39vh] left-1/ "><div class="modal-content w-[50px] "><div class="modal-header"><h1 class="modal-title fs-5" id="exampleModalLabel">Play Chess with </h1><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body">Play online with this player right now!</div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button><button type="button" class="btn btn-primary">Play Chess</button></div></div></div></div>'),rl=Ae('<li class="listItem" data-bs-toggle="modal" data-bs-target="#exampleModal"><div class="text"></div></li>');function ll({users:c,user:i,setNotificationUser:t,onNotificationReceived:o,chessWebSocket:r}){const[n,p]=z(),[a,f]=z(!1),[y,_]=z([]),[q,D]=z([]),[V,S]=z(!1);gt(()=>{document.addEventListener("notification",N=>{console.log("notification event received");const R=JSON.parse(N.data);if(o(R),R.type!="promptForGame")return;t(R.from),console.log("notification received:",R);for(let C=0;C<y().length;C++)if(y()[C].from.id==R.from.id)return;let E=y();E.push(R),_(E),S(!0)})});function Q(N){p(N),document.getElementById("exampleModal")?.style.setProperty("display","flex")}async function X(N){for(let E=0;E<q().length;E++)if(q()[E].to.id==N.to.id)return;let R=q();R.push(N),D(R),r.sendNotification(N)}return[le(Xe,{get when(){return V()},get children(){return le(il,{notifications:y,onClick:()=>{}})}}),(()=>{const N=nl.cloneNode(!0),R=N.firstChild,E=R.firstChild,C=E.firstChild;return Ve(C,()=>i().username),Ve(E,le(Gs,{get catLink(){return i().CatUrl}}),null),Ve(R,le(mn,{get each(){return c()},children:B=>(()=>{const $=rl.cloneNode(!0),L=$.firstChild;return $.$$click=()=>Q(B),Ve(L,()=>B.username),Ve($,le(Gs,{get catLink(){return B.CatUrl}}),null),mt(()=>Mi($,"id",B.id)),$})()}),null),N})(),(()=>{const N=ol.cloneNode(!0),R=N.firstChild,E=R.firstChild,C=E.firstChild,B=C.firstChild;B.firstChild;const $=C.nextSibling,L=$.nextSibling,ne=L.firstChild,Ce=ne.nextSibling;return Ve(B,(()=>{const Ee=pt(()=>n()!=null);return()=>Ee()?`${n()?.username}`:""})(),null),Ve(L,le(Xe,{get when(){return a()},get children(){return sl.cloneNode(!0)}}),ne),Ce.$$click=()=>{let Ee=new Lr(i(),n(),"promptForGame");X(Ee),a()==!1&&f(!0)},N})()]}Gt(["click"]);const al="data:audio/mpeg;base64,SUQzBAAAAAABH1RFTkMAAAALAAADUHJvIFRvb2xzAFRYWFgAAAAjAAADb3JpZ2luYXRvcl9yZWZlcmVuY2UAYWFPNEt0IUJLdlNrAFREUkMAAAAMAAADMjAxOS0wNC0yMQBUWFhYAAAAGgAAA3RpbWVfcmVmZXJlbmNlADE3MjgwMDAwMABUU1NFAAAADwAAA0xhdmY1OC4yOS4xMDAAAAAAAAAAAAAAAP/7VAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEluZm8AAAAPAAAACAAADMAALS0tLS0tLS0tLS0tS0tLS0tLS0tLS0tLaWlpaWlpaWlpaWlpaYeHh4eHh4eHh4eHh6WlpaWlpaWlpaWlpaXDw8PDw8PDw8PDw8Ph4eHh4eHh4eHh4eHh////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQE5gAAAAAAAAzAei0vIf/7lGQAAAMuHciFc0ACKuFWcqGYABC8uU9ZrIAQvopiQzUgADDQIHQuY1I5kkbmEQMZCOBo5LGfhoY3Q5wCCG7FcZeABikmmUyCEDYxYSDJgwFBCeTceaYaoQlKYUGq8uYBgjTQICBQBgl7O5DEOXqSxunjcvp8+///nXp6enpKSkpMGQ8AAAAAVASoEJwMWaIIFnEIOBiwgDC0xA4+sH1AgUBA4XeD/KHP/KOBB2Iz/8oc4PgAAAV9uRSW0SBsALDmsjFUiIVimojFGpsmc0mEHFEgmImJJGdXBQmCU7d1xiRADooPLkDg3Tlo1aDtFMBZFBHFy8KHqaa4WEtu/DhbYDWszG5ukhTXYo8butg1ayrU0pl/f/3Wgvdbk5SZ3O1cr+W98/79S93//LKmEAY9bwE5c274qni5H6i+zFmyQGVb9iwZ0OLDTNIQtIz9JN/B44YsS8DsQxmDdxty3QJkkDLoPRNX/t/KqgA/AQBAxudAcqzBpfMoGwyjGTUw1P/7lGQKjNP7PEoXciAAMKIIwuy8AA40mRItpHRAvgnjjPSKCMvrY0aVAMPiIWG3ouayUpjwZmEhIIwqYgDJigBC2gLABTENAWoLgckQqLhHCQIMjBYcIJGJAiDJF01GVNT02U5w6Ymqkkq1o2RZToLqSUtSSWu3mJrRpLqW1J/3WrutaKKLTM9mwMnW54TBIAGFVQwoBg8EHKXCBUOHL9KRM69DVlqA5E1S5NUpxHiEnmW4ucVtnVdo/gj6n/RrCIeMjIUgxXINrUzbAEyO4OajQEgBVIMREDMUw3IcNDWTru83qTNagzJCciABx9FmgqgQNEgUFMWrKzNaZW77AQ0wAJsgbBUUAkiSRY4CjAJEG/tUL0goDpAuD7n0KNdIodOvt29UXOgUNVm1Xu+z+ixQcg53hkEpCFI8eoMUHKeQUgQEE6BpMpOCCDHKVHHAfXCFxiNQbqBdFFRRHGsgUjbVBCADEgMKGps3iDRM0aBOSPgcfGbNBjqeY45m9Uxgif/7lGQPjNNfIsMTeCtANMJ4kWMpOguUTwwtZYzA/InhQawhmKXTNCmRp5MVDOU1/A3D4dVADBS8Vgh54GUt0FgsCkLuOpTUciUDuFmhr2R5aCScrDJHGOjw66jPSLou5cks/9C9hKt65fbxCGR12hUqwEw5IgHIQUIpsF3EyB3sSWMNwxgDIjKkoDEJCkU5YqdqzP3kiKhkneX0NGrTjtZSzCLdP2oAvMgcm5DmDHnTqnTWgKIZwydHMZpYcXMG3Bt2YmmGDjFGj4raZzajqdEAqPzLvQY5a44rs5OAqNDz21SsJBpx2pinhsBHHrW6/1ertWxdFC6kMRXqeq2l96eK5CnRDHlY0HNg1NPRF9R0w4mMNcRMn+KTIFYmDImSMBQgecB/CuAHYZKokKsCz36tsNXiyaeNwksVdC/8AWiwSWpCUIAsSwTGQoGE5hscCkptEJssKg5g0Z4VZyyhxHhwBZka4OGGSIGtSk0ZRZGMcFkRqGWmOqxCsj40bgcsg//7lGQfDtL/IEKDellwSQKIMGd4Ggx4TwYtc0aQ9YjhxbxoiEeWJ246o3+K9t3wx/VytFNdclWyUV6+1Ewr6jWhvrdlvy7wBZExnztBL8DMEbOFGyERtxgBEo3SGNxVTKjcRm5goKBAZYM1YvPWgqY0vRfEJQYKCmjsZVFld0+7h4ZWtQ7INGw/RkkC4uXSEQASUYVRANQMqMZhOkDBSQBXoyqRgwynKh+YKFAOjRgYHGFinQIGNAGJiCxhMkeBpgsjas4THpuGIRFo9NXbv3KaRCRxwqNLAit5UBKeWi307S2//I2KJEsq76Nt/4yVZ5uowi25CHEwEGMPDjNogxGOkjbc0CMEoJ5YcfMmRAyV/VhDJiCyQVAQQlsvFb87ZgZrzKqCpZj33R4SVdrRuYprI0BmkhpQXnap5yP+ZKqm3zZoTMZ/CmI8x4x0UOBzKYbeIobmZZnPGnjEiqIxKMmVoPGMFvHCFY0ZCIG9y4BQc8VVaYkmvvbDXrbOXaenpf/7lGQoD/LbH7+DemMwTSPIEG8naExogvgObYlBTY8fwb0lmG8tWwfjGz//yvZ9DkAYHAycYyUNTOTEjXGAw93MsfQSemCox1SgYKamTuhACElghTDoSIA01gsyEMAQVAGwRiDsIeuwhTFYKi8s1AzCwOaim284yvHVLQpWNhUnmREkJOALFU5M6DY6jOKQg5wPTn6uNFagMsH4gRybSBkMxAAK2U6onMOOzPyQxolMHAAQPD0WAQhHNO0OS1Fl9LggA2EY4m68tDf4XfhirsVuZi09Z1pL3R5AzknH//5ZsRAhmPAprSYnqbRmmHpgBwDVDA4kfNdWThk0ws5PiQTJFsylw4pAQHjwZTABS3LZwqgGRzdV9MuZ6mgtQRAECyM45NEvStZXzx+ZDLxXpzYYF/TVjAIHzBxIwIbM7FDG1QARhqB+dPJg6bOtfTyVY5NBOCcDBjsxsOMtNjGFk+4TM3NCI2BTHbFVlWoy3gIyABx4io7bFXutzXJA8+c1Z//7lGQmD/LYID6DeTPAVgQH0G8GhAuUgPYOaStBNI5fgbyVoQtTT/eYX/qrSCTKRW1TaF9Eo2ckRFDeLgZlGodSREXAO5JprwOmJjBgdOpmDFpgRAZHHArOMiGTUhswQCDB4vsYTDB0+4Id8yjW4509JXslUzGzSylk0HbW/di7Kmi9cC2LF6nrVOIAYZ5NRnwWjKgNKL4xsDjRsrM1EQBU8xIyQRJCNGexCePiaCuCQZuUpkFZi05gnIhQJfGfTrmeZ2RIc4Sb87CHCkDGZC2OhaKsZ3tXO6yFwpH46V1YhPrzT2d8SVVVgQFGNFxltsaWxHmtAEXCagNShSFHCRo1IVMXMwRicYxvGnBCBBTfVdAVGGS1gplphc5orBJt93mg+/NOKgdzXJ21IPMQRVAHJ211RoSJjscXTKEAS9TSRI3dZPKOTVyQzsxBcYmEb8SGJqZk4OaeDmHXp7+i4giUIFAEe/zhP+glTdbmyd35Q1vCW7BxY8gc7PsyvK9Jqf/7lGQmj/KeID2DeTOwVEPH0HNoPgoQUPYMbyGJVA8egc0Nce6rSTHaP6X/GAYJDUWIBggPmP4cZ2HoVCgQ2GgDppP+bPLmsmh1LMZoWGFBRNGFwS9AyRCgYFwUDAosBtEwaECgJNK9bmWWapqtCGGGVVnvt9yzd4hzBHBtDuoCGEETSxADNAKJThz4zIDMPPDTUoyI5OINzb0gy8sNQgTOCYyNTNOGzSjUyZgsSJHGIKZCKACRqbNacVmzgSOJtN+rqZjk/pNV7tqigVI2yiT5MEggw0NRYTmPkYaBdpuogGWwWYPA5FKzcg6OTpI8uQ2yEyI8w+g2uc9VApSEo4HVyyCcZqmaQCtrpMPZIw3sSZDIL2dZ62a73yt3lIubUMfRLMwVMCeNOSMA/Hxp18xg7J6iJxZAoVNJFMVgDUUE/zU1cQeZCgs1Bsx8IywQ1ZwVDgoq8S7nGglUrxqavVA0t1vVXdmta2bz/+YYVVJJdGFVFF83z0w841aMFgTShP/7lEQtj/JfFLiDW9ICSeJ3AGssWEAAAaQAAAAgAAA0gAAABDSGTXyjF3DZrwOZO9wyHRWAyzQOCZKSCAoKLog0RDMMJROf90k9mHq9BI7ULmz05WPEhs0x27/3fUSJTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",cl=""+new URL("capture.7158a77f.mp3",import.meta.url).href,hl=Ae('<div class="canvas-container"><canvas id="canvas"></canvas></div>');function ul({}){return gt(()=>{const c=document.getElementById("canvas"),i=c.getContext("2d");c.width=window.innerWidth,c.height=window.innerHeight;const t=300,o=8;let r=[8,18,51],n=[.5,1];class p{constructor(S,Q,X,N,R){this.x=S,this.y=Q,this.speed_x=X,this.speed_y=N,this.radius=R,this.color="rgb(255, 255, 255, .2)"}update(){this.x+=this.speed_x,this.y+=this.speed_y,(this.x+this.radius>c.width||this.x-this.radius<0)&&(this.speed_x*=-1),(this.y+this.radius>c.height||this.y-this.radius<0)&&(this.speed_y*=-1),this.handleCollisions()}handleCollisions(){for(const S of a)if(S!==this){const Q=S.x-this.x,X=S.y-this.y,N=Math.sqrt(Q**2+X**2);if(N<2*this.radius){const R=2*this.radius-N,E=Math.atan2(X,Q);this.x-=.5*R*Math.cos(E),this.y-=.5*R*Math.sin(E);const C=Math.atan2(X,Q),B=Math.atan2(this.speed_y,this.speed_x),$=Math.sqrt(this.speed_x**2+this.speed_y**2),L=Math.sqrt(S.speed_x**2+S.speed_y**2),ne=($*Math.cos(B-C)*(this.radius-S.radius)+2*S.radius*L*Math.cos(C))/(this.radius+S.radius),Ce=($*Math.sin(B-C)*(this.radius-S.radius)+2*S.radius*L*Math.sin(C))/(this.radius+S.radius),Ee=(L*Math.cos(C-B)*(S.radius-this.radius)+2*this.radius*$*Math.cos(C))/(this.radius+S.radius),ye=(L*Math.sin(C-B)*(S.radius-this.radius)+2*this.radius*$*Math.sin(C))/(this.radius+S.radius);this.speed_x=ne,this.speed_y=Ce,S.speed_x=Ee,S.speed_y=ye}}}draw(S){S.beginPath(),S.arc(this.x,this.y,this.radius,0,Math.PI*2),S.fillStyle=this.color,S.fill(),S.closePath()}}const a=[];for(let V=0;V<t;V++){const S=y(o,c.width-o),Q=y(o,c.height-o),X=_(...n)*q(),N=_(...n)*q(),R=new p(S,Q,X,N,o);a.push(R)}function f(){requestAnimationFrame(f),i.fillStyle=`rgb(${r[0]}, ${r[1]}, ${r[2]})`,i.fillRect(0,0,c.width,c.height);for(const V of a)V.update(),V.draw(i)}f();function y(V,S){return Math.floor(Math.random()*(S-V+1))+V}function _(V,S){return Math.random()*(S-V)+V}function q(){return Math.random()<.5?-1:1}window.addEventListener("resize",()=>{console.log("resize");let V=window.innerWidth,S=window.innerHeight;c.width=V,c.height=S;for(const Q of a)Q.x=D(Q.x,V,Q.radius),Q.y=D(Q.y,S,Q.radius)});function D(V,S,Q){return Math.min(Math.max(V,Q),S-Q)}}),hl.cloneNode(!0)}class dl{url="wss://gabrielmalek.com/v1/api/chessSub";ws=this.createWS(this.url);pingsSinceResponse=0;board;setBoard;setUser;user;pings=0;constructor(i,t,o,r){this.createListeners(),this.board=i,this.setBoard=t,this.setUser=r,this.user=o}sendChessUpdate(i,t,o,r){let n=new Dr(i.fen,t,o,i.currentTurnColor,r);this.ws.send(JSON.stringify(n))}unloadWebSockets(){window.onbeforeunload=()=>{this.ws.close()}}createWS(i){return new WebSocket(i)}pingWebSocket(i){this.ws.readyState!=3&&this.ws.readyState===1&&this.ws.send(JSON.stringify(i))}beginPinging(i){setInterval(()=>{this.pingWebSocket(i())},3e3)}reconnectWebSocket(){this.ws=this.createWS(this.url),this.createListeners()}createListeners(){this.ws.addEventListener("open",()=>{console.log("ws open")}),this.ws.addEventListener("close",()=>{console.log("ws closed"),this.reconnectWebSocket()}),this.ws.addEventListener("message",i=>{this.pings--;let t=JSON.parse(i.data);if(t.users){this.pingsSinceResponse--;let o=new CustomEvent("usersUpdated");o.data=t.users,document.dispatchEvent(o)}if(t.type==="promptForGame"||t.type=="createGame"){let o=new CustomEvent("notification");o.data=t,document.dispatchEvent(o)}if(t.type==="chessGameUpdate"&&(console.log("chess game update",t),t.fen!=this.board().fen)){let o=new oe(t.fen);if(this.board().fullMoveNumber<o.fullMoveNumber){this.setBoard(o);let r=new CustomEvent("updateBoard");document.dispatchEvent(r)}}})}sendNotification(i){console.log("sending notification",i),this.ws.send(JSON.stringify(i))}close(){this.ws.close()}generateUserid(){let i="";for(let t=0;t<20;t++)i+=Math.floor(Math.random()*10);return i}}class Ys{ws;initialized=!1;virtualCursor;self;opponent;cursorWidth;constructor(i,t,o){this.ws=i,this.virtualCursor=this.createVirtualCursor(),this.self=t,this.opponent=o}init(){this.initialized=!0,this.catchWedSocketEvents(),this.sendMouseEvents()}catchWedSocketEvents(){this.ws.addEventListener("message",i=>{if(JSON.parse(i.data).type!="virtualMouseEvent")return;let o=JSON.parse(i.data);this.triggerVirtualMouseEvent(o)})}triggerVirtualMouseEvent(i){let t,o,r,n;switch(i.eventType){case"pointermove":o=this.setVirtualPosition(i),t=new Event("virtualpointermove"),t.clientX=o.x,t.clientY=o.y,document.dispatchEvent(t);break;case"pointerdown":if(o=this.setVirtualPosition(i),r=document.elementsFromPoint(o.x,o.y),n=r[1],n.classList.contains("canDrag"))return;t=new Event("virtualpointerdown"),t.clientX=o.x,t.clientY=o.y,n.dispatchEvent(t),document.dispatchEvent(t),this.virtualCursor.style.backgroundColor="rgba(255, 0, 0, 0.541)";break;case"pointerup":t=new Event("virtualpointerup"),document.dispatchEvent(t),this.virtualCursor.style.backgroundColor="rgba(255, 0, 0, 0)";break}}sendMouseEvents(){let i=document.querySelector(".chessBoard");document.addEventListener("pointermove",t=>{if(!this.initialized)return;let o=i?.offsetWidth,r=new ki(t.clientX,t.clientY),n=new hn(this.self,this.opponent,r,o,"pointermove");this.ws.send(JSON.stringify(n))}),document.addEventListener("pointerdown",t=>{let o=i?.offsetWidth,r=new ki(t.clientX,t.clientY),n=new hn(this.self,this.opponent,r,o,"pointerdown");this.ws.send(JSON.stringify(n))}),document.addEventListener("pointerup",t=>{let o=i?.offsetWidth,r=new ki(t.clientX,t.clientY),n=new hn(this.self,this.opponent,r,o,"pointerup");this.ws.send(JSON.stringify(n))})}setVirtualPosition(i){let t=document.querySelector(".oponentsCursor"),o=window.innerWidth,r=window.innerHeight,n=i.position.x,p=i.position.y,a=i.screen.x/2,f=i.screen.y/2,y=n-a,_=p-f,q=o/2,D=r/2,V=document.querySelector(".chessBoard").offsetWidth,S=V,Q=V/i.chessBoardWidth,X=S/i.chessBoardWidth,N=y*Q,R=_*X;q=window.innerWidth/2,D=window.innerHeight/2;let E=q-N,C=D-R;return t.style.transform=`translate(${E-this.cursorWidth/2}px, ${C-this.cursorWidth/2}px)`,{x:E,y:C}}createVirtualCursor(){let i=document.createElement("div");return i.classList.add("oponentsCursor"),document.body.appendChild(i),this.cursorWidth=i.offsetHeight,i}}const fl=Ae('<div id="notificationButton" data-bs-toggle="modal" data-bs-target="#notificationModal"></div>'),pl=Ae(`<div class="modal fade " id="notificationModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"><div class="modal-dialog absolute top-[39vh] left-1/ "><div class="modal-content w-[50px] "><div class="modal-header"><h1 class="modal-title fs-5" id="exampleModalLabel">Play Chess with "<!>"</h1><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body">You've recieved a notification from "<!>" to play chess. Do you accept?</div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button><button type="button" class="btn btn-primary">Play Chess</button></div></div></div></div>`);function gl({}){const c=new Audio(al),i=new Audio(cl),[t,o]=z(new oe),[r,n]=z(!1),[p,a]=z("");z([]);const[f,y]=z();z(!1);const[_,q]=z([]),[D,V]=z(),[S,Q]=z(),[X,N]=z([]),[R,E]=z(!1),[C,B]=z(),[$,L]=z(null),ne=new dl(t,o,D,V);Js(()=>{ne.ws&&ne.close()}),gt(async()=>{window.users=X,ye(),Ce(),document.addEventListener("mousedown",P=>Ee(P)),document.ws=ne.ws});function Ce(){document.addEventListener("usersUpdated",P=>{let k=P.data.filter(G=>D().id!=G.id);N([...k])}),document.addEventListener("notification",P=>{qe(P.data)}),document.addEventListener("updateUser",P=>{console.log("update user event received",P.data.CatUrl);let k=document.querySelector("#mainUser");console.log(k.querySelector(".catLogo")),k.querySelector(".catLogo").style.backgroundImage="nothing"}),document.addEventListener("updateBoard",P=>{re(P.data)})}function Ee(P){P.detail>1&&P.preventDefault()}async function ye(){let P=sessionStorage.getItem("gabrielmalek/chess.data"),k=JSON.parse(P);if(P==null)console.log("session storage null");else{console.log("session storage not null");let G=new Oi(k.id,k.username,k.CatUrl);V(G),E(!0),ne.beginPinging(D),console.log("should be pinging");return}if(P=localStorage.getItem("gabrielmalek/chess.data"),k=JSON.parse(P),P==null)console.log("local storage null");else{let G=new Oi(k.id,k.username,k.CatUrl);if(G.username==""||G.username==null)return;V(G),E(!1)}}function Me(){let P=document.querySelectorAll(".chessSquare"),k=document.querySelectorAll("section.piece");if(p()=="white"){for(let g=0;g<k.length;g++)k[g].remove();let G=[];for(let g=0;g<t().board.length;g++)if(t().board[g]!=" "){for(let U=0;U<k.length;U++)if(k[U].classList.contains(t().board[g])&&!G.includes(U)){P[g].appendChild(k[U]),G.push(U);break}}for(let g=0;g<t().board.length;g++){let U=P[g]?.querySelector(".piece");if(U!=null&&t().board[g]!=" ")if(U.classList.contains(t().board[g]))console.log("piece is correct");else{console.log("something is funky"),console.log("piece",U),console.log("board",t().board[g]);break}else if(U==null&&t().board[g]!=" "){console.log("something is funky"),console.log("piece",U),console.log("board",t().board[g]);for(let ce=0;ce<k.length;ce++)if((k[ce].classList.contains("p")||k[ce].classList.contains("P"))&&!G.includes(ce)){console.log("found piece",k[ce]);let we=k[ce];we.classList.contains("p")?(we.classList.remove("p"),we.classList.add(t().board[g])):(we.classList.remove("P"),we.classList.add(t().board[g])),P[g].appendChild(we)}break}}}else if(p()=="black"){for(let U=0;U<k.length;U++)k[U].remove();let G=[],g=0;for(let U=t().board.length-1;U>=0;U--){if(t().board[U]!=" "){for(let ce=0;ce<k.length;ce++)if(k[ce].classList.contains(t().board[U])&&!G.includes(ce)){P[g].appendChild(k[ce]),G.push(ce);break}}g++}g=0;for(let U=t().board.length-1;U>=0;U--){let ce=P[g]?.querySelector(".piece");if(ce!=null&&t().board[U]!=" "){if(!ce.classList.contains(t().board[U]))break}else if(ce==null&&t().board[U]!=" "){for(let we=0;we<k.length;we++)if((k[we].classList.contains("p")||k[we].classList.contains("P"))&&!G.includes(we)){let Be=k[we];Be.classList.contains("p")?(Be.classList.remove("p"),Be.classList.add(t().board[U])):(Be.classList.remove("P"),Be.classList.add(t().board[U])),P[g].appendChild(Be)}break}g++}}t().displayBoard()}async function re(P){if(P===void 0){console.log("updating boards"),Me(),ne.sendChessUpdate(t(),D(),S(),_());return}}function qe(P){if(L(P),P.type=="promptForGame")L(P),console.log("prompt for game"),document.querySelector("#notificationButton").click();else if(P.type=="createGame"){console.log("received create game notification",P),L(P),a(P.fromUserColor),n(!0),Q(P.to);let k=new Ys(ne.ws,D(),P.to);k.init(),console.log(k),J(),console.log("in game",r()),console.log("in game color",p())}else P.type=="position"&&console.log(P)}async function ae(P){console.log("we must create a game");let k=new Or(P.from,P.to);try{ne.ws.send(JSON.stringify(k)),a(k.fromUserColor==="white"?"black":"white"),n(!0),Q(P.from);let G=new Ys(ne.ws,D(),P.from);G.init(),console.log(G),J()}catch(G){console.log("error: ",G)}}function J(){let P=document.querySelector(".modal-backdrop ");P?.remove()}return[le(ul,{}),le(Xe,{get when(){return pt(()=>!R())()&&r()==!1},get children(){return le(Zr,{user:D,setUser:V,setInSession:E,chessWebSocket:ne})}}),le(Xe,{get when(){return pt(()=>!!R())()&&r()==!1},get children(){return le(ll,{users:X,user:D,setNotificationUser:B,onNotificationReceived:qe,chessWebSocket:ne})}}),le(Xe,{get when(){return pt(()=>p()=="white")()&&r()==!0},get children(){return le(Qr,{board:t,updateBoard:re,setLastMove:y,lastMove:f,movePieceSound:c,capturePieceSound:i,setMoves:q,moves:_})}}),le(Xe,{get when(){return r()==!1||p()=="black"&&r()==!0},get children(){return le(zr,{board:t,updateBlackBoard:re,setLastMove:y,lastMove:f,movePieceSound:c,capturePieceSound:i,setMoves:q,moves:_})}}),le(Xe,{get when(){return r()==!1},get children(){return[fl.cloneNode(!0),(()=>{const P=pl.cloneNode(!0),k=P.firstChild,G=k.firstChild,g=G.firstChild,U=g.firstChild,ce=U.firstChild,we=ce.nextSibling;we.nextSibling;const Be=g.nextSibling,Ct=Be.firstChild,Fe=Ct.nextSibling;Fe.nextSibling;const ot=Be.nextSibling,Le=ot.firstChild,rt=Le.nextSibling;return P.style.setProperty("display","none"),Ve(U,()=>C()?.username,we),Ve(Be,()=>C()?.username,Fe),rt.$$click=()=>{ae($())},P})()]}})]}Gt(["click"]);const ml=()=>le(gl,{});Er(()=>le(ml,{}),document.getElementById("root"));
