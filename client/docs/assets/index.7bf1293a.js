var Xu=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var bv=Xu((wv,Ns)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();const kt={};function Zu(n){kt.context=n}const ef=(n,e)=>n===e,tf=Symbol("solid-track"),Ui={equals:ef};let Fc=$c;const zt=1,zi=2,qc={owned:null,cleanups:null,context:null,owner:null};var Ge=null;let rn=null,je=null,Je=null,Ct=null,Ls=0;function Fi(n,e){const t=je,i=Ge,r=n.length===0,s=r?qc:{owned:null,cleanups:null,context:null,owner:e||i},c=r?n:()=>n(()=>Wt(()=>tr(s)));Ge=s,je=null;try{return ci(c,!0)}finally{je=t,Ge=i}}function he(n,e){e=e?Object.assign({},Ui,e):Ui;const t={value:n,observers:null,observerSlots:null,comparator:e.equals||void 0},i=r=>(typeof r=="function"&&(r=r(t.value)),jc(t,r));return[Bc.bind(t),i]}function Pt(n,e,t){const i=Rs(n,e,!1,zt);ai(i)}function nf(n,e,t){Fc=uf;const i=Rs(n,e,!1,zt);i.user=!0,Ct?Ct.push(i):ai(i)}function At(n,e,t){t=t?Object.assign({},Ui,t):Ui;const i=Rs(n,e,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=t.equals||void 0,ai(i),Bc.bind(i)}function Wt(n){const e=je;je=null;try{return n()}finally{je=e}}function sn(n){nf(()=>Wt(n))}function rf(n){return Ge===null||(Ge.cleanups===null?Ge.cleanups=[n]:Ge.cleanups.push(n)),n}function sf(n,e){const t=Symbol("context");return{id:t,Provider:hf(t),defaultValue:n}}function of(n){let e;return(e=Uc(Ge,n.id))!==void 0?e:n.defaultValue}function af(n){const e=At(n),t=At(()=>ts(e()));return t.toArray=()=>{const i=t();return Array.isArray(i)?i:i!=null?[i]:[]},t}function Bc(){const n=rn;if(this.sources&&(this.state||n))if(this.state===zt||n)ai(this);else{const e=Je;Je=null,ci(()=>Gi(this),!1),Je=e}if(je){const e=this.observers?this.observers.length:0;je.sources?(je.sources.push(this),je.sourceSlots.push(e)):(je.sources=[this],je.sourceSlots=[e]),this.observers?(this.observers.push(je),this.observerSlots.push(je.sources.length-1)):(this.observers=[je],this.observerSlots=[je.sources.length-1])}return this.value}function jc(n,e,t){let i=n.value;return(!n.comparator||!n.comparator(i,e))&&(n.value=e,n.observers&&n.observers.length&&ci(()=>{for(let r=0;r<n.observers.length;r+=1){const s=n.observers[r],c=rn&&rn.running;c&&rn.disposed.has(s),(c&&!s.tState||!c&&!s.state)&&(s.pure?Je.push(s):Ct.push(s),s.observers&&Vc(s)),c||(s.state=zt)}if(Je.length>1e6)throw Je=[],new Error},!1)),e}function ai(n){if(!n.fn)return;tr(n);const e=Ge,t=je,i=Ls;je=Ge=n,cf(n,n.value,i),je=t,Ge=e}function cf(n,e,t){let i;try{i=n.fn(e)}catch(r){n.pure&&(n.state=zt,n.owned&&n.owned.forEach(tr),n.owned=null),Qc(r)}(!n.updatedAt||n.updatedAt<=t)&&(n.updatedAt!=null&&"observers"in n?jc(n,i):n.value=i,n.updatedAt=t)}function Rs(n,e,t,i=zt,r){const s={fn:n,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:Ge,context:null,pure:t};return Ge===null||Ge!==qc&&(Ge.owned?Ge.owned.push(s):Ge.owned=[s]),s}function Wi(n){const e=rn;if(n.state===0||e)return;if(n.state===zi||e)return Gi(n);if(n.suspense&&Wt(n.suspense.inFallback))return n.suspense.effects.push(n);const t=[n];for(;(n=n.owner)&&(!n.updatedAt||n.updatedAt<Ls);)(n.state||e)&&t.push(n);for(let i=t.length-1;i>=0;i--)if(n=t[i],n.state===zt||e)ai(n);else if(n.state===zi||e){const r=Je;Je=null,ci(()=>Gi(n,t[0]),!1),Je=r}}function ci(n,e){if(Je)return n();let t=!1;e||(Je=[]),Ct?t=!0:Ct=[],Ls++;try{const i=n();return lf(t),i}catch(i){Je||(Ct=null),Qc(i)}}function lf(n){if(Je&&($c(Je),Je=null),n)return;const e=Ct;Ct=null,e.length&&ci(()=>Fc(e),!1)}function $c(n){for(let e=0;e<n.length;e++)Wi(n[e])}function uf(n){let e,t=0;for(e=0;e<n.length;e++){const i=n[e];i.user?n[t++]=i:Wi(i)}for(kt.context&&Zu(),e=0;e<t;e++)Wi(n[e])}function Gi(n,e){const t=rn;n.state=0;for(let i=0;i<n.sources.length;i+=1){const r=n.sources[i];r.sources&&(r.state===zt||t?r!==e&&Wi(r):(r.state===zi||t)&&Gi(r,e))}}function Vc(n){const e=rn;for(let t=0;t<n.observers.length;t+=1){const i=n.observers[t];(!i.state||e)&&(i.state=zi,i.pure?Je.push(i):Ct.push(i),i.observers&&Vc(i))}}function tr(n){let e;if(n.sources)for(;n.sources.length;){const t=n.sources.pop(),i=n.sourceSlots.pop(),r=t.observers;if(r&&r.length){const s=r.pop(),c=t.observerSlots.pop();i<r.length&&(s.sourceSlots[c]=i,r[i]=s,t.observerSlots[i]=c)}}if(n.owned){for(e=0;e<n.owned.length;e++)tr(n.owned[e]);n.owned=null}if(n.cleanups){for(e=0;e<n.cleanups.length;e++)n.cleanups[e]();n.cleanups=null}n.state=0,n.context=null}function ff(n){return n instanceof Error||typeof n=="string"?n:new Error("Unknown error")}function Qc(n){throw n=ff(n),n}function Uc(n,e){return n?n.context&&n.context[e]!==void 0?n.context[e]:Uc(n.owner,e):void 0}function ts(n){if(typeof n=="function"&&!n.length)return ts(n());if(Array.isArray(n)){const e=[];for(let t=0;t<n.length;t++){const i=ts(n[t]);Array.isArray(i)?e.push.apply(e,i):e.push(i)}return e}return n}function hf(n,e){return function(i){let r;return Pt(()=>r=Wt(()=>(Ge.context={[n]:i.value},af(()=>i.children))),void 0),r}}const df=Symbol("fallback");function Da(n){for(let e=0;e<n.length;e++)n[e]()}function pf(n,e,t={}){let i=[],r=[],s=[],c=0,a=e.length>1?[]:null;return rf(()=>Da(s)),()=>{let u=n()||[],f,d;return u[tf],Wt(()=>{let v=u.length,g,w,b,x,O,E,P,I,N;if(v===0)c!==0&&(Da(s),s=[],i=[],r=[],c=0,a&&(a=[])),t.fallback&&(i=[df],r[0]=Fi(L=>(s[0]=L,t.fallback())),c=1);else if(c===0){for(r=new Array(v),d=0;d<v;d++)i[d]=u[d],r[d]=Fi(m);c=v}else{for(b=new Array(v),x=new Array(v),a&&(O=new Array(v)),E=0,P=Math.min(c,v);E<P&&i[E]===u[E];E++);for(P=c-1,I=v-1;P>=E&&I>=E&&i[P]===u[I];P--,I--)b[I]=r[P],x[I]=s[P],a&&(O[I]=a[P]);for(g=new Map,w=new Array(I+1),d=I;d>=E;d--)N=u[d],f=g.get(N),w[d]=f===void 0?-1:f,g.set(N,d);for(f=E;f<=P;f++)N=i[f],d=g.get(N),d!==void 0&&d!==-1?(b[d]=r[f],x[d]=s[f],a&&(O[d]=a[f]),d=w[d],g.set(N,d)):s[f]();for(d=E;d<v;d++)d in b?(r[d]=b[d],s[d]=x[d],a&&(a[d]=O[d],a[d](d))):r[d]=Fi(m);r=r.slice(0,c=v),i=u.slice(0)}return r});function m(v){if(s[d]=v,a){const[g,w]=he(d);return a[d]=w,e(u[d],g)}return e(u[d])}}}function ke(n,e){return Wt(()=>n(e||{}))}function Ms(n){const e="fallback"in n&&{fallback:()=>n.fallback};return At(pf(()=>n.each,n.children,e||void 0))}function bt(n){let e=!1;const t=n.keyed,i=At(()=>n.when,void 0,{equals:(r,s)=>e?r===s:!r==!s});return At(()=>{const r=i();if(r){const s=n.children,c=typeof s=="function"&&s.length>0;return e=t||c,c?Wt(()=>s(r)):s}return n.fallback},void 0,void 0)}function vf(n,e,t){let i=t.length,r=e.length,s=i,c=0,a=0,u=e[r-1].nextSibling,f=null;for(;c<r||a<s;){if(e[c]===t[a]){c++,a++;continue}for(;e[r-1]===t[s-1];)r--,s--;if(r===c){const d=s<i?a?t[a-1].nextSibling:t[s-a]:u;for(;a<s;)n.insertBefore(t[a++],d)}else if(s===a)for(;c<r;)(!f||!f.has(e[c]))&&e[c].remove(),c++;else if(e[c]===t[s-1]&&t[a]===e[r-1]){const d=e[--r].nextSibling;n.insertBefore(t[a++],e[c++].nextSibling),n.insertBefore(t[--s],d),e[r]=t[s]}else{if(!f){f=new Map;let m=a;for(;m<s;)f.set(t[m],m++)}const d=f.get(e[c]);if(d!=null)if(a<d&&d<s){let m=c,v=1,g;for(;++m<r&&m<s&&!((g=f.get(e[m]))==null||g!==d+v);)v++;if(v>d-a){const w=e[c];for(;a<d;)n.insertBefore(t[a++],w)}else n.replaceChild(t[a++],e[c++])}else c++;else e[c++].remove()}}}const Na="_$DX_DELEGATE";function mf(n,e,t,i={}){let r;return Fi(s=>{r=s,e===document?n():rt(e,n(),e.firstChild?null:void 0,t)},i.owner),()=>{r(),e.textContent=""}}function Xe(n,e,t){const i=document.createElement("template");i.innerHTML=n;let r=i.content.firstChild;return t&&(r=r.firstChild),r}function li(n,e=window.document){const t=e[Na]||(e[Na]=new Set);for(let i=0,r=n.length;i<r;i++){const s=n[i];t.has(s)||(t.add(s),e.addEventListener(s,yf))}}function Dn(n,e,t){t==null?n.removeAttribute(e):n.setAttribute(e,t)}function Hi(n,e){e==null?n.removeAttribute("class"):n.className=e}function gf(n,e,t,i){if(i)Array.isArray(t)?(n[`$$${e}`]=t[0],n[`$$${e}Data`]=t[1]):n[`$$${e}`]=t;else if(Array.isArray(t)){const r=t[0];n.addEventListener(e,t[0]=s=>r.call(n,t[1],s))}else n.addEventListener(e,t)}function ns(n,e,t){if(!e)return t?Dn(n,"style"):e;const i=n.style;if(typeof e=="string")return i.cssText=e;typeof t=="string"&&(i.cssText=t=void 0),t||(t={}),e||(e={});let r,s;for(s in t)e[s]==null&&i.removeProperty(s),delete t[s];for(s in e)r=e[s],r!==t[s]&&(i.setProperty(s,r),t[s]=r);return t}function La(n,e,t){return Wt(()=>n(e,t))}function rt(n,e,t,i){if(t!==void 0&&!i&&(i=[]),typeof e!="function")return Ki(n,e,i,t);Pt(r=>Ki(n,e(),r,t),i)}function yf(n){const e=`$$${n.type}`;let t=n.composedPath&&n.composedPath()[0]||n.target;for(n.target!==t&&Object.defineProperty(n,"target",{configurable:!0,value:t}),Object.defineProperty(n,"currentTarget",{configurable:!0,get(){return t||document}}),kt.registry&&!kt.done&&(kt.done=!0,document.querySelectorAll("[id^=pl-]").forEach(i=>{for(;i&&i.nodeType!==8&&i.nodeValue!=="pl-"+n;){let r=i.nextSibling;i.remove(),i=r}i&&i.remove()}));t;){const i=t[e];if(i&&!t.disabled){const r=t[`${e}Data`];if(r!==void 0?i.call(t,r,n):i.call(t,n),n.cancelBubble)return}t=t._$host||t.parentNode||t.host}}function Ki(n,e,t,i,r){for(kt.context&&!t&&(t=[...n.childNodes]);typeof t=="function";)t=t();if(e===t)return t;const s=typeof e,c=i!==void 0;if(n=c&&t[0]&&t[0].parentNode||n,s==="string"||s==="number"){if(kt.context)return t;if(s==="number"&&(e=e.toString()),c){let a=t[0];a&&a.nodeType===3?a.data=e:a=document.createTextNode(e),t=En(n,t,i,a)}else t!==""&&typeof t=="string"?t=n.firstChild.data=e:t=n.textContent=e}else if(e==null||s==="boolean"){if(kt.context)return t;t=En(n,t,i)}else{if(s==="function")return Pt(()=>{let a=e();for(;typeof a=="function";)a=a();t=Ki(n,a,t,i)}),()=>t;if(Array.isArray(e)){const a=[],u=t&&Array.isArray(t);if(is(a,e,t,r))return Pt(()=>t=Ki(n,a,t,i,!0)),()=>t;if(kt.context){if(!a.length)return t;for(let f=0;f<a.length;f++)if(a[f].parentNode)return t=a}if(a.length===0){if(t=En(n,t,i),c)return t}else u?t.length===0?Ra(n,a,i):vf(n,t,a):(t&&En(n),Ra(n,a));t=a}else if(e instanceof Node){if(kt.context&&e.parentNode)return t=c?[e]:e;if(Array.isArray(t)){if(c)return t=En(n,t,i,e);En(n,t,null,e)}else t==null||t===""||!n.firstChild?n.appendChild(e):n.replaceChild(e,n.firstChild);t=e}}return t}function is(n,e,t,i){let r=!1;for(let s=0,c=e.length;s<c;s++){let a=e[s],u=t&&t[s];if(a instanceof Node)n.push(a);else if(!(a==null||a===!0||a===!1))if(Array.isArray(a))r=is(n,a,u)||r;else if(typeof a=="function")if(i){for(;typeof a=="function";)a=a();r=is(n,Array.isArray(a)?a:[a],Array.isArray(u)?u:[u])||r}else n.push(a),r=!0;else{const f=String(a);u&&u.nodeType===3&&u.data===f?n.push(u):n.push(document.createTextNode(f))}}return r}function Ra(n,e,t=null){for(let i=0,r=e.length;i<r;i++)n.insertBefore(e[i],t)}function En(n,e,t,i){if(t===void 0)return n.textContent="";const r=i||document.createTextNode("");if(e.length){let s=!1;for(let c=e.length-1;c>=0;c--){const a=e[c];if(r!==a){const u=a.parentNode===n;!s&&!c?u?n.replaceChild(r,a):n.insertBefore(r,t):u&&a.remove()}else s=!0}}else n.insertBefore(r,t);return[r]}var bf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_f={exports:{}};/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(n,e){(function(t,i){n.exports=i()})(bf,function(){const t="transitionend",i=h=>{let o=h.getAttribute("data-bs-target");if(!o||o==="#"){let l=h.getAttribute("href");if(!l||!l.includes("#")&&!l.startsWith("."))return null;l.includes("#")&&!l.startsWith("#")&&(l=`#${l.split("#")[1]}`),o=l&&l!=="#"?l.trim():null}return o},r=h=>{const o=i(h);return o&&document.querySelector(o)?o:null},s=h=>{const o=i(h);return o?document.querySelector(o):null},c=h=>{h.dispatchEvent(new Event(t))},a=h=>!(!h||typeof h!="object")&&(h.jquery!==void 0&&(h=h[0]),h.nodeType!==void 0),u=h=>a(h)?h.jquery?h[0]:h:typeof h=="string"&&h.length>0?document.querySelector(h):null,f=h=>{if(!a(h)||h.getClientRects().length===0)return!1;const o=getComputedStyle(h).getPropertyValue("visibility")==="visible",l=h.closest("details:not([open])");if(!l)return o;if(l!==h){const p=h.closest("summary");if(p&&p.parentNode!==l||p===null)return!1}return o},d=h=>!h||h.nodeType!==Node.ELEMENT_NODE||!!h.classList.contains("disabled")||(h.disabled!==void 0?h.disabled:h.hasAttribute("disabled")&&h.getAttribute("disabled")!=="false"),m=h=>{if(!document.documentElement.attachShadow)return null;if(typeof h.getRootNode=="function"){const o=h.getRootNode();return o instanceof ShadowRoot?o:null}return h instanceof ShadowRoot?h:h.parentNode?m(h.parentNode):null},v=()=>{},g=h=>{h.offsetHeight},w=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,b=[],x=()=>document.documentElement.dir==="rtl",O=h=>{var o;o=()=>{const l=w();if(l){const p=h.NAME,y=l.fn[p];l.fn[p]=h.jQueryInterface,l.fn[p].Constructor=h,l.fn[p].noConflict=()=>(l.fn[p]=y,h.jQueryInterface)}},document.readyState==="loading"?(b.length||document.addEventListener("DOMContentLoaded",()=>{for(const l of b)l()}),b.push(o)):o()},E=h=>{typeof h=="function"&&h()},P=(h,o,l=!0)=>{if(!l)return void E(h);const p=(S=>{if(!S)return 0;let{transitionDuration:D,transitionDelay:F}=window.getComputedStyle(S);const U=Number.parseFloat(D),z=Number.parseFloat(F);return U||z?(D=D.split(",")[0],F=F.split(",")[0],1e3*(Number.parseFloat(D)+Number.parseFloat(F))):0})(o)+5;let y=!1;const _=({target:S})=>{S===o&&(y=!0,o.removeEventListener(t,_),E(h))};o.addEventListener(t,_),setTimeout(()=>{y||c(o)},p)},I=(h,o,l,p)=>{const y=h.length;let _=h.indexOf(o);return _===-1?!l&&p?h[y-1]:h[0]:(_+=l?1:-1,p&&(_=(_+y)%y),h[Math.max(0,Math.min(_,y-1))])},N=/[^.]*(?=\..*)\.|.*/,L=/\..*/,q=/::\d+$/,G={};let Q=1;const Z={mouseenter:"mouseover",mouseleave:"mouseout"},Se=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Re(h,o){return o&&`${o}::${Q++}`||h.uidEvent||Q++}function ge(h){const o=Re(h);return h.uidEvent=o,G[o]=G[o]||{},G[o]}function we(h,o,l=null){return Object.values(h).find(p=>p.callable===o&&p.delegationSelector===l)}function Be(h,o,l){const p=typeof o=="string",y=p?l:o||l;let _=Y(h);return Se.has(_)||(_=h),[p,y,_]}function Ne(h,o,l,p,y){if(typeof o!="string"||!h)return;let[_,S,D]=Be(o,l,p);o in Z&&(S=(re=>function(ie){if(!ie.relatedTarget||ie.relatedTarget!==ie.delegateTarget&&!ie.delegateTarget.contains(ie.relatedTarget))return re.call(this,ie)})(S));const F=ge(h),U=F[D]||(F[D]={}),z=we(U,S,_?l:null);if(z)return void(z.oneOff=z.oneOff&&y);const V=Re(S,o.replace(N,"")),ae=_?function(X,re,ie){return function se(Ee){const Ce=X.querySelectorAll(re);for(let{target:ue}=Ee;ue&&ue!==this;ue=ue.parentNode)for(const ve of Ce)if(ve===ue)return le(Ee,{delegateTarget:ue}),se.oneOff&&T.off(X,Ee.type,re,ie),ie.apply(ue,[Ee])}}(h,l,S):function(X,re){return function ie(se){return le(se,{delegateTarget:X}),ie.oneOff&&T.off(X,se.type,re),re.apply(X,[se])}}(h,S);ae.delegationSelector=_?l:null,ae.callable=S,ae.oneOff=y,ae.uidEvent=V,U[V]=ae,h.addEventListener(D,ae,_)}function J(h,o,l,p,y){const _=we(o[l],p,y);_&&(h.removeEventListener(l,_,Boolean(y)),delete o[l][_.uidEvent])}function R(h,o,l,p){const y=o[l]||{};for(const _ of Object.keys(y))if(_.includes(p)){const S=y[_];J(h,o,l,S.callable,S.delegationSelector)}}function Y(h){return h=h.replace(L,""),Z[h]||h}const T={on(h,o,l,p){Ne(h,o,l,p,!1)},one(h,o,l,p){Ne(h,o,l,p,!0)},off(h,o,l,p){if(typeof o!="string"||!h)return;const[y,_,S]=Be(o,l,p),D=S!==o,F=ge(h),U=F[S]||{},z=o.startsWith(".");if(_===void 0){if(z)for(const V of Object.keys(F))R(h,F,V,o.slice(1));for(const V of Object.keys(U)){const ae=V.replace(q,"");if(!D||o.includes(ae)){const X=U[V];J(h,F,S,X.callable,X.delegationSelector)}}}else{if(!Object.keys(U).length)return;J(h,F,S,_,y?l:null)}},trigger(h,o,l){if(typeof o!="string"||!h)return null;const p=w();let y=null,_=!0,S=!0,D=!1;o!==Y(o)&&p&&(y=p.Event(o,l),p(h).trigger(y),_=!y.isPropagationStopped(),S=!y.isImmediatePropagationStopped(),D=y.isDefaultPrevented());let F=new Event(o,{bubbles:_,cancelable:!0});return F=le(F,l),D&&F.preventDefault(),S&&h.dispatchEvent(F),F.defaultPrevented&&y&&y.preventDefault(),F}};function le(h,o){for(const[l,p]of Object.entries(o||{}))try{h[l]=p}catch{Object.defineProperty(h,l,{configurable:!0,get:()=>p})}return h}const te=new Map,Oe={set(h,o,l){te.has(h)||te.set(h,new Map);const p=te.get(h);p.has(o)||p.size===0?p.set(o,l):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(p.keys())[0]}.`)},get:(h,o)=>te.has(h)&&te.get(h).get(o)||null,remove(h,o){if(!te.has(h))return;const l=te.get(h);l.delete(o),l.size===0&&te.delete(h)}};function Ve(h){if(h==="true")return!0;if(h==="false")return!1;if(h===Number(h).toString())return Number(h);if(h===""||h==="null")return null;if(typeof h!="string")return h;try{return JSON.parse(decodeURIComponent(h))}catch{return h}}function st(h){return h.replace(/[A-Z]/g,o=>`-${o.toLowerCase()}`)}const Qe={setDataAttribute(h,o,l){h.setAttribute(`data-bs-${st(o)}`,l)},removeDataAttribute(h,o){h.removeAttribute(`data-bs-${st(o)}`)},getDataAttributes(h){if(!h)return{};const o={},l=Object.keys(h.dataset).filter(p=>p.startsWith("bs")&&!p.startsWith("bsConfig"));for(const p of l){let y=p.replace(/^bs/,"");y=y.charAt(0).toLowerCase()+y.slice(1,y.length),o[y]=Ve(h.dataset[p])}return o},getDataAttribute:(h,o)=>Ve(h.getAttribute(`data-bs-${st(o)}`))};class j{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(o){return o=this._mergeConfigObj(o),o=this._configAfterMerge(o),this._typeCheckConfig(o),o}_configAfterMerge(o){return o}_mergeConfigObj(o,l){const p=a(l)?Qe.getDataAttribute(l,"config"):{};return{...this.constructor.Default,...typeof p=="object"?p:{},...a(l)?Qe.getDataAttributes(l):{},...typeof o=="object"?o:{}}}_typeCheckConfig(o,l=this.constructor.DefaultType){for(const y of Object.keys(l)){const _=l[y],S=o[y],D=a(S)?"element":(p=S)==null?`${p}`:Object.prototype.toString.call(p).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(_).test(D))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${y}" provided type "${D}" but expected type "${_}".`)}var p}}class M extends j{constructor(o,l){super(),(o=u(o))&&(this._element=o,this._config=this._getConfig(l),Oe.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Oe.remove(this._element,this.constructor.DATA_KEY),T.off(this._element,this.constructor.EVENT_KEY);for(const o of Object.getOwnPropertyNames(this))this[o]=null}_queueCallback(o,l,p=!0){P(o,l,p)}_getConfig(o){return o=this._mergeConfigObj(o,this._element),o=this._configAfterMerge(o),this._typeCheckConfig(o),o}static getInstance(o){return Oe.get(u(o),this.DATA_KEY)}static getOrCreateInstance(o,l={}){return this.getInstance(o)||new this(o,typeof l=="object"?l:null)}static get VERSION(){return"5.2.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(o){return`${o}${this.EVENT_KEY}`}}const oe=(h,o="hide")=>{const l=`click.dismiss${h.EVENT_KEY}`,p=h.NAME;T.on(document,l,`[data-bs-dismiss="${p}"]`,function(y){if(["A","AREA"].includes(this.tagName)&&y.preventDefault(),d(this))return;const _=s(this)||this.closest(`.${p}`);h.getOrCreateInstance(_)[o]()})};class ee extends M{static get NAME(){return"alert"}close(){if(T.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const o=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,o)}_destroyElement(){this._element.remove(),T.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(o){return this.each(function(){const l=ee.getOrCreateInstance(this);if(typeof o=="string"){if(l[o]===void 0||o.startsWith("_")||o==="constructor")throw new TypeError(`No method named "${o}"`);l[o](this)}})}}oe(ee,"close"),O(ee);const ne='[data-bs-toggle="button"]';class Pe extends M{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(o){return this.each(function(){const l=Pe.getOrCreateInstance(this);o==="toggle"&&l[o]()})}}T.on(document,"click.bs.button.data-api",ne,h=>{h.preventDefault();const o=h.target.closest(ne);Pe.getOrCreateInstance(o).toggle()}),O(Pe);const K={find:(h,o=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(o,h)),findOne:(h,o=document.documentElement)=>Element.prototype.querySelector.call(o,h),children:(h,o)=>[].concat(...h.children).filter(l=>l.matches(o)),parents(h,o){const l=[];let p=h.parentNode.closest(o);for(;p;)l.push(p),p=p.parentNode.closest(o);return l},prev(h,o){let l=h.previousElementSibling;for(;l;){if(l.matches(o))return[l];l=l.previousElementSibling}return[]},next(h,o){let l=h.nextElementSibling;for(;l;){if(l.matches(o))return[l];l=l.nextElementSibling}return[]},focusableChildren(h){const o=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(l=>`${l}:not([tabindex^="-"])`).join(",");return this.find(o,h).filter(l=>!d(l)&&f(l))}},ut={endCallback:null,leftCallback:null,rightCallback:null},hr={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Gt extends j{constructor(o,l){super(),this._element=o,o&&Gt.isSupported()&&(this._config=this._getConfig(l),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return ut}static get DefaultType(){return hr}static get NAME(){return"swipe"}dispose(){T.off(this._element,".bs.swipe")}_start(o){this._supportPointerEvents?this._eventIsPointerPenTouch(o)&&(this._deltaX=o.clientX):this._deltaX=o.touches[0].clientX}_end(o){this._eventIsPointerPenTouch(o)&&(this._deltaX=o.clientX-this._deltaX),this._handleSwipe(),E(this._config.endCallback)}_move(o){this._deltaX=o.touches&&o.touches.length>1?0:o.touches[0].clientX-this._deltaX}_handleSwipe(){const o=Math.abs(this._deltaX);if(o<=40)return;const l=o/this._deltaX;this._deltaX=0,l&&E(l>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(T.on(this._element,"pointerdown.bs.swipe",o=>this._start(o)),T.on(this._element,"pointerup.bs.swipe",o=>this._end(o)),this._element.classList.add("pointer-event")):(T.on(this._element,"touchstart.bs.swipe",o=>this._start(o)),T.on(this._element,"touchmove.bs.swipe",o=>this._move(o)),T.on(this._element,"touchend.bs.swipe",o=>this._end(o)))}_eventIsPointerPenTouch(o){return this._supportPointerEvents&&(o.pointerType==="pen"||o.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ht="next",Nt="prev",Lt="left",di="right",dr="slid.bs.carousel",oo="carousel",pi="active",Wl={ArrowLeft:di,ArrowRight:Lt},Gl={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Hl={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class hn extends M{constructor(o,l){super(o,l),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=K.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===oo&&this.cycle()}static get Default(){return Gl}static get DefaultType(){return Hl}static get NAME(){return"carousel"}next(){this._slide(Ht)}nextWhenVisible(){!document.hidden&&f(this._element)&&this.next()}prev(){this._slide(Nt)}pause(){this._isSliding&&c(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?T.one(this._element,dr,()=>this.cycle()):this.cycle())}to(o){const l=this._getItems();if(o>l.length-1||o<0)return;if(this._isSliding)return void T.one(this._element,dr,()=>this.to(o));const p=this._getItemIndex(this._getActive());if(p===o)return;const y=o>p?Ht:Nt;this._slide(y,l[o])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(o){return o.defaultInterval=o.interval,o}_addEventListeners(){this._config.keyboard&&T.on(this._element,"keydown.bs.carousel",o=>this._keydown(o)),this._config.pause==="hover"&&(T.on(this._element,"mouseenter.bs.carousel",()=>this.pause()),T.on(this._element,"mouseleave.bs.carousel",()=>this._maybeEnableCycle())),this._config.touch&&Gt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const l of K.find(".carousel-item img",this._element))T.on(l,"dragstart.bs.carousel",p=>p.preventDefault());const o={leftCallback:()=>this._slide(this._directionToOrder(Lt)),rightCallback:()=>this._slide(this._directionToOrder(di)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Gt(this._element,o)}_keydown(o){if(/input|textarea/i.test(o.target.tagName))return;const l=Wl[o.key];l&&(o.preventDefault(),this._slide(this._directionToOrder(l)))}_getItemIndex(o){return this._getItems().indexOf(o)}_setActiveIndicatorElement(o){if(!this._indicatorsElement)return;const l=K.findOne(".active",this._indicatorsElement);l.classList.remove(pi),l.removeAttribute("aria-current");const p=K.findOne(`[data-bs-slide-to="${o}"]`,this._indicatorsElement);p&&(p.classList.add(pi),p.setAttribute("aria-current","true"))}_updateInterval(){const o=this._activeElement||this._getActive();if(!o)return;const l=Number.parseInt(o.getAttribute("data-bs-interval"),10);this._config.interval=l||this._config.defaultInterval}_slide(o,l=null){if(this._isSliding)return;const p=this._getActive(),y=o===Ht,_=l||I(this._getItems(),p,y,this._config.wrap);if(_===p)return;const S=this._getItemIndex(_),D=V=>T.trigger(this._element,V,{relatedTarget:_,direction:this._orderToDirection(o),from:this._getItemIndex(p),to:S});if(D("slide.bs.carousel").defaultPrevented||!p||!_)return;const F=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(S),this._activeElement=_;const U=y?"carousel-item-start":"carousel-item-end",z=y?"carousel-item-next":"carousel-item-prev";_.classList.add(z),g(_),p.classList.add(U),_.classList.add(U),this._queueCallback(()=>{_.classList.remove(U,z),_.classList.add(pi),p.classList.remove(pi,z,U),this._isSliding=!1,D(dr)},p,this._isAnimated()),F&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return K.findOne(".active.carousel-item",this._element)}_getItems(){return K.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(o){return x()?o===Lt?Nt:Ht:o===Lt?Ht:Nt}_orderToDirection(o){return x()?o===Nt?Lt:di:o===Nt?di:Lt}static jQueryInterface(o){return this.each(function(){const l=hn.getOrCreateInstance(this,o);if(typeof o!="number"){if(typeof o=="string"){if(l[o]===void 0||o.startsWith("_")||o==="constructor")throw new TypeError(`No method named "${o}"`);l[o]()}}else l.to(o)})}}T.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(h){const o=s(this);if(!o||!o.classList.contains(oo))return;h.preventDefault();const l=hn.getOrCreateInstance(o),p=this.getAttribute("data-bs-slide-to");return p?(l.to(p),void l._maybeEnableCycle()):Qe.getDataAttribute(this,"slide")==="next"?(l.next(),void l._maybeEnableCycle()):(l.prev(),void l._maybeEnableCycle())}),T.on(window,"load.bs.carousel.data-api",()=>{const h=K.find('[data-bs-ride="carousel"]');for(const o of h)hn.getOrCreateInstance(o)}),O(hn);const pr="show",vi="collapse",mi="collapsing",vr='[data-bs-toggle="collapse"]',Kl={parent:null,toggle:!0},Yl={parent:"(null|element)",toggle:"boolean"};class dn extends M{constructor(o,l){super(o,l),this._isTransitioning=!1,this._triggerArray=[];const p=K.find(vr);for(const y of p){const _=r(y),S=K.find(_).filter(D=>D===this._element);_!==null&&S.length&&this._triggerArray.push(y)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Kl}static get DefaultType(){return Yl}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let o=[];if(this._config.parent&&(o=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(y=>y!==this._element).map(y=>dn.getOrCreateInstance(y,{toggle:!1}))),o.length&&o[0]._isTransitioning||T.trigger(this._element,"show.bs.collapse").defaultPrevented)return;for(const y of o)y.hide();const l=this._getDimension();this._element.classList.remove(vi),this._element.classList.add(mi),this._element.style[l]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const p=`scroll${l[0].toUpperCase()+l.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(mi),this._element.classList.add(vi,pr),this._element.style[l]="",T.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[l]=`${this._element[p]}px`}hide(){if(this._isTransitioning||!this._isShown()||T.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const o=this._getDimension();this._element.style[o]=`${this._element.getBoundingClientRect()[o]}px`,g(this._element),this._element.classList.add(mi),this._element.classList.remove(vi,pr);for(const l of this._triggerArray){const p=s(l);p&&!this._isShown(p)&&this._addAriaAndCollapsedClass([l],!1)}this._isTransitioning=!0,this._element.style[o]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(mi),this._element.classList.add(vi),T.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(o=this._element){return o.classList.contains(pr)}_configAfterMerge(o){return o.toggle=Boolean(o.toggle),o.parent=u(o.parent),o}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const o=this._getFirstLevelChildren(vr);for(const l of o){const p=s(l);p&&this._addAriaAndCollapsedClass([l],this._isShown(p))}}_getFirstLevelChildren(o){const l=K.find(":scope .collapse .collapse",this._config.parent);return K.find(o,this._config.parent).filter(p=>!l.includes(p))}_addAriaAndCollapsedClass(o,l){if(o.length)for(const p of o)p.classList.toggle("collapsed",!l),p.setAttribute("aria-expanded",l)}static jQueryInterface(o){const l={};return typeof o=="string"&&/show|hide/.test(o)&&(l.toggle=!1),this.each(function(){const p=dn.getOrCreateInstance(this,l);if(typeof o=="string"){if(p[o]===void 0)throw new TypeError(`No method named "${o}"`);p[o]()}})}}T.on(document,"click.bs.collapse.data-api",vr,function(h){(h.target.tagName==="A"||h.delegateTarget&&h.delegateTarget.tagName==="A")&&h.preventDefault();const o=r(this),l=K.find(o);for(const p of l)dn.getOrCreateInstance(p,{toggle:!1}).toggle()}),O(dn);var Ze="top",ot="bottom",at="right",et="left",gi="auto",pn=[Ze,ot,at,et],Kt="start",vn="end",ao="clippingParents",mr="viewport",mn="popper",co="reference",gr=pn.reduce(function(h,o){return h.concat([o+"-"+Kt,o+"-"+vn])},[]),yr=[].concat(pn,[gi]).reduce(function(h,o){return h.concat([o,o+"-"+Kt,o+"-"+vn])},[]),lo="beforeRead",uo="read",fo="afterRead",ho="beforeMain",po="main",vo="afterMain",mo="beforeWrite",go="write",yo="afterWrite",bo=[lo,uo,fo,ho,po,vo,mo,go,yo];function wt(h){return h?(h.nodeName||"").toLowerCase():null}function ft(h){if(h==null)return window;if(h.toString()!=="[object Window]"){var o=h.ownerDocument;return o&&o.defaultView||window}return h}function Yt(h){return h instanceof ft(h).Element||h instanceof Element}function ht(h){return h instanceof ft(h).HTMLElement||h instanceof HTMLElement}function br(h){return typeof ShadowRoot<"u"&&(h instanceof ft(h).ShadowRoot||h instanceof ShadowRoot)}const _r={name:"applyStyles",enabled:!0,phase:"write",fn:function(h){var o=h.state;Object.keys(o.elements).forEach(function(l){var p=o.styles[l]||{},y=o.attributes[l]||{},_=o.elements[l];ht(_)&&wt(_)&&(Object.assign(_.style,p),Object.keys(y).forEach(function(S){var D=y[S];D===!1?_.removeAttribute(S):_.setAttribute(S,D===!0?"":D)}))})},effect:function(h){var o=h.state,l={popper:{position:o.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(o.elements.popper.style,l.popper),o.styles=l,o.elements.arrow&&Object.assign(o.elements.arrow.style,l.arrow),function(){Object.keys(o.elements).forEach(function(p){var y=o.elements[p],_=o.attributes[p]||{},S=Object.keys(o.styles.hasOwnProperty(p)?o.styles[p]:l[p]).reduce(function(D,F){return D[F]="",D},{});ht(y)&&wt(y)&&(Object.assign(y.style,S),Object.keys(_).forEach(function(D){y.removeAttribute(D)}))})}},requires:["computeStyles"]};function Et(h){return h.split("-")[0]}var Jt=Math.max,yi=Math.min,gn=Math.round;function wr(){var h=navigator.userAgentData;return h!=null&&h.brands?h.brands.map(function(o){return o.brand+"/"+o.version}).join(" "):navigator.userAgent}function _o(){return!/^((?!chrome|android).)*safari/i.test(wr())}function yn(h,o,l){o===void 0&&(o=!1),l===void 0&&(l=!1);var p=h.getBoundingClientRect(),y=1,_=1;o&&ht(h)&&(y=h.offsetWidth>0&&gn(p.width)/h.offsetWidth||1,_=h.offsetHeight>0&&gn(p.height)/h.offsetHeight||1);var S=(Yt(h)?ft(h):window).visualViewport,D=!_o()&&l,F=(p.left+(D&&S?S.offsetLeft:0))/y,U=(p.top+(D&&S?S.offsetTop:0))/_,z=p.width/y,V=p.height/_;return{width:z,height:V,top:U,right:F+z,bottom:U+V,left:F,x:F,y:U}}function Er(h){var o=yn(h),l=h.offsetWidth,p=h.offsetHeight;return Math.abs(o.width-l)<=1&&(l=o.width),Math.abs(o.height-p)<=1&&(p=o.height),{x:h.offsetLeft,y:h.offsetTop,width:l,height:p}}function wo(h,o){var l=o.getRootNode&&o.getRootNode();if(h.contains(o))return!0;if(l&&br(l)){var p=o;do{if(p&&h.isSameNode(p))return!0;p=p.parentNode||p.host}while(p)}return!1}function St(h){return ft(h).getComputedStyle(h)}function Jl(h){return["table","td","th"].indexOf(wt(h))>=0}function Rt(h){return((Yt(h)?h.ownerDocument:h.document)||window.document).documentElement}function bi(h){return wt(h)==="html"?h:h.assignedSlot||h.parentNode||(br(h)?h.host:null)||Rt(h)}function Eo(h){return ht(h)&&St(h).position!=="fixed"?h.offsetParent:null}function $n(h){for(var o=ft(h),l=Eo(h);l&&Jl(l)&&St(l).position==="static";)l=Eo(l);return l&&(wt(l)==="html"||wt(l)==="body"&&St(l).position==="static")?o:l||function(p){var y=/firefox/i.test(wr());if(/Trident/i.test(wr())&&ht(p)&&St(p).position==="fixed")return null;var _=bi(p);for(br(_)&&(_=_.host);ht(_)&&["html","body"].indexOf(wt(_))<0;){var S=St(_);if(S.transform!=="none"||S.perspective!=="none"||S.contain==="paint"||["transform","perspective"].indexOf(S.willChange)!==-1||y&&S.willChange==="filter"||y&&S.filter&&S.filter!=="none")return _;_=_.parentNode}return null}(h)||o}function xr(h){return["top","bottom"].indexOf(h)>=0?"x":"y"}function Vn(h,o,l){return Jt(h,yi(o,l))}function xo(h){return Object.assign({},{top:0,right:0,bottom:0,left:0},h)}function To(h,o){return o.reduce(function(l,p){return l[p]=h,l},{})}const ko={name:"arrow",enabled:!0,phase:"main",fn:function(h){var o,l=h.state,p=h.name,y=h.options,_=l.elements.arrow,S=l.modifiersData.popperOffsets,D=Et(l.placement),F=xr(D),U=[et,at].indexOf(D)>=0?"height":"width";if(_&&S){var z=function(xe,be){return xo(typeof(xe=typeof xe=="function"?xe(Object.assign({},be.rects,{placement:be.placement})):xe)!="number"?xe:To(xe,pn))}(y.padding,l),V=Er(_),ae=F==="y"?Ze:et,X=F==="y"?ot:at,re=l.rects.reference[U]+l.rects.reference[F]-S[F]-l.rects.popper[U],ie=S[F]-l.rects.reference[F],se=$n(_),Ee=se?F==="y"?se.clientHeight||0:se.clientWidth||0:0,Ce=re/2-ie/2,ue=z[ae],ve=Ee-V[U]-z[X],ce=Ee/2-V[U]/2+Ce,de=Vn(ue,ce,ve),ye=F;l.modifiersData[p]=((o={})[ye]=de,o.centerOffset=de-ce,o)}},effect:function(h){var o=h.state,l=h.options.element,p=l===void 0?"[data-popper-arrow]":l;p!=null&&(typeof p!="string"||(p=o.elements.popper.querySelector(p)))&&wo(o.elements.popper,p)&&(o.elements.arrow=p)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function bn(h){return h.split("-")[1]}var Xl={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Po(h){var o,l=h.popper,p=h.popperRect,y=h.placement,_=h.variation,S=h.offsets,D=h.position,F=h.gpuAcceleration,U=h.adaptive,z=h.roundOffsets,V=h.isFixed,ae=S.x,X=ae===void 0?0:ae,re=S.y,ie=re===void 0?0:re,se=typeof z=="function"?z({x:X,y:ie}):{x:X,y:ie};X=se.x,ie=se.y;var Ee=S.hasOwnProperty("x"),Ce=S.hasOwnProperty("y"),ue=et,ve=Ze,ce=window;if(U){var de=$n(l),ye="clientHeight",xe="clientWidth";de===ft(l)&&St(de=Rt(l)).position!=="static"&&D==="absolute"&&(ye="scrollHeight",xe="scrollWidth"),(y===Ze||(y===et||y===at)&&_===vn)&&(ve=ot,ie-=(V&&de===ce&&ce.visualViewport?ce.visualViewport.height:de[ye])-p.height,ie*=F?1:-1),y!==et&&(y!==Ze&&y!==ot||_!==vn)||(ue=at,X-=(V&&de===ce&&ce.visualViewport?ce.visualViewport.width:de[xe])-p.width,X*=F?1:-1)}var be,Fe=Object.assign({position:D},U&&Xl),ct=z===!0?function(gt){var tt=gt.x,dt=gt.y,nt=window.devicePixelRatio||1;return{x:gn(tt*nt)/nt||0,y:gn(dt*nt)/nt||0}}({x:X,y:ie}):{x:X,y:ie};return X=ct.x,ie=ct.y,F?Object.assign({},Fe,((be={})[ve]=Ce?"0":"",be[ue]=Ee?"0":"",be.transform=(ce.devicePixelRatio||1)<=1?"translate("+X+"px, "+ie+"px)":"translate3d("+X+"px, "+ie+"px, 0)",be)):Object.assign({},Fe,((o={})[ve]=Ce?ie+"px":"",o[ue]=Ee?X+"px":"",o.transform="",o))}const Tr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(h){var o=h.state,l=h.options,p=l.gpuAcceleration,y=p===void 0||p,_=l.adaptive,S=_===void 0||_,D=l.roundOffsets,F=D===void 0||D,U={placement:Et(o.placement),variation:bn(o.placement),popper:o.elements.popper,popperRect:o.rects.popper,gpuAcceleration:y,isFixed:o.options.strategy==="fixed"};o.modifiersData.popperOffsets!=null&&(o.styles.popper=Object.assign({},o.styles.popper,Po(Object.assign({},U,{offsets:o.modifiersData.popperOffsets,position:o.options.strategy,adaptive:S,roundOffsets:F})))),o.modifiersData.arrow!=null&&(o.styles.arrow=Object.assign({},o.styles.arrow,Po(Object.assign({},U,{offsets:o.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:F})))),o.attributes.popper=Object.assign({},o.attributes.popper,{"data-popper-placement":o.placement})},data:{}};var _i={passive:!0};const kr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(h){var o=h.state,l=h.instance,p=h.options,y=p.scroll,_=y===void 0||y,S=p.resize,D=S===void 0||S,F=ft(o.elements.popper),U=[].concat(o.scrollParents.reference,o.scrollParents.popper);return _&&U.forEach(function(z){z.addEventListener("scroll",l.update,_i)}),D&&F.addEventListener("resize",l.update,_i),function(){_&&U.forEach(function(z){z.removeEventListener("scroll",l.update,_i)}),D&&F.removeEventListener("resize",l.update,_i)}},data:{}};var Zl={left:"right",right:"left",bottom:"top",top:"bottom"};function wi(h){return h.replace(/left|right|bottom|top/g,function(o){return Zl[o]})}var eu={start:"end",end:"start"};function Io(h){return h.replace(/start|end/g,function(o){return eu[o]})}function Pr(h){var o=ft(h);return{scrollLeft:o.pageXOffset,scrollTop:o.pageYOffset}}function Ir(h){return yn(Rt(h)).left+Pr(h).scrollLeft}function Sr(h){var o=St(h),l=o.overflow,p=o.overflowX,y=o.overflowY;return/auto|scroll|overlay|hidden/.test(l+y+p)}function So(h){return["html","body","#document"].indexOf(wt(h))>=0?h.ownerDocument.body:ht(h)&&Sr(h)?h:So(bi(h))}function Qn(h,o){var l;o===void 0&&(o=[]);var p=So(h),y=p===((l=h.ownerDocument)==null?void 0:l.body),_=ft(p),S=y?[_].concat(_.visualViewport||[],Sr(p)?p:[]):p,D=o.concat(S);return y?D:D.concat(Qn(bi(S)))}function Or(h){return Object.assign({},h,{left:h.x,top:h.y,right:h.x+h.width,bottom:h.y+h.height})}function Oo(h,o,l){return o===mr?Or(function(p,y){var _=ft(p),S=Rt(p),D=_.visualViewport,F=S.clientWidth,U=S.clientHeight,z=0,V=0;if(D){F=D.width,U=D.height;var ae=_o();(ae||!ae&&y==="fixed")&&(z=D.offsetLeft,V=D.offsetTop)}return{width:F,height:U,x:z+Ir(p),y:V}}(h,l)):Yt(o)?function(p,y){var _=yn(p,!1,y==="fixed");return _.top=_.top+p.clientTop,_.left=_.left+p.clientLeft,_.bottom=_.top+p.clientHeight,_.right=_.left+p.clientWidth,_.width=p.clientWidth,_.height=p.clientHeight,_.x=_.left,_.y=_.top,_}(o,l):Or(function(p){var y,_=Rt(p),S=Pr(p),D=(y=p.ownerDocument)==null?void 0:y.body,F=Jt(_.scrollWidth,_.clientWidth,D?D.scrollWidth:0,D?D.clientWidth:0),U=Jt(_.scrollHeight,_.clientHeight,D?D.scrollHeight:0,D?D.clientHeight:0),z=-S.scrollLeft+Ir(p),V=-S.scrollTop;return St(D||_).direction==="rtl"&&(z+=Jt(_.clientWidth,D?D.clientWidth:0)-F),{width:F,height:U,x:z,y:V}}(Rt(h)))}function Co(h){var o,l=h.reference,p=h.element,y=h.placement,_=y?Et(y):null,S=y?bn(y):null,D=l.x+l.width/2-p.width/2,F=l.y+l.height/2-p.height/2;switch(_){case Ze:o={x:D,y:l.y-p.height};break;case ot:o={x:D,y:l.y+l.height};break;case at:o={x:l.x+l.width,y:F};break;case et:o={x:l.x-p.width,y:F};break;default:o={x:l.x,y:l.y}}var U=_?xr(_):null;if(U!=null){var z=U==="y"?"height":"width";switch(S){case Kt:o[U]=o[U]-(l[z]/2-p[z]/2);break;case vn:o[U]=o[U]+(l[z]/2-p[z]/2)}}return o}function _n(h,o){o===void 0&&(o={});var l=o,p=l.placement,y=p===void 0?h.placement:p,_=l.strategy,S=_===void 0?h.strategy:_,D=l.boundary,F=D===void 0?ao:D,U=l.rootBoundary,z=U===void 0?mr:U,V=l.elementContext,ae=V===void 0?mn:V,X=l.altBoundary,re=X!==void 0&&X,ie=l.padding,se=ie===void 0?0:ie,Ee=xo(typeof se!="number"?se:To(se,pn)),Ce=ae===mn?co:mn,ue=h.rects.popper,ve=h.elements[re?Ce:ae],ce=function(tt,dt,nt,He){var xt=dt==="clippingParents"?function(Ie){var it=Qn(bi(Ie)),pt=["absolute","fixed"].indexOf(St(Ie).position)>=0&&ht(Ie)?$n(Ie):Ie;return Yt(pt)?it.filter(function(Mt){return Yt(Mt)&&wo(Mt,pt)&&wt(Mt)!=="body"}):[]}(tt):[].concat(dt),Tt=[].concat(xt,[nt]),wn=Tt[0],Ue=Tt.reduce(function(Ie,it){var pt=Oo(tt,it,He);return Ie.top=Jt(pt.top,Ie.top),Ie.right=yi(pt.right,Ie.right),Ie.bottom=yi(pt.bottom,Ie.bottom),Ie.left=Jt(pt.left,Ie.left),Ie},Oo(tt,wn,He));return Ue.width=Ue.right-Ue.left,Ue.height=Ue.bottom-Ue.top,Ue.x=Ue.left,Ue.y=Ue.top,Ue}(Yt(ve)?ve:ve.contextElement||Rt(h.elements.popper),F,z,S),de=yn(h.elements.reference),ye=Co({reference:de,element:ue,strategy:"absolute",placement:y}),xe=Or(Object.assign({},ue,ye)),be=ae===mn?xe:de,Fe={top:ce.top-be.top+Ee.top,bottom:be.bottom-ce.bottom+Ee.bottom,left:ce.left-be.left+Ee.left,right:be.right-ce.right+Ee.right},ct=h.modifiersData.offset;if(ae===mn&&ct){var gt=ct[y];Object.keys(Fe).forEach(function(tt){var dt=[at,ot].indexOf(tt)>=0?1:-1,nt=[Ze,ot].indexOf(tt)>=0?"y":"x";Fe[tt]+=gt[nt]*dt})}return Fe}function tu(h,o){o===void 0&&(o={});var l=o,p=l.placement,y=l.boundary,_=l.rootBoundary,S=l.padding,D=l.flipVariations,F=l.allowedAutoPlacements,U=F===void 0?yr:F,z=bn(p),V=z?D?gr:gr.filter(function(re){return bn(re)===z}):pn,ae=V.filter(function(re){return U.indexOf(re)>=0});ae.length===0&&(ae=V);var X=ae.reduce(function(re,ie){return re[ie]=_n(h,{placement:ie,boundary:y,rootBoundary:_,padding:S})[Et(ie)],re},{});return Object.keys(X).sort(function(re,ie){return X[re]-X[ie]})}const Ao={name:"flip",enabled:!0,phase:"main",fn:function(h){var o=h.state,l=h.options,p=h.name;if(!o.modifiersData[p]._skip){for(var y=l.mainAxis,_=y===void 0||y,S=l.altAxis,D=S===void 0||S,F=l.fallbackPlacements,U=l.padding,z=l.boundary,V=l.rootBoundary,ae=l.altBoundary,X=l.flipVariations,re=X===void 0||X,ie=l.allowedAutoPlacements,se=o.options.placement,Ee=Et(se),Ce=F||(Ee!==se&&re?function(Ie){if(Et(Ie)===gi)return[];var it=wi(Ie);return[Io(Ie),it,Io(it)]}(se):[wi(se)]),ue=[se].concat(Ce).reduce(function(Ie,it){return Ie.concat(Et(it)===gi?tu(o,{placement:it,boundary:z,rootBoundary:V,padding:U,flipVariations:re,allowedAutoPlacements:ie}):it)},[]),ve=o.rects.reference,ce=o.rects.popper,de=new Map,ye=!0,xe=ue[0],be=0;be<ue.length;be++){var Fe=ue[be],ct=Et(Fe),gt=bn(Fe)===Kt,tt=[Ze,ot].indexOf(ct)>=0,dt=tt?"width":"height",nt=_n(o,{placement:Fe,boundary:z,rootBoundary:V,altBoundary:ae,padding:U}),He=tt?gt?at:et:gt?ot:Ze;ve[dt]>ce[dt]&&(He=wi(He));var xt=wi(He),Tt=[];if(_&&Tt.push(nt[ct]<=0),D&&Tt.push(nt[He]<=0,nt[xt]<=0),Tt.every(function(Ie){return Ie})){xe=Fe,ye=!1;break}de.set(Fe,Tt)}if(ye)for(var wn=function(Ie){var it=ue.find(function(pt){var Mt=de.get(pt);if(Mt)return Mt.slice(0,Ie).every(function(Ai){return Ai})});if(it)return xe=it,"break"},Ue=re?3:1;Ue>0&&wn(Ue)!=="break";Ue--);o.placement!==xe&&(o.modifiersData[p]._skip=!0,o.placement=xe,o.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Do(h,o,l){return l===void 0&&(l={x:0,y:0}),{top:h.top-o.height-l.y,right:h.right-o.width+l.x,bottom:h.bottom-o.height+l.y,left:h.left-o.width-l.x}}function No(h){return[Ze,at,ot,et].some(function(o){return h[o]>=0})}const Lo={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(h){var o=h.state,l=h.name,p=o.rects.reference,y=o.rects.popper,_=o.modifiersData.preventOverflow,S=_n(o,{elementContext:"reference"}),D=_n(o,{altBoundary:!0}),F=Do(S,p),U=Do(D,y,_),z=No(F),V=No(U);o.modifiersData[l]={referenceClippingOffsets:F,popperEscapeOffsets:U,isReferenceHidden:z,hasPopperEscaped:V},o.attributes.popper=Object.assign({},o.attributes.popper,{"data-popper-reference-hidden":z,"data-popper-escaped":V})}},Ro={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(h){var o=h.state,l=h.options,p=h.name,y=l.offset,_=y===void 0?[0,0]:y,S=yr.reduce(function(z,V){return z[V]=function(ae,X,re){var ie=Et(ae),se=[et,Ze].indexOf(ie)>=0?-1:1,Ee=typeof re=="function"?re(Object.assign({},X,{placement:ae})):re,Ce=Ee[0],ue=Ee[1];return Ce=Ce||0,ue=(ue||0)*se,[et,at].indexOf(ie)>=0?{x:ue,y:Ce}:{x:Ce,y:ue}}(V,o.rects,_),z},{}),D=S[o.placement],F=D.x,U=D.y;o.modifiersData.popperOffsets!=null&&(o.modifiersData.popperOffsets.x+=F,o.modifiersData.popperOffsets.y+=U),o.modifiersData[p]=S}},Cr={name:"popperOffsets",enabled:!0,phase:"read",fn:function(h){var o=h.state,l=h.name;o.modifiersData[l]=Co({reference:o.rects.reference,element:o.rects.popper,strategy:"absolute",placement:o.placement})},data:{}},Mo={name:"preventOverflow",enabled:!0,phase:"main",fn:function(h){var o=h.state,l=h.options,p=h.name,y=l.mainAxis,_=y===void 0||y,S=l.altAxis,D=S!==void 0&&S,F=l.boundary,U=l.rootBoundary,z=l.altBoundary,V=l.padding,ae=l.tether,X=ae===void 0||ae,re=l.tetherOffset,ie=re===void 0?0:re,se=_n(o,{boundary:F,rootBoundary:U,padding:V,altBoundary:z}),Ee=Et(o.placement),Ce=bn(o.placement),ue=!Ce,ve=xr(Ee),ce=ve==="x"?"y":"x",de=o.modifiersData.popperOffsets,ye=o.rects.reference,xe=o.rects.popper,be=typeof ie=="function"?ie(Object.assign({},o.rects,{placement:o.placement})):ie,Fe=typeof be=="number"?{mainAxis:be,altAxis:be}:Object.assign({mainAxis:0,altAxis:0},be),ct=o.modifiersData.offset?o.modifiersData.offset[o.placement]:null,gt={x:0,y:0};if(de){if(_){var tt,dt=ve==="y"?Ze:et,nt=ve==="y"?ot:at,He=ve==="y"?"height":"width",xt=de[ve],Tt=xt+se[dt],wn=xt-se[nt],Ue=X?-xe[He]/2:0,Ie=Ce===Kt?ye[He]:xe[He],it=Ce===Kt?-xe[He]:-ye[He],pt=o.elements.arrow,Mt=X&&pt?Er(pt):{width:0,height:0},Ai=o.modifiersData["arrow#persistent"]?o.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},_a=Ai[dt],wa=Ai[nt],Di=Vn(0,ye[He],Mt[He]),Uu=ue?ye[He]/2-Ue-Di-_a-Fe.mainAxis:Ie-Di-_a-Fe.mainAxis,zu=ue?-ye[He]/2+Ue+Di+wa+Fe.mainAxis:it+Di+wa+Fe.mainAxis,Fr=o.elements.arrow&&$n(o.elements.arrow),Wu=Fr?ve==="y"?Fr.clientTop||0:Fr.clientLeft||0:0,Ea=(tt=ct?.[ve])!=null?tt:0,Gu=xt+zu-Ea,xa=Vn(X?yi(Tt,xt+Uu-Ea-Wu):Tt,xt,X?Jt(wn,Gu):wn);de[ve]=xa,gt[ve]=xa-xt}if(D){var Ta,Hu=ve==="x"?Ze:et,Ku=ve==="x"?ot:at,nn=de[ce],Ni=ce==="y"?"height":"width",ka=nn+se[Hu],Pa=nn-se[Ku],qr=[Ze,et].indexOf(Ee)!==-1,Ia=(Ta=ct?.[ce])!=null?Ta:0,Sa=qr?ka:nn-ye[Ni]-xe[Ni]-Ia+Fe.altAxis,Oa=qr?nn+ye[Ni]+xe[Ni]-Ia-Fe.altAxis:Pa,Ca=X&&qr?function(Yu,Ju,Br){var Aa=Vn(Yu,Ju,Br);return Aa>Br?Br:Aa}(Sa,nn,Oa):Vn(X?Sa:ka,nn,X?Oa:Pa);de[ce]=Ca,gt[ce]=Ca-nn}o.modifiersData[p]=gt}},requiresIfExists:["offset"]};function nu(h,o,l){l===void 0&&(l=!1);var p,y,_=ht(o),S=ht(o)&&function(V){var ae=V.getBoundingClientRect(),X=gn(ae.width)/V.offsetWidth||1,re=gn(ae.height)/V.offsetHeight||1;return X!==1||re!==1}(o),D=Rt(o),F=yn(h,S,l),U={scrollLeft:0,scrollTop:0},z={x:0,y:0};return(_||!_&&!l)&&((wt(o)!=="body"||Sr(D))&&(U=(p=o)!==ft(p)&&ht(p)?{scrollLeft:(y=p).scrollLeft,scrollTop:y.scrollTop}:Pr(p)),ht(o)?((z=yn(o,!0)).x+=o.clientLeft,z.y+=o.clientTop):D&&(z.x=Ir(D))),{x:F.left+U.scrollLeft-z.x,y:F.top+U.scrollTop-z.y,width:F.width,height:F.height}}function iu(h){var o=new Map,l=new Set,p=[];function y(_){l.add(_.name),[].concat(_.requires||[],_.requiresIfExists||[]).forEach(function(S){if(!l.has(S)){var D=o.get(S);D&&y(D)}}),p.push(_)}return h.forEach(function(_){o.set(_.name,_)}),h.forEach(function(_){l.has(_.name)||y(_)}),p}var Fo={placement:"bottom",modifiers:[],strategy:"absolute"};function qo(){for(var h=arguments.length,o=new Array(h),l=0;l<h;l++)o[l]=arguments[l];return!o.some(function(p){return!(p&&typeof p.getBoundingClientRect=="function")})}function Ei(h){h===void 0&&(h={});var o=h,l=o.defaultModifiers,p=l===void 0?[]:l,y=o.defaultOptions,_=y===void 0?Fo:y;return function(S,D,F){F===void 0&&(F=_);var U,z,V={placement:"bottom",orderedModifiers:[],options:Object.assign({},Fo,_),modifiersData:{},elements:{reference:S,popper:D},attributes:{},styles:{}},ae=[],X=!1,re={state:V,setOptions:function(se){var Ee=typeof se=="function"?se(V.options):se;ie(),V.options=Object.assign({},_,V.options,Ee),V.scrollParents={reference:Yt(S)?Qn(S):S.contextElement?Qn(S.contextElement):[],popper:Qn(D)};var Ce,ue,ve=function(ce){var de=iu(ce);return bo.reduce(function(ye,xe){return ye.concat(de.filter(function(be){return be.phase===xe}))},[])}((Ce=[].concat(p,V.options.modifiers),ue=Ce.reduce(function(ce,de){var ye=ce[de.name];return ce[de.name]=ye?Object.assign({},ye,de,{options:Object.assign({},ye.options,de.options),data:Object.assign({},ye.data,de.data)}):de,ce},{}),Object.keys(ue).map(function(ce){return ue[ce]})));return V.orderedModifiers=ve.filter(function(ce){return ce.enabled}),V.orderedModifiers.forEach(function(ce){var de=ce.name,ye=ce.options,xe=ye===void 0?{}:ye,be=ce.effect;if(typeof be=="function"){var Fe=be({state:V,name:de,instance:re,options:xe});ae.push(Fe||function(){})}}),re.update()},forceUpdate:function(){if(!X){var se=V.elements,Ee=se.reference,Ce=se.popper;if(qo(Ee,Ce)){V.rects={reference:nu(Ee,$n(Ce),V.options.strategy==="fixed"),popper:Er(Ce)},V.reset=!1,V.placement=V.options.placement,V.orderedModifiers.forEach(function(be){return V.modifiersData[be.name]=Object.assign({},be.data)});for(var ue=0;ue<V.orderedModifiers.length;ue++)if(V.reset!==!0){var ve=V.orderedModifiers[ue],ce=ve.fn,de=ve.options,ye=de===void 0?{}:de,xe=ve.name;typeof ce=="function"&&(V=ce({state:V,options:ye,name:xe,instance:re})||V)}else V.reset=!1,ue=-1}}},update:(U=function(){return new Promise(function(se){re.forceUpdate(),se(V)})},function(){return z||(z=new Promise(function(se){Promise.resolve().then(function(){z=void 0,se(U())})})),z}),destroy:function(){ie(),X=!0}};if(!qo(S,D))return re;function ie(){ae.forEach(function(se){return se()}),ae=[]}return re.setOptions(F).then(function(se){!X&&F.onFirstUpdate&&F.onFirstUpdate(se)}),re}}var ru=Ei(),su=Ei({defaultModifiers:[kr,Cr,Tr,_r]}),Ar=Ei({defaultModifiers:[kr,Cr,Tr,_r,Ro,Ao,Mo,ko,Lo]});const Bo=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:Ei,detectOverflow:_n,createPopperBase:ru,createPopper:Ar,createPopperLite:su,top:Ze,bottom:ot,right:at,left:et,auto:gi,basePlacements:pn,start:Kt,end:vn,clippingParents:ao,viewport:mr,popper:mn,reference:co,variationPlacements:gr,placements:yr,beforeRead:lo,read:uo,afterRead:fo,beforeMain:ho,main:po,afterMain:vo,beforeWrite:mo,write:go,afterWrite:yo,modifierPhases:bo,applyStyles:_r,arrow:ko,computeStyles:Tr,eventListeners:kr,flip:Ao,hide:Lo,offset:Ro,popperOffsets:Cr,preventOverflow:Mo},Symbol.toStringTag,{value:"Module"})),jo="dropdown",ou="ArrowUp",$o="ArrowDown",Vo="click.bs.dropdown.data-api",Qo="keydown.bs.dropdown.data-api",Un="show",Xt='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',au=`${Xt}.show`,xi=".dropdown-menu",cu=x()?"top-end":"top-start",lu=x()?"top-start":"top-end",uu=x()?"bottom-end":"bottom-start",fu=x()?"bottom-start":"bottom-end",hu=x()?"left-start":"right-start",du=x()?"right-start":"left-start",pu={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},vu={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class mt extends M{constructor(o,l){super(o,l),this._popper=null,this._parent=this._element.parentNode,this._menu=K.next(this._element,xi)[0]||K.prev(this._element,xi)[0]||K.findOne(xi,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return pu}static get DefaultType(){return vu}static get NAME(){return jo}toggle(){return this._isShown()?this.hide():this.show()}show(){if(d(this._element)||this._isShown())return;const o={relatedTarget:this._element};if(!T.trigger(this._element,"show.bs.dropdown",o).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const l of[].concat(...document.body.children))T.on(l,"mouseover",v);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Un),this._element.classList.add(Un),T.trigger(this._element,"shown.bs.dropdown",o)}}hide(){if(d(this._element)||!this._isShown())return;const o={relatedTarget:this._element};this._completeHide(o)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(o){if(!T.trigger(this._element,"hide.bs.dropdown",o).defaultPrevented){if("ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))T.off(l,"mouseover",v);this._popper&&this._popper.destroy(),this._menu.classList.remove(Un),this._element.classList.remove(Un),this._element.setAttribute("aria-expanded","false"),Qe.removeDataAttribute(this._menu,"popper"),T.trigger(this._element,"hidden.bs.dropdown",o)}}_getConfig(o){if(typeof(o=super._getConfig(o)).reference=="object"&&!a(o.reference)&&typeof o.reference.getBoundingClientRect!="function")throw new TypeError(`${jo.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return o}_createPopper(){if(Bo===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let o=this._element;this._config.reference==="parent"?o=this._parent:a(this._config.reference)?o=u(this._config.reference):typeof this._config.reference=="object"&&(o=this._config.reference);const l=this._getPopperConfig();this._popper=Ar(o,this._menu,l)}_isShown(){return this._menu.classList.contains(Un)}_getPlacement(){const o=this._parent;if(o.classList.contains("dropend"))return hu;if(o.classList.contains("dropstart"))return du;if(o.classList.contains("dropup-center"))return"top";if(o.classList.contains("dropdown-center"))return"bottom";const l=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return o.classList.contains("dropup")?l?lu:cu:l?fu:uu}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:o}=this._config;return typeof o=="string"?o.split(",").map(l=>Number.parseInt(l,10)):typeof o=="function"?l=>o(l,this._element):o}_getPopperConfig(){const o={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Qe.setDataAttribute(this._menu,"popper","static"),o.modifiers=[{name:"applyStyles",enabled:!1}]),{...o,...typeof this._config.popperConfig=="function"?this._config.popperConfig(o):this._config.popperConfig}}_selectMenuItem({key:o,target:l}){const p=K.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(y=>f(y));p.length&&I(p,l,o===$o,!p.includes(l)).focus()}static jQueryInterface(o){return this.each(function(){const l=mt.getOrCreateInstance(this,o);if(typeof o=="string"){if(l[o]===void 0)throw new TypeError(`No method named "${o}"`);l[o]()}})}static clearMenus(o){if(o.button===2||o.type==="keyup"&&o.key!=="Tab")return;const l=K.find(au);for(const p of l){const y=mt.getInstance(p);if(!y||y._config.autoClose===!1)continue;const _=o.composedPath(),S=_.includes(y._menu);if(_.includes(y._element)||y._config.autoClose==="inside"&&!S||y._config.autoClose==="outside"&&S||y._menu.contains(o.target)&&(o.type==="keyup"&&o.key==="Tab"||/input|select|option|textarea|form/i.test(o.target.tagName)))continue;const D={relatedTarget:y._element};o.type==="click"&&(D.clickEvent=o),y._completeHide(D)}}static dataApiKeydownHandler(o){const l=/input|textarea/i.test(o.target.tagName),p=o.key==="Escape",y=[ou,$o].includes(o.key);if(!y&&!p||l&&!p)return;o.preventDefault();const _=this.matches(Xt)?this:K.prev(this,Xt)[0]||K.next(this,Xt)[0]||K.findOne(Xt,o.delegateTarget.parentNode),S=mt.getOrCreateInstance(_);if(y)return o.stopPropagation(),S.show(),void S._selectMenuItem(o);S._isShown()&&(o.stopPropagation(),S.hide(),_.focus())}}T.on(document,Qo,Xt,mt.dataApiKeydownHandler),T.on(document,Qo,xi,mt.dataApiKeydownHandler),T.on(document,Vo,mt.clearMenus),T.on(document,"keyup.bs.dropdown.data-api",mt.clearMenus),T.on(document,Vo,Xt,function(h){h.preventDefault(),mt.getOrCreateInstance(this).toggle()}),O(mt);const Uo=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",zo=".sticky-top",Ti="padding-right",Wo="margin-right";class Dr{constructor(){this._element=document.body}getWidth(){const o=document.documentElement.clientWidth;return Math.abs(window.innerWidth-o)}hide(){const o=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ti,l=>l+o),this._setElementAttributes(Uo,Ti,l=>l+o),this._setElementAttributes(zo,Wo,l=>l-o)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ti),this._resetElementAttributes(Uo,Ti),this._resetElementAttributes(zo,Wo)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(o,l,p){const y=this.getWidth();this._applyManipulationCallback(o,_=>{if(_!==this._element&&window.innerWidth>_.clientWidth+y)return;this._saveInitialAttribute(_,l);const S=window.getComputedStyle(_).getPropertyValue(l);_.style.setProperty(l,`${p(Number.parseFloat(S))}px`)})}_saveInitialAttribute(o,l){const p=o.style.getPropertyValue(l);p&&Qe.setDataAttribute(o,l,p)}_resetElementAttributes(o,l){this._applyManipulationCallback(o,p=>{const y=Qe.getDataAttribute(p,l);y!==null?(Qe.removeDataAttribute(p,l),p.style.setProperty(l,y)):p.style.removeProperty(l)})}_applyManipulationCallback(o,l){if(a(o))l(o);else for(const p of K.find(o,this._element))l(p)}}const Go="show",Ho="mousedown.bs.backdrop",mu={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},gu={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Ko extends j{constructor(o){super(),this._config=this._getConfig(o),this._isAppended=!1,this._element=null}static get Default(){return mu}static get DefaultType(){return gu}static get NAME(){return"backdrop"}show(o){if(!this._config.isVisible)return void E(o);this._append();const l=this._getElement();this._config.isAnimated&&g(l),l.classList.add(Go),this._emulateAnimation(()=>{E(o)})}hide(o){this._config.isVisible?(this._getElement().classList.remove(Go),this._emulateAnimation(()=>{this.dispose(),E(o)})):E(o)}dispose(){this._isAppended&&(T.off(this._element,Ho),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const o=document.createElement("div");o.className=this._config.className,this._config.isAnimated&&o.classList.add("fade"),this._element=o}return this._element}_configAfterMerge(o){return o.rootElement=u(o.rootElement),o}_append(){if(this._isAppended)return;const o=this._getElement();this._config.rootElement.append(o),T.on(o,Ho,()=>{E(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(o){P(o,this._getElement(),this._config.isAnimated)}}const Yo=".bs.focustrap",Jo="backward",yu={autofocus:!0,trapElement:null},bu={autofocus:"boolean",trapElement:"element"};class Xo extends j{constructor(o){super(),this._config=this._getConfig(o),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return yu}static get DefaultType(){return bu}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),T.off(document,Yo),T.on(document,"focusin.bs.focustrap",o=>this._handleFocusin(o)),T.on(document,"keydown.tab.bs.focustrap",o=>this._handleKeydown(o)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,T.off(document,Yo))}_handleFocusin(o){const{trapElement:l}=this._config;if(o.target===document||o.target===l||l.contains(o.target))return;const p=K.focusableChildren(l);p.length===0?l.focus():this._lastTabNavDirection===Jo?p[p.length-1].focus():p[0].focus()}_handleKeydown(o){o.key==="Tab"&&(this._lastTabNavDirection=o.shiftKey?Jo:"forward")}}const Zo="hidden.bs.modal",ea="show.bs.modal",ta="modal-open",na="show",Nr="modal-static",_u={backdrop:!0,focus:!0,keyboard:!0},wu={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Zt extends M{constructor(o,l){super(o,l),this._dialog=K.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Dr,this._addEventListeners()}static get Default(){return _u}static get DefaultType(){return wu}static get NAME(){return"modal"}toggle(o){return this._isShown?this.hide():this.show(o)}show(o){this._isShown||this._isTransitioning||T.trigger(this._element,ea,{relatedTarget:o}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ta),this._adjustDialog(),this._backdrop.show(()=>this._showElement(o)))}hide(){this._isShown&&!this._isTransitioning&&(T.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(na),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){for(const o of[window,this._dialog])T.off(o,".bs.modal");this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ko({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Xo({trapElement:this._element})}_showElement(o){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const l=K.findOne(".modal-body",this._dialog);l&&(l.scrollTop=0),g(this._element),this._element.classList.add(na),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,T.trigger(this._element,"shown.bs.modal",{relatedTarget:o})},this._dialog,this._isAnimated())}_addEventListeners(){T.on(this._element,"keydown.dismiss.bs.modal",o=>{if(o.key==="Escape")return this._config.keyboard?(o.preventDefault(),void this.hide()):void this._triggerBackdropTransition()}),T.on(window,"resize.bs.modal",()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),T.on(this._element,"mousedown.dismiss.bs.modal",o=>{T.one(this._element,"click.dismiss.bs.modal",l=>{this._element===o.target&&this._element===l.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(ta),this._resetAdjustments(),this._scrollBar.reset(),T.trigger(this._element,Zo)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(T.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const o=this._element.scrollHeight>document.documentElement.clientHeight,l=this._element.style.overflowY;l==="hidden"||this._element.classList.contains(Nr)||(o||(this._element.style.overflowY="hidden"),this._element.classList.add(Nr),this._queueCallback(()=>{this._element.classList.remove(Nr),this._queueCallback(()=>{this._element.style.overflowY=l},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const o=this._element.scrollHeight>document.documentElement.clientHeight,l=this._scrollBar.getWidth(),p=l>0;if(p&&!o){const y=x()?"paddingLeft":"paddingRight";this._element.style[y]=`${l}px`}if(!p&&o){const y=x()?"paddingRight":"paddingLeft";this._element.style[y]=`${l}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(o,l){return this.each(function(){const p=Zt.getOrCreateInstance(this,o);if(typeof o=="string"){if(p[o]===void 0)throw new TypeError(`No method named "${o}"`);p[o](l)}})}}T.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(h){const o=s(this);["A","AREA"].includes(this.tagName)&&h.preventDefault(),T.one(o,ea,p=>{p.defaultPrevented||T.one(o,Zo,()=>{f(this)&&this.focus()})});const l=K.findOne(".modal.show");l&&Zt.getInstance(l).hide(),Zt.getOrCreateInstance(o).toggle(this)}),oe(Zt),O(Zt);const ia="show",ra="showing",sa="hiding",oa=".offcanvas.show",aa="hidePrevented.bs.offcanvas",ca="hidden.bs.offcanvas",Eu={backdrop:!0,keyboard:!0,scroll:!1},xu={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ot extends M{constructor(o,l){super(o,l),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Eu}static get DefaultType(){return xu}static get NAME(){return"offcanvas"}toggle(o){return this._isShown?this.hide():this.show(o)}show(o){this._isShown||T.trigger(this._element,"show.bs.offcanvas",{relatedTarget:o}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new Dr().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(ra),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(ia),this._element.classList.remove(ra),T.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:o})},this._element,!0))}hide(){this._isShown&&(T.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(sa),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(ia,sa),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Dr().reset(),T.trigger(this._element,ca)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const o=Boolean(this._config.backdrop);return new Ko({className:"offcanvas-backdrop",isVisible:o,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:o?()=>{this._config.backdrop!=="static"?this.hide():T.trigger(this._element,aa)}:null})}_initializeFocusTrap(){return new Xo({trapElement:this._element})}_addEventListeners(){T.on(this._element,"keydown.dismiss.bs.offcanvas",o=>{o.key==="Escape"&&(this._config.keyboard?this.hide():T.trigger(this._element,aa))})}static jQueryInterface(o){return this.each(function(){const l=Ot.getOrCreateInstance(this,o);if(typeof o=="string"){if(l[o]===void 0||o.startsWith("_")||o==="constructor")throw new TypeError(`No method named "${o}"`);l[o](this)}})}}T.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(h){const o=s(this);if(["A","AREA"].includes(this.tagName)&&h.preventDefault(),d(this))return;T.one(o,ca,()=>{f(this)&&this.focus()});const l=K.findOne(oa);l&&l!==o&&Ot.getInstance(l).hide(),Ot.getOrCreateInstance(o).toggle(this)}),T.on(window,"load.bs.offcanvas.data-api",()=>{for(const h of K.find(oa))Ot.getOrCreateInstance(h).show()}),T.on(window,"resize.bs.offcanvas",()=>{for(const h of K.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(h).position!=="fixed"&&Ot.getOrCreateInstance(h).hide()}),oe(Ot),O(Ot);const Tu=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),ku=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Pu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Iu=(h,o)=>{const l=h.nodeName.toLowerCase();return o.includes(l)?!Tu.has(l)||Boolean(ku.test(h.nodeValue)||Pu.test(h.nodeValue)):o.filter(p=>p instanceof RegExp).some(p=>p.test(l))},la={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Su={allowList:la,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Ou={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Cu={entry:"(string|element|function|null)",selector:"(string|element)"};class Au extends j{constructor(o){super(),this._config=this._getConfig(o)}static get Default(){return Su}static get DefaultType(){return Ou}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(o=>this._resolvePossibleFunction(o)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(o){return this._checkContent(o),this._config.content={...this._config.content,...o},this}toHtml(){const o=document.createElement("div");o.innerHTML=this._maybeSanitize(this._config.template);for(const[y,_]of Object.entries(this._config.content))this._setContent(o,_,y);const l=o.children[0],p=this._resolvePossibleFunction(this._config.extraClass);return p&&l.classList.add(...p.split(" ")),l}_typeCheckConfig(o){super._typeCheckConfig(o),this._checkContent(o.content)}_checkContent(o){for(const[l,p]of Object.entries(o))super._typeCheckConfig({selector:l,entry:p},Cu)}_setContent(o,l,p){const y=K.findOne(p,o);y&&((l=this._resolvePossibleFunction(l))?a(l)?this._putElementInTemplate(u(l),y):this._config.html?y.innerHTML=this._maybeSanitize(l):y.textContent=l:y.remove())}_maybeSanitize(o){return this._config.sanitize?function(l,p,y){if(!l.length)return l;if(y&&typeof y=="function")return y(l);const _=new window.DOMParser().parseFromString(l,"text/html"),S=[].concat(..._.body.querySelectorAll("*"));for(const D of S){const F=D.nodeName.toLowerCase();if(!Object.keys(p).includes(F)){D.remove();continue}const U=[].concat(...D.attributes),z=[].concat(p["*"]||[],p[F]||[]);for(const V of U)Iu(V,z)||D.removeAttribute(V.nodeName)}return _.body.innerHTML}(o,this._config.allowList,this._config.sanitizeFn):o}_resolvePossibleFunction(o){return typeof o=="function"?o(this):o}_putElementInTemplate(o,l){if(this._config.html)return l.innerHTML="",void l.append(o);l.textContent=o.textContent}}const Du=new Set(["sanitize","allowList","sanitizeFn"]),Lr="fade",ki="show",ua=".modal",fa="hide.bs.modal",Pi="hover",ha="focus",Nu={AUTO:"auto",TOP:"top",RIGHT:x()?"left":"right",BOTTOM:"bottom",LEFT:x()?"right":"left"},Lu={allowList:la,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Ru={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class en extends M{constructor(o,l){if(Bo===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(o,l),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Lu}static get DefaultType(){return Ru}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),T.off(this._element.closest(ua),fa,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const o=T.trigger(this._element,this.constructor.eventName("show")),l=(m(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(o.defaultPrevented||!l)return;this._disposePopper();const p=this._getTipElement();this._element.setAttribute("aria-describedby",p.getAttribute("id"));const{container:y}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(y.append(p),T.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(p),p.classList.add(ki),"ontouchstart"in document.documentElement)for(const _ of[].concat(...document.body.children))T.on(_,"mouseover",v);this._queueCallback(()=>{T.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!T.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(ki),"ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))T.off(o,"mouseover",v);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),T.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(o){const l=this._getTemplateFactory(o).toHtml();if(!l)return null;l.classList.remove(Lr,ki),l.classList.add(`bs-${this.constructor.NAME}-auto`);const p=(y=>{do y+=Math.floor(1e6*Math.random());while(document.getElementById(y));return y})(this.constructor.NAME).toString();return l.setAttribute("id",p),this._isAnimated()&&l.classList.add(Lr),l}setContent(o){this._newContent=o,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(o){return this._templateFactory?this._templateFactory.changeContent(o):this._templateFactory=new Au({...this._config,content:o,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(o){return this.constructor.getOrCreateInstance(o.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Lr)}_isShown(){return this.tip&&this.tip.classList.contains(ki)}_createPopper(o){const l=typeof this._config.placement=="function"?this._config.placement.call(this,o,this._element):this._config.placement,p=Nu[l.toUpperCase()];return Ar(this._element,o,this._getPopperConfig(p))}_getOffset(){const{offset:o}=this._config;return typeof o=="string"?o.split(",").map(l=>Number.parseInt(l,10)):typeof o=="function"?l=>o(l,this._element):o}_resolvePossibleFunction(o){return typeof o=="function"?o.call(this._element):o}_getPopperConfig(o){const l={placement:o,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:p=>{this._getTipElement().setAttribute("data-popper-placement",p.state.placement)}}]};return{...l,...typeof this._config.popperConfig=="function"?this._config.popperConfig(l):this._config.popperConfig}}_setListeners(){const o=this._config.trigger.split(" ");for(const l of o)if(l==="click")T.on(this._element,this.constructor.eventName("click"),this._config.selector,p=>{this._initializeOnDelegatedTarget(p).toggle()});else if(l!=="manual"){const p=l===Pi?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),y=l===Pi?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");T.on(this._element,p,this._config.selector,_=>{const S=this._initializeOnDelegatedTarget(_);S._activeTrigger[_.type==="focusin"?ha:Pi]=!0,S._enter()}),T.on(this._element,y,this._config.selector,_=>{const S=this._initializeOnDelegatedTarget(_);S._activeTrigger[_.type==="focusout"?ha:Pi]=S._element.contains(_.relatedTarget),S._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},T.on(this._element.closest(ua),fa,this._hideModalHandler)}_fixTitle(){const o=this._element.getAttribute("title");o&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",o),this._element.setAttribute("data-bs-original-title",o),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(o,l){clearTimeout(this._timeout),this._timeout=setTimeout(o,l)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(o){const l=Qe.getDataAttributes(this._element);for(const p of Object.keys(l))Du.has(p)&&delete l[p];return o={...l,...typeof o=="object"&&o?o:{}},o=this._mergeConfigObj(o),o=this._configAfterMerge(o),this._typeCheckConfig(o),o}_configAfterMerge(o){return o.container=o.container===!1?document.body:u(o.container),typeof o.delay=="number"&&(o.delay={show:o.delay,hide:o.delay}),typeof o.title=="number"&&(o.title=o.title.toString()),typeof o.content=="number"&&(o.content=o.content.toString()),o}_getDelegateConfig(){const o={};for(const l in this._config)this.constructor.Default[l]!==this._config[l]&&(o[l]=this._config[l]);return o.selector=!1,o.trigger="manual",o}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(o){return this.each(function(){const l=en.getOrCreateInstance(this,o);if(typeof o=="string"){if(l[o]===void 0)throw new TypeError(`No method named "${o}"`);l[o]()}})}}O(en);const Mu={...en.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Fu={...en.DefaultType,content:"(null|string|element|function)"};class Ii extends en{static get Default(){return Mu}static get DefaultType(){return Fu}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(o){return this.each(function(){const l=Ii.getOrCreateInstance(this,o);if(typeof o=="string"){if(l[o]===void 0)throw new TypeError(`No method named "${o}"`);l[o]()}})}}O(Ii);const da="click.bs.scrollspy",zn="active",pa="[href]",qu={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Bu={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Wn extends M{constructor(o,l){super(o,l),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return qu}static get DefaultType(){return Bu}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const o of this._observableSections.values())this._observer.observe(o)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(o){return o.target=u(o.target)||document.body,o.rootMargin=o.offset?`${o.offset}px 0px -30%`:o.rootMargin,typeof o.threshold=="string"&&(o.threshold=o.threshold.split(",").map(l=>Number.parseFloat(l))),o}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(T.off(this._config.target,da),T.on(this._config.target,da,pa,o=>{const l=this._observableSections.get(o.target.hash);if(l){o.preventDefault();const p=this._rootElement||window,y=l.offsetTop-this._element.offsetTop;if(p.scrollTo)return void p.scrollTo({top:y,behavior:"smooth"});p.scrollTop=y}}))}_getNewObserver(){const o={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(l=>this._observerCallback(l),o)}_observerCallback(o){const l=S=>this._targetLinks.get(`#${S.target.id}`),p=S=>{this._previousScrollData.visibleEntryTop=S.target.offsetTop,this._process(l(S))},y=(this._rootElement||document.documentElement).scrollTop,_=y>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=y;for(const S of o){if(!S.isIntersecting){this._activeTarget=null,this._clearActiveClass(l(S));continue}const D=S.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(_&&D){if(p(S),!y)return}else _||D||p(S)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const o=K.find(pa,this._config.target);for(const l of o){if(!l.hash||d(l))continue;const p=K.findOne(l.hash,this._element);f(p)&&(this._targetLinks.set(l.hash,l),this._observableSections.set(l.hash,p))}}_process(o){this._activeTarget!==o&&(this._clearActiveClass(this._config.target),this._activeTarget=o,o.classList.add(zn),this._activateParents(o),T.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:o}))}_activateParents(o){if(o.classList.contains("dropdown-item"))K.findOne(".dropdown-toggle",o.closest(".dropdown")).classList.add(zn);else for(const l of K.parents(o,".nav, .list-group"))for(const p of K.prev(l,".nav-link, .nav-item > .nav-link, .list-group-item"))p.classList.add(zn)}_clearActiveClass(o){o.classList.remove(zn);const l=K.find("[href].active",o);for(const p of l)p.classList.remove(zn)}static jQueryInterface(o){return this.each(function(){const l=Wn.getOrCreateInstance(this,o);if(typeof o=="string"){if(l[o]===void 0||o.startsWith("_")||o==="constructor")throw new TypeError(`No method named "${o}"`);l[o]()}})}}T.on(window,"load.bs.scrollspy.data-api",()=>{for(const h of K.find('[data-bs-spy="scroll"]'))Wn.getOrCreateInstance(h)}),O(Wn);const ju="ArrowLeft",va="ArrowRight",$u="ArrowUp",ma="ArrowDown",Si="active",ga="fade",Rr="show",ya='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Mr=`.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${ya}`;class tn extends M{constructor(o){super(o),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),T.on(this._element,"keydown.bs.tab",l=>this._keydown(l)))}static get NAME(){return"tab"}show(){const o=this._element;if(this._elemIsActive(o))return;const l=this._getActiveElem(),p=l?T.trigger(l,"hide.bs.tab",{relatedTarget:o}):null;T.trigger(o,"show.bs.tab",{relatedTarget:l}).defaultPrevented||p&&p.defaultPrevented||(this._deactivate(l,o),this._activate(o,l))}_activate(o,l){o&&(o.classList.add(Si),this._activate(s(o)),this._queueCallback(()=>{o.getAttribute("role")==="tab"?(o.removeAttribute("tabindex"),o.setAttribute("aria-selected",!0),this._toggleDropDown(o,!0),T.trigger(o,"shown.bs.tab",{relatedTarget:l})):o.classList.add(Rr)},o,o.classList.contains(ga)))}_deactivate(o,l){o&&(o.classList.remove(Si),o.blur(),this._deactivate(s(o)),this._queueCallback(()=>{o.getAttribute("role")==="tab"?(o.setAttribute("aria-selected",!1),o.setAttribute("tabindex","-1"),this._toggleDropDown(o,!1),T.trigger(o,"hidden.bs.tab",{relatedTarget:l})):o.classList.remove(Rr)},o,o.classList.contains(ga)))}_keydown(o){if(![ju,va,$u,ma].includes(o.key))return;o.stopPropagation(),o.preventDefault();const l=[va,ma].includes(o.key),p=I(this._getChildren().filter(y=>!d(y)),o.target,l,!0);p&&(p.focus({preventScroll:!0}),tn.getOrCreateInstance(p).show())}_getChildren(){return K.find(Mr,this._parent)}_getActiveElem(){return this._getChildren().find(o=>this._elemIsActive(o))||null}_setInitialAttributes(o,l){this._setAttributeIfNotExists(o,"role","tablist");for(const p of l)this._setInitialAttributesOnChild(p)}_setInitialAttributesOnChild(o){o=this._getInnerElement(o);const l=this._elemIsActive(o),p=this._getOuterElement(o);o.setAttribute("aria-selected",l),p!==o&&this._setAttributeIfNotExists(p,"role","presentation"),l||o.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(o,"role","tab"),this._setInitialAttributesOnTargetPanel(o)}_setInitialAttributesOnTargetPanel(o){const l=s(o);l&&(this._setAttributeIfNotExists(l,"role","tabpanel"),o.id&&this._setAttributeIfNotExists(l,"aria-labelledby",`#${o.id}`))}_toggleDropDown(o,l){const p=this._getOuterElement(o);if(!p.classList.contains("dropdown"))return;const y=(_,S)=>{const D=K.findOne(_,p);D&&D.classList.toggle(S,l)};y(".dropdown-toggle",Si),y(".dropdown-menu",Rr),p.setAttribute("aria-expanded",l)}_setAttributeIfNotExists(o,l,p){o.hasAttribute(l)||o.setAttribute(l,p)}_elemIsActive(o){return o.classList.contains(Si)}_getInnerElement(o){return o.matches(Mr)?o:K.findOne(Mr,o)}_getOuterElement(o){return o.closest(".nav-item, .list-group-item")||o}static jQueryInterface(o){return this.each(function(){const l=tn.getOrCreateInstance(this);if(typeof o=="string"){if(l[o]===void 0||o.startsWith("_")||o==="constructor")throw new TypeError(`No method named "${o}"`);l[o]()}})}}T.on(document,"click.bs.tab",ya,function(h){["A","AREA"].includes(this.tagName)&&h.preventDefault(),d(this)||tn.getOrCreateInstance(this).show()}),T.on(window,"load.bs.tab",()=>{for(const h of K.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))tn.getOrCreateInstance(h)}),O(tn);const ba="hide",Oi="show",Ci="showing",Vu={animation:"boolean",autohide:"boolean",delay:"number"},Qu={animation:!0,autohide:!0,delay:5e3};class Gn extends M{constructor(o,l){super(o,l),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Qu}static get DefaultType(){return Vu}static get NAME(){return"toast"}show(){T.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(ba),g(this._element),this._element.classList.add(Oi,Ci),this._queueCallback(()=>{this._element.classList.remove(Ci),T.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(T.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(Ci),this._queueCallback(()=>{this._element.classList.add(ba),this._element.classList.remove(Ci,Oi),T.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Oi),super.dispose()}isShown(){return this._element.classList.contains(Oi)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(o,l){switch(o.type){case"mouseover":case"mouseout":this._hasMouseInteraction=l;break;case"focusin":case"focusout":this._hasKeyboardInteraction=l}if(l)return void this._clearTimeout();const p=o.relatedTarget;this._element===p||this._element.contains(p)||this._maybeScheduleHide()}_setListeners(){T.on(this._element,"mouseover.bs.toast",o=>this._onInteraction(o,!0)),T.on(this._element,"mouseout.bs.toast",o=>this._onInteraction(o,!1)),T.on(this._element,"focusin.bs.toast",o=>this._onInteraction(o,!0)),T.on(this._element,"focusout.bs.toast",o=>this._onInteraction(o,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(o){return this.each(function(){const l=Gn.getOrCreateInstance(this,o);if(typeof o=="string"){if(l[o]===void 0)throw new TypeError(`No method named "${o}"`);l[o](this)}})}}return oe(Gn),O(Gn),{Alert:ee,Button:Pe,Carousel:hn,Collapse:dn,Dropdown:mt,Modal:Zt,Offcanvas:Ot,Popover:Ii,ScrollSpy:Wn,Tab:tn,Toast:Gn,Tooltip:en}})})(_f);const xn="b",Tn="k",jr="n",Ma="p",kn="q";class B{x;y;constructor(e,t){this.x=e,this.y=t}}class C{start;end;boardStartIndex;boardEndIndex;constructor(e,t,i,r){if(i&&(this.start=i),r&&(this.end=r),i&&r){this.boardStartIndex=this.convertToBoardIndex(i),this.boardEndIndex=this.convertToBoardIndex(r);return}e&&t?(this.boardStartIndex=e.x+e.y*8,this.boardEndIndex=t.x+t.y*8,this.start=this.convertToBoardPosition(this.boardStartIndex),this.end=this.convertToBoardPosition(this.boardEndIndex)):(this.start="a8",this.end="a8",this.boardStartIndex=0,this.boardEndIndex=0)}toString(){return this.start+"-"+this.end}convertToBoardIndex(e){if(e.length!=2)throw new Error("Invalid position");let t=e[0],i=e[1],r=t.charCodeAt(0)-97,s=8-parseInt(i);return r+s*8}convertToBoardPosition(e){if(e<0||e>63)throw new Error("Invalid index: "+e);let t=e%8,i=Math.floor(e/8),r=String.fromCharCode(t+97),s=8-i;return r+s}testConverToBoardIndex(){let e=[];e.push(this.convertToBoardIndex("a8")==0),e.push(this.convertToBoardIndex("b8")==1),e.push(this.convertToBoardIndex("c8")==2),e.push(this.convertToBoardIndex("d8")==3),e.push(this.convertToBoardIndex("e8")==4),e.push(this.convertToBoardIndex("f8")==5),e.push(this.convertToBoardIndex("g8")==6),e.push(this.convertToBoardIndex("h8")==7),e.push(this.convertToBoardIndex("a7")==8),e.push(this.convertToBoardIndex("b7")==9),e.push(this.convertToBoardIndex("c7")==10),e.push(this.convertToBoardIndex("d7")==11),e.push(this.convertToBoardIndex("e7")==12),e.push(this.convertToBoardIndex("f7")==13),e.push(this.convertToBoardIndex("g7")==14),e.push(this.convertToBoardIndex("h7")==15),e.push(this.convertToBoardIndex("a6")==16);for(let t=0;t<e.length;t++)if(!e[t])throw new Error("Convert to board Index failed failed")}runAllTests(){this.testConverToBoardIndex(),console.log("All tests ran for move class")}}class qt{position;pos;boardIndex;constructor(e,t){e?(this.position=e,this.boardIndex=this.convertToBoardIndex(e),this.pos=new B(this.convertToBoardIndex(e)%8,Math.floor(this.convertToBoardIndex(e)/8))):t?(this.boardIndex=t,this.position=this.convertToBoardPosition(t),this.pos=new B(t%8,Math.floor(t/8))):(this.position="a8",this.boardIndex=0,this.pos=new B(0,0))}moveTo(e){this.position=e,this.boardIndex=this.convertToBoardIndex(e),this.pos=new B(this.boardIndex%8,Math.floor(this.boardIndex/8))}getPosition(){return this.position}getIndex(){return this.boardIndex}convertToBoardIndex(e){if(e.length!=2)throw new Error("Invalid position");let t=e[0],i=e[1],r=t.charCodeAt(0)-97,s=8-parseInt(i);return r+s*8}testConvertToBoardIndex(){let e=[];e.push(this.convertToBoardIndex("a8")==0),e.push(this.convertToBoardIndex("b8")==1),e.push(this.convertToBoardIndex("c8")==2),e.push(this.convertToBoardIndex("d8")==3),e.push(this.convertToBoardIndex("e8")==4),e.push(this.convertToBoardIndex("f8")==5),e.push(this.convertToBoardIndex("g8")==6),e.push(this.convertToBoardIndex("h8")==7),e.push(this.convertToBoardIndex("a7")==8),e.push(this.convertToBoardIndex("b7")==9),e.push(this.convertToBoardIndex("c7")==10),e.push(this.convertToBoardIndex("d7")==11),e.push(this.convertToBoardIndex("e7")==12),e.push(this.convertToBoardIndex("f7")==13),e.push(this.convertToBoardIndex("g7")==14),e.push(this.convertToBoardIndex("h7")==15),e.push(this.convertToBoardIndex("a6")==16);for(let t=0;t<e.length;t++)if(!e[t])throw new Error("Convert to board Index failed failed")}convertToBoardPosition(e){let t=e%8,i=Math.floor(e/8),r=String.fromCharCode(t+97),s=8-i;return r+s}testConvertToPosition(){let e=[];e.push(this.convertToBoardPosition(0)=="a8"),e.push(this.convertToBoardPosition(0)=="a8"),e.push(this.convertToBoardPosition(0)=="a8"),e.push(this.convertToBoardPosition(1)=="b8"),e.push(this.convertToBoardPosition(2)=="c8"),e.push(this.convertToBoardPosition(3)=="d8"),e.push(this.convertToBoardPosition(4)=="e8"),e.push(this.convertToBoardPosition(5)=="f8"),e.push(this.convertToBoardPosition(6)=="g8"),e.push(this.convertToBoardPosition(7)=="h8"),e.push(this.convertToBoardPosition(8)=="a7"),e.push(this.convertToBoardPosition(9)=="b7"),e.push(this.convertToBoardPosition(10)=="c7"),e.push(this.convertToBoardPosition(11)=="d7"),e.push(this.convertToBoardPosition(12)=="e7"),e.push(this.convertToBoardPosition(13)=="f7"),e.push(this.convertToBoardPosition(14)=="g7"),e.push(this.convertToBoardPosition(15)=="h7"),e.push(this.convertToBoardPosition(16)=="a6");for(let t=0;t<e.length;t++)if(!e[t])throw new Error("Convert to position failed")}runAllTests(){this.testConvertToBoardIndex(),this.testConvertToPosition(),console.log("All tests ran for position class")}}class Ae{position;color;type;constructor(e,t,i){this.position=new qt(e),this.color=t,this.type=i}move(e){this.position.moveTo(e)}getPosition(){return this.position.getPosition()}getIndex(){return this.position.getIndex()}getPos(){return this.position}convertToBoardIndex(e){if(e.length!=2)throw new Error("Invalid position");let t=e[0],i=e[1],r=t.charCodeAt(0)-97,s=8-parseInt(i);return r+s*8}testConverToBoardIndex(){let e=[];e.push(this.convertToBoardIndex("a8")==0),e.push(this.convertToBoardIndex("b8")==1),e.push(this.convertToBoardIndex("c8")==2),e.push(this.convertToBoardIndex("d8")==3),e.push(this.convertToBoardIndex("e8")==4),e.push(this.convertToBoardIndex("f8")==5),e.push(this.convertToBoardIndex("g8")==6),e.push(this.convertToBoardIndex("h8")==7),e.push(this.convertToBoardIndex("a7")==8),e.push(this.convertToBoardIndex("b7")==9),e.push(this.convertToBoardIndex("c7")==10),e.push(this.convertToBoardIndex("d7")==11),e.push(this.convertToBoardIndex("e7")==12),e.push(this.convertToBoardIndex("f7")==13),e.push(this.convertToBoardIndex("g7")==14),e.push(this.convertToBoardIndex("h7")==15),e.push(this.convertToBoardIndex("a6")==16);for(let t=0;t<e.length;t++)if(!e[t])throw new Error("Convert to board Index failed failed")}runAllTests(){this.testConverToBoardIndex(),console.log("All tests ran for piece class")}}class pe{Pieces;currentTurnColor="white";fen="";board=[];halfMoveClock=0;fullMoveNumber=1;castlingRights="KQkq";enPassantTargetSquare="-";legalMoves=[];inCheck=!1;checkMate=!1;capturedPieces=[];constructor(e,t){e||(e=["r","n","b","q","k","b","n","r","p","p","p","p","p","p","p","p"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","P","P","P","P","P","P","P","P","R","N","B","Q","K","B","N","R"]);const i=/^([rnbqkpRNBQKP1-8]+\/){7}([rnbqkpRNBQKP1-8]+)\s[bw]\s(-|K?Q?k?q?)\s(-|[a-h][36])\s(0|[1-9][0-9]*)\s([1-9][0-9]*)/;if(t!=null&&t.match(i)){let r=t.split(" ");e=this.fenToBoard(t),this.castlingRights=r[2],this.enPassantTargetSquare=r[3],r[1]==="w"?this.currentTurnColor="white":this.currentTurnColor="black",this.halfMoveClock=parseInt(r[4]),this.fullMoveNumber=parseInt(r[5])}else if(t!=null&&!t.match(i))throw new Error("Invalid fen: "+t);this.Pieces=[];for(let r=0;r<e.length;r++){let s=e[r];if(s!=" "){let c=s==s.toUpperCase()?"white":"black",a=s.toLowerCase(),u=this.convertToPosition(r);this.Pieces.push(new Ae(u,c,a))}}this.board=e,t!=null?this.fen=t:this.fen=this.boardToFen()}convertToPosition(e){let t=String.fromCharCode(97+e%8),i=8-Math.floor(e/8);return t+i}displayBoard(){let e="";for(let t=0;t<8;t++){for(let i=0;i<8;i++)e+=this.Piece(new B(i,t))===" "?" - ":" "+(this.Piece(new B(i,t)).color==="black"?this.Piece(new B(i,t)).type:this.Piece(new B(i,t)).type.toUpperCase())+" ";e!=null&&console.log(`${8-t}| `+e),e=""}console.log("    _  _  _  _  _  _  _  _"),console.log("    A  B  C  D  E  F  G  H")}fenToBoard(e){let t=[],s=e.split(" ")[0].split("/");for(let c=0;c<s.length;c++){let u=s[c].split("");for(let f=0;f<u.length;f++){let d=u[f];if(d.match(/[1-8]/))for(let m=0;m<parseInt(d);m++)t.push(" ");else t.push(d)}}return t.length===63&&t.push(" "),t}boardToFen(){let e="",t=0;for(let i=0;i<64;i++){let r=this.getPieceAtBoardIndex(i);r===""?(t++,(t===8||i%8===7)&&(e+=t,i!=63&&(e+="/"),t=0)):(t!==0&&(e+=t,t=0),e+=r.color==="white"?r.type.toUpperCase():r.type.toLowerCase(),r.getIndex()%8===7&&i!==63&&(e+="/",t=0))}return e+=" "+this.currentTurnColor[0]+" ",e+=this.castlingRights+" ",e+=this.enPassantTargetSquare+" ",e+=this.halfMoveClock+" ",e+=this.fullMoveNumber,e}getPieceAtBoardIndex(e){for(let t=0;t<this.Pieces.length;t++)if(this.Pieces[t].getIndex()===e)return this.Pieces[t];return""}movePiece(e,t){let i=new C(void 0,void 0,e,t);i.boardEndIndex;let r=this.getPieceIndex(e),s=this.Pieces[r];if(s?.type===void 0)throw this.displayBoard(),console.log(this.Pieces),console.log(this.fen),console.log(e),new Error("Invalid move");if(s.type!="p"?this.halfMoveClock++:this.halfMoveClock=0,this.enPassantTargetSquare!="-"&&s.type==="p"){let c=new qt(e),a=new qt(t);if(s.color==="white"&&c.pos.y===3&&a.position===t){let u=a.boardIndex+8,f=this.getPieceAtBoardIndex(u);this.board[u]=" ",this.Pieces.splice(this.Pieces.indexOf(f),1)}if(s.color==="black"&&c.pos.y===4&&a.position===t){let u=a.boardIndex-8,f=this.getPieceAtBoardIndex(u);this.board[u]=" ",this.Pieces.splice(this.Pieces.indexOf(f),1)}}if(s.type=="p"&&Math.abs(s.getIndex()-i.boardEndIndex)==16){let c="-";s.color==="white"?c=this.convertToPosition(i.boardEndIndex+8):c=this.convertToPosition(i.boardEndIndex-8),this.enPassantTargetSquare=c}else this.enPassantTargetSquare="-";if(s.type==="k"){if(s.color==="white"){let c=new qt(e),a=new qt(t);if(c.pos.x-a.pos.x===2&&this.castlingRights.includes("Q")){this.convertToPosition(c.boardIndex-4);let u=this.convertToPosition(c.boardIndex-1),f=this.getPieceAtBoardIndex(c.boardIndex-4);this.castlingRights=this.castlingRights.replace("KQ",""),f.color!=null&&f.move(u)}if(c.pos.x-a.pos.x===-2&&this.castlingRights.includes("K")){this.convertToPosition(c.boardIndex+3);let u=this.convertToPosition(c.boardIndex+1),f=this.getPieceAtBoardIndex(c.boardIndex+3);console.log(u),console.log(f),this.castlingRights=this.castlingRights.replace("KQ",""),f.color!=null&&f.move(u)}this.castlingRights=this.castlingRights.replace("KQ","")}else{let c=new qt(e),a=new qt(t);if(c.pos.x-a.pos.x===2&&this.castlingRights.includes("q")){this.convertToPosition(c.boardIndex-4);let u=this.convertToPosition(c.boardIndex-1),f=this.getPieceAtBoardIndex(c.boardIndex-4);this.castlingRights=this.castlingRights.replace("kq",""),f.color!=null&&f.move(u)}if(c.pos.x-a.pos.x===-2&&this.castlingRights.includes("k")){this.convertToPosition(c.boardIndex+3);let u=this.convertToPosition(c.boardIndex+1),f=this.getPieceAtBoardIndex(c.boardIndex+3);this.castlingRights=this.castlingRights.replace("kq",""),f.color!=null&&f.move(u)}this.castlingRights=this.castlingRights.replace("kq","")}this.castlingRights===""&&(this.castlingRights="-")}if(this.currentTurnColor==="black"&&this.fullMoveNumber++,s.type==="r"&&(s.color==="white"?s.getIndex()===0?this.castlingRights=this.castlingRights.replace("Q",""):s.getIndex()===7&&(this.castlingRights=this.castlingRights.replace("K","")):s.getIndex()===56?this.castlingRights=this.castlingRights.replace("q",""):s.getIndex()===63&&(this.castlingRights=this.castlingRights.replace("k",""))),this.getPieceIndex(t)!==-1){let c=this.getPieceIndex(t),a=this.Pieces[c];a.type==="r"&&(a.color==="white"?a.getIndex()===56?this.castlingRights=this.castlingRights.replace("Q",""):a.getIndex()===63&&(this.castlingRights=this.castlingRights.replace("K","")):a.getIndex()===0?this.castlingRights=this.castlingRights.replace("q",""):a.getIndex()===7&&(this.castlingRights=this.castlingRights.replace("k",""))),this.capturedPieces.push(a),this.Pieces.splice(c,1),this.halfMoveClock=0}s.move(t),this.currentTurnColor=this.currentTurnColor==="white"?"black":"white",this.fen=this.boardToFen(),this.board=this.fenToBoard(this.fen),this.inCheck=this.isInCheck(this)}getPieceIndex(e){let t=-1;for(let i=0;i<this.Pieces.length;i++)if(this.Pieces[i].getPosition()==e){t=i;break}return t}getPieceAtPosition(e){let t="";for(let i=0;i<this.Pieces.length;i++){let r=this.Pieces[i];if(r.getPosition()==e)return r}return t}testConvertToPosition(){let e=[];e.push(this.convertToPosition(0)=="a8"),e.push(this.convertToPosition(1)=="b8"),e.push(this.convertToPosition(2)=="c8"),e.push(this.convertToPosition(3)=="d8"),e.push(this.convertToPosition(4)=="e8"),e.push(this.convertToPosition(5)=="f8"),e.push(this.convertToPosition(6)=="g8"),e.push(this.convertToPosition(7)=="h8"),e.push(this.convertToPosition(8)=="a7"),e.push(this.convertToPosition(9)=="b7"),e.push(this.convertToPosition(10)=="c7"),e.push(this.convertToPosition(11)=="d7"),e.push(this.convertToPosition(12)=="e7"),e.push(this.convertToPosition(13)=="f7"),e.push(this.convertToPosition(14)=="g7"),e.push(this.convertToPosition(15)=="h7"),e.push(this.convertToPosition(16)=="a6");for(let t=0;t<e.length;t++)if(!e[t])throw new Error("Convert to position failed")}testFenToBoard(){let e=[];e.push(this.fenToBoard("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1")),e.push(this.fenToBoard("rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1"));for(let i=0;i<e.length;i++)if(!e[i])throw new Error("Fen to board failed");t(e[0],["r","n","b","q","k","b","n","r","p","p","p","p","p","p","p","p"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","P","P","P","P","P","P","P","P","R","N","B","Q","K","B","N","R"]),t(e[1],["r","n","b","q","k","b","n","r","p","p","p","p","p","p","p","p"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","P"," "," "," "," "," "," "," "," "," "," "," ","P","P","P","P"," ","P","P","P","R","N","B","Q","K","B","N","R"]);function t(i,r){if(i===r)return!0;if(i==null||r==null)throw console.log(i,r),new Error("Fen to board failed");if(i.length!==r.length)throw console.log(i,r),new Error("Fen to board failed");for(var s=0;s<i.length;++s)if(i[s]!==r[s])throw console.log(i,r),new Error("Fen to board failed");return!0}}testBoardToFen(){let e=[],t=new pe;e.push(t.boardToFen()=="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"),t.movePiece("e2","e4"),e.push(t.boardToFen()=="rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1");for(let i=0;i<e.length;i++)if(!e[i])throw new Error("Board to fen failed, test "+(i+1)+" failed"+t.boardToFen())}testConstructors(){let e=new pe,t=[];t.push(e.Pieces[0]?.getPosition()=="a8"),t.push(e.Pieces[0].color=="black"),t.push(e.Pieces[0].type=="r"),t.push(e.Pieces[1]?.getPosition()=="b8"),t.push(e.Pieces[1].color=="black"),t.push(e.Pieces[1].type=="n"),t.push(e.Pieces[2]?.getPosition()=="c8"),t.push(e.Pieces[2].color=="black"),t.push(e.Pieces[2].type=="b"),t.push(e.Pieces[3]?.getPosition()=="d8");for(let s=0;s<t.length;s++)if(!t[s])throw new Error("Board constructor 1 failed "+s);let i=new pe([],"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1");t=[],t.push(i.Pieces[0]?.getPosition()=="a8"),t.push(i.Pieces[0].color=="black"),t.push(i.Pieces[0].type=="r"),t.push(i.Pieces[1]?.getPosition()=="b8"),t.push(i.Pieces[1].color=="black"),t.push(i.Pieces[1].type=="n"),t.push(i.Pieces[2]?.getPosition()=="c8"),t.push(i.Pieces[2].color=="black"),t.push(i.Pieces[2].type=="b"),t.push(i.Pieces[3]?.getPosition()=="d8");for(let s=0;s<t.length;s++)if(!t[s])throw new Error("Board constructor 2 failed"+s);let r=new pe([],"rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1");t=[],t.push(r.Pieces[0]?.getPosition()=="a8"),t.push(r.Pieces[0].color=="black"),t.push(r.Pieces[0].type=="r"),t.push(r.currentTurnColor=="black");for(let s=0;s<t.length;s++)if(!t[s])throw new Error("Board constructor 3 failed"+s)}findPseudoLegalMoves(e){let t=[];for(let i=0;i<e.Pieces.length;i++){let r=e.Pieces[i];if(e.currentTurnColor===r.color)switch(r.type){case"p":t.push(...this.findPawnMoves(r,e));break;case"r":t.push(...this.findRookMoves(r,e));break;case"n":t.push(...this.findKnightMoves(r,e));break;case"b":t.push(...this.findBishopMoves(r,e));break;case"q":t.push(...this.findQueenMoves(r,e));break;case"k":t.push(...this.findKingMoves(r,e));break}}return t}testFindPseudoLegalMoves(){let e=new pe,t=this.findPseudoLegalMoves(e),i=[];i.push(t.length==20);for(let r=0;r<i.length;r++)if(!i[r])throw new Error("Find legal moves failed, test "+(r+1)+" failed");e=new pe([],"rnbqkbnr/1ppp1ppp/8/p3pP2/4P3/8/PPPP2PP/RNBQKBNR w KQkq e6 0 4"),t=this.findPseudoLegalMoves(e),i=[],i.push(t.length==30);for(let r=0;r<i.length;r++)if(!i[r])throw new Error("Find legal moves failed, test "+(r+1)+" failed")}findLegalMoves(e){let t=e.findPseudoLegalMoves(e),i=[];for(let r=0;r<t.length;r++){let s=new pe([],e.boardToFen());s.movePiece(t[r].start,t[r].end),s.currentTurnColor=s.currentTurnColor==="white"?"black":"white",this.isInCheck(s)||i.push(t[r])}return i}testFindLegalMoves(){let e=new pe,t=this.findLegalMoves(e),i=[];i.push(t.length==20),e=new pe([],"rnb1k1nr/pppp1ppp/8/2b1p3/P3q3/8/1PPP1PPP/RNBQKB1R w KQkq - 0 6"),t=this.findLegalMoves(e),i.push(t.length==2),e=new pe([],"rnbqkbnr/1ppp1ppp/8/p3Q3/4P3/8/PPPP1PPP/RNB1KBNR b KQkq - 0 3"),t=this.findLegalMoves(e),i.push(t.length==3),e=new pe([],"rnbqkbnr/p1p1pppp/1p6/3pP3/8/8/PPPP1PPP/RNBQKBNR w KQkq d6 0 3"),t=this.findLegalMoves(e),i.push(t.length==31);for(let r=0;r<i.length;r++)if(!i[r])throw new Error("Find legal moves failed, test "+(r+1)+" failed")}isInCheck(e){let t=new pe([],e.boardToFen()),i=!0;for(let c=0;c<t.board.length;c++)t.board[c]!="-"&&(i=!1);i&&(console.log("empty board"),console.log(e.boardToFen())),t.currentTurnColor=t.currentTurnColor=="white"?"black":"white";let r=t.findPseudoLegalMoves(t),s;for(let c=0;c<e.Pieces.length;c++)e.Pieces[c].type=="k"&&e.Pieces[c].color==e.currentTurnColor&&(s=e.Pieces[c].getIndex());r.length==0&&(console.log("main board"),e.displayBoard(),console.log(e.fen),console.log("thingy"),t.displayBoard(),console.log(t.fen));for(let c=0;c<r.length;c++)if(r[c].boardEndIndex==s)return!0;return!1}testIsInCheck(){let e=new pe,t=[];t.push(!this.isInCheck(e));for(let i=0;i<t.length;i++)if(!t[i])throw new Error("Is in check failed, test "+(i+1)+" failed")}Piece(e){let t=e.x+e.y*8;for(let i=0;i<this.Pieces.length;i++)if(this.Pieces[i].getIndex()==t)return this.Pieces[i];return" "}addPiece(e){this.Pieces.push(e),this.board[e.getIndex()]!=null&&this.board[e.getIndex()]!=" "&&console.log("ERROR: PIECE ALREADY EXISTS AT THIS LOCATION",e),this.board[e.getIndex()]=e.type}findPawnMoves(e,t){let i=[],r=e.getIndex(),s=new B(r%8,Math.floor(r/8)),c=e.color;if(c!=this.currentTurnColor)return i;if(c=="white"){let a=new B(s.x,s.y-1);t.Piece(a)==" "&&s.y!=0&&i.push(new C(s,a));let u=new B(s.x,s.y-2);t.Piece(u)==" "&&t.Piece(a)==" "&&s.y==6&&i.push(new C(s,u));let f=new B(s.x-1,s.y-1);t.Piece(f)!=" "&&t.Piece(f)?.color=="black"&&i.push(new C(s,f));let d=new B(s.x+1,s.y-1);if(t.Piece(d)!=" "&&t.Piece(d)?.color=="black"&&i.push(new C(s,d)),t.enPassantTargetSquare!="-"&&r<=31&&r>=24){let m=new B(t.enPassantTargetSquare.charCodeAt(0)-97,8-parseInt(t.enPassantTargetSquare[1]));rs(m,d)===!0&&i.push(new C(s,d)),rs(m,f)===!0&&i.push(new C(s,f))}}else{let a=new B(s.x,s.y+1);t.Piece(a)==" "&&s.y!=7&&i.push(new C(s,a));let u=new B(s.x,s.y+2);t.Piece(u)==" "&&t.Piece(a)==" "&&s.y==1&&i.push(new C(s,u));let f=new B(s.x-1,s.y+1);t.Piece(f)!=" "&&t.Piece(f)?.color=="white"&&i.push(new C(s,f));let d=new B(s.x+1,s.y+1);if(t.Piece(d)!=" "&&t.Piece(d)?.color=="white"&&i.push(new C(s,d)),t.enPassantTargetSquare!="-"&&r<=15&&r>=8){let m=new B(t.enPassantTargetSquare.charCodeAt(0)-97,8-parseInt(t.enPassantTargetSquare[1]));d==m&&i.push(new C(s,d)),f==m&&i.push(new C(s,f))}}return i}testFindPawnMoves(){let e=new pe,t=this.findPawnMoves(e.Piece(new B(0,6)),e),i=[];i.push(t.length==2),i.push(t[0].toString()=="a2-a3"),i.push(t[1].toString()=="a2-a4");for(let s=0;s<i.length;s++)if(i[s]==!1){console.log("testFindPawnMoves failed");return}i=[],t=this.findPawnMoves(e.Pieces[16],e),i.push(t.length==2),i.push(t[0].toString()=="a2-a3"),i.push(t[1].toString()=="a2-a4");for(let s=0;s<i.length;s++)if(i[s]==!1){console.log("testFindPawnMoves failed");return}e=new pe([]);let r=new Ae("a5","black",Ma);e.addPiece(r),r=new Ae("a4","white",Ma),e.addPiece(r),t=this.findPawnMoves(r,e),i=[],i.push(t.length==0);for(let s=0;s<i.length;s++)if(i[s]==!1){console.error("testFindPawnMoves failed");return}}findRookMoves(e,t){let i=[],r=e.getIndex(),s=new B(r%8,Math.floor(r/8)),c=e.color;if(c!=t.currentTurnColor)return i;if(c==="white"){for(let a=s.y-1;a>=0;a--){let u=new B(s.x,a);if(t.Piece(u)===" ")i.push(new C(s,u));else if(t.Piece(u)?.color==="black"){i.push(new C(s,u));break}else break}for(let a=s.y+1;a<=7;a++){let u=new B(s.x,a);if(t.Piece(u)===" ")i.push(new C(s,u));else if(t.Piece(u)?.color==="black"){i.push(new C(s,u));break}else break}for(let a=s.x-1;a>=0;a--){let u=new B(a,s.y);if(t.Piece(u)===" ")i.push(new C(s,u));else if(t.Piece(u)?.color==="black"){i.push(new C(s,u));break}else break}for(let a=s.x+1;a<=7;a++){let u=new B(a,s.y);if(t.Piece(u)===" ")i.push(new C(s,u));else if(t.Piece(u)?.color==="black"){i.push(new C(s,u));break}else break}}else{for(let a=s.y-1;a>=0;a--){let u=new B(s.x,a);if(t.Piece(u)===" ")i.push(new C(s,u));else if(t.Piece(u)?.color==="white"){i.push(new C(s,u));break}else break}for(let a=s.y+1;a<=7;a++){let u=new B(s.x,a);if(t.Piece(u)===" ")i.push(new C(s,u));else if(t.Piece(u)?.color==="white"){i.push(new C(s,u));break}else break}for(let a=s.x-1;a>=0;a--){let u=new B(a,s.y);if(t.Piece(u)===" ")i.push(new C(s,u));else if(t.Piece(u)?.color==="white"){i.push(new C(s,u));break}else break}for(let a=s.x+1;a<=7;a++){let u=new B(a,s.y);if(t.Piece(u)===" ")i.push(new C(s,u));else if(t.Piece(u)?.color==="white"){i.push(new C(s,u));break}else break}}return i}testFindRookMoves(){let e=new pe([],"rnbqkbnr/1ppppppp/8/p7/P7/8/1PPPPPPP/RNBQKBNR w KQkq a6 0 2"),t=e.findRookMoves(e.Piece(new B(0,7)),e),i=[];i.push(t.length===2);for(let r=0;r<i.length;r++)if(i[r]==!1){console.log("testFindRookMoves failed");return}}findKnightMoves(e,t){let i=[],r=e.getIndex(),s=new B(r%8,Math.floor(r/8)),c=e.color;if(c!=t.currentTurnColor)return i;if(c==="white"){if(s.x-2>=0&&s.y-1>=0){let a=new B(s.x-2,s.y-1);t.Piece(a)===" "?i.push(new C(s,a)):t.Piece(a)?.color==="black"&&i.push(new C(s,a))}if(s.x+2<=7&&s.y-1>=0){let a=new B(s.x+2,s.y-1);t.Piece(a)===" "?i.push(new C(s,a)):t.Piece(a)?.color==="black"&&i.push(new C(s,a))}if(s.x-2>=0&&s.y+1<=7){let a=new B(s.x-2,s.y+1);t.Piece(a)===" "?i.push(new C(s,a)):t.Piece(a)?.color==="black"&&i.push(new C(s,a))}if(s.x+2<=7&&s.y+1<=7){let a=new B(s.x+2,s.y+1);t.Piece(a)===" "?i.push(new C(s,a)):t.Piece(a)?.color==="black"&&i.push(new C(s,a))}if(s.x-1>=0&&s.y-2>=0){let a=new B(s.x-1,s.y-2);t.Piece(a)===" "?i.push(new C(s,a)):t.Piece(a)?.color==="black"&&i.push(new C(s,a))}if(s.x-1>=0&&s.y+2<=7){let a=new B(s.x-1,s.y+2);t.Piece(a)===" "?i.push(new C(s,a)):t.Piece(a)?.color==="black"&&i.push(new C(s,a))}if(s.x+1<=7&&s.y-2>=0){let a=new B(s.x+1,s.y-2);t.Piece(a)===" "?i.push(new C(s,a)):t.Piece(a)?.color==="black"&&i.push(new C(s,a))}if(s.x+1<=7&&s.y+2<=7){let a=new B(s.x+1,s.y+2);t.Piece(a)===" "?i.push(new C(s,a)):t.Piece(a)?.color==="black"&&i.push(new C(s,a))}}else{if(s.x-2>=0&&s.y-1>=0){let a=new B(s.x-2,s.y-1);t.Piece(a)===" "?i.push(new C(s,a)):t.Piece(a)?.color==="white"&&i.push(new C(s,a))}if(s.x+2<=7&&s.y-1>=0){let a=new B(s.x+2,s.y-1);t.Piece(a)===" "?i.push(new C(s,a)):t.Piece(a)?.color==="white"&&i.push(new C(s,a))}if(s.x-2>=0&&s.y+1<=7){let a=new B(s.x-2,s.y+1);t.Piece(a)===" "?i.push(new C(s,a)):t.Piece(a)?.color==="white"&&i.push(new C(s,a))}if(s.x+2<=7&&s.y+1<=7){let a=new B(s.x+2,s.y+1);t.Piece(a)===" "?i.push(new C(s,a)):t.Piece(a)?.color==="white"&&i.push(new C(s,a))}if(s.x-1>=0&&s.y-2>=0){let a=new B(s.x-1,s.y-2);t.Piece(a)===" "?i.push(new C(s,a)):t.Piece(a)?.color==="white"&&i.push(new C(s,a))}if(s.x-1>=0&&s.y+2<=7){let a=new B(s.x-1,s.y+2);t.Piece(a)===" "?i.push(new C(s,a)):t.Piece(a)?.color==="white"&&i.push(new C(s,a))}if(s.x+1<=7&&s.y-2>=0){let a=new B(s.x+1,s.y-2);t.Piece(a)===" "?i.push(new C(s,a)):t.Piece(a)?.color==="white"&&i.push(new C(s,a))}if(s.x+1<=7&&s.y+2<=7){let a=new B(s.x+1,s.y+2);t.Piece(a)===" "?i.push(new C(s,a)):t.Piece(a)?.color==="white"&&i.push(new C(s,a))}}return i}testFindKnightMoves(){let e=new pe([]),t=[];e.currentTurnColor="white";let i=new Ae("c3","white",jr);e.addPiece(i);let r=e.findKnightMoves(i,e);t.push(r.length===8),e=new pe([]),i=new Ae("c3","black",jr),e.addPiece(i),e.currentTurnColor="black",r=e.findKnightMoves(i,e),t.push(r.length===8),e=new pe([]),i=new Ae("a1","white",jr),e.addPiece(i),r=e.findKnightMoves(i,e),t.push(r.length===2);for(let s=0;s<t.length;s++)if(!t[s]){console.log("testFindKnightMoves failed at test "+s);return}}findBishopMoves(e,t){let i=[],r=e.getIndex(),s=new B(r%8,Math.floor(r/8)),c=e.color;if(c!=t.currentTurnColor)return i;if(c==="white"){for(let a=1;a<=7&&!(s.x-a<0||s.y-a<0);a++){let u=new B(s.x-a,s.y-a);if(t.Piece(u)===" ")i.push(new C(s,u));else if(t.Piece(u)?.color==="black"){i.push(new C(s,u));break}else break}for(let a=1;a<=7&&!(s.x+a>7||s.y-a<0);a++){let u=new B(s.x+a,s.y-a);if(t.Piece(u)===" ")i.push(new C(s,u));else if(t.Piece(u)?.color==="black"){i.push(new C(s,u));break}else break}for(let a=1;a<=7&&!(s.x-a<0||s.y+a>7);a++){let u=new B(s.x-a,s.y+a);if(t.Piece(u)===" ")i.push(new C(s,u));else if(t.Piece(u)?.color==="black"){i.push(new C(s,u));break}else break}for(let a=1;a<=7&&!(s.x+a>7||s.y+a>7);a++){let u=new B(s.x+a,s.y+a);if(t.Piece(u)===" ")i.push(new C(s,u));else if(t.Piece(u)?.color==="black"){i.push(new C(s,u));break}else break}}else{for(let a=1;a<=7&&!(s.x-a<0||s.y+a>7);a++){let u=new B(s.x-a,s.y+a);if(t.Piece(u)===" ")i.push(new C(s,u));else if(t.Piece(u)?.color==="white"){i.push(new C(s,u));break}else break}for(let a=1;a<=7&&!(s.x+a>7||s.y+a>7);a++){let u=new B(s.x+a,s.y+a);if(t.Piece(u)===" ")i.push(new C(s,u));else if(t.Piece(u)?.color==="white"){i.push(new C(s,u));break}else break}for(let a=1;a<=7&&!(s.x-a<0||s.y-a<0);a++){let u=new B(s.x-a,s.y-a);if(t.Piece(u)===" ")i.push(new C(s,u));else if(t.Piece(u)?.color==="white"){i.push(new C(s,u));break}else break}for(let a=1;a<=7&&!(s.x+a>7||s.y-a<0);a++){let u=new B(s.x+a,s.y-a);if(t.Piece(u)===" ")i.push(new C(s,u));else if(t.Piece(u)?.color==="white"){i.push(new C(s,u));break}else break}}return i}testFindBishopMoves(){let e=new pe([]),t=new Ae("a2","white",xn);e.addPiece(t);let i=e.findBishopMoves(t,e);if(i.length!==7){console.log("testFindBishopMoves failed 0");return}if(e=new pe([]),t=new Ae("a2","black",xn),e.addPiece(t),e.currentTurnColor="black",i=e.findBishopMoves(t,e),i.length!==7){console.log("testFindBishopMoves failed 1");return}if(e=new pe([]),t=new Ae("a2","white",xn),e.addPiece(t),e.currentTurnColor="black",t=new Ae("b3","black",xn),e.addPiece(t),i=e.findBishopMoves(t,e),i.length!==9){console.log("testFindBishopMoves failed 2");return}if(e=new pe([]),t=new Ae("a2","black",xn),e.addPiece(t),t=new Ae("b3","white",xn),e.addPiece(t),i=e.findBishopMoves(t,e),i.length!==9){console.log("testFindBishopMoves failed 3");return}}findQueenMoves(e,t){let i=this.findRookMoves(e,t);return i.push(...this.findBishopMoves(e,t)),i}testFindQueenMoves(){let e=new pe([]),t=new Ae("a2","white",kn);e.addPiece(t);let i=e.findQueenMoves(t,e);if(i.length!==21){console.log(i),console.error("testFindQueenMoves failed 0");return}if(e=new pe([]),t=new Ae("a2","black",kn),e.addPiece(t),e.currentTurnColor="black",i=e.findQueenMoves(t,e),i.length!==21){e.displayBoard(),console.log(i),console.error("testFindQueenMoves failed 1");return}if(e=new pe([]),t=new Ae("a2","white",kn),e.addPiece(t),e.currentTurnColor="black",t=new Ae("b3","black",kn),e.addPiece(t),i=e.findQueenMoves(t,e),i.length!==23){console.error("testFindQueenMoves failed 2");return}if(e=new pe([]),t=new Ae("a2","black",kn),e.addPiece(t),t=new Ae("b3","white",kn),e.addPiece(t),i=e.findQueenMoves(t,e),i.length!==23){console.error("testFindQueenMoves failed 3");return}}findKingMoves(e,t){let i=[],r=e.getPos().pos,s=new B(r.x,r.y+1);return e.color==="black"?(t.Piece(s)===" "&&r.y+1<=7?i.push(new C(r,s)):t.Piece(s)?.color==="white"&&i.push(new C(r,s)),s=new B(r.x,r.y-1),t.Piece(s)===" "&&r.y-1>=0?i.push(new C(r,s)):t.Piece(s)?.color==="white"&&i.push(new C(r,s)),s=new B(r.x+1,r.y),t.Piece(s)===" "&&r.x+1<=7?i.push(new C(r,s)):t.Piece(s)?.color==="white"&&i.push(new C(r,s)),s=new B(r.x-1,r.y),t.Piece(s)===" "&&r.x-1>=0?i.push(new C(r,s)):t.Piece(s)?.color==="white"&&i.push(new C(r,s)),s=new B(r.x+1,r.y+1),t.Piece(s)===" "&&r.x+1<=7&&r.y+1<=7?i.push(new C(r,s)):t.Piece(s)?.color==="white"&&i.push(new C(r,s)),s=new B(r.x-1,r.y+1),t.Piece(s)===" "&&r.x-1>=0&&r.y+1<=7?i.push(new C(r,s)):t.Piece(s)?.color==="white"&&i.push(new C(r,s)),s=new B(r.x+1,r.y-1),t.Piece(s)===" "&&r.x+1<=7&&r.y-1>=0?i.push(new C(r,s)):t.Piece(s)?.color==="white"&&i.push(new C(r,s)),s=new B(r.x-1,r.y-1),t.Piece(s)===" "&&r.x-1>=0&&r.y-1>=0?i.push(new C(r,s)):t.Piece(s)?.color==="white"&&i.push(new C(r,s)),s=new B(r.x+2,r.y),t.Piece(s)===" "&&r.x+2===6&&r.y===0&&this.inCheck===!1&&t.Piece(new B(r.x+1,r.y))===" "&&t.castlingRights.includes("k")&&i.push(new C(r,s)),s=new B(r.x-2,r.y),t.Piece(s)===" "&&r.x-2===2&&r.y===0&&this.inCheck===!1&&t.Piece(new B(r.x-1,r.y))===" "&&t.Piece(s)===" "&&t.castlingRights.includes("q")&&i.push(new C(r,s))):(s=new B(r.x,r.y+1),t.Piece(s)===" "&&r.y+1<=7?i.push(new C(r,s)):t.Piece(s)?.color==="black"&&i.push(new C(r,s)),s=new B(r.x,r.y-1),t.Piece(s)===" "&&r.y-1>=0?i.push(new C(r,s)):t.Piece(s)?.color==="black"&&i.push(new C(r,s)),s=new B(r.x+1,r.y),t.Piece(s)===" "&&r.x+1<=7?i.push(new C(r,s)):t.Piece(s)?.color==="black"&&i.push(new C(r,s)),s=new B(r.x-1,r.y),t.Piece(s)===" "&&r.x-1>=0?i.push(new C(r,s)):t.Piece(s)?.color==="black"&&i.push(new C(r,s)),s=new B(r.x+1,r.y+1),t.Piece(s)===" "&&r.x+1<=7&&r.y+1<=7?i.push(new C(r,s)):t.Piece(s)?.color==="black"&&i.push(new C(r,s)),s=new B(r.x-1,r.y+1),t.Piece(s)===" "&&r.x-1>=0&&r.y+1<=7?i.push(new C(r,s)):t.Piece(s)?.color==="black"&&i.push(new C(r,s)),s=new B(r.x+1,r.y-1),t.Piece(s)===" "&&r.x+1<=7&&r.y-1>=0?i.push(new C(r,s)):t.Piece(s)?.color==="black"&&i.push(new C(r,s)),s=new B(r.x-1,r.y-1),t.Piece(s)===" "&&r.x-1>=0&&r.y-1>=0?i.push(new C(r,s)):t.Piece(s)?.color==="black"&&i.push(new C(r,s)),s=new B(r.x+2,r.y),t.Piece(s)===" "&&r.x+2===6&&r.y===7&&this.inCheck===!1&&t.Piece(new B(r.x+1,r.y))===" "&&t.castlingRights.includes("K")&&i.push(new C(r,s)),s=new B(r.x-2,r.y),t.Piece(s)===" "&&r.x-2===2&&r.y===7&&this.inCheck===!1&&t.Piece(new B(r.x-1,r.y))===" "&&t.Piece(s)===" "&&t.castlingRights.includes("Q")&&i.push(new C(r,s))),i}testFindKingMoves(){let e=new pe([]),t=new Ae("a2","white",Tn);e.addPiece(t);let i=e.findKingMoves(t,e);if(i.length!==5){console.error("testFindKingMoves failed 0",i);return}if(e=new pe([]),t=new Ae("a2","black",Tn),e.addPiece(t),e.currentTurnColor="black",i=e.findKingMoves(t,e),i.length!==5){console.error("testFindKingMoves failed 1");return}if(e=new pe([]),t=new Ae("a2","white",Tn),e.addPiece(t),e.currentTurnColor="black",t=new Ae("b3","black",Tn),e.addPiece(t),i=e.findKingMoves(t,e),i.length!==8){console.error("testFindKingMoves failed 2");return}if(e=new pe([]),t=new Ae("a2","black",Tn),e.addPiece(t),t=new Ae("b3","white",Tn),e.addPiece(t),i=e.findKingMoves(t,e),i.length!==8){console.error("testFindKingMoves failed 3");return}}runAllTests(){this.testConvertToPosition(),this.testConstructors(),this.testBoardToFen(),this.testFenToBoard(),this.testFindPawnMoves(),this.testFindRookMoves(),this.testFindKnightMoves(),this.testFindBishopMoves(),this.testFindQueenMoves(),this.testFindKingMoves(),this.testFindPseudoLegalMoves(),this.testIsInCheck(),this.testFindLegalMoves(),console.log("All tests ran for board class")}}class zc{runAllTests(){new C(void 0,void 0,"a2","a4").runAllTests(),new qt("a2").runAllTests(),new Ae("a2","white","pawn").runAllTests(),new pe().runAllTests(),console.log("All tests ran for chessClasses.ts")}}function rs(n,e){return n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(n).length===Object.keys(e).length&&Object.keys(n).reduce(function(t,i){return t&&rs(n[i],e[i])},!0):n===e}const Wc=sf();function Gc(n){he(0),he("Home");const[e,t]=he({x:0,y:0}),[i,r]=he({x:0,y:0}),[s,c]=he([]),[a,u]=he(!1),[f,d]=he(null),[m,v]=he(null),[g,w]=he({x:0,y:0}),[b,x]=he(null),[O,E]=he(null),P=[],I=[];sn(()=>{document.addEventListener("pointermove",J=>{t({x:J.clientX,y:J.clientY}),a()&&f()&&(f().ref.style.transform=`translate(${e().x-i().x+g().x}px, ${e().y-i().y+g().y}px)`,f().ref.style.zIndex=100,f().rectangle=f().ref.getBoundingClientRect(),b()?.length>0&&E(Ne(b())))}),document.addEventListener("pointerup",()=>{f()!=null&&(f().dragEnd(O()),I.forEach(J=>{J()}),f()?.ref&&(f().ref.style.transform=`translate(${0}px, ${.1}px)`,f().ref.style.zIndex=0),u(!1),v(f()),d(null))})});const N=(J,R)=>{R!==void 0&&R.dragStart.push(J)},L=J=>{P.push(J)},q=J=>{I.push(J)},G=(J,R)=>{R!==void 0&&(R.dragEnd=J)},Q=(J,R)=>{R!==void 0&&(R.hoverOver=J)},Z=(J,R)=>{R!==void 0&&(R.hoverOut=J)},Se=J=>{let R={id:J,startingPosition:{x:0,y:0},dragStart:[],dragEnd:()=>{},ref:null,rectangle:null,data:{}};return sn(()=>{R.ref.addEventListener("pointerdown",Y=>{for(let T=0;T<R.dragStart.length;T++)R.dragStart[T](R);for(let T=0;T<P.length;T++)P[T](R);w(ge(Y.target.getAttribute("style"))),r({x:Y.clientX,y:Y.clientY}),u(!0),d(R),R.rectangle=R.ref.getBoundingClientRect()})}),R},Re=J=>{let R={id:J,startingPosition:{x:0,y:0},hoverOver:()=>{},hoverOut:()=>{},ref:null,rectangle:null,hovering:!1,occupied:!1,droppable:!0};return c([...s(),R]),sn(()=>{R.rectangle=R.ref.getBoundingClientRect(),R.ref.querySelector(".piece")!==null&&(R.occupied=!0),document.addEventListener("pointermove",()=>{if(f()==null||f().rectangle==null)return;let Y=f().ref.getBoundingClientRect(),T=R.ref.getBoundingClientRect();if(Y.top>T.bottom||Y.right<T.left||Y.bottom<T.top||Y.left>T.right){if(Be(R),!R.hovering)return;R.hovering=!1,R.hoverOut(f())}else{if(R.ref===O()?.ref){if(R.hovering)return;R.hovering=!0,R.hoverOver(f())}else R.hovering=!1,R.hoverOut(f());we(R)}}),document.addEventListener("pointerup",()=>{!R.hovering||(R.hovering=!1,R.hoverOut(m()),m()!=null&&R.droppable!==!1&&(R.ref.querySelector(".piece")!==null?R.ref.querySelector(".piece").remove():R.ref.querySelector(".circle")!==null&&R.ref.querySelector(".circle").remove(),R.ref.appendChild(m().ref)))})}),s()[s().length-1]};function ge(J){if(J===null)return{x:0,y:0};let R=J.split("translate(")[0],Y;return R&&(Y=J.split("translate(")[1].split(")")[0].split("px, ")),{x:parseInt(Y[0]),y:parseInt(Y[1])}}function we(J){b()==null&&x([J]),!b().includes(J)&&(b()?.includes(J)||x([...b(),J]))}function Be(J){b()!=null&&(!b()?.includes(J)||b().includes(J)&&x(b()?.filter(R=>R!==J)))}function Ne(J){if(J==null)return;let R=f().ref.getBoundingClientRect();return J.sort((T,le)=>{let te=T.ref.getBoundingClientRect(),Oe=le.ref.getBoundingClientRect(),Ve,st,Qe,j,M,oe;return R.x>te.x?Ve=te.right-R.x:Ve=R.right-te.x,R.bottom>te.bottom?st=te.bottom-R.top:st=R.bottom-te.top,M=Ve*st,R.x>Oe.x?Qe=Oe.right-R.x:Qe=R.right-Oe.x,R.bottom>Oe.bottom?j=Oe.bottom-R.top:j=R.bottom-Oe.top,oe=Qe*j,oe-M})[0]}return ke(Wc.Provider,{value:{onDragEnd:G,onDragStart:N,createDraggable:Se,onHoverOver:Q,createDroppable:Re,onHoverOut:Z,onGlobalDragStart:L,onGlobalDragEnd:q},get children(){return n.children}})}const Fa=()=>of(Wc),wf=Xe('<div class="number-right" style="pointer-events: none;"></div>'),Ef=Xe('<div class="number-left" style="pointer-events: none;"></div>'),xf=Xe("<div></div>"),Tf=Xe('<section><div class=""> </div></section>');function Hc({pieceClassName:n,className:e,id:t,board:i,draggableId:r,updateBoard:s,eatenPieces:c,setDisplayInlay:a,setDisplayInlayX:u,inlaySelection:f,displayInlay:d,style:m,color:v,client:g,gql:w,gameId:b,setLastMove:x,lastMove:O}){const E=w`
  mutation($from: String!, $to: String!, $endFen: String!, $gameId: String!) {
    moveChessPiece(from: $from, to: $to, endFen: $endFen, gameId: $gameId) {
      fen
    }

  }
`;sn(()=>{window.movePiece=function(Q,Z){i().movePiece(Q,Z),s()},window.board=i});const[P,I]=he([]),N=({id:Q,className:Z,draggable:Se,draggableClass:Re})=>{const{onHoverOver:ge,createDroppable:we,onHoverOut:Be,onGlobalDragStart:Ne,onGlobalDragEnd:J}=Fa(),R=we(Q);return ge(Y=>{R.ref.classList.add("hovered")},R),Be(Y=>{R.ref.classList.remove("hovered")},R),Ne(Y=>{if(!d())if(Y.data.legalPieceMoves.includes(R.id)){if(R.ref.children.length===0||R.ref.querySelector(".piece")==null){R.droppable=!0;let T=document.createElement("section");T.classList.add("circle"),R.ref.appendChild(T)}else if(R.ref.children.length>0&&R.ref.querySelector(".piece")!=null){R.droppable=!0;let T;for(let le=0;le<R.ref.children.length;le++)R.ref.children[le].classList.contains("piece")&&(T=R.ref.children[le]);T.children[0]?.classList.add("circle")}}else R.droppable=!1}),J(Y=>{let T=R.ref.querySelectorAll("section.circle");for(let te=0;te<T.length;te++)T[te].remove();let le=R.ref.querySelectorAll("div.circle");for(let te=0;te<le.length;te++)le[te].classList.remove("circle")}),Se.getAttribute("class").length===0&&(Se=void 0),(()=>{const Y=xf.cloneNode(!0),T=R.ref;return typeof T=="function"?La(T,Y):R.ref=Y,Dn(Y,"id",Q),Hi(Y,Z),rt(Y,ke(bt,{when:Se!=null,children:Se}),null),rt(Y,ke(bt,{get when(){return Q[1]==="8"&&v==="black"||Q[1]==="1"&&v==="white"},get children(){const le=wf.cloneNode(!0);return rt(le,()=>Q[0]),le}}),null),rt(Y,ke(bt,{get when(){return Q[0]==="h"&&v==="black"||Q[0]==="a"&&v==="white"},get children(){const le=Ef.cloneNode(!0);return rt(le,()=>Q[1]),le}}),null),Pt(le=>ns(Y,m,le)),Y})()},L=({className:Q,id:Z})=>{const{onDragStart:Se,onDragEnd:Re,createDraggable:ge}=Fa(),we=ge(Z);let Be,Ne;Se(()=>{if(d())return;Be=we.ref.parentElement.id;let Y=i().findLegalMoves(i());Y.length===0&&(i().checkMate=!0);let T=[];for(let le=0;le<Y.length;le++)Y[le].start==Be&&T.push(Y[le].end);we.data.legalPieceMoves=T},we),Re(async Y=>{if(d()||Y===null)return;Y.occupied=!1;let T=Y.ref.querySelector(".piece");if(await G(1),Y.ref.querySelector(".piece")==null||(Y.ref.querySelector(".piece").id===we.id&&(Ne=we.ref.parentElement.id),Ne===Be))return;i().board,i().movePiece(Be,Ne),I([...P(),{start:Be,end:Ne}]),T?.classList?.contains("piece")&&c.push(T),i().board;let le=i().getPieceAtPosition(Ne);le.type==="p"&&le.color===v?Ne[1]==="8"||Ne[1]==="1"?(a(!0),u(le.position.pos.x)):q({start:Be,end:Ne},i().fen):q({start:Be,end:Ne},i().fen),s(),(T?.classList?.contains("number-right")||T?.classList?.contains("number-left"))&&Y.ref.appendChild(T),x({from:Be,to:Ne});let te=document.querySelectorAll(".chessSquare");for(let Oe=0;Oe<te.length;Oe++)te[Oe].id===O().from||te[Oe].id===O().to?te[Oe]?.classList?.add("lastMove"):te[Oe]?.classList?.remove("lastMove")},we);const J=n.toUpperCase()===n?"white":"black",R=v===J;return(()=>{const Y=Tf.cloneNode(!0),T=we.ref;return typeof T=="function"?La(T,Y):we.ref=Y,Hi(Y,Q),Dn(Y,"id",Z),Pt(le=>ns(Y,`${R?"":"pointer-events: none;"}`,le)),Y})()};function q(Q,Z){console.log("update game",b()),g.mutate({mutation:E,variables:{from:Q.start,to:Q.end,endFen:Z,gameId:b()}}).then(Se=>{console.log(Se)})}const G=Q=>new Promise(Z=>setTimeout(Z,Q));return ke(N,{className:e,get draggable(){return ke(L,{className:`${n!=" "?n+" piece":""}`,id:r})},id:t})}const kf=Xe('<div><div class="chessInlaySquare" id="queenSelection"><div class="piece Q"></div></div><div class="chessInlaySquare" id="knightSelection"><div class="piece N"></div></div><div class="chessInlaySquare" id="rookSelection"><div class="piece R"></div></div><div class="chessInlaySquare" id="bishopSelection"><div class="piece B"></div></div></div>'),Pf=Xe('<div class="chessBoard"></div>');let If=new zc;If.runAllTests();function Sf({board:n,client:e,updateBoard:t,gql:i,gameId:r,setLastMove:s,lastMove:c}){n().displayBoard();const a=i`
    mutation (
      $from: String!
      $to: String!
      $endFen: String!
      $gameId: String!
    ) {
      moveChessPiece(from: $from, to: $to, endFen: $endFen, gameId: $gameId) {
        fen
      }
    }
  `;let u=f();function f(){let I=[];for(let N=0;N<8;N++)for(let L=0;L<8;L++)I.push(`${String.fromCharCode(97+L)}${8-N}`);return I}let d=[];const[m,v]=he(!1),[g,w]=he("00"),[b,x]=he("");g()+"";async function O(I){x(I),v(!1);let N=n().getPieceAtBoardIndex(parseInt(g())),L=N.type;N.type=I.toLowerCase(),n().board[parseInt(g())]=I,n().fen=n().boardToFen(),console.log(N);let q=document.getElementById(N.position.position)?.children[0];console.log("previous type:"+L),q?.classList.remove(L.toUpperCase()),q?.classList.add(I.toUpperCase()),await P(10),t();let G={start:c().from,end:c().to};console.log(G),E(G,n().fen)}function E(I,N){console.log("update game",r()),e.mutate({mutation:a,variables:{from:I.start,to:I.end,endFen:N,gameId:r()}}).then(L=>{console.log(L)})}function P(I){return new Promise(N=>setTimeout(N,I))}return(()=>{const I=Pf.cloneNode(!0);return rt(I,ke(Gc,{get children(){return[ke(bt,{get when(){return m()},get children(){const N=kf.cloneNode(!0),L=N.firstChild,q=L.nextSibling,G=q.nextSibling,Q=G.nextSibling;return L.$$click=()=>O("Q"),q.$$click=()=>O("N"),G.$$click=()=>O("R"),Q.$$click=()=>O("B"),Pt(()=>Hi(N,`chessInlay ml-[${g()}]`)),N}}),ke(Ms,{get each(){return n().board},children:(N,L)=>ke(Hc,{get style(){return L()},get pieceClassName(){return n().board[L()]},get className(){return`chessSquare ${L()%16<8?L()%2==0?"lighterBackground":"":L()%2==0?"":"lighterBackground"}`},get id(){return u[L()]},board:n,updateBoard:t,get draggableId(){return Of()},eatenPieces:d,setDisplayInlay:v,setDisplayInlayX:w,inlaySelection:b,displayInlay:m,color:"white",client:e,gql:i,gameId:r,setLastMove:s,lastMove:c})})]}})),I})()}function Of(){return Math.random().toString(36).substr(2,9)}li(["click"]);const Cf=Xe('<div><div class="chessInlaySquare" id="queenSelection"><div class="piece q"></div></div><div class="chessInlaySquare" id="knightSelection"><div class="piece n"></div></div><div class="chessInlaySquare" id="rookSelection"><div class="piece r"></div></div><div class="chessInlaySquare" id="bishopSelection"><div class="piece b"></div></div></div>'),Af=Xe('<div class="chessBoard"></div>');let Df=new zc;Df.runAllTests();function Nf({client:n,board:e,updateBlackBoard:t,gql:i,gameId:r,setLastMove:s,lastMove:c}){e().displayBoard();let a=d();const u=i`
    mutation (
      $from: String!
      $to: String!
      $endFen: String!
      $gameId: String!
    ) {
      moveChessPiece(from: $from, to: $to, endFen: $endFen, gameId: $gameId) {
        fen
      }
    }
  `;function f(I,N){console.log("update game",r()),n.mutate({mutation:u,variables:{from:I.start,to:I.end,endFen:N,gameId:r()}}).then(L=>{console.log(L)})}function d(){let I=[];for(let N=0;N<8;N++)for(let L=0;L<8;L++)I.push(`${String.fromCharCode(97+L)}${8-N}`);return I}let m=[];const[v,g]=he(!1),[w,b]=he("00"),[x,O]=he("");async function E(I){O(I),g(!1);let N=e().getPieceAtBoardIndex(63-(7-parseInt(w()))),L=N.type;console.log(N),N.type=I,e().board[63-(7-parseInt(w()))]=I,e().fen=e().boardToFen(),console.log(N);let q=document.getElementById(N.position.position)?.children[0];console.log("previous type:"+L),q?.classList.remove(L),q?.classList.add(I),await P(10),t();let G={start:c().from,end:c().to};f(G,e().fen)}function P(I){return new Promise(N=>setTimeout(N,I))}return(()=>{const I=Af.cloneNode(!0);return rt(I,ke(Gc,{get children(){return[ke(bt,{get when(){return v()},get children(){const N=Cf.cloneNode(!0),L=N.firstChild,q=L.nextSibling,G=q.nextSibling,Q=G.nextSibling;return L.$$click=()=>E("q"),q.$$click=()=>E("n"),G.$$click=()=>E("r"),Q.$$click=()=>E("b"),Pt(()=>Hi(N,`chessInlay ml-[${7-parseInt(w())}]`)),N}}),ke(Ms,{get each(){return e().board},children:(N,L)=>ke(Hc,{get style(){return L()},get pieceClassName(){return e().board[e().board.length-1-L()]},get className(){return`chessSquare ${(e().board.length-1-L())%16<8?(e().board.length-1-L())%2==0?"lighterBackground":"":(e().board.length-1-L())%2==0?"":"lighterBackground"}`},get id(){return a[e().board.length-1-L()]},board:e,updateBoard:t,get draggableId(){return Lf()},eatenPieces:m,setDisplayInlay:g,setDisplayInlayX:b,inlaySelection:x,displayInlay:v,color:"black",client:n,gql:i,gameId:r,setLastMove:s,lastMove:c})})]}})),I})()}function Lf(){return Math.random().toString(36).substr(2,9)}li(["click"]);const Rf=Xe(`<div class="glassOverlay"><label for="username">Choose your username</label><div class="userNameInput"><input type="username" placeholder="username" id="userNameInput"></div><button class="submitUsernameButton">LET'S GO<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 arrow"><path stroke-linecap="round" stroke-linejoin="round" d="M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"></path></svg></button></div>`),Mf=({oldUserName:n,oldUserId:e,setSessionStorageUser:t,addUserToGraphql:i,updateLastSeen:r,setOldUserName:s,setOldUserId:c})=>{const[a,u]=he(""),[f,d]=he(""),m=async()=>{let v=Ff(),g=a();if(g==""){alert("Please enter a username");return}if(g==n()){console.log("userid: ",e()),console.log("username: ",g),d(e());let b=f(),x=g;await t(!0),console.log("hi there"),r(),setInterval(r,6e3),console.log("made it here"),await i(),sessionStorage.setItem("gabrielmalek/chess.data",JSON.stringify({userId:b,userName:x}));return}c(v),s(g);let w=document.getElementById("userNameInput");w.value="",u(""),await t(!0),r(),setInterval(r,6e3),i(),sessionStorage.setItem("gabrielmalek/chess.data",JSON.stringify({userId:v,userName:g})),localStorage.setItem("gabrielmalek/chess.data",JSON.stringify({userId:v,userName:g}))};return sn(()=>{if(document.addEventListener("keyup",function(v){v.key==="Enter"&&m()}),n()!=""){u(n()),d(e());let v=document.getElementById("userNameInput");v.value=a()}}),(()=>{const v=Rf.cloneNode(!0),g=v.firstChild,w=g.nextSibling,b=w.firstChild,x=w.nextSibling;return b.$$keyup=O=>u(O.target?.value),x.$$click=()=>m(),v})()};function Ff(){let n="";for(let e=0;e<20;e++)n+=Math.floor(Math.random()*10);return n}li(["keyup","click"]);const qf=Xe('<div class="catLogo"></div>');function Bf({catLink:n}){return(()=>{const e=qf.cloneNode(!0);return Pt(t=>ns(e,`background-image: url(${n})`,t)),e})()}const jf=Xe('<div class="glassOverlay"><ul class="list"></ul></div>'),$f=Xe('<div class="absolute left-3 text-red-500">Notification sent!,</div>'),Vf=Xe('<div class="modal fade " id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"><div class="modal-dialog absolute top-[39vh] left-1/ "><div class="modal-content w-[50px] "><div class="modal-header"><h1 class="modal-title fs-5" id="exampleModalLabel">Play Chess with </h1><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body">Play online with this player right now!</div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button><button type="button" class="btn btn-primary">Play Chess</button></div></div></div></div>'),Qf=Xe('<li class="listItem"><div class="text"></div><button>\u{1F82E}</button></li>');function Uf({users:n,userId:e,playChess:t,refetchUsers:i}){const[r,s]=he(null),[c,a]=he(!1);function u(f){s(f),document.getElementById("exampleModal")?.style.setProperty("display","flex")}return sn(()=>{n().length===0&&i()}),[(()=>{const f=jf.cloneNode(!0),d=f.firstChild;return rt(d,ke(Ms,{get each(){return n()},children:m=>(()=>{const v=Qf.cloneNode(!0),g=v.firstChild,w=g.nextSibling;return gf(v,"click",m.id==e()?()=>console.log("clicked main user -- do nothing"):()=>u(m),!0),rt(g,()=>m.username),rt(v,ke(Bf,{get catLink(){return m.cat_url}}),w),w.$$click=()=>console.log(n()),Pt(b=>{const x=`${m.id==e()?"mainUser":""}`,O=`${m.id==e()?"":"modal"}`,E=`${m.id==e()?"":"#exampleModal"}`;return x!==b._v$&&Dn(v,"id",b._v$=x),O!==b._v$2&&Dn(v,"data-bs-toggle",b._v$2=O),E!==b._v$3&&Dn(v,"data-bs-target",b._v$3=E),b},{_v$:void 0,_v$2:void 0,_v$3:void 0}),v})()})),f})(),(()=>{const f=Vf.cloneNode(!0),d=f.firstChild,m=d.firstChild,v=m.firstChild,g=v.firstChild;g.firstChild;const w=v.nextSibling,b=w.nextSibling,x=b.firstChild,O=x.nextSibling;return rt(g,(()=>{const E=At(()=>r()!=null);return()=>E()?`${r()?.username}`:""})(),null),rt(b,ke(bt,{get when(){return c()},get children(){return $f.cloneNode(!0)}}),x),O.$$click=()=>{c()==!1&&(a(!0),t(r()),setTimeout(()=>{a(!1)},5e3))},f})()]}li(["click"]);var ss=function(n,e){return ss=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])},ss(n,e)};function _t(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ss(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var k=function(){return k=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},k.apply(this,arguments)};function Mn(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function Bt(n,e,t,i){function r(s){return s instanceof t?s:new t(function(c){c(s)})}return new(t||(t=Promise))(function(s,c){function a(d){try{f(i.next(d))}catch(m){c(m)}}function u(d){try{f(i.throw(d))}catch(m){c(m)}}function f(d){d.done?s(d.value):r(d.value).then(a,u)}f((i=i.apply(n,e||[])).next())})}function jt(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,c;return c={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function a(f){return function(d){return u([f,d])}}function u(f){if(i)throw new TypeError("Generator is already executing.");for(;c&&(c=0,f[0]&&(t=0)),t;)try{if(i=1,r&&(s=f[0]&2?r.return:f[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,f[1])).done)return s;switch(r=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,r=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){t.label=f[1];break}if(f[0]===6&&t.label<s[1]){t.label=s[1],s=f;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(f);break}s[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(d){f=[6,d],r=0}finally{i=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function on(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return n.concat(s||Array.prototype.slice.call(e))}var $r="Invariant Violation",qa=Object.setPrototypeOf,zf=qa===void 0?function(n,e){return n.__proto__=e,n}:qa,me=function(n){_t(e,n);function e(t){t===void 0&&(t=$r);var i=n.call(this,typeof t=="number"?$r+": "+t+" (see https://github.com/apollographql/invariant-packages)":t)||this;return i.framesToPop=1,i.name=$r,zf(i,e.prototype),i}return e}(Error);function $(n,e){if(!n)throw new me(e)}var Kc=["debug","log","warn","error","silent"],Wf=Kc.indexOf("log");function Li(n){return function(){if(Kc.indexOf(n)>=Wf){var e=console[n]||console.log;return e.apply(console,arguments)}}}(function(n){n.debug=Li("debug"),n.log=Li("log"),n.warn=Li("warn"),n.error=Li("error")})($||($={}));function vt(n){try{return n()}catch{}}const Ba=vt(function(){return globalThis})||vt(function(){return window})||vt(function(){return self})||vt(function(){return global})||vt(function(){return vt.constructor("return this")()});var ja="__",$a=[ja,ja].join("DEV");function Gf(){try{return Boolean(__DEV__)}catch{return Object.defineProperty(Ba,$a,{value:vt(function(){return"production"})!=="production",enumerable:!1,configurable:!0,writable:!0}),Ba[$a]}}const Vr=Gf();function $t(n){try{return n()}catch{}}var os=$t(function(){return globalThis})||$t(function(){return window})||$t(function(){return self})||$t(function(){return global})||$t(function(){return $t.constructor("return this")()}),as=!1;function Hf(){os&&!$t(function(){return"production"})&&!$t(function(){return process})&&(Object.defineProperty(os,"process",{value:{env:{NODE_ENV:"production"}},configurable:!0,enumerable:!1,writable:!0}),as=!0)}Hf();function Va(){as&&(delete os.process,as=!1)}function qi(n,e){if(!Boolean(n))throw new Error(e)}function Kf(n){return typeof n=="object"&&n!==null}function Yf(n,e){if(!Boolean(n))throw new Error(e??"Unexpected invariant triggered.")}const Jf=/\r\n|[\n\r]/g;function cs(n,e){let t=0,i=1;for(const r of n.body.matchAll(Jf)){if(typeof r.index=="number"||Yf(!1),r.index>=e)break;t=r.index+r[0].length,i+=1}return{line:i,column:e+1-t}}function Xf(n){return Yc(n.source,cs(n.source,n.start))}function Yc(n,e){const t=n.locationOffset.column-1,i="".padStart(t)+n.body,r=e.line-1,s=n.locationOffset.line-1,c=e.line+s,a=e.line===1?t:0,u=e.column+a,f=`${n.name}:${c}:${u}
`,d=i.split(/\r\n|[\n\r]/g),m=d[r];if(m.length>120){const v=Math.floor(u/80),g=u%80,w=[];for(let b=0;b<m.length;b+=80)w.push(m.slice(b,b+80));return f+Qa([[`${c} |`,w[0]],...w.slice(1,v+1).map(b=>["|",b]),["|","^".padStart(g)],["|",w[v+1]]])}return f+Qa([[`${c-1} |`,d[r-1]],[`${c} |`,m],["|","^".padStart(u)],[`${c+1} |`,d[r+1]]])}function Qa(n){const e=n.filter(([i,r])=>r!==void 0),t=Math.max(...e.map(([i])=>i.length));return e.map(([i,r])=>i.padStart(t)+(r?" "+r:"")).join(`
`)}function Zf(n){const e=n[0];return e==null||"kind"in e||"length"in e?{nodes:e,source:n[1],positions:n[2],path:n[3],originalError:n[4],extensions:n[5]}:e}class Fs extends Error{constructor(e,...t){var i,r,s;const{nodes:c,source:a,positions:u,path:f,originalError:d,extensions:m}=Zf(t);super(e),this.name="GraphQLError",this.path=f??void 0,this.originalError=d??void 0,this.nodes=Ua(Array.isArray(c)?c:c?[c]:void 0);const v=Ua((i=this.nodes)===null||i===void 0?void 0:i.map(w=>w.loc).filter(w=>w!=null));this.source=a??(v==null||(r=v[0])===null||r===void 0?void 0:r.source),this.positions=u??v?.map(w=>w.start),this.locations=u&&a?u.map(w=>cs(a,w)):v?.map(w=>cs(w.source,w.start));const g=Kf(d?.extensions)?d?.extensions:void 0;this.extensions=(s=m??g)!==null&&s!==void 0?s:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),d!=null&&d.stack?Object.defineProperty(this,"stack",{value:d.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,Fs):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const t of this.nodes)t.loc&&(e+=`

`+Xf(t.loc));else if(this.source&&this.locations)for(const t of this.locations)e+=`

`+Yc(this.source,t);return e}toJSON(){const e={message:this.message};return this.locations!=null&&(e.locations=this.locations),this.path!=null&&(e.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function Ua(n){return n===void 0||n.length===0?void 0:n}function We(n,e,t){return new Fs(`Syntax Error: ${t}`,{source:n,positions:[e]})}class eh{constructor(e,t,i){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=i}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class Jc{constructor(e,t,i,r,s,c){this.kind=e,this.start=t,this.end=i,this.line=r,this.column=s,this.value=c,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const Xc={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},th=new Set(Object.keys(Xc));function za(n){const e=n?.kind;return typeof e=="string"&&th.has(e)}var On;(function(n){n.QUERY="query",n.MUTATION="mutation",n.SUBSCRIPTION="subscription"})(On||(On={}));var ls;(function(n){n.QUERY="QUERY",n.MUTATION="MUTATION",n.SUBSCRIPTION="SUBSCRIPTION",n.FIELD="FIELD",n.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",n.FRAGMENT_SPREAD="FRAGMENT_SPREAD",n.INLINE_FRAGMENT="INLINE_FRAGMENT",n.VARIABLE_DEFINITION="VARIABLE_DEFINITION",n.SCHEMA="SCHEMA",n.SCALAR="SCALAR",n.OBJECT="OBJECT",n.FIELD_DEFINITION="FIELD_DEFINITION",n.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",n.INTERFACE="INTERFACE",n.UNION="UNION",n.ENUM="ENUM",n.ENUM_VALUE="ENUM_VALUE",n.INPUT_OBJECT="INPUT_OBJECT",n.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(ls||(ls={}));var W;(function(n){n.NAME="Name",n.DOCUMENT="Document",n.OPERATION_DEFINITION="OperationDefinition",n.VARIABLE_DEFINITION="VariableDefinition",n.SELECTION_SET="SelectionSet",n.FIELD="Field",n.ARGUMENT="Argument",n.FRAGMENT_SPREAD="FragmentSpread",n.INLINE_FRAGMENT="InlineFragment",n.FRAGMENT_DEFINITION="FragmentDefinition",n.VARIABLE="Variable",n.INT="IntValue",n.FLOAT="FloatValue",n.STRING="StringValue",n.BOOLEAN="BooleanValue",n.NULL="NullValue",n.ENUM="EnumValue",n.LIST="ListValue",n.OBJECT="ObjectValue",n.OBJECT_FIELD="ObjectField",n.DIRECTIVE="Directive",n.NAMED_TYPE="NamedType",n.LIST_TYPE="ListType",n.NON_NULL_TYPE="NonNullType",n.SCHEMA_DEFINITION="SchemaDefinition",n.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",n.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",n.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",n.FIELD_DEFINITION="FieldDefinition",n.INPUT_VALUE_DEFINITION="InputValueDefinition",n.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",n.UNION_TYPE_DEFINITION="UnionTypeDefinition",n.ENUM_TYPE_DEFINITION="EnumTypeDefinition",n.ENUM_VALUE_DEFINITION="EnumValueDefinition",n.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",n.DIRECTIVE_DEFINITION="DirectiveDefinition",n.SCHEMA_EXTENSION="SchemaExtension",n.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",n.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",n.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",n.UNION_TYPE_EXTENSION="UnionTypeExtension",n.ENUM_TYPE_EXTENSION="EnumTypeExtension",n.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(W||(W={}));function us(n){return n===9||n===32}function ii(n){return n>=48&&n<=57}function Zc(n){return n>=97&&n<=122||n>=65&&n<=90}function el(n){return Zc(n)||n===95}function nh(n){return Zc(n)||ii(n)||n===95}function ih(n){var e;let t=Number.MAX_SAFE_INTEGER,i=null,r=-1;for(let c=0;c<n.length;++c){var s;const a=n[c],u=rh(a);u!==a.length&&(i=(s=i)!==null&&s!==void 0?s:c,r=c,c!==0&&u<t&&(t=u))}return n.map((c,a)=>a===0?c:c.slice(t)).slice((e=i)!==null&&e!==void 0?e:0,r+1)}function rh(n){let e=0;for(;e<n.length&&us(n.charCodeAt(e));)++e;return e}function sh(n,e){const t=n.replace(/"""/g,'\\"""'),i=t.split(/\r\n|[\n\r]/g),r=i.length===1,s=i.length>1&&i.slice(1).every(g=>g.length===0||us(g.charCodeAt(0))),c=t.endsWith('\\"""'),a=n.endsWith('"')&&!c,u=n.endsWith("\\"),f=a||u,d=!(e!=null&&e.minimize)&&(!r||n.length>70||f||s||c);let m="";const v=r&&us(n.charCodeAt(0));return(d&&!v||s)&&(m+=`
`),m+=t,(d||f)&&(m+=`
`),'"""'+m+'"""'}var A;(function(n){n.SOF="<SOF>",n.EOF="<EOF>",n.BANG="!",n.DOLLAR="$",n.AMP="&",n.PAREN_L="(",n.PAREN_R=")",n.SPREAD="...",n.COLON=":",n.EQUALS="=",n.AT="@",n.BRACKET_L="[",n.BRACKET_R="]",n.BRACE_L="{",n.PIPE="|",n.BRACE_R="}",n.NAME="Name",n.INT="Int",n.FLOAT="Float",n.STRING="String",n.BLOCK_STRING="BlockString",n.COMMENT="Comment"})(A||(A={}));class oh{constructor(e){const t=new Jc(A.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==A.EOF)do if(e.next)e=e.next;else{const t=ch(this,e.end);e.next=t,t.prev=e,e=t}while(e.kind===A.COMMENT);return e}}function ah(n){return n===A.BANG||n===A.DOLLAR||n===A.AMP||n===A.PAREN_L||n===A.PAREN_R||n===A.SPREAD||n===A.COLON||n===A.EQUALS||n===A.AT||n===A.BRACKET_L||n===A.BRACKET_R||n===A.BRACE_L||n===A.PIPE||n===A.BRACE_R}function jn(n){return n>=0&&n<=55295||n>=57344&&n<=1114111}function nr(n,e){return tl(n.charCodeAt(e))&&nl(n.charCodeAt(e+1))}function tl(n){return n>=55296&&n<=56319}function nl(n){return n>=56320&&n<=57343}function cn(n,e){const t=n.source.body.codePointAt(e);if(t===void 0)return A.EOF;if(t>=32&&t<=126){const i=String.fromCodePoint(t);return i==='"'?`'"'`:`"${i}"`}return"U+"+t.toString(16).toUpperCase().padStart(4,"0")}function qe(n,e,t,i,r){const s=n.line,c=1+t-n.lineStart;return new Jc(e,t,i,s,c,r)}function ch(n,e){const t=n.source.body,i=t.length;let r=e;for(;r<i;){const s=t.charCodeAt(r);switch(s){case 65279:case 9:case 32:case 44:++r;continue;case 10:++r,++n.line,n.lineStart=r;continue;case 13:t.charCodeAt(r+1)===10?r+=2:++r,++n.line,n.lineStart=r;continue;case 35:return lh(n,r);case 33:return qe(n,A.BANG,r,r+1);case 36:return qe(n,A.DOLLAR,r,r+1);case 38:return qe(n,A.AMP,r,r+1);case 40:return qe(n,A.PAREN_L,r,r+1);case 41:return qe(n,A.PAREN_R,r,r+1);case 46:if(t.charCodeAt(r+1)===46&&t.charCodeAt(r+2)===46)return qe(n,A.SPREAD,r,r+3);break;case 58:return qe(n,A.COLON,r,r+1);case 61:return qe(n,A.EQUALS,r,r+1);case 64:return qe(n,A.AT,r,r+1);case 91:return qe(n,A.BRACKET_L,r,r+1);case 93:return qe(n,A.BRACKET_R,r,r+1);case 123:return qe(n,A.BRACE_L,r,r+1);case 124:return qe(n,A.PIPE,r,r+1);case 125:return qe(n,A.BRACE_R,r,r+1);case 34:return t.charCodeAt(r+1)===34&&t.charCodeAt(r+2)===34?vh(n,r):fh(n,r)}if(ii(s)||s===45)return uh(n,r,s);if(el(s))return mh(n,r);throw We(n.source,r,s===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:jn(s)||nr(t,r)?`Unexpected character: ${cn(n,r)}.`:`Invalid character: ${cn(n,r)}.`)}return qe(n,A.EOF,i,i)}function lh(n,e){const t=n.source.body,i=t.length;let r=e+1;for(;r<i;){const s=t.charCodeAt(r);if(s===10||s===13)break;if(jn(s))++r;else if(nr(t,r))r+=2;else break}return qe(n,A.COMMENT,e,r,t.slice(e+1,r))}function uh(n,e,t){const i=n.source.body;let r=e,s=t,c=!1;if(s===45&&(s=i.charCodeAt(++r)),s===48){if(s=i.charCodeAt(++r),ii(s))throw We(n.source,r,`Invalid number, unexpected digit after 0: ${cn(n,r)}.`)}else r=Qr(n,r,s),s=i.charCodeAt(r);if(s===46&&(c=!0,s=i.charCodeAt(++r),r=Qr(n,r,s),s=i.charCodeAt(r)),(s===69||s===101)&&(c=!0,s=i.charCodeAt(++r),(s===43||s===45)&&(s=i.charCodeAt(++r)),r=Qr(n,r,s),s=i.charCodeAt(r)),s===46||el(s))throw We(n.source,r,`Invalid number, expected digit but got: ${cn(n,r)}.`);return qe(n,c?A.FLOAT:A.INT,e,r,i.slice(e,r))}function Qr(n,e,t){if(!ii(t))throw We(n.source,e,`Invalid number, expected digit but got: ${cn(n,e)}.`);const i=n.source.body;let r=e+1;for(;ii(i.charCodeAt(r));)++r;return r}function fh(n,e){const t=n.source.body,i=t.length;let r=e+1,s=r,c="";for(;r<i;){const a=t.charCodeAt(r);if(a===34)return c+=t.slice(s,r),qe(n,A.STRING,e,r+1,c);if(a===92){c+=t.slice(s,r);const u=t.charCodeAt(r+1)===117?t.charCodeAt(r+2)===123?hh(n,r):dh(n,r):ph(n,r);c+=u.value,r+=u.size,s=r;continue}if(a===10||a===13)break;if(jn(a))++r;else if(nr(t,r))r+=2;else throw We(n.source,r,`Invalid character within String: ${cn(n,r)}.`)}throw We(n.source,r,"Unterminated string.")}function hh(n,e){const t=n.source.body;let i=0,r=3;for(;r<12;){const s=t.charCodeAt(e+r++);if(s===125){if(r<5||!jn(i))break;return{value:String.fromCodePoint(i),size:r}}if(i=i<<4|Zn(s),i<0)break}throw We(n.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+r)}".`)}function dh(n,e){const t=n.source.body,i=Wa(t,e+2);if(jn(i))return{value:String.fromCodePoint(i),size:6};if(tl(i)&&t.charCodeAt(e+6)===92&&t.charCodeAt(e+7)===117){const r=Wa(t,e+8);if(nl(r))return{value:String.fromCodePoint(i,r),size:12}}throw We(n.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+6)}".`)}function Wa(n,e){return Zn(n.charCodeAt(e))<<12|Zn(n.charCodeAt(e+1))<<8|Zn(n.charCodeAt(e+2))<<4|Zn(n.charCodeAt(e+3))}function Zn(n){return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:-1}function ph(n,e){const t=n.source.body;switch(t.charCodeAt(e+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw We(n.source,e,`Invalid character escape sequence: "${t.slice(e,e+2)}".`)}function vh(n,e){const t=n.source.body,i=t.length;let r=n.lineStart,s=e+3,c=s,a="";const u=[];for(;s<i;){const f=t.charCodeAt(s);if(f===34&&t.charCodeAt(s+1)===34&&t.charCodeAt(s+2)===34){a+=t.slice(c,s),u.push(a);const d=qe(n,A.BLOCK_STRING,e,s+3,ih(u).join(`
`));return n.line+=u.length-1,n.lineStart=r,d}if(f===92&&t.charCodeAt(s+1)===34&&t.charCodeAt(s+2)===34&&t.charCodeAt(s+3)===34){a+=t.slice(c,s),c=s+1,s+=4;continue}if(f===10||f===13){a+=t.slice(c,s),u.push(a),f===13&&t.charCodeAt(s+1)===10?s+=2:++s,a="",c=s,r=s;continue}if(jn(f))++s;else if(nr(t,s))s+=2;else throw We(n.source,s,`Invalid character within String: ${cn(n,s)}.`)}throw We(n.source,s,"Unterminated string.")}function mh(n,e){const t=n.source.body,i=t.length;let r=e+1;for(;r<i;){const s=t.charCodeAt(r);if(nh(s))++r;else break}return qe(n,A.NAME,e,r,t.slice(e,r))}const gh=10,il=2;function rl(n){return ir(n,[])}function ir(n,e){switch(typeof n){case"string":return JSON.stringify(n);case"function":return n.name?`[function ${n.name}]`:"[function]";case"object":return yh(n,e);default:return String(n)}}function yh(n,e){if(n===null)return"null";if(e.includes(n))return"[Circular]";const t=[...e,n];if(bh(n)){const i=n.toJSON();if(i!==n)return typeof i=="string"?i:ir(i,t)}else if(Array.isArray(n))return wh(n,t);return _h(n,t)}function bh(n){return typeof n.toJSON=="function"}function _h(n,e){const t=Object.entries(n);return t.length===0?"{}":e.length>il?"["+Eh(n)+"]":"{ "+t.map(([r,s])=>r+": "+ir(s,e)).join(", ")+" }"}function wh(n,e){if(n.length===0)return"[]";if(e.length>il)return"[Array]";const t=Math.min(gh,n.length),i=n.length-t,r=[];for(let s=0;s<t;++s)r.push(ir(n[s],e));return i===1?r.push("... 1 more item"):i>1&&r.push(`... ${i} more items`),"["+r.join(", ")+"]"}function Eh(n){const e=Object.prototype.toString.call(n).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof n.constructor=="function"){const t=n.constructor.name;if(typeof t=="string"&&t!=="")return t}return e}const xh=function(e,t){return e instanceof t};class qs{constructor(e,t="GraphQL request",i={line:1,column:1}){typeof e=="string"||qi(!1,`Body must be a string. Received: ${rl(e)}.`),this.body=e,this.name=t,this.locationOffset=i,this.locationOffset.line>0||qi(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||qi(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function Th(n){return xh(n,qs)}function kh(n,e){return new Ph(n,e).parseDocument()}class Ph{constructor(e,t={}){const i=Th(e)?e:new qs(e);this._lexer=new oh(i),this._options=t,this._tokenCounter=0}parseName(){const e=this.expectToken(A.NAME);return this.node(e,{kind:W.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:W.DOCUMENT,definitions:this.many(A.SOF,this.parseDefinition,A.EOF)})}parseDefinition(){if(this.peek(A.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===A.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw We(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(A.BRACE_L))return this.node(e,{kind:W.OPERATION_DEFINITION,operation:On.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const t=this.parseOperationType();let i;return this.peek(A.NAME)&&(i=this.parseName()),this.node(e,{kind:W.OPERATION_DEFINITION,operation:t,name:i,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(A.NAME);switch(e.value){case"query":return On.QUERY;case"mutation":return On.MUTATION;case"subscription":return On.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(A.PAREN_L,this.parseVariableDefinition,A.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:W.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(A.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(A.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(A.DOLLAR),this.node(e,{kind:W.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:W.SELECTION_SET,selections:this.many(A.BRACE_L,this.parseSelection,A.BRACE_R)})}parseSelection(){return this.peek(A.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,t=this.parseName();let i,r;return this.expectOptionalToken(A.COLON)?(i=t,r=this.parseName()):r=t,this.node(e,{kind:W.FIELD,alias:i,name:r,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(A.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(A.PAREN_L,t,A.PAREN_R)}parseArgument(e=!1){const t=this._lexer.token,i=this.parseName();return this.expectToken(A.COLON),this.node(t,{kind:W.ARGUMENT,name:i,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(A.SPREAD);const t=this.expectOptionalKeyword("on");return!t&&this.peek(A.NAME)?this.node(e,{kind:W.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:W.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(e,{kind:W.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:W.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(e){const t=this._lexer.token;switch(t.kind){case A.BRACKET_L:return this.parseList(e);case A.BRACE_L:return this.parseObject(e);case A.INT:return this.advanceLexer(),this.node(t,{kind:W.INT,value:t.value});case A.FLOAT:return this.advanceLexer(),this.node(t,{kind:W.FLOAT,value:t.value});case A.STRING:case A.BLOCK_STRING:return this.parseStringLiteral();case A.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:W.BOOLEAN,value:!0});case"false":return this.node(t,{kind:W.BOOLEAN,value:!1});case"null":return this.node(t,{kind:W.NULL});default:return this.node(t,{kind:W.ENUM,value:t.value})}case A.DOLLAR:if(e)if(this.expectToken(A.DOLLAR),this._lexer.token.kind===A.NAME){const i=this._lexer.token.value;throw We(this._lexer.source,t.start,`Unexpected variable "$${i}" in constant value.`)}else throw this.unexpected(t);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:W.STRING,value:e.value,block:e.kind===A.BLOCK_STRING})}parseList(e){const t=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:W.LIST,values:this.any(A.BRACKET_L,t,A.BRACKET_R)})}parseObject(e){const t=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:W.OBJECT,fields:this.any(A.BRACE_L,t,A.BRACE_R)})}parseObjectField(e){const t=this._lexer.token,i=this.parseName();return this.expectToken(A.COLON),this.node(t,{kind:W.OBJECT_FIELD,name:i,value:this.parseValueLiteral(e)})}parseDirectives(e){const t=[];for(;this.peek(A.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const t=this._lexer.token;return this.expectToken(A.AT),this.node(t,{kind:W.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let t;if(this.expectOptionalToken(A.BRACKET_L)){const i=this.parseTypeReference();this.expectToken(A.BRACKET_R),t=this.node(e,{kind:W.LIST_TYPE,type:i})}else t=this.parseNamedType();return this.expectOptionalToken(A.BANG)?this.node(e,{kind:W.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:W.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(A.STRING)||this.peek(A.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");const i=this.parseConstDirectives(),r=this.many(A.BRACE_L,this.parseOperationTypeDefinition,A.BRACE_R);return this.node(e,{kind:W.SCHEMA_DEFINITION,description:t,directives:i,operationTypes:r})}parseOperationTypeDefinition(){const e=this._lexer.token,t=this.parseOperationType();this.expectToken(A.COLON);const i=this.parseNamedType();return this.node(e,{kind:W.OPERATION_TYPE_DEFINITION,operation:t,type:i})}parseScalarTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");const i=this.parseName(),r=this.parseConstDirectives();return this.node(e,{kind:W.SCALAR_TYPE_DEFINITION,description:t,name:i,directives:r})}parseObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");const i=this.parseName(),r=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),c=this.parseFieldsDefinition();return this.node(e,{kind:W.OBJECT_TYPE_DEFINITION,description:t,name:i,interfaces:r,directives:s,fields:c})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(A.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(A.BRACE_L,this.parseFieldDefinition,A.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,t=this.parseDescription(),i=this.parseName(),r=this.parseArgumentDefs();this.expectToken(A.COLON);const s=this.parseTypeReference(),c=this.parseConstDirectives();return this.node(e,{kind:W.FIELD_DEFINITION,description:t,name:i,arguments:r,type:s,directives:c})}parseArgumentDefs(){return this.optionalMany(A.PAREN_L,this.parseInputValueDef,A.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,t=this.parseDescription(),i=this.parseName();this.expectToken(A.COLON);const r=this.parseTypeReference();let s;this.expectOptionalToken(A.EQUALS)&&(s=this.parseConstValueLiteral());const c=this.parseConstDirectives();return this.node(e,{kind:W.INPUT_VALUE_DEFINITION,description:t,name:i,type:r,defaultValue:s,directives:c})}parseInterfaceTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");const i=this.parseName(),r=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),c=this.parseFieldsDefinition();return this.node(e,{kind:W.INTERFACE_TYPE_DEFINITION,description:t,name:i,interfaces:r,directives:s,fields:c})}parseUnionTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");const i=this.parseName(),r=this.parseConstDirectives(),s=this.parseUnionMemberTypes();return this.node(e,{kind:W.UNION_TYPE_DEFINITION,description:t,name:i,directives:r,types:s})}parseUnionMemberTypes(){return this.expectOptionalToken(A.EQUALS)?this.delimitedMany(A.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");const i=this.parseName(),r=this.parseConstDirectives(),s=this.parseEnumValuesDefinition();return this.node(e,{kind:W.ENUM_TYPE_DEFINITION,description:t,name:i,directives:r,values:s})}parseEnumValuesDefinition(){return this.optionalMany(A.BRACE_L,this.parseEnumValueDefinition,A.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,t=this.parseDescription(),i=this.parseEnumValueName(),r=this.parseConstDirectives();return this.node(e,{kind:W.ENUM_VALUE_DEFINITION,description:t,name:i,directives:r})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw We(this._lexer.source,this._lexer.token.start,`${Ri(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");const i=this.parseName(),r=this.parseConstDirectives(),s=this.parseInputFieldsDefinition();return this.node(e,{kind:W.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:i,directives:r,fields:s})}parseInputFieldsDefinition(){return this.optionalMany(A.BRACE_L,this.parseInputValueDef,A.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===A.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const t=this.parseConstDirectives(),i=this.optionalMany(A.BRACE_L,this.parseOperationTypeDefinition,A.BRACE_R);if(t.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:W.SCHEMA_EXTENSION,directives:t,operationTypes:i})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const t=this.parseName(),i=this.parseConstDirectives();if(i.length===0)throw this.unexpected();return this.node(e,{kind:W.SCALAR_TYPE_EXTENSION,name:t,directives:i})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const t=this.parseName(),i=this.parseImplementsInterfaces(),r=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(i.length===0&&r.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:W.OBJECT_TYPE_EXTENSION,name:t,interfaces:i,directives:r,fields:s})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const t=this.parseName(),i=this.parseImplementsInterfaces(),r=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(i.length===0&&r.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:W.INTERFACE_TYPE_EXTENSION,name:t,interfaces:i,directives:r,fields:s})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const t=this.parseName(),i=this.parseConstDirectives(),r=this.parseUnionMemberTypes();if(i.length===0&&r.length===0)throw this.unexpected();return this.node(e,{kind:W.UNION_TYPE_EXTENSION,name:t,directives:i,types:r})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const t=this.parseName(),i=this.parseConstDirectives(),r=this.parseEnumValuesDefinition();if(i.length===0&&r.length===0)throw this.unexpected();return this.node(e,{kind:W.ENUM_TYPE_EXTENSION,name:t,directives:i,values:r})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const t=this.parseName(),i=this.parseConstDirectives(),r=this.parseInputFieldsDefinition();if(i.length===0&&r.length===0)throw this.unexpected();return this.node(e,{kind:W.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:i,fields:r})}parseDirectiveDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(A.AT);const i=this.parseName(),r=this.parseArgumentDefs(),s=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const c=this.parseDirectiveLocations();return this.node(e,{kind:W.DIRECTIVE_DEFINITION,description:t,name:i,arguments:r,repeatable:s,locations:c})}parseDirectiveLocations(){return this.delimitedMany(A.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(ls,t.value))return t;throw this.unexpected(e)}node(e,t){return this._options.noLocation!==!0&&(t.loc=new eh(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){const t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw We(this._lexer.source,t.start,`Expected ${sl(e)}, found ${Ri(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e?(this.advanceLexer(),!0):!1}expectKeyword(e){const t=this._lexer.token;if(t.kind===A.NAME&&t.value===e)this.advanceLexer();else throw We(this._lexer.source,t.start,`Expected "${e}", found ${Ri(t)}.`)}expectOptionalKeyword(e){const t=this._lexer.token;return t.kind===A.NAME&&t.value===e?(this.advanceLexer(),!0):!1}unexpected(e){const t=e??this._lexer.token;return We(this._lexer.source,t.start,`Unexpected ${Ri(t)}.`)}any(e,t,i){this.expectToken(e);const r=[];for(;!this.expectOptionalToken(i);)r.push(t.call(this));return r}optionalMany(e,t,i){if(this.expectOptionalToken(e)){const r=[];do r.push(t.call(this));while(!this.expectOptionalToken(i));return r}return[]}many(e,t,i){this.expectToken(e);const r=[];do r.push(t.call(this));while(!this.expectOptionalToken(i));return r}delimitedMany(e,t){this.expectOptionalToken(e);const i=[];do i.push(t.call(this));while(this.expectOptionalToken(e));return i}advanceLexer(){const{maxTokens:e}=this._options,t=this._lexer.advance();if(e!==void 0&&t.kind!==A.EOF&&(++this._tokenCounter,this._tokenCounter>e))throw We(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function Ri(n){const e=n.value;return sl(n.kind)+(e!=null?` "${e}"`:"")}function sl(n){return ah(n)?`"${n}"`:n}function Ih(n){return`"${n.replace(Sh,Oh)}"`}const Sh=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function Oh(n){return Ch[n.charCodeAt(0)]}const Ch=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],Bs=Object.freeze({});function Dt(n,e,t=Xc){const i=new Map;for(const O of Object.values(W))i.set(O,Ah(e,O));let r,s=Array.isArray(n),c=[n],a=-1,u=[],f=n,d,m;const v=[],g=[];do{a++;const O=a===c.length,E=O&&u.length!==0;if(O){if(d=g.length===0?void 0:v[v.length-1],f=m,m=g.pop(),E)if(s){f=f.slice();let I=0;for(const[N,L]of u){const q=N-I;L===null?(f.splice(q,1),I++):f[q]=L}}else{f=Object.defineProperties({},Object.getOwnPropertyDescriptors(f));for(const[I,N]of u)f[I]=N}a=r.index,c=r.keys,u=r.edits,s=r.inArray,r=r.prev}else if(m){if(d=s?a:c[a],f=m[d],f==null)continue;v.push(d)}let P;if(!Array.isArray(f)){var w,b;za(f)||qi(!1,`Invalid AST Node: ${rl(f)}.`);const I=O?(w=i.get(f.kind))===null||w===void 0?void 0:w.leave:(b=i.get(f.kind))===null||b===void 0?void 0:b.enter;if(P=I?.call(e,f,d,m,v,g),P===Bs)break;if(P===!1){if(!O){v.pop();continue}}else if(P!==void 0&&(u.push([d,P]),!O))if(za(P))f=P;else{v.pop();continue}}if(P===void 0&&E&&u.push([d,f]),O)v.pop();else{var x;r={inArray:s,index:a,keys:c,edits:u,prev:r},s=Array.isArray(f),c=s?f:(x=t[f.kind])!==null&&x!==void 0?x:[],a=-1,u=[],m&&g.push(m),m=f}}while(r!==void 0);return u.length!==0?u[u.length-1][1]:n}function Ah(n,e){const t=n[e];return typeof t=="object"?t:typeof t=="function"?{enter:t,leave:void 0}:{enter:n.enter,leave:n.leave}}function Dh(n){return Dt(n,Lh)}const Nh=80,Lh={Name:{leave:n=>n.value},Variable:{leave:n=>"$"+n.name},Document:{leave:n=>H(n.definitions,`

`)},OperationDefinition:{leave(n){const e=fe("(",H(n.variableDefinitions,", "),")"),t=H([n.operation,H([n.name,e]),H(n.directives," ")]," ");return(t==="query"?"":t+" ")+n.selectionSet}},VariableDefinition:{leave:({variable:n,type:e,defaultValue:t,directives:i})=>n+": "+e+fe(" = ",t)+fe(" ",H(i," "))},SelectionSet:{leave:({selections:n})=>yt(n)},Field:{leave({alias:n,name:e,arguments:t,directives:i,selectionSet:r}){const s=fe("",n,": ")+e;let c=s+fe("(",H(t,", "),")");return c.length>Nh&&(c=s+fe(`(
`,Bi(H(t,`
`)),`
)`)),H([c,H(i," "),r]," ")}},Argument:{leave:({name:n,value:e})=>n+": "+e},FragmentSpread:{leave:({name:n,directives:e})=>"..."+n+fe(" ",H(e," "))},InlineFragment:{leave:({typeCondition:n,directives:e,selectionSet:t})=>H(["...",fe("on ",n),H(e," "),t]," ")},FragmentDefinition:{leave:({name:n,typeCondition:e,variableDefinitions:t,directives:i,selectionSet:r})=>`fragment ${n}${fe("(",H(t,", "),")")} on ${e} ${fe("",H(i," ")," ")}`+r},IntValue:{leave:({value:n})=>n},FloatValue:{leave:({value:n})=>n},StringValue:{leave:({value:n,block:e})=>e?sh(n):Ih(n)},BooleanValue:{leave:({value:n})=>n?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:n})=>n},ListValue:{leave:({values:n})=>"["+H(n,", ")+"]"},ObjectValue:{leave:({fields:n})=>"{"+H(n,", ")+"}"},ObjectField:{leave:({name:n,value:e})=>n+": "+e},Directive:{leave:({name:n,arguments:e})=>"@"+n+fe("(",H(e,", "),")")},NamedType:{leave:({name:n})=>n},ListType:{leave:({type:n})=>"["+n+"]"},NonNullType:{leave:({type:n})=>n+"!"},SchemaDefinition:{leave:({description:n,directives:e,operationTypes:t})=>fe("",n,`
`)+H(["schema",H(e," "),yt(t)]," ")},OperationTypeDefinition:{leave:({operation:n,type:e})=>n+": "+e},ScalarTypeDefinition:{leave:({description:n,name:e,directives:t})=>fe("",n,`
`)+H(["scalar",e,H(t," ")]," ")},ObjectTypeDefinition:{leave:({description:n,name:e,interfaces:t,directives:i,fields:r})=>fe("",n,`
`)+H(["type",e,fe("implements ",H(t," & ")),H(i," "),yt(r)]," ")},FieldDefinition:{leave:({description:n,name:e,arguments:t,type:i,directives:r})=>fe("",n,`
`)+e+(Ga(t)?fe(`(
`,Bi(H(t,`
`)),`
)`):fe("(",H(t,", "),")"))+": "+i+fe(" ",H(r," "))},InputValueDefinition:{leave:({description:n,name:e,type:t,defaultValue:i,directives:r})=>fe("",n,`
`)+H([e+": "+t,fe("= ",i),H(r," ")]," ")},InterfaceTypeDefinition:{leave:({description:n,name:e,interfaces:t,directives:i,fields:r})=>fe("",n,`
`)+H(["interface",e,fe("implements ",H(t," & ")),H(i," "),yt(r)]," ")},UnionTypeDefinition:{leave:({description:n,name:e,directives:t,types:i})=>fe("",n,`
`)+H(["union",e,H(t," "),fe("= ",H(i," | "))]," ")},EnumTypeDefinition:{leave:({description:n,name:e,directives:t,values:i})=>fe("",n,`
`)+H(["enum",e,H(t," "),yt(i)]," ")},EnumValueDefinition:{leave:({description:n,name:e,directives:t})=>fe("",n,`
`)+H([e,H(t," ")]," ")},InputObjectTypeDefinition:{leave:({description:n,name:e,directives:t,fields:i})=>fe("",n,`
`)+H(["input",e,H(t," "),yt(i)]," ")},DirectiveDefinition:{leave:({description:n,name:e,arguments:t,repeatable:i,locations:r})=>fe("",n,`
`)+"directive @"+e+(Ga(t)?fe(`(
`,Bi(H(t,`
`)),`
)`):fe("(",H(t,", "),")"))+(i?" repeatable":"")+" on "+H(r," | ")},SchemaExtension:{leave:({directives:n,operationTypes:e})=>H(["extend schema",H(n," "),yt(e)]," ")},ScalarTypeExtension:{leave:({name:n,directives:e})=>H(["extend scalar",n,H(e," ")]," ")},ObjectTypeExtension:{leave:({name:n,interfaces:e,directives:t,fields:i})=>H(["extend type",n,fe("implements ",H(e," & ")),H(t," "),yt(i)]," ")},InterfaceTypeExtension:{leave:({name:n,interfaces:e,directives:t,fields:i})=>H(["extend interface",n,fe("implements ",H(e," & ")),H(t," "),yt(i)]," ")},UnionTypeExtension:{leave:({name:n,directives:e,types:t})=>H(["extend union",n,H(e," "),fe("= ",H(t," | "))]," ")},EnumTypeExtension:{leave:({name:n,directives:e,values:t})=>H(["extend enum",n,H(e," "),yt(t)]," ")},InputObjectTypeExtension:{leave:({name:n,directives:e,fields:t})=>H(["extend input",n,H(e," "),yt(t)]," ")}};function H(n,e=""){var t;return(t=n?.filter(i=>i).join(e))!==null&&t!==void 0?t:""}function yt(n){return fe(`{
`,Bi(H(n,`
`)),`
}`)}function fe(n,e,t=""){return e!=null&&e!==""?n+e+t:""}function Bi(n){return fe("  ",n.replace(/\n/g,`
  `))}function Ga(n){var e;return(e=n?.some(t=>t.includes(`
`)))!==null&&e!==void 0?e:!1}function Ha(n){return n.kind===W.FIELD||n.kind===W.FRAGMENT_SPREAD||n.kind===W.INLINE_FRAGMENT}function Rh(){return Va()}function Mh(){__DEV__?$(typeof Vr=="boolean",Vr):$(typeof Vr=="boolean",39)}Rh();Mh();function rr(n,e){var t=n.directives;return!t||!t.length?!0:Bh(t).every(function(i){var r=i.directive,s=i.ifArgument,c=!1;return s.value.kind==="Variable"?(c=e&&e[s.value.name.value],__DEV__?$(c!==void 0,"Invalid variable referenced in @".concat(r.name.value," directive.")):$(c!==void 0,40)):c=s.value.value,r.name.value==="skip"?!c:c})}function js(n,e,t){var i=new Set(n),r=i.size;return Dt(e,{Directive:function(s){if(i.delete(s.name.value)&&(!t||!i.size))return Bs}}),t?!i.size:i.size<r}function Fh(n){return n&&js(["client","export"],n,!0)}function qh(n){var e=n.name.value;return e==="skip"||e==="include"}function Bh(n){var e=[];return n&&n.length&&n.forEach(function(t){if(!!qh(t)){var i=t.arguments,r=t.name.value;__DEV__?$(i&&i.length===1,"Incorrect number of arguments for the @".concat(r," directive.")):$(i&&i.length===1,41);var s=i[0];__DEV__?$(s.name&&s.name.value==="if","Invalid argument for the @".concat(r," directive.")):$(s.name&&s.name.value==="if",42);var c=s.value;__DEV__?$(c&&(c.kind==="Variable"||c.kind==="BooleanValue"),"Argument for the @".concat(r," directive must be a variable or a boolean value.")):$(c&&(c.kind==="Variable"||c.kind==="BooleanValue"),43),e.push({directive:t,ifArgument:s})}}),e}function jh(n,e){var t=e,i=[];n.definitions.forEach(function(s){if(s.kind==="OperationDefinition")throw __DEV__?new me("Found a ".concat(s.operation," operation").concat(s.name?" named '".concat(s.name.value,"'"):"",". ")+"No operations are allowed when using a fragment as a query. Only fragments are allowed."):new me(44);s.kind==="FragmentDefinition"&&i.push(s)}),typeof t>"u"&&(__DEV__?$(i.length===1,"Found ".concat(i.length," fragments. `fragmentName` must be provided when there is not exactly 1 fragment.")):$(i.length===1,45),t=i[0].name.value);var r=k(k({},n),{definitions:on([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:t}}]}}],n.definitions,!0)});return r}function $s(n){n===void 0&&(n=[]);var e={};return n.forEach(function(t){e[t.name.value]=t}),e}function Vs(n,e){switch(n.kind){case"InlineFragment":return n;case"FragmentSpread":{var t=n.name.value;if(typeof e=="function")return e(t);var i=e&&e[t];return __DEV__?$(i,"No fragment named ".concat(t)):$(i,46),i||null}default:return null}}function Le(n){return n!==null&&typeof n=="object"}function Nn(n){return{__ref:String(n)}}function _e(n){return Boolean(n&&typeof n=="object"&&typeof n.__ref=="string")}function $h(n){return Le(n)&&n.kind==="Document"&&Array.isArray(n.definitions)}function Vh(n){return n.kind==="StringValue"}function Qh(n){return n.kind==="BooleanValue"}function Uh(n){return n.kind==="IntValue"}function zh(n){return n.kind==="FloatValue"}function Wh(n){return n.kind==="Variable"}function Gh(n){return n.kind==="ObjectValue"}function Hh(n){return n.kind==="ListValue"}function Kh(n){return n.kind==="EnumValue"}function Yh(n){return n.kind==="NullValue"}function Fn(n,e,t,i){if(Uh(t)||zh(t))n[e.value]=Number(t.value);else if(Qh(t)||Vh(t))n[e.value]=t.value;else if(Gh(t)){var r={};t.fields.map(function(c){return Fn(r,c.name,c.value,i)}),n[e.value]=r}else if(Wh(t)){var s=(i||{})[t.name.value];n[e.value]=s}else if(Hh(t))n[e.value]=t.values.map(function(c){var a={};return Fn(a,e,c,i),a[e.value]});else if(Kh(t))n[e.value]=t.value;else if(Yh(t))n[e.value]=null;else throw __DEV__?new me('The inline argument "'.concat(e.value,'" of kind "').concat(t.kind,'"')+"is not supported. Use variables instead of inline arguments to overcome this limitation."):new me(55)}function Jh(n,e){var t=null;n.directives&&(t={},n.directives.forEach(function(r){t[r.name.value]={},r.arguments&&r.arguments.forEach(function(s){var c=s.name,a=s.value;return Fn(t[r.name.value],c,a,e)})}));var i=null;return n.arguments&&n.arguments.length&&(i={},n.arguments.forEach(function(r){var s=r.name,c=r.value;return Fn(i,s,c,e)})),Qs(n.name.value,i,t)}var Xh=["connection","include","skip","client","rest","export"],Qs=Object.assign(function(n,e,t){if(e&&t&&t.connection&&t.connection.key)if(t.connection.filter&&t.connection.filter.length>0){var i=t.connection.filter?t.connection.filter:[];i.sort();var r={};return i.forEach(function(a){r[a]=e[a]}),"".concat(t.connection.key,"(").concat(Hn(r),")")}else return t.connection.key;var s=n;if(e){var c=Hn(e);s+="(".concat(c,")")}return t&&Object.keys(t).forEach(function(a){Xh.indexOf(a)===-1&&(t[a]&&Object.keys(t[a]).length?s+="@".concat(a,"(").concat(Hn(t[a]),")"):s+="@".concat(a))}),s},{setStringify:function(n){var e=Hn;return Hn=n,e}}),Hn=function(e){return JSON.stringify(e,Zh)};function Zh(n,e){return Le(e)&&!Array.isArray(e)&&(e=Object.keys(e).sort().reduce(function(t,i){return t[i]=e[i],t},{})),e}function sr(n,e){if(n.arguments&&n.arguments.length){var t={};return n.arguments.forEach(function(i){var r=i.name,s=i.value;return Fn(t,r,s,e)}),t}return null}function ln(n){return n.alias?n.alias.value:n.name.value}function fs(n,e,t){if(typeof n.__typename=="string")return n.__typename;for(var i=0,r=e.selections;i<r.length;i++){var s=r[i];if(un(s)){if(s.name.value==="__typename")return n[ln(s)]}else{var c=fs(n,Vs(s,t).selectionSet,t);if(typeof c=="string")return c}}}function un(n){return n.kind==="Field"}function ed(n){return n.kind==="InlineFragment"}function or(n){__DEV__?$(n&&n.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):$(n&&n.kind==="Document",47);var e=n.definitions.filter(function(t){return t.kind!=="FragmentDefinition"}).map(function(t){if(t.kind!=="OperationDefinition")throw __DEV__?new me('Schema type definitions not allowed in queries. Found: "'.concat(t.kind,'"')):new me(48);return t});return __DEV__?$(e.length<=1,"Ambiguous GraphQL document: contains ".concat(e.length," operations")):$(e.length<=1,49),n}function ui(n){return or(n),n.definitions.filter(function(e){return e.kind==="OperationDefinition"})[0]}function hs(n){return n.definitions.filter(function(e){return e.kind==="OperationDefinition"&&!!e.name}).map(function(e){return e.name.value})[0]||null}function Us(n){return n.definitions.filter(function(e){return e.kind==="FragmentDefinition"})}function ol(n){var e=ui(n);return __DEV__?$(e&&e.operation==="query","Must contain a query definition."):$(e&&e.operation==="query",50),e}function td(n){__DEV__?$(n.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):$(n.kind==="Document",51),__DEV__?$(n.definitions.length<=1,"Fragment must have exactly one definition."):$(n.definitions.length<=1,52);var e=n.definitions[0];return __DEV__?$(e.kind==="FragmentDefinition","Must be a fragment definition."):$(e.kind==="FragmentDefinition",53),e}function ar(n){or(n);for(var e,t=0,i=n.definitions;t<i.length;t++){var r=i[t];if(r.kind==="OperationDefinition"){var s=r.operation;if(s==="query"||s==="mutation"||s==="subscription")return r}r.kind==="FragmentDefinition"&&!e&&(e=r)}if(e)return e;throw __DEV__?new me("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment."):new me(54)}function zs(n){var e=Object.create(null),t=n&&n.variableDefinitions;return t&&t.length&&t.forEach(function(i){i.defaultValue&&Fn(e,i.variable.name,i.defaultValue)}),e}var Me=Array.isArray;function It(n){return Array.isArray(n)&&n.length>0}var Ka={kind:W.FIELD,name:{kind:W.NAME,value:"__typename"}};function al(n,e){return!n||n.selectionSet.selections.every(function(t){return t.kind===W.FRAGMENT_SPREAD&&al(e[t.name.value],e)})}function nd(n){return al(ui(n)||td(n),$s(Us(n)))?null:n}function id(n){var e=new Set,t=[];return n.forEach(function(i){i.name?e.add(i.name):i.test&&t.push(i.test)}),function(i){return e.has(i.name.value)||t.some(function(r){return r(i)})}}function Ya(n){var e=new Map;return function(i){i===void 0&&(i=n);var r=e.get(i);return r||e.set(i,r={variables:new Set,fragmentSpreads:new Set}),r}}function cl(n,e){for(var t=Ya(""),i=Ya(""),r=function(E){for(var P=0,I=void 0;P<E.length&&(I=E[P]);++P)if(!Me(I)){if(I.kind===W.OPERATION_DEFINITION)return t(I.name&&I.name.value);if(I.kind===W.FRAGMENT_DEFINITION)return i(I.name.value)}return __DEV__&&$.error("Could not find operation or fragment"),null},s=0,c=e.definitions.length-1;c>=0;--c)e.definitions[c].kind===W.OPERATION_DEFINITION&&++s;var a=id(n),u=n.some(function(E){return E.remove}),f=function(E){return u&&E&&E.some(a)},d=new Map,m=!1,v={enter:function(E){if(f(E.directives))return m=!0,null}},g=Dt(e,{Field:v,InlineFragment:v,VariableDefinition:{enter:function(){return!1}},Variable:{enter:function(E,P,I,N,L){var q=r(L);q&&q.variables.add(E.name.value)}},FragmentSpread:{enter:function(E,P,I,N,L){if(f(E.directives))return m=!0,null;var q=r(L);q&&q.fragmentSpreads.add(E.name.value)}},FragmentDefinition:{enter:function(E,P,I,N){d.set(JSON.stringify(N),E)},leave:function(E,P,I,N){var L=d.get(JSON.stringify(N));if(E===L)return E;if(s>0&&E.selectionSet.selections.every(function(q){return q.kind===W.FIELD&&q.name.value==="__typename"}))return i(E.name.value).removed=!0,m=!0,null}},Directive:{leave:function(E){if(a(E))return m=!0,null}}});if(!m)return e;var w=function(E){return E.transitiveVars||(E.transitiveVars=new Set(E.variables),E.removed||E.fragmentSpreads.forEach(function(P){w(i(P)).transitiveVars.forEach(function(I){E.transitiveVars.add(I)})})),E},b=new Set;g.definitions.forEach(function(E){E.kind===W.OPERATION_DEFINITION?w(t(E.name&&E.name.value)).fragmentSpreads.forEach(function(P){b.add(P)}):E.kind===W.FRAGMENT_DEFINITION&&s===0&&!i(E.name.value).removed&&b.add(E.name.value)}),b.forEach(function(E){w(i(E)).fragmentSpreads.forEach(function(P){b.add(P)})});var x=function(E){return!!(!b.has(E)||i(E).removed)},O={enter:function(E){if(x(E.name.value))return null}};return nd(Dt(g,{FragmentSpread:O,FragmentDefinition:O,OperationDefinition:{leave:function(E){if(E.variableDefinitions){var P=w(t(E.name&&E.name.value)).transitiveVars;if(P.size<E.variableDefinitions.length)return k(k({},E),{variableDefinitions:E.variableDefinitions.filter(function(I){return P.has(I.variable.name.value)})})}}}}))}var Ws=Object.assign(function(n){return Dt(n,{SelectionSet:{enter:function(e,t,i){if(!(i&&i.kind===W.OPERATION_DEFINITION)){var r=e.selections;if(!!r){var s=r.some(function(a){return un(a)&&(a.name.value==="__typename"||a.name.value.lastIndexOf("__",0)===0)});if(!s){var c=i;if(!(un(c)&&c.directives&&c.directives.some(function(a){return a.name.value==="export"})))return k(k({},e),{selections:on(on([],r,!0),[Ka],!1)})}}}}}})},{added:function(n){return n===Ka}}),rd={test:function(n){var e=n.name.value==="connection";return e&&(!n.arguments||!n.arguments.some(function(t){return t.name.value==="key"}))&&__DEV__&&$.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key."),e}};function sd(n){return cl([rd],or(n))}function od(n){var e=ar(n),t=e.operation;if(t==="query")return n;var i=Dt(n,{OperationDefinition:{enter:function(r){return k(k({},r),{operation:"query"})}}});return i}function ad(n){or(n);var e=cl([{test:function(t){return t.name.value==="client"},remove:!0}],n);return e}var cd=Object.prototype.hasOwnProperty;function Ja(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return Gs(n)}function Gs(n){var e=n[0]||{},t=n.length;if(t>1)for(var i=new Vt,r=1;r<t;++r)e=i.merge(e,n[r]);return e}var ld=function(n,e,t){return this.merge(n[t],e[t])},Vt=function(){function n(e){e===void 0&&(e=ld),this.reconciler=e,this.isObject=Le,this.pastCopies=new Set}return n.prototype.merge=function(e,t){for(var i=this,r=[],s=2;s<arguments.length;s++)r[s-2]=arguments[s];return Le(t)&&Le(e)?(Object.keys(t).forEach(function(c){if(cd.call(e,c)){var a=e[c];if(t[c]!==a){var u=i.reconciler.apply(i,on([e,t,c],r,!1));u!==a&&(e=i.shallowCopyForMerge(e),e[c]=u)}}else e=i.shallowCopyForMerge(e),e[c]=t[c]}),e):t},n.prototype.shallowCopyForMerge=function(e){return Le(e)&&(this.pastCopies.has(e)||(Array.isArray(e)?e=e.slice(0):e=k({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e))),e},n}();function ud(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=fd(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var i=0;return function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fd(n,e){if(!!n){if(typeof n=="string")return Xa(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Xa(n,e)}}function Xa(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function Za(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Hs(n,e,t){return e&&Za(n.prototype,e),t&&Za(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}var Ks=function(){return typeof Symbol=="function"},Ys=function(n){return Ks()&&Boolean(Symbol[n])},Js=function(n){return Ys(n)?Symbol[n]:"@@"+n};Ks()&&!Ys("observable")&&(Symbol.observable=Symbol("observable"));var hd=Js("iterator"),ds=Js("observable"),ll=Js("species");function Yi(n,e){var t=n[e];if(t!=null){if(typeof t!="function")throw new TypeError(t+" is not a function");return t}}function Kn(n){var e=n.constructor;return e!==void 0&&(e=e[ll],e===null&&(e=void 0)),e!==void 0?e:De}function dd(n){return n instanceof De}function qn(n){qn.log?qn.log(n):setTimeout(function(){throw n})}function ji(n){Promise.resolve().then(function(){try{n()}catch(e){qn(e)}})}function ul(n){var e=n._cleanup;if(e!==void 0&&(n._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{var t=Yi(e,"unsubscribe");t&&t.call(e)}}catch(i){qn(i)}}function ps(n){n._observer=void 0,n._queue=void 0,n._state="closed"}function pd(n){var e=n._queue;if(!!e){n._queue=void 0,n._state="ready";for(var t=0;t<e.length&&(fl(n,e[t].type,e[t].value),n._state!=="closed");++t);}}function fl(n,e,t){n._state="running";var i=n._observer;try{var r=Yi(i,e);switch(e){case"next":r&&r.call(i,t);break;case"error":if(ps(n),r)r.call(i,t);else throw t;break;case"complete":ps(n),r&&r.call(i);break}}catch(s){qn(s)}n._state==="closed"?ul(n):n._state==="running"&&(n._state="ready")}function Ur(n,e,t){if(n._state!=="closed"){if(n._state==="buffering"){n._queue.push({type:e,value:t});return}if(n._state!=="ready"){n._state="buffering",n._queue=[{type:e,value:t}],ji(function(){return pd(n)});return}fl(n,e,t)}}var vd=function(){function n(t,i){this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var r=new md(this);try{this._cleanup=i.call(void 0,r)}catch(s){r.error(s)}this._state==="initializing"&&(this._state="ready")}var e=n.prototype;return e.unsubscribe=function(){this._state!=="closed"&&(ps(this),ul(this))},Hs(n,[{key:"closed",get:function(){return this._state==="closed"}}]),n}(),md=function(){function n(t){this._subscription=t}var e=n.prototype;return e.next=function(i){Ur(this._subscription,"next",i)},e.error=function(i){Ur(this._subscription,"error",i)},e.complete=function(){Ur(this._subscription,"complete")},Hs(n,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),n}(),De=function(){function n(t){if(!(this instanceof n))throw new TypeError("Observable cannot be called as a function");if(typeof t!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=t}var e=n.prototype;return e.subscribe=function(i){return(typeof i!="object"||i===null)&&(i={next:i,error:arguments[1],complete:arguments[2]}),new vd(i,this._subscriber)},e.forEach=function(i){var r=this;return new Promise(function(s,c){if(typeof i!="function"){c(new TypeError(i+" is not a function"));return}function a(){u.unsubscribe(),s()}var u=r.subscribe({next:function(f){try{i(f,a)}catch(d){c(d),u.unsubscribe()}},error:c,complete:s})})},e.map=function(i){var r=this;if(typeof i!="function")throw new TypeError(i+" is not a function");var s=Kn(this);return new s(function(c){return r.subscribe({next:function(a){try{a=i(a)}catch(u){return c.error(u)}c.next(a)},error:function(a){c.error(a)},complete:function(){c.complete()}})})},e.filter=function(i){var r=this;if(typeof i!="function")throw new TypeError(i+" is not a function");var s=Kn(this);return new s(function(c){return r.subscribe({next:function(a){try{if(!i(a))return}catch(u){return c.error(u)}c.next(a)},error:function(a){c.error(a)},complete:function(){c.complete()}})})},e.reduce=function(i){var r=this;if(typeof i!="function")throw new TypeError(i+" is not a function");var s=Kn(this),c=arguments.length>1,a=!1,u=arguments[1],f=u;return new s(function(d){return r.subscribe({next:function(m){var v=!a;if(a=!0,!v||c)try{f=i(f,m)}catch(g){return d.error(g)}else f=m},error:function(m){d.error(m)},complete:function(){if(!a&&!c)return d.error(new TypeError("Cannot reduce an empty sequence"));d.next(f),d.complete()}})})},e.concat=function(){for(var i=this,r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];var a=Kn(this);return new a(function(u){var f,d=0;function m(v){f=v.subscribe({next:function(g){u.next(g)},error:function(g){u.error(g)},complete:function(){d===s.length?(f=void 0,u.complete()):m(a.from(s[d++]))}})}return m(i),function(){f&&(f.unsubscribe(),f=void 0)}})},e.flatMap=function(i){var r=this;if(typeof i!="function")throw new TypeError(i+" is not a function");var s=Kn(this);return new s(function(c){var a=[],u=r.subscribe({next:function(d){if(i)try{d=i(d)}catch(v){return c.error(v)}var m=s.from(d).subscribe({next:function(v){c.next(v)},error:function(v){c.error(v)},complete:function(){var v=a.indexOf(m);v>=0&&a.splice(v,1),f()}});a.push(m)},error:function(d){c.error(d)},complete:function(){f()}});function f(){u.closed&&a.length===0&&c.complete()}return function(){a.forEach(function(d){return d.unsubscribe()}),u.unsubscribe()}})},e[ds]=function(){return this},n.from=function(i){var r=typeof this=="function"?this:n;if(i==null)throw new TypeError(i+" is not an object");var s=Yi(i,ds);if(s){var c=s.call(i);if(Object(c)!==c)throw new TypeError(c+" is not an object");return dd(c)&&c.constructor===r?c:new r(function(a){return c.subscribe(a)})}if(Ys("iterator")&&(s=Yi(i,hd),s))return new r(function(a){ji(function(){if(!a.closed){for(var u=ud(s.call(i)),f;!(f=u()).done;){var d=f.value;if(a.next(d),a.closed)return}a.complete()}})});if(Array.isArray(i))return new r(function(a){ji(function(){if(!a.closed){for(var u=0;u<i.length;++u)if(a.next(i[u]),a.closed)return;a.complete()}})});throw new TypeError(i+" is not observable")},n.of=function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var c=typeof this=="function"?this:n;return new c(function(a){ji(function(){if(!a.closed){for(var u=0;u<r.length;++u)if(a.next(r[u]),a.closed)return;a.complete()}})})},Hs(n,null,[{key:ll,get:function(){return this}}]),n}();Ks()&&Object.defineProperty(De,Symbol("extensions"),{value:{symbol:ds,hostReportError:qn},configurable:!0});function gd(n){var e,t=n.Symbol;if(typeof t=="function")if(t.observable)e=t.observable;else{typeof t.for=="function"?e=t.for("https://github.com/benlesh/symbol-observable"):e=t("https://github.com/benlesh/symbol-observable");try{t.observable=e}catch{}}else e="@@observable";return e}var In;typeof self<"u"?In=self:typeof window<"u"?In=window:typeof global<"u"?In=global:typeof Ns<"u"?In=Ns:In=Function("return this")();gd(In);var ec=De.prototype,tc="@@observable";ec[tc]||(ec[tc]=function(){return this});var yd=Object.prototype.toString;function hl(n){return vs(n)}function vs(n,e){switch(yd.call(n)){case"[object Array]":{if(e=e||new Map,e.has(n))return e.get(n);var t=n.slice(0);return e.set(n,t),t.forEach(function(r,s){t[s]=vs(r,e)}),t}case"[object Object]":{if(e=e||new Map,e.has(n))return e.get(n);var i=Object.create(Object.getPrototypeOf(n));return e.set(n,i),Object.keys(n).forEach(function(r){i[r]=vs(n[r],e)}),i}default:return n}}function bd(n){var e=new Set([n]);return e.forEach(function(t){Le(t)&&_d(t)===t&&Object.getOwnPropertyNames(t).forEach(function(i){Le(t[i])&&e.add(t[i])})}),n}function _d(n){if(__DEV__&&!Object.isFrozen(n))try{Object.freeze(n)}catch(e){if(e instanceof TypeError)return null;throw e}return n}function ms(n){return __DEV__&&bd(n),n}function ei(n,e,t){var i=[];n.forEach(function(r){return r[e]&&i.push(r)}),i.forEach(function(r){return r[e](t)})}function zr(n,e,t){return new De(function(i){var r=i.next,s=i.error,c=i.complete,a=0,u=!1,f={then:function(g){return new Promise(function(w){return w(g())})}};function d(g,w){return g?function(b){++a;var x=function(){return g(b)};f=f.then(x,x).then(function(O){--a,r&&r.call(i,O),u&&m.complete()},function(O){throw--a,O}).catch(function(O){s&&s.call(i,O)})}:function(b){return w&&w.call(i,b)}}var m={next:d(e,r),error:d(t,s),complete:function(){u=!0,a||c&&c.call(i)}},v=n.subscribe(m);return function(){return v.unsubscribe()}})}var fn=typeof WeakMap=="function"&&vt(function(){return navigator.product})!=="ReactNative",wd=typeof WeakSet=="function",dl=typeof Symbol=="function"&&typeof Symbol.for=="function",cr=dl&&Symbol.asyncIterator;vt(function(){return window.document.createElement});vt(function(){return navigator.userAgent.indexOf("jsdom")>=0});function pl(n){function e(t){Object.defineProperty(n,t,{value:De})}return dl&&Symbol.species&&e(Symbol.species),e("@@species"),n}function nc(n){return n&&typeof n.then=="function"}var Sn=function(n){_t(e,n);function e(t){var i=n.call(this,function(r){return i.addObserver(r),function(){return i.removeObserver(r)}})||this;return i.observers=new Set,i.promise=new Promise(function(r,s){i.resolve=r,i.reject=s}),i.handlers={next:function(r){i.sub!==null&&(i.latest=["next",r],i.notify("next",r),ei(i.observers,"next",r))},error:function(r){var s=i.sub;s!==null&&(s&&setTimeout(function(){return s.unsubscribe()}),i.sub=null,i.latest=["error",r],i.reject(r),i.notify("error",r),ei(i.observers,"error",r))},complete:function(){var r=i,s=r.sub,c=r.sources,a=c===void 0?[]:c;if(s!==null){var u=a.shift();u?nc(u)?u.then(function(f){return i.sub=f.subscribe(i.handlers)}):i.sub=u.subscribe(i.handlers):(s&&setTimeout(function(){return s.unsubscribe()}),i.sub=null,i.latest&&i.latest[0]==="next"?i.resolve(i.latest[1]):i.resolve(),i.notify("complete"),ei(i.observers,"complete"))}}},i.nextResultListeners=new Set,i.cancel=function(r){i.reject(r),i.sources=[],i.handlers.complete()},i.promise.catch(function(r){}),typeof t=="function"&&(t=[new De(t)]),nc(t)?t.then(function(r){return i.start(r)},i.handlers.error):i.start(t),i}return e.prototype.start=function(t){this.sub===void 0&&(this.sources=Array.from(t),this.handlers.complete())},e.prototype.deliverLastMessage=function(t){if(this.latest){var i=this.latest[0],r=t[i];r&&r.call(t,this.latest[1]),this.sub===null&&i==="next"&&t.complete&&t.complete()}},e.prototype.addObserver=function(t){this.observers.has(t)||(this.deliverLastMessage(t),this.observers.add(t))},e.prototype.removeObserver=function(t){this.observers.delete(t)&&this.observers.size<1&&this.handlers.complete()},e.prototype.notify=function(t,i){var r=this.nextResultListeners;r.size&&(this.nextResultListeners=new Set,r.forEach(function(s){return s(t,i)}))},e.prototype.beforeNext=function(t){var i=!1;this.nextResultListeners.add(function(r,s){i||(i=!0,t(r,s))})},e}(De);pl(Sn);function Ln(n){return"incremental"in n}function Ed(n){return"hasNext"in n&&"data"in n}function xd(n){return Ln(n)||Ed(n)}function Td(n){return Le(n)&&"payload"in n}function vl(n,e){var t=n,i=new Vt;return Ln(e)&&It(e.incremental)&&e.incremental.forEach(function(r){for(var s=r.data,c=r.path,a=c.length-1;a>=0;--a){var u=c[a],f=!isNaN(+u),d=f?[]:{};d[u]=s,s=d}t=i.merge(t,s)}),t}function $i(n){var e=gs(n);return It(e)}function gs(n){var e=It(n.errors)?n.errors.slice(0):[];return Ln(n)&&It(n.incremental)&&n.incremental.forEach(function(t){t.errors&&e.push.apply(e,t.errors)}),e}function lr(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=Object.create(null);return n.forEach(function(i){!i||Object.keys(i).forEach(function(r){var s=i[r];s!==void 0&&(t[r]=s)})}),t}var ic=new Map;function ys(n){var e=ic.get(n)||1;return ic.set(n,e+1),"".concat(n,":").concat(e,":").concat(Math.random().toString(36).slice(2))}function kd(n){var e=ys("stringifyForDisplay");return JSON.stringify(n,function(t,i){return i===void 0?e:i}).split(JSON.stringify(e)).join("<undefined>")}function Wr(n,e){return lr(n,e,e.variables&&{variables:k(k({},n&&n.variables),e.variables)})}function rc(n){return new De(function(e){e.error(n)})}var bs=function(n,e,t){var i=new Error(t);throw i.name="ServerError",i.response=n,i.statusCode=n.status,i.result=e,i};function Pd(n){for(var e=["query","operationName","variables","extensions","context"],t=0,i=Object.keys(n);t<i.length;t++){var r=i[t];if(e.indexOf(r)<0)throw __DEV__?new me("illegal argument: ".concat(r)):new me(27)}return n}function Id(n,e){var t=k({},n),i=function(s){typeof s=="function"?t=k(k({},t),s(t)):t=k(k({},t),s)},r=function(){return k({},t)};return Object.defineProperty(e,"setContext",{enumerable:!1,value:i}),Object.defineProperty(e,"getContext",{enumerable:!1,value:r}),e}function Sd(n){var e={variables:n.variables||{},extensions:n.extensions||{},operationName:n.operationName,query:n.query};return e.operationName||(e.operationName=typeof e.query!="string"?hs(e.query)||void 0:""),e}function sc(n,e){return e?e(n):De.of()}function Yn(n){return typeof n=="function"?new fi(n):n}function Mi(n){return n.request.length<=1}var Od=function(n){_t(e,n);function e(t,i){var r=n.call(this,t)||this;return r.link=i,r}return e}(Error),fi=function(){function n(e){e&&(this.request=e)}return n.empty=function(){return new n(function(){return De.of()})},n.from=function(e){return e.length===0?n.empty():e.map(Yn).reduce(function(t,i){return t.concat(i)})},n.split=function(e,t,i){var r=Yn(t),s=Yn(i||new n(sc));return Mi(r)&&Mi(s)?new n(function(c){return e(c)?r.request(c)||De.of():s.request(c)||De.of()}):new n(function(c,a){return e(c)?r.request(c,a)||De.of():s.request(c,a)||De.of()})},n.execute=function(e,t){return e.request(Id(t.context,Sd(Pd(t))))||De.of()},n.concat=function(e,t){var i=Yn(e);if(Mi(i))return __DEV__&&$.warn(new Od("You are calling concat on a terminating link, which will have no effect",i)),i;var r=Yn(t);return Mi(r)?new n(function(s){return i.request(s,function(c){return r.request(c)||De.of()})||De.of()}):new n(function(s,c){return i.request(s,function(a){return r.request(a,c)||De.of()})||De.of()})},n.prototype.split=function(e,t,i){return this.concat(n.split(e,t,i||new n(sc)))},n.prototype.concat=function(e){return n.concat(this,e)},n.prototype.request=function(e,t){throw __DEV__?new me("request is not implemented"):new me(22)},n.prototype.onError=function(e,t){if(t&&t.error)return t.error(e),!1;throw e},n.prototype.setOnError=function(e){return this.onError=e,this},n}(),_s=fi.execute,Cd="3.7.12";function Ad(n){return!!n.body}function Dd(n){return!!n.getReader}function Nd(n){return!!(cr&&n[Symbol.asyncIterator])}function Ld(n){return!!n.stream}function Rd(n){return!!n.arrayBuffer}function Md(n){return!!n.pipe}function Fd(n){var e,t=n[Symbol.asyncIterator]();return e={next:function(){return t.next()}},e[Symbol.asyncIterator]=function(){return this},e}function qd(n){var e=null,t=null,i=!1,r=[],s=[];function c(m){if(!t){if(s.length){var v=s.shift();if(Array.isArray(v)&&v[0])return v[0]({value:m,done:!1})}r.push(m)}}function a(m){t=m;var v=s.slice();v.forEach(function(g){g[1](m)}),!e||e()}function u(){i=!0;var m=s.slice();m.forEach(function(v){v[0]({value:void 0,done:!0})}),!e||e()}e=function(){e=null,n.removeListener("data",c),n.removeListener("error",a),n.removeListener("end",u),n.removeListener("finish",u),n.removeListener("close",u)},n.on("data",c),n.on("error",a),n.on("end",u),n.on("finish",u),n.on("close",u);function f(){return new Promise(function(m,v){if(t)return v(t);if(r.length)return m({value:r.shift(),done:!1});if(i)return m({value:void 0,done:!0});s.push([m,v])})}var d={next:function(){return f()}};return cr&&(d[Symbol.asyncIterator]=function(){return this}),d}function Bd(n){var e=!1,t={next:function(){return e?Promise.resolve({value:void 0,done:!0}):(e=!0,new Promise(function(i,r){n.then(function(s){i({value:s,done:!1})}).catch(r)}))}};return cr&&(t[Symbol.asyncIterator]=function(){return this}),t}function oc(n){var e={next:function(){return n.read()}};return cr&&(e[Symbol.asyncIterator]=function(){return this}),e}function jd(n){var e=n;if(Ad(n)&&(e=n.body),Nd(e))return Fd(e);if(Dd(e))return oc(e.getReader());if(Ld(e))return oc(e.stream().getReader());if(Rd(e))return Bd(e.arrayBuffer());if(Md(e))return qd(e);throw new Error("Unknown body type for responseIterator. Please pass a streamable response.")}var Xs=Symbol();function $d(n){return n.extensions?Array.isArray(n.extensions[Xs]):!1}function Vd(n){return n.hasOwnProperty("graphQLErrors")}var Qd=function(n){var e=on(on(on([],n.graphQLErrors,!0),n.clientErrors,!0),n.protocolErrors,!0);return n.networkError&&e.push(n.networkError),e.map(function(t){return Le(t)&&t.message||"Error message not found."}).join(`
`)},Pn=function(n){_t(e,n);function e(t){var i=t.graphQLErrors,r=t.protocolErrors,s=t.clientErrors,c=t.networkError,a=t.errorMessage,u=t.extraInfo,f=n.call(this,a)||this;return f.name="ApolloError",f.graphQLErrors=i||[],f.protocolErrors=r||[],f.clientErrors=s||[],f.networkError=c||null,f.message=a||Qd(f),f.extraInfo=u,f.__proto__=e.prototype,f}return e}(Error),ac=Object.prototype.hasOwnProperty;function Ud(n,e){var t,i,r,s,c;return Bt(this,void 0,void 0,function(){var a,u,f,d,m,v,g,w,b,x,O,E,P,I,N,L,q,G,Q,Z,Se,Re;return jt(this,function(ge){switch(ge.label){case 0:if(TextDecoder===void 0)throw new Error("TextDecoder must be defined in the environment: please import a polyfill.");a=new TextDecoder("utf-8"),u=(t=n.headers)===null||t===void 0?void 0:t.get("content-type"),f="boundary=",d=u?.includes(f)?u?.substring(u?.indexOf(f)+f.length).replace(/['"]/g,"").replace(/\;(.*)/gm,"").trim():"-",m="--".concat(d),v="",g=jd(n),w=!0,ge.label=1;case 1:return w?[4,g.next()]:[3,3];case 2:for(b=ge.sent(),x=b.value,O=b.done,E=typeof x=="string"?x:a.decode(x),w=!O,v+=E,P=v.indexOf(m);P>-1;){if(I=void 0,Se=[v.slice(0,P),v.slice(P+m.length)],I=Se[0],v=Se[1],I.trim()){if(N=I.indexOf(`\r
\r
`),L=zd(I.slice(0,N)),q=L["content-type"],q&&q.toLowerCase().indexOf("application/json")===-1)throw new Error("Unsupported patch content type: application/json is required.");G=I.slice(N);try{Q=ml(n,G.replace(`\r
`,"")),Object.keys(Q).length>1||"data"in Q||"incremental"in Q||"errors"in Q||"payload"in Q?Td(Q)?(Z={},"payload"in Q&&(Z=k({},Q.payload)),"errors"in Q&&(Z=k(k({},Z),{extensions:k(k({},"extensions"in Z?Z.extensions:null),(Re={},Re[Xs]=Q.errors,Re))})),(i=e.next)===null||i===void 0||i.call(e,Z)):(r=e.next)===null||r===void 0||r.call(e,Q):Object.keys(Q).length===1&&"hasNext"in Q&&!Q.hasNext&&((s=e.complete)===null||s===void 0||s.call(e))}catch(we){Zs(we,e)}}P=v.indexOf(m)}return[3,1];case 3:return(c=e.complete)===null||c===void 0||c.call(e),[2]}})})}function zd(n){var e={};return n.split(`
`).forEach(function(t){var i=t.indexOf(":");if(i>-1){var r=t.slice(0,i).trim().toLowerCase(),s=t.slice(i+1).trim();e[r]=s}}),e}function ml(n,e){if(n.status>=300){var t=function(){try{return JSON.parse(e)}catch{return e}};bs(n,t(),"Response not successful: Received status code ".concat(n.status))}try{return JSON.parse(e)}catch(r){var i=r;throw i.name="ServerParseError",i.response=n,i.statusCode=n.status,i.bodyText=e,i}}function Zs(n,e){var t,i;n.name!=="AbortError"&&(n.result&&n.result.errors&&n.result.data&&((t=e.next)===null||t===void 0||t.call(e,n.result)),(i=e.error)===null||i===void 0||i.call(e,n))}function Wd(n,e,t){Gd(e)(n).then(function(i){var r,s;(r=t.next)===null||r===void 0||r.call(t,i),(s=t.complete)===null||s===void 0||s.call(t)}).catch(function(i){return Zs(i,t)})}function Gd(n){return function(e){return e.text().then(function(t){return ml(e,t)}).then(function(t){return e.status>=300&&bs(e,t,"Response not successful: Received status code ".concat(e.status)),!Array.isArray(t)&&!ac.call(t,"data")&&!ac.call(t,"errors")&&bs(e,t,"Server response was missing for query '".concat(Array.isArray(n)?n.map(function(i){return i.operationName}):n.operationName,"'.")),t})}}var ws=function(n,e){var t;try{t=JSON.stringify(n)}catch(r){var i=__DEV__?new me("Network request failed. ".concat(e," is not serializable: ").concat(r.message)):new me(24);throw i.parseError=r,i}return t},Hd={includeQuery:!0,includeExtensions:!1,preserveHeaderCase:!1},Kd={accept:"*/*","content-type":"application/json"},Yd={method:"POST"},Jd={http:Hd,headers:Kd,options:Yd},Xd=function(n,e){return e(n)};function Zd(n,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];var r={},s={};t.forEach(function(m){r=k(k(k({},r),m.options),{headers:k(k({},r.headers),m.headers)}),m.credentials&&(r.credentials=m.credentials),s=k(k({},s),m.http)}),r.headers&&(r.headers=ep(r.headers,s.preserveHeaderCase));var c=n.operationName,a=n.extensions,u=n.variables,f=n.query,d={operationName:c,variables:u};return s.includeExtensions&&(d.extensions=a),s.includeQuery&&(d.query=e(f,Dh)),{options:r,body:d}}function ep(n,e){if(!e){var t=Object.create(null);return Object.keys(Object(n)).forEach(function(s){t[s.toLowerCase()]=n[s]}),t}var i=Object.create(null);Object.keys(Object(n)).forEach(function(s){i[s.toLowerCase()]={originalName:s,value:n[s]}});var r=Object.create(null);return Object.keys(i).forEach(function(s){r[i[s].originalName]=i[s].value}),r}var tp=function(n){if(!n&&typeof fetch>"u")throw __DEV__?new me(`
"fetch" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:

import fetch from 'cross-fetch';
import { ApolloClient, HttpLink } from '@apollo/client';
const client = new ApolloClient({
  link: new HttpLink({ uri: '/graphql', fetch })
});
    `):new me(23)},np=function(){if(typeof AbortController>"u")return{controller:!1,signal:!1};var n=new AbortController,e=n.signal;return{controller:n,signal:e}},ip=function(n,e){var t=n.getContext(),i=t.uri;return i||(typeof e=="function"?e(n):e||"/graphql")};function rp(n,e){var t=[],i=function(m,v){t.push("".concat(m,"=").concat(encodeURIComponent(v)))};if("query"in e&&i("query",e.query),e.operationName&&i("operationName",e.operationName),e.variables){var r=void 0;try{r=ws(e.variables,"Variables map")}catch(m){return{parseError:m}}i("variables",r)}if(e.extensions){var s=void 0;try{s=ws(e.extensions,"Extensions map")}catch(m){return{parseError:m}}i("extensions",s)}var c="",a=n,u=n.indexOf("#");u!==-1&&(c=n.substr(u),a=n.substr(0,u));var f=a.indexOf("?")===-1?"?":"&",d=a+f+t.join("&")+c;return{newURI:d}}var cc=vt(function(){return fetch}),sp=function(n){n===void 0&&(n={});var e=n.uri,t=e===void 0?"/graphql":e,i=n.fetch,r=n.print,s=r===void 0?Xd:r,c=n.includeExtensions,a=n.preserveHeaderCase,u=n.useGETForQueries,f=n.includeUnusedVariables,d=f===void 0?!1:f,m=Mn(n,["uri","fetch","print","includeExtensions","preserveHeaderCase","useGETForQueries","includeUnusedVariables"]);__DEV__&&tp(i||cc);var v={http:{includeExtensions:c,preserveHeaderCase:a},options:m.fetchOptions,credentials:m.credentials,headers:m.headers};return new fi(function(g){var w=ip(g,t),b=g.getContext(),x={};if(b.clientAwareness){var O=b.clientAwareness,E=O.name,P=O.version;E&&(x["apollographql-client-name"]=E),P&&(x["apollographql-client-version"]=P)}var I=k(k({},x),b.headers),N={http:b.http,options:b.fetchOptions,credentials:b.credentials,headers:I},L=Zd(g,s,Jd,v,N),q=L.options,G=L.body;if(G.variables&&!d){var Q=new Set(Object.keys(G.variables));Dt(g.query,{Variable:function(te,Oe,Ve){Ve&&Ve.kind!=="VariableDefinition"&&Q.delete(te.name.value)}}),Q.size&&(G.variables=k({},G.variables),Q.forEach(function(te){delete G.variables[te]}))}var Z;if(!q.signal){var Se=np(),Re=Se.controller,ge=Se.signal;Z=Re,Z&&(q.signal=ge)}var we=function(te){return te.kind==="OperationDefinition"&&te.operation==="mutation"},Be=function(te){return te.kind==="OperationDefinition"&&te.operation==="subscription"},Ne=Be(ar(g.query)),J=js(["defer"],g.query);if(u&&!g.query.definitions.some(we)&&(q.method="GET"),J||Ne){q.headers=q.headers||{};var R="multipart/mixed;";Ne&&J&&__DEV__&&$.warn("Multipart-subscriptions do not support @defer"),Ne?R+="boundary=graphql;subscriptionSpec=1.0,application/json":J&&(R+="deferSpec=20220824,application/json"),q.headers.accept=R}if(q.method==="GET"){var Y=rp(w,G),T=Y.newURI,le=Y.parseError;if(le)return rc(le);w=T}else try{q.body=ws(G,"Payload")}catch(te){return rc(te)}return new De(function(te){var Oe=i||vt(function(){return fetch})||cc;return Oe(w,q).then(function(Ve){var st;g.setContext({response:Ve});var Qe=(st=Ve.headers)===null||st===void 0?void 0:st.get("content-type");return Qe!==null&&/^multipart\/mixed/i.test(Qe)?Ud(Ve,te):Wd(Ve,g,te)}).catch(function(Ve){return Zs(Ve,te)}),function(){Z&&Z.abort()}})})},op=function(n){_t(e,n);function e(t){t===void 0&&(t={});var i=n.call(this,sp(t).request)||this;return i.options=t,i}return e}(fi),gl=Object.prototype,lc=gl.toString,ap=gl.hasOwnProperty,uc=Function.prototype.toString,Es=new Map;function $e(n,e){try{return xs(n,e)}finally{Es.clear()}}function xs(n,e){if(n===e)return!0;var t=lc.call(n),i=lc.call(e);if(t!==i)return!1;switch(t){case"[object Array]":if(n.length!==e.length)return!1;case"[object Object]":{if(hc(n,e))return!0;var r=fc(n),s=fc(e),c=r.length;if(c!==s.length)return!1;for(var a=0;a<c;++a)if(!ap.call(e,r[a]))return!1;for(var a=0;a<c;++a){var u=r[a];if(!xs(n[u],e[u]))return!1}return!0}case"[object Error]":return n.name===e.name&&n.message===e.message;case"[object Number]":if(n!==n)return e!==e;case"[object Boolean]":case"[object Date]":return+n==+e;case"[object RegExp]":case"[object String]":return n=="".concat(e);case"[object Map]":case"[object Set]":{if(n.size!==e.size)return!1;if(hc(n,e))return!0;for(var f=n.entries(),d=t==="[object Map]";;){var m=f.next();if(m.done)break;var v=m.value,g=v[0],w=v[1];if(!e.has(g)||d&&!xs(w,e.get(g)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":n=new Uint8Array(n),e=new Uint8Array(e);case"[object DataView]":{var b=n.byteLength;if(b===e.byteLength)for(;b--&&n[b]===e[b];);return b===-1}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{var x=uc.call(n);return x!==uc.call(e)?!1:!up(x,lp)}}return!1}function fc(n){return Object.keys(n).filter(cp,n)}function cp(n){return this[n]!==void 0}var lp="{ [native code] }";function up(n,e){var t=n.length-e.length;return t>=0&&n.indexOf(e,t)===t}function hc(n,e){var t=Es.get(n);if(t){if(t.has(e))return!0}else Es.set(n,t=new Set);return t.add(e),!1}var fp=function(){return Object.create(null)},yl=Array.prototype,hp=yl.forEach,dp=yl.slice,hi=function(){function n(e,t){e===void 0&&(e=!0),t===void 0&&(t=fp),this.weakness=e,this.makeData=t}return n.prototype.lookup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.lookupArray(e)},n.prototype.lookupArray=function(e){var t=this;return hp.call(e,function(i){return t=t.getChildTrie(i)}),t.data||(t.data=this.makeData(dp.call(e)))},n.prototype.getChildTrie=function(e){var t=this.weakness&&pp(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),i=t.get(e);return i||t.set(e,i=new n(this.weakness,this.makeData)),i},n}();function pp(n){switch(typeof n){case"object":if(n===null)break;case"function":return!0}return!1}var Ke=null,dc={},vp=1,mp=function(){return function(){function n(){this.id=["slot",vp++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return n.prototype.hasValue=function(){for(var e=Ke;e;e=e.parent)if(this.id in e.slots){var t=e.slots[this.id];if(t===dc)break;return e!==Ke&&(Ke.slots[this.id]=t),!0}return Ke&&(Ke.slots[this.id]=dc),!1},n.prototype.getValue=function(){if(this.hasValue())return Ke.slots[this.id]},n.prototype.withValue=function(e,t,i,r){var s,c=(s={__proto__:null},s[this.id]=e,s),a=Ke;Ke={parent:a,slots:c};try{return t.apply(r,i)}finally{Ke=a}},n.bind=function(e){var t=Ke;return function(){var i=Ke;try{return Ke=t,e.apply(this,arguments)}finally{Ke=i}}},n.noContext=function(e,t,i){if(Ke){var r=Ke;try{return Ke=null,e.apply(i,t)}finally{Ke=r}}else return e.apply(i,t)},n}()};function pc(n){try{return n()}catch{}}var Gr="@wry/context:Slot",gp=pc(function(){return globalThis})||pc(function(){return global})||Object.create(null),vc=gp,ur=vc[Gr]||Array[Gr]||function(n){try{Object.defineProperty(vc,Gr,{value:n,enumerable:!1,writable:!1,configurable:!0})}finally{return n}}(mp());ur.bind;ur.noContext;function yp(){}var bp=function(){function n(e,t){e===void 0&&(e=1/0),t===void 0&&(t=yp),this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}return n.prototype.has=function(e){return this.map.has(e)},n.prototype.get=function(e){var t=this.getNode(e);return t&&t.value},n.prototype.getNode=function(e){var t=this.map.get(e);if(t&&t!==this.newest){var i=t.older,r=t.newer;r&&(r.older=i),i&&(i.newer=r),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=r)}return t},n.prototype.set=function(e,t){var i=this.getNode(e);return i?i.value=t:(i={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=i),this.newest=i,this.oldest=this.oldest||i,this.map.set(e,i),i.value)},n.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},n.prototype.delete=function(e){var t=this.map.get(e);return t?(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0):!1},n}(),fr=new ur,Hr,_p=Object.prototype.hasOwnProperty,eo=(Hr=Array.from,Hr===void 0?function(n){var e=[];return n.forEach(function(t){return e.push(t)}),e}:Hr);function Ji(n){var e=n.unsubscribe;typeof e=="function"&&(n.unsubscribe=void 0,e())}var ri=[],wp=100;function Bn(n,e){if(!n)throw new Error(e||"assertion failure")}function Ep(n,e){var t=n.length;return t>0&&t===e.length&&n[t-1]===e[t-1]}function bl(n){switch(n.length){case 0:throw new Error("unknown value");case 1:return n[0];case 2:throw n[1]}}function xp(n){return n.slice(0)}var Tp=function(){function n(e){this.fn=e,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++n.count}return n.prototype.peek=function(){if(this.value.length===1&&!Qt(this))return mc(this),this.value[0]},n.prototype.recompute=function(e){return Bn(!this.recomputing,"already recomputing"),mc(this),Qt(this)?kp(this,e):bl(this.value)},n.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,_l(this),Ji(this))},n.prototype.dispose=function(){var e=this;this.setDirty(),kl(this),to(this,function(t,i){t.setDirty(),Pl(t,e)})},n.prototype.forget=function(){this.dispose()},n.prototype.dependOn=function(e){e.add(this),this.deps||(this.deps=ri.pop()||new Set),this.deps.add(e)},n.prototype.forgetDeps=function(){var e=this;this.deps&&(eo(this.deps).forEach(function(t){return t.delete(e)}),this.deps.clear(),ri.push(this.deps),this.deps=null)},n.count=0,n}();function mc(n){var e=fr.getValue();if(e)return n.parents.add(e),e.childValues.has(n)||e.childValues.set(n,[]),Qt(n)?El(e,n):xl(e,n),e}function kp(n,e){return kl(n),fr.withValue(n,Pp,[n,e]),Sp(n,e)&&Ip(n),bl(n.value)}function Pp(n,e){n.recomputing=!0,n.value.length=0;try{n.value[0]=n.fn.apply(null,e)}catch(t){n.value[1]=t}n.recomputing=!1}function Qt(n){return n.dirty||!!(n.dirtyChildren&&n.dirtyChildren.size)}function Ip(n){n.dirty=!1,!Qt(n)&&wl(n)}function _l(n){to(n,El)}function wl(n){to(n,xl)}function to(n,e){var t=n.parents.size;if(t)for(var i=eo(n.parents),r=0;r<t;++r)e(i[r],n)}function El(n,e){Bn(n.childValues.has(e)),Bn(Qt(e));var t=!Qt(n);if(!n.dirtyChildren)n.dirtyChildren=ri.pop()||new Set;else if(n.dirtyChildren.has(e))return;n.dirtyChildren.add(e),t&&_l(n)}function xl(n,e){Bn(n.childValues.has(e)),Bn(!Qt(e));var t=n.childValues.get(e);t.length===0?n.childValues.set(e,xp(e.value)):Ep(t,e.value)||n.setDirty(),Tl(n,e),!Qt(n)&&wl(n)}function Tl(n,e){var t=n.dirtyChildren;t&&(t.delete(e),t.size===0&&(ri.length<wp&&ri.push(t),n.dirtyChildren=null))}function kl(n){n.childValues.size>0&&n.childValues.forEach(function(e,t){Pl(n,t)}),n.forgetDeps(),Bn(n.dirtyChildren===null)}function Pl(n,e){e.parents.delete(n),n.childValues.delete(e),Tl(n,e)}function Sp(n,e){if(typeof n.subscribe=="function")try{Ji(n),n.unsubscribe=n.subscribe.apply(null,e)}catch{return n.setDirty(),!1}return!0}var Op={setDirty:!0,dispose:!0,forget:!0};function Il(n){var e=new Map,t=n&&n.subscribe;function i(r){var s=fr.getValue();if(s){var c=e.get(r);c||e.set(r,c=new Set),s.dependOn(c),typeof t=="function"&&(Ji(c),c.unsubscribe=t(r))}}return i.dirty=function(s,c){var a=e.get(s);if(a){var u=c&&_p.call(Op,c)?c:"setDirty";eo(a).forEach(function(f){return f[u]()}),e.delete(s),Ji(a)}},i}function Sl(){var n=new hi(typeof WeakMap=="function");return function(){return n.lookupArray(arguments)}}Sl();var Kr=new Set;function Xi(n,e){e===void 0&&(e=Object.create(null));var t=new bp(e.max||Math.pow(2,16),function(f){return f.dispose()}),i=e.keyArgs,r=e.makeCacheKey||Sl(),s=function(){var f=r.apply(null,i?i.apply(null,arguments):arguments);if(f===void 0)return n.apply(null,arguments);var d=t.get(f);d||(t.set(f,d=new Tp(n)),d.subscribe=e.subscribe,d.forget=function(){return t.delete(f)});var m=d.recompute(Array.prototype.slice.call(arguments));return t.set(f,d),Kr.add(t),fr.hasValue()||(Kr.forEach(function(v){return v.clean()}),Kr.clear()),m};Object.defineProperty(s,"size",{get:function(){return t.map.size},configurable:!1,enumerable:!1});function c(f){var d=t.get(f);d&&d.setDirty()}s.dirtyKey=c,s.dirty=function(){c(r.apply(null,arguments))};function a(f){var d=t.get(f);if(d)return d.peek()}s.peekKey=a,s.peek=function(){return a(r.apply(null,arguments))};function u(f){return t.delete(f)}return s.forgetKey=u,s.forget=function(){return u(r.apply(null,arguments))},s.makeCacheKey=r,s.getKey=i?function(){return r.apply(null,i.apply(null,arguments))}:r,Object.freeze(s)}var Cp=function(){function n(){this.getFragmentDoc=Xi(jh)}return n.prototype.batch=function(e){var t=this,i=typeof e.optimistic=="string"?e.optimistic:e.optimistic===!1?null:void 0,r;return this.performTransaction(function(){return r=e.update(t)},i),r},n.prototype.recordOptimisticTransaction=function(e,t){this.performTransaction(e,t)},n.prototype.transformDocument=function(e){return e},n.prototype.transformForLink=function(e){return e},n.prototype.identify=function(e){},n.prototype.gc=function(){return[]},n.prototype.modify=function(e){return!1},n.prototype.readQuery=function(e,t){return t===void 0&&(t=!!e.optimistic),this.read(k(k({},e),{rootId:e.id||"ROOT_QUERY",optimistic:t}))},n.prototype.readFragment=function(e,t){return t===void 0&&(t=!!e.optimistic),this.read(k(k({},e),{query:this.getFragmentDoc(e.fragment,e.fragmentName),rootId:e.id,optimistic:t}))},n.prototype.writeQuery=function(e){var t=e.id,i=e.data,r=Mn(e,["id","data"]);return this.write(Object.assign(r,{dataId:t||"ROOT_QUERY",result:i}))},n.prototype.writeFragment=function(e){var t=e.id,i=e.data,r=e.fragment,s=e.fragmentName,c=Mn(e,["id","data","fragment","fragmentName"]);return this.write(Object.assign(c,{query:this.getFragmentDoc(r,s),dataId:t,result:i}))},n.prototype.updateQuery=function(e,t){return this.batch({update:function(i){var r=i.readQuery(e),s=t(r);return s==null?r:(i.writeQuery(k(k({},e),{data:s})),s)}})},n.prototype.updateFragment=function(e,t){return this.batch({update:function(i){var r=i.readFragment(e),s=t(r);return s==null?r:(i.writeFragment(k(k({},e),{data:s})),s)}})},n}(),Ol=function(n){_t(e,n);function e(t,i,r,s){var c,a=n.call(this,t)||this;if(a.message=t,a.path=i,a.query=r,a.variables=s,Array.isArray(a.path)){a.missing=a.message;for(var u=a.path.length-1;u>=0;--u)a.missing=(c={},c[a.path[u]]=a.missing,c)}else a.missing=a.path;return a.__proto__=e.prototype,a}return e}(Error),ze=Object.prototype.hasOwnProperty;function Jn(n){return n==null}function Cl(n,e){var t=n.__typename,i=n.id,r=n._id;if(typeof t=="string"&&(e&&(e.keyObject=Jn(i)?Jn(r)?void 0:{_id:r}:{id:i}),Jn(i)&&!Jn(r)&&(i=r),!Jn(i)))return"".concat(t,":").concat(typeof i=="number"||typeof i=="string"?i:JSON.stringify(i))}var Al={dataIdFromObject:Cl,addTypename:!0,resultCaching:!0,canonizeResults:!1};function Ap(n){return lr(Al,n)}function Dl(n){var e=n.canonizeResults;return e===void 0?Al.canonizeResults:e}function Dp(n,e){return _e(e)?n.get(e.__ref,"__typename"):e&&e.__typename}var Nl=/^[_a-z][_0-9a-z]*/i;function Ut(n){var e=n.match(Nl);return e?e[0]:n}function Ts(n,e,t){return Le(e)?Me(e)?e.every(function(i){return Ts(n,i,t)}):n.selections.every(function(i){if(un(i)&&rr(i,t)){var r=ln(i);return ze.call(e,r)&&(!i.selectionSet||Ts(i.selectionSet,e[r],t))}return!0}):!1}function Cn(n){return Le(n)&&!_e(n)&&!Me(n)}function Np(){return new Vt}function Ll(n,e){var t=$s(Us(n));return{fragmentMap:t,lookupFragment:function(i){var r=t[i];return!r&&e&&(r=e.lookup(i)),r||null}}}var Vi=Object.create(null),Yr=function(){return Vi},gc=Object.create(null),si=function(){function n(e,t){var i=this;this.policies=e,this.group=t,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(r,s){return ms(_e(r)?i.get(r.__ref,s):r&&r[s])},this.canRead=function(r){return _e(r)?i.has(r.__ref):typeof r=="object"},this.toReference=function(r,s){if(typeof r=="string")return Nn(r);if(_e(r))return r;var c=i.policies.identify(r)[0];if(c){var a=Nn(c);return s&&i.merge(c,r),a}}}return n.prototype.toObject=function(){return k({},this.data)},n.prototype.has=function(e){return this.lookup(e,!0)!==void 0},n.prototype.get=function(e,t){if(this.group.depend(e,t),ze.call(this.data,e)){var i=this.data[e];if(i&&ze.call(i,t))return i[t]}if(t==="__typename"&&ze.call(this.policies.rootTypenamesById,e))return this.policies.rootTypenamesById[e];if(this instanceof Ft)return this.parent.get(e,t)},n.prototype.lookup=function(e,t){if(t&&this.group.depend(e,"__exists"),ze.call(this.data,e))return this.data[e];if(this instanceof Ft)return this.parent.lookup(e,t);if(this.policies.rootTypenamesById[e])return Object.create(null)},n.prototype.merge=function(e,t){var i=this,r;_e(e)&&(e=e.__ref),_e(t)&&(t=t.__ref);var s=typeof e=="string"?this.lookup(r=e):e,c=typeof t=="string"?this.lookup(r=t):t;if(!!c){__DEV__?$(typeof r=="string","store.merge expects a string ID"):$(typeof r=="string",1);var a=new Vt(Rp).merge(s,c);if(this.data[r]=a,a!==s&&(delete this.refs[r],this.group.caching)){var u=Object.create(null);s||(u.__exists=1),Object.keys(c).forEach(function(f){if(!s||s[f]!==a[f]){u[f]=1;var d=Ut(f);d!==f&&!i.policies.hasKeyArgs(a.__typename,d)&&(u[d]=1),a[f]===void 0&&!(i instanceof Ft)&&delete a[f]}}),u.__typename&&!(s&&s.__typename)&&this.policies.rootTypenamesById[r]===a.__typename&&delete u.__typename,Object.keys(u).forEach(function(f){return i.group.dirty(r,f)})}}},n.prototype.modify=function(e,t){var i=this,r=this.lookup(e);if(r){var s=Object.create(null),c=!1,a=!0,u={DELETE:Vi,INVALIDATE:gc,isReference:_e,toReference:this.toReference,canRead:this.canRead,readField:function(f,d){return i.policies.readField(typeof f=="string"?{fieldName:f,from:d||Nn(e)}:f,{store:i})}};if(Object.keys(r).forEach(function(f){var d=Ut(f),m=r[f];if(m!==void 0){var v=typeof t=="function"?t:t[f]||t[d];if(v){var g=v===Yr?Vi:v(ms(m),k(k({},u),{fieldName:d,storeFieldName:f,storage:i.getStorage(e,f)}));g===gc?i.group.dirty(e,f):(g===Vi&&(g=void 0),g!==m&&(s[f]=g,c=!0,m=g))}m!==void 0&&(a=!1)}}),c)return this.merge(e,s),a&&(this instanceof Ft?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},n.prototype.delete=function(e,t,i){var r,s=this.lookup(e);if(s){var c=this.getFieldValue(s,"__typename"),a=t&&i?this.policies.getStoreFieldName({typename:c,fieldName:t,args:i}):t;return this.modify(e,a?(r={},r[a]=Yr,r):Yr)}return!1},n.prototype.evict=function(e,t){var i=!1;return e.id&&(ze.call(this.data,e.id)&&(i=this.delete(e.id,e.fieldName,e.args)),this instanceof Ft&&this!==t&&(i=this.parent.evict(e,t)||i),(e.fieldName||i)&&this.group.dirty(e.id,e.fieldName||"__exists")),i},n.prototype.clear=function(){this.replace(null)},n.prototype.extract=function(){var e=this,t=this.toObject(),i=[];return this.getRootIdSet().forEach(function(r){ze.call(e.policies.rootTypenamesById,r)||i.push(r)}),i.length&&(t.__META={extraRootIds:i.sort()}),t},n.prototype.replace=function(e){var t=this;if(Object.keys(this.data).forEach(function(s){e&&ze.call(e,s)||t.delete(s)}),e){var i=e.__META,r=Mn(e,["__META"]);Object.keys(r).forEach(function(s){t.merge(s,r[s])}),i&&i.extraRootIds.forEach(this.retain,this)}},n.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},n.prototype.release=function(e){if(this.rootIds[e]>0){var t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0},n.prototype.getRootIdSet=function(e){return e===void 0&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof Ft?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},n.prototype.gc=function(){var e=this,t=this.getRootIdSet(),i=this.toObject();t.forEach(function(c){ze.call(i,c)&&(Object.keys(e.findChildRefIds(c)).forEach(t.add,t),delete i[c])});var r=Object.keys(i);if(r.length){for(var s=this;s instanceof Ft;)s=s.parent;r.forEach(function(c){return s.delete(c)})}return r},n.prototype.findChildRefIds=function(e){if(!ze.call(this.refs,e)){var t=this.refs[e]=Object.create(null),i=this.data[e];if(!i)return t;var r=new Set([i]);r.forEach(function(s){_e(s)&&(t[s.__ref]=!0),Le(s)&&Object.keys(s).forEach(function(c){var a=s[c];Le(a)&&r.add(a)})})}return this.refs[e]},n.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},n}(),Rl=function(){function n(e,t){t===void 0&&(t=null),this.caching=e,this.parent=t,this.d=null,this.resetCaching()}return n.prototype.resetCaching=function(){this.d=this.caching?Il():null,this.keyMaker=new hi(fn)},n.prototype.depend=function(e,t){if(this.d){this.d(Jr(e,t));var i=Ut(t);i!==t&&this.d(Jr(e,i)),this.parent&&this.parent.depend(e,t)}},n.prototype.dirty=function(e,t){this.d&&this.d.dirty(Jr(e,t),t==="__exists"?"forget":"setDirty")},n}();function Jr(n,e){return e+"#"+n}function yc(n,e){ti(n)&&n.group.depend(e,"__exists")}(function(n){var e=function(t){_t(i,t);function i(r){var s=r.policies,c=r.resultCaching,a=c===void 0?!0:c,u=r.seed,f=t.call(this,s,new Rl(a))||this;return f.stump=new Lp(f),f.storageTrie=new hi(fn),u&&f.replace(u),f}return i.prototype.addLayer=function(r,s){return this.stump.addLayer(r,s)},i.prototype.removeLayer=function(){return this},i.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},i}(n);n.Root=e})(si||(si={}));var Ft=function(n){_t(e,n);function e(t,i,r,s){var c=n.call(this,i.policies,s)||this;return c.id=t,c.parent=i,c.replay=r,c.group=s,r(c),c}return e.prototype.addLayer=function(t,i){return new e(t,this,i,this.group)},e.prototype.removeLayer=function(t){var i=this,r=this.parent.removeLayer(t);return t===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(s){var c=i.data[s],a=r.lookup(s);a?c?c!==a&&Object.keys(c).forEach(function(u){$e(c[u],a[u])||i.group.dirty(s,u)}):(i.group.dirty(s,"__exists"),Object.keys(a).forEach(function(u){i.group.dirty(s,u)})):i.delete(s)}),r):r===this.parent?this:r.addLayer(this.id,this.replay)},e.prototype.toObject=function(){return k(k({},this.parent.toObject()),this.data)},e.prototype.findChildRefIds=function(t){var i=this.parent.findChildRefIds(t);return ze.call(this.data,t)?k(k({},i),n.prototype.findChildRefIds.call(this,t)):i},e.prototype.getStorage=function(){for(var t=this.parent;t.parent;)t=t.parent;return t.getStorage.apply(t,arguments)},e}(si),Lp=function(n){_t(e,n);function e(t){return n.call(this,"EntityStore.Stump",t,function(){},new Rl(t.group.caching,t.group))||this}return e.prototype.removeLayer=function(){return this},e.prototype.merge=function(){return this.parent.merge.apply(this.parent,arguments)},e}(Ft);function Rp(n,e,t){var i=n[t],r=e[t];return $e(i,r)?i:r}function ti(n){return!!(n instanceof si&&n.group.caching)}function Mp(n){return Le(n)?Me(n)?n.slice(0):k({__proto__:Object.getPrototypeOf(n)},n):n}var ks=function(){function n(){this.known=new(wd?WeakSet:Set),this.pool=new hi(fn),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return n.prototype.isKnown=function(e){return Le(e)&&this.known.has(e)},n.prototype.pass=function(e){if(Le(e)){var t=Mp(e);return this.passes.set(t,e),t}return e},n.prototype.admit=function(e){var t=this;if(Le(e)){var i=this.passes.get(e);if(i)return i;var r=Object.getPrototypeOf(e);switch(r){case Array.prototype:{if(this.known.has(e))return e;var s=e.map(this.admit,this),c=this.pool.lookupArray(s);return c.array||(this.known.add(c.array=s),__DEV__&&Object.freeze(s)),c.array}case null:case Object.prototype:{if(this.known.has(e))return e;var a=Object.getPrototypeOf(e),u=[a],f=this.sortedKeys(e);u.push(f.json);var d=u.length;f.sorted.forEach(function(g){u.push(t.admit(e[g]))});var c=this.pool.lookupArray(u);if(!c.object){var m=c.object=Object.create(a);this.known.add(m),f.sorted.forEach(function(g,w){m[g]=u[d+w]}),__DEV__&&Object.freeze(m)}return c.object}}}return e},n.prototype.sortedKeys=function(e){var t=Object.keys(e),i=this.pool.lookupArray(t);if(!i.keys){t.sort();var r=JSON.stringify(t);(i.keys=this.keysByJSON.get(r))||this.keysByJSON.set(r,i.keys={sorted:t,json:r})}return i.keys},n}(),an=Object.assign(function(n){if(Le(n)){Ps===void 0&&bc();var e=Ps.admit(n),t=Is.get(e);return t===void 0&&Is.set(e,t=JSON.stringify(e)),t}return JSON.stringify(n)},{reset:bc}),Ps,Is;function bc(){Ps=new ks,Is=new(fn?WeakMap:Map)}function _c(n){return[n.selectionSet,n.objectOrReference,n.context,n.context.canonizeResults]}var Fp=function(){function n(e){var t=this;this.knownResults=new(fn?WeakMap:Map),this.config=lr(e,{addTypename:e.addTypename!==!1,canonizeResults:Dl(e)}),this.canon=e.canon||new ks,this.executeSelectionSet=Xi(function(i){var r,s=i.context.canonizeResults,c=_c(i);c[3]=!s;var a=(r=t.executeSelectionSet).peek.apply(r,c);return a?s?k(k({},a),{result:t.canon.admit(a.result)}):a:(yc(i.context.store,i.enclosingRef.__ref),t.execSelectionSetImpl(i))},{max:this.config.resultCacheMaxSize,keyArgs:_c,makeCacheKey:function(i,r,s,c){if(ti(s.store))return s.store.makeCacheKey(i,_e(r)?r.__ref:r,s.varString,c)}}),this.executeSubSelectedArray=Xi(function(i){return yc(i.context.store,i.enclosingRef.__ref),t.execSubSelectedArrayImpl(i)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(i){var r=i.field,s=i.array,c=i.context;if(ti(c.store))return c.store.makeCacheKey(r,s,c.varString)}})}return n.prototype.resetCanon=function(){this.canon=new ks},n.prototype.diffQueryAgainstStore=function(e){var t=e.store,i=e.query,r=e.rootId,s=r===void 0?"ROOT_QUERY":r,c=e.variables,a=e.returnPartialData,u=a===void 0?!0:a,f=e.canonizeResults,d=f===void 0?this.config.canonizeResults:f,m=this.config.cache.policies;c=k(k({},zs(ol(i))),c);var v=Nn(s),g=this.executeSelectionSet({selectionSet:ar(i).selectionSet,objectOrReference:v,enclosingRef:v,context:k({store:t,query:i,policies:m,variables:c,varString:an(c),canonizeResults:d},Ll(i,this.config.fragments))}),w;if(g.missing&&(w=[new Ol(qp(g.missing),g.missing,i,c)],!u))throw w[0];return{result:g.result,complete:!w,missing:w}},n.prototype.isFresh=function(e,t,i,r){if(ti(r.store)&&this.knownResults.get(e)===i){var s=this.executeSelectionSet.peek(i,t,r,this.canon.isKnown(e));if(s&&e===s.result)return!0}return!1},n.prototype.execSelectionSetImpl=function(e){var t=this,i=e.selectionSet,r=e.objectOrReference,s=e.enclosingRef,c=e.context;if(_e(r)&&!c.policies.rootTypenamesById[r.__ref]&&!c.store.has(r.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(r.__ref," object")};var a=c.variables,u=c.policies,f=c.store,d=f.getFieldValue(r,"__typename"),m=[],v,g=new Vt;this.config.addTypename&&typeof d=="string"&&!u.rootIdsByTypename[d]&&m.push({__typename:d});function w(P,I){var N;return P.missing&&(v=g.merge(v,(N={},N[I]=P.missing,N))),P.result}var b=new Set(i.selections);b.forEach(function(P){var I,N;if(!!rr(P,a))if(un(P)){var L=u.readField({fieldName:P.name.value,field:P,variables:c.variables,from:r},c),q=ln(P);L===void 0?Ws.added(P)||(v=g.merge(v,(I={},I[q]="Can't find field '".concat(P.name.value,"' on ").concat(_e(r)?r.__ref+" object":"object "+JSON.stringify(r,null,2)),I))):Me(L)?L=w(t.executeSubSelectedArray({field:P,array:L,enclosingRef:s,context:c}),q):P.selectionSet?L!=null&&(L=w(t.executeSelectionSet({selectionSet:P.selectionSet,objectOrReference:L,enclosingRef:_e(L)?L:s,context:c}),q)):c.canonizeResults&&(L=t.canon.pass(L)),L!==void 0&&m.push((N={},N[q]=L,N))}else{var G=Vs(P,c.lookupFragment);if(!G&&P.kind===W.FRAGMENT_SPREAD)throw __DEV__?new me("No fragment named ".concat(P.name.value)):new me(5);G&&u.fragmentMatches(G,d)&&G.selectionSet.selections.forEach(b.add,b)}});var x=Gs(m),O={result:x,missing:v},E=c.canonizeResults?this.canon.admit(O):ms(O);return E.result&&this.knownResults.set(E.result,i),E},n.prototype.execSubSelectedArrayImpl=function(e){var t=this,i=e.field,r=e.array,s=e.enclosingRef,c=e.context,a,u=new Vt;function f(d,m){var v;return d.missing&&(a=u.merge(a,(v={},v[m]=d.missing,v))),d.result}return i.selectionSet&&(r=r.filter(c.store.canRead)),r=r.map(function(d,m){return d===null?null:Me(d)?f(t.executeSubSelectedArray({field:i,array:d,enclosingRef:s,context:c}),m):i.selectionSet?f(t.executeSelectionSet({selectionSet:i.selectionSet,objectOrReference:d,enclosingRef:_e(d)?d:s,context:c}),m):(__DEV__&&Bp(c.store,i,d),d)}),{result:c.canonizeResults?this.canon.admit(r):r,missing:a}},n}();function qp(n){try{JSON.stringify(n,function(e,t){if(typeof t=="string")throw t;return t})}catch(e){return e}}function Bp(n,e,t){if(!e.selectionSet){var i=new Set([t]);i.forEach(function(r){Le(r)&&(__DEV__?$(!_e(r),"Missing selection set for object of type ".concat(Dp(n,r)," returned for query field ").concat(e.name.value)):$(!_e(r),6),Object.values(r).forEach(i.add,i))})}}var no=new ur,wc=new WeakMap;function ni(n){var e=wc.get(n);return e||wc.set(n,e={vars:new Set,dep:Il()}),e}function Ec(n){ni(n).vars.forEach(function(e){return e.forgetCache(n)})}function jp(n){ni(n).vars.forEach(function(e){return e.attachCache(n)})}function $p(n){var e=new Set,t=new Set,i=function(s){if(arguments.length>0){if(n!==s){n=s,e.forEach(function(u){ni(u).dep.dirty(i),Vp(u)});var c=Array.from(t);t.clear(),c.forEach(function(u){return u(n)})}}else{var a=no.getValue();a&&(r(a),ni(a).dep(i))}return n};i.onNextChange=function(s){return t.add(s),function(){t.delete(s)}};var r=i.attachCache=function(s){return e.add(s),ni(s).vars.add(i),i};return i.forgetCache=function(s){return e.delete(s)},i}function Vp(n){n.broadcastWatches&&n.broadcastWatches()}var xc=Object.create(null);function io(n){var e=JSON.stringify(n);return xc[e]||(xc[e]=Object.create(null))}function Tc(n){var e=io(n);return e.keyFieldsFn||(e.keyFieldsFn=function(t,i){var r=function(c,a){return i.readField(a,c)},s=i.keyObject=ro(n,function(c){var a=Rn(i.storeObject,c,r);return a===void 0&&t!==i.storeObject&&ze.call(t,c[0])&&(a=Rn(t,c,Fl)),__DEV__?$(a!==void 0,"Missing field '".concat(c.join("."),"' while extracting keyFields from ").concat(JSON.stringify(t))):$(a!==void 0,2),a});return"".concat(i.typename,":").concat(JSON.stringify(s))})}function kc(n){var e=io(n);return e.keyArgsFn||(e.keyArgsFn=function(t,i){var r=i.field,s=i.variables,c=i.fieldName,a=ro(n,function(f){var d=f[0],m=d.charAt(0);if(m==="@"){if(r&&It(r.directives)){var v=d.slice(1),g=r.directives.find(function(O){return O.name.value===v}),w=g&&sr(g,s);return w&&Rn(w,f.slice(1))}return}if(m==="$"){var b=d.slice(1);if(s&&ze.call(s,b)){var x=f.slice(0);return x[0]=b,Rn(s,x)}return}if(t)return Rn(t,f)}),u=JSON.stringify(a);return(t||u!=="{}")&&(c+=":"+u),c})}function ro(n,e){var t=new Vt;return Ml(n).reduce(function(i,r){var s,c=e(r);if(c!==void 0){for(var a=r.length-1;a>=0;--a)c=(s={},s[r[a]]=c,s);i=t.merge(i,c)}return i},Object.create(null))}function Ml(n){var e=io(n);if(!e.paths){var t=e.paths=[],i=[];n.forEach(function(r,s){Me(r)?(Ml(r).forEach(function(c){return t.push(i.concat(c))}),i.length=0):(i.push(r),Me(n[s+1])||(t.push(i.slice(0)),i.length=0))})}return e.paths}function Fl(n,e){return n[e]}function Rn(n,e,t){return t=t||Fl,ql(e.reduce(function i(r,s){return Me(r)?r.map(function(c){return i(c,s)}):r&&t(r,s)},n))}function ql(n){return Le(n)?Me(n)?n.map(ql):ro(Object.keys(n).sort(),function(e){return Rn(n,e)}):n}Qs.setStringify(an);function Ss(n){return n.args!==void 0?n.args:n.field?sr(n.field,n.variables):null}var Qp=function(){},Pc=function(n,e){return e.fieldName},Ic=function(n,e,t){var i=t.mergeObjects;return i(n,e)},Sc=function(n,e){return e},Up=function(){function n(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=k({dataIdFromObject:Cl},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return n.prototype.identify=function(e,t){var i,r=this,s=t&&(t.typename||((i=t.storeObject)===null||i===void 0?void 0:i.__typename))||e.__typename;if(s===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var c=t&&t.storeObject||e,a=k(k({},t),{typename:s,storeObject:c,readField:t&&t.readField||function(){var v=so(arguments,c);return r.readField(v,{store:r.cache.data,variables:v.variables})}}),u,f=s&&this.getTypePolicy(s),d=f&&f.keyFn||this.config.dataIdFromObject;d;){var m=d(e,a);if(Me(m))d=Tc(m);else{u=m;break}}return u=u?String(u):void 0,a.keyObject?[u,a.keyObject]:[u]},n.prototype.addTypePolicies=function(e){var t=this;Object.keys(e).forEach(function(i){var r=e[i],s=r.queryType,c=r.mutationType,a=r.subscriptionType,u=Mn(r,["queryType","mutationType","subscriptionType"]);s&&t.setRootTypename("Query",i),c&&t.setRootTypename("Mutation",i),a&&t.setRootTypename("Subscription",i),ze.call(t.toBeAdded,i)?t.toBeAdded[i].push(u):t.toBeAdded[i]=[u]})},n.prototype.updateTypePolicy=function(e,t){var i=this,r=this.getTypePolicy(e),s=t.keyFields,c=t.fields;function a(u,f){u.merge=typeof f=="function"?f:f===!0?Ic:f===!1?Sc:u.merge}a(r,t.merge),r.keyFn=s===!1?Qp:Me(s)?Tc(s):typeof s=="function"?s:r.keyFn,c&&Object.keys(c).forEach(function(u){var f=i.getFieldPolicy(e,u,!0),d=c[u];if(typeof d=="function")f.read=d;else{var m=d.keyArgs,v=d.read,g=d.merge;f.keyFn=m===!1?Pc:Me(m)?kc(m):typeof m=="function"?m:f.keyFn,typeof v=="function"&&(f.read=v),a(f,g)}f.read&&f.merge&&(f.keyFn=f.keyFn||Pc)})},n.prototype.setRootTypename=function(e,t){t===void 0&&(t=e);var i="ROOT_"+e.toUpperCase(),r=this.rootTypenamesById[i];t!==r&&(__DEV__?$(!r||r===e,"Cannot change root ".concat(e," __typename more than once")):$(!r||r===e,3),r&&delete this.rootIdsByTypename[r],this.rootIdsByTypename[t]=i,this.rootTypenamesById[i]=t)},n.prototype.addPossibleTypes=function(e){var t=this;this.usingPossibleTypes=!0,Object.keys(e).forEach(function(i){t.getSupertypeSet(i,!0),e[i].forEach(function(r){t.getSupertypeSet(r,!0).add(i);var s=r.match(Nl);(!s||s[0]!==r)&&t.fuzzySubtypes.set(r,new RegExp(r))})})},n.prototype.getTypePolicy=function(e){var t=this;if(!ze.call(this.typePolicies,e)){var i=this.typePolicies[e]=Object.create(null);i.fields=Object.create(null);var r=this.supertypeMap.get(e);r&&r.size&&r.forEach(function(c){var a=t.getTypePolicy(c),u=a.fields,f=Mn(a,["fields"]);Object.assign(i,f),Object.assign(i.fields,u)})}var s=this.toBeAdded[e];return s&&s.length&&s.splice(0).forEach(function(c){t.updateTypePolicy(e,c)}),this.typePolicies[e]},n.prototype.getFieldPolicy=function(e,t,i){if(e){var r=this.getTypePolicy(e).fields;return r[t]||i&&(r[t]=Object.create(null))}},n.prototype.getSupertypeSet=function(e,t){var i=this.supertypeMap.get(e);return!i&&t&&this.supertypeMap.set(e,i=new Set),i},n.prototype.fragmentMatches=function(e,t,i,r){var s=this;if(!e.typeCondition)return!0;if(!t)return!1;var c=e.typeCondition.name.value;if(t===c)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(c))for(var a=this.getSupertypeSet(t,!0),u=[a],f=function(w){var b=s.getSupertypeSet(w,!1);b&&b.size&&u.indexOf(b)<0&&u.push(b)},d=!!(i&&this.fuzzySubtypes.size),m=!1,v=0;v<u.length;++v){var g=u[v];if(g.has(c))return a.has(c)||(m&&__DEV__&&$.warn("Inferring subtype ".concat(t," of supertype ").concat(c)),a.add(c)),!0;g.forEach(f),d&&v===u.length-1&&Ts(e.selectionSet,i,r)&&(d=!1,m=!0,this.fuzzySubtypes.forEach(function(w,b){var x=t.match(w);x&&x[0]===t&&f(b)}))}return!1},n.prototype.hasKeyArgs=function(e,t){var i=this.getFieldPolicy(e,t,!1);return!!(i&&i.keyFn)},n.prototype.getStoreFieldName=function(e){var t=e.typename,i=e.fieldName,r=this.getFieldPolicy(t,i,!1),s,c=r&&r.keyFn;if(c&&t)for(var a={typename:t,fieldName:i,field:e.field||null,variables:e.variables},u=Ss(e);c;){var f=c(u,a);if(Me(f))c=kc(f);else{s=f||i;break}}return s===void 0&&(s=e.field?Jh(e.field,e.variables):Qs(i,Ss(e))),s===!1?i:i===Ut(s)?s:i+":"+s},n.prototype.readField=function(e,t){var i=e.from;if(!!i){var r=e.field||e.fieldName;if(!!r){if(e.typename===void 0){var s=t.store.getFieldValue(i,"__typename");s&&(e.typename=s)}var c=this.getStoreFieldName(e),a=Ut(c),u=t.store.getFieldValue(i,c),f=this.getFieldPolicy(e.typename,a,!1),d=f&&f.read;if(d){var m=Oc(this,i,e,t,t.store.getStorage(_e(i)?i.__ref:i,c));return no.withValue(this.cache,d,[u,m])}return u}}},n.prototype.getReadFunction=function(e,t){var i=this.getFieldPolicy(e,t,!1);return i&&i.read},n.prototype.getMergeFunction=function(e,t,i){var r=this.getFieldPolicy(e,t,!1),s=r&&r.merge;return!s&&i&&(r=this.getTypePolicy(i),s=r&&r.merge),s},n.prototype.runMergeFunction=function(e,t,i,r,s){var c=i.field,a=i.typename,u=i.merge;return u===Ic?Bl(r.store)(e,t):u===Sc?t:(r.overwrite&&(e=void 0),u(e,t,Oc(this,void 0,{typename:a,fieldName:c.name.value,field:c,variables:r.variables},r,s||Object.create(null))))},n}();function Oc(n,e,t,i,r){var s=n.getStoreFieldName(t),c=Ut(s),a=t.variables||i.variables,u=i.store,f=u.toReference,d=u.canRead;return{args:Ss(t),field:t.field||null,fieldName:c,storeFieldName:s,variables:a,isReference:_e,toReference:f,storage:r,cache:n.cache,canRead:d,readField:function(){return n.readField(so(arguments,e,a),i)},mergeObjects:Bl(i.store)}}function so(n,e,t){var i=n[0],r=n[1],s=n.length,c;return typeof i=="string"?c={fieldName:i,from:s>1?r:e}:(c=k({},i),ze.call(c,"from")||(c.from=e)),__DEV__&&c.from===void 0&&__DEV__&&$.warn("Undefined 'from' passed to readField with arguments ".concat(kd(Array.from(n)))),c.variables===void 0&&(c.variables=t),c}function Bl(n){return function(t,i){if(Me(t)||Me(i))throw __DEV__?new me("Cannot automatically merge arrays"):new me(4);if(Le(t)&&Le(i)){var r=n.getFieldValue(t,"__typename"),s=n.getFieldValue(i,"__typename"),c=r&&s&&r!==s;if(c)return i;if(_e(t)&&Cn(i))return n.merge(t.__ref,i),t;if(Cn(t)&&_e(i))return n.merge(t,i.__ref),i;if(Cn(t)&&Cn(i))return k(k({},t),i)}return i}}function Xr(n,e,t){var i="".concat(e).concat(t),r=n.flavors.get(i);return r||n.flavors.set(i,r=n.clientOnly===e&&n.deferred===t?n:k(k({},n),{clientOnly:e,deferred:t})),r}var zp=function(){function n(e,t,i){this.cache=e,this.reader=t,this.fragments=i}return n.prototype.writeToStore=function(e,t){var i=this,r=t.query,s=t.result,c=t.dataId,a=t.variables,u=t.overwrite,f=ui(r),d=Np();a=k(k({},zs(f)),a);var m=k(k({store:e,written:Object.create(null),merge:function(g,w){return d.merge(g,w)},variables:a,varString:an(a)},Ll(r,this.fragments)),{overwrite:!!u,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),v=this.processSelectionSet({result:s||Object.create(null),dataId:c,selectionSet:f.selectionSet,mergeTree:{map:new Map},context:m});if(!_e(v))throw __DEV__?new me("Could not identify object ".concat(JSON.stringify(s))):new me(7);return m.incomingById.forEach(function(g,w){var b=g.storeObject,x=g.mergeTree,O=g.fieldNodeSet,E=Nn(w);if(x&&x.map.size){var P=i.applyMerges(x,E,b,m);if(_e(P))return;b=P}if(__DEV__&&!m.overwrite){var I=Object.create(null);O.forEach(function(q){q.selectionSet&&(I[q.name.value]=!0)});var N=function(q){return I[Ut(q)]===!0},L=function(q){var G=x&&x.map.get(q);return Boolean(G&&G.info&&G.info.merge)};Object.keys(b).forEach(function(q){N(q)&&!L(q)&&Wp(E,b,q,m.store)})}e.merge(w,b)}),e.retain(v.__ref),v},n.prototype.processSelectionSet=function(e){var t=this,i=e.dataId,r=e.result,s=e.selectionSet,c=e.context,a=e.mergeTree,u=this.cache.policies,f=Object.create(null),d=i&&u.rootTypenamesById[i]||fs(r,s,c.fragmentMap)||i&&c.store.get(i,"__typename");typeof d=="string"&&(f.__typename=d);var m=function(){var P=so(arguments,f,c.variables);if(_e(P.from)){var I=c.incomingById.get(P.from.__ref);if(I){var N=u.readField(k(k({},P),{from:I.storeObject}),c);if(N!==void 0)return N}}return u.readField(P,c)},v=new Set;this.flattenFields(s,r,c,d).forEach(function(P,I){var N,L=ln(I),q=r[L];if(v.add(I),q!==void 0){var G=u.getStoreFieldName({typename:d,fieldName:I.name.value,field:I,variables:P.variables}),Q=Cc(a,G),Z=t.processFieldValue(q,I,I.selectionSet?Xr(P,!1,!1):P,Q),Se=void 0;I.selectionSet&&(_e(Z)||Cn(Z))&&(Se=m("__typename",Z));var Re=u.getMergeFunction(d,I.name.value,Se);Re?Q.info={field:I,typename:d,merge:Re}:Ac(a,G),f=P.merge(f,(N={},N[G]=Z,N))}else __DEV__&&!P.clientOnly&&!P.deferred&&!Ws.added(I)&&!u.getReadFunction(d,I.name.value)&&__DEV__&&$.error("Missing field '".concat(ln(I),"' while writing result ").concat(JSON.stringify(r,null,2)).substring(0,1e3))});try{var g=u.identify(r,{typename:d,selectionSet:s,fragmentMap:c.fragmentMap,storeObject:f,readField:m}),w=g[0],b=g[1];i=i||w,b&&(f=c.merge(f,b))}catch(P){if(!i)throw P}if(typeof i=="string"){var x=Nn(i),O=c.written[i]||(c.written[i]=[]);if(O.indexOf(s)>=0||(O.push(s),this.reader&&this.reader.isFresh(r,x,s,c)))return x;var E=c.incomingById.get(i);return E?(E.storeObject=c.merge(E.storeObject,f),E.mergeTree=Os(E.mergeTree,a),v.forEach(function(P){return E.fieldNodeSet.add(P)})):c.incomingById.set(i,{storeObject:f,mergeTree:Zi(a)?void 0:a,fieldNodeSet:v}),x}return f},n.prototype.processFieldValue=function(e,t,i,r){var s=this;return!t.selectionSet||e===null?__DEV__?hl(e):e:Me(e)?e.map(function(c,a){var u=s.processFieldValue(c,t,i,Cc(r,a));return Ac(r,a),u}):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:i,mergeTree:r})},n.prototype.flattenFields=function(e,t,i,r){r===void 0&&(r=fs(t,e,i.fragmentMap));var s=new Map,c=this.cache.policies,a=new hi(!1);return function u(f,d){var m=a.lookup(f,d.clientOnly,d.deferred);m.visited||(m.visited=!0,f.selections.forEach(function(v){if(!!rr(v,i.variables)){var g=d.clientOnly,w=d.deferred;if(!(g&&w)&&It(v.directives)&&v.directives.forEach(function(O){var E=O.name.value;if(E==="client"&&(g=!0),E==="defer"){var P=sr(O,i.variables);(!P||P.if!==!1)&&(w=!0)}}),un(v)){var b=s.get(v);b&&(g=g&&b.clientOnly,w=w&&b.deferred),s.set(v,Xr(i,g,w))}else{var x=Vs(v,i.lookupFragment);if(!x&&v.kind===W.FRAGMENT_SPREAD)throw __DEV__?new me("No fragment named ".concat(v.name.value)):new me(8);x&&c.fragmentMatches(x,r,t,i.variables)&&u(x.selectionSet,Xr(i,g,w))}}}))}(e,i),s},n.prototype.applyMerges=function(e,t,i,r,s){var c,a=this;if(e.map.size&&!_e(i)){var u=!Me(i)&&(_e(t)||Cn(t))?t:void 0,f=i;u&&!s&&(s=[_e(u)?u.__ref:u]);var d,m=function(v,g){return Me(v)?typeof g=="number"?v[g]:void 0:r.store.getFieldValue(v,String(g))};e.map.forEach(function(v,g){var w=m(u,g),b=m(f,g);if(b!==void 0){s&&s.push(g);var x=a.applyMerges(v,w,b,r,s);x!==b&&(d=d||new Map,d.set(g,x)),s&&$(s.pop()===g)}}),d&&(i=Me(f)?f.slice(0):k({},f),d.forEach(function(v,g){i[g]=v}))}return e.info?this.cache.policies.runMergeFunction(t,i,e.info,r,s&&(c=r.store).getStorage.apply(c,s)):i},n}(),jl=[];function Cc(n,e){var t=n.map;return t.has(e)||t.set(e,jl.pop()||{map:new Map}),t.get(e)}function Os(n,e){if(n===e||!e||Zi(e))return n;if(!n||Zi(n))return e;var t=n.info&&e.info?k(k({},n.info),e.info):n.info||e.info,i=n.map.size&&e.map.size,r=i?new Map:n.map.size?n.map:e.map,s={info:t,map:r};if(i){var c=new Set(e.map.keys());n.map.forEach(function(a,u){s.map.set(u,Os(a,e.map.get(u))),c.delete(u)}),c.forEach(function(a){s.map.set(a,Os(e.map.get(a),n.map.get(a)))})}return s}function Zi(n){return!n||!(n.info||n.map.size)}function Ac(n,e){var t=n.map,i=t.get(e);i&&Zi(i)&&(jl.push(i),t.delete(e))}var Dc=new Set;function Wp(n,e,t,i){var r=function(m){var v=i.getFieldValue(m,t);return typeof v=="object"&&v},s=r(n);if(!!s){var c=r(e);if(!!c&&!_e(s)&&!$e(s,c)&&!Object.keys(s).every(function(m){return i.getFieldValue(c,m)!==void 0})){var a=i.getFieldValue(n,"__typename")||i.getFieldValue(e,"__typename"),u=Ut(t),f="".concat(a,".").concat(u);if(!Dc.has(f)){Dc.add(f);var d=[];!Me(s)&&!Me(c)&&[s,c].forEach(function(m){var v=i.getFieldValue(m,"__typename");typeof v=="string"&&!d.includes(v)&&d.push(v)}),__DEV__&&$.warn("Cache data may be lost when replacing the ".concat(u," field of a ").concat(a,` object.

To address this problem (which is not a bug in Apollo Client), `).concat(d.length?"either ensure all objects of type "+d.join(" and ")+" have an ID or a custom merge function, or ":"","define a custom merge function for the ").concat(f,` field, so InMemoryCache can safely merge these objects:

  existing: `).concat(JSON.stringify(s).slice(0,1e3),`
  incoming: `).concat(JSON.stringify(c).slice(0,1e3),`

For more information about these options, please refer to the documentation:

  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers
  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects
`))}}}}var Gp=function(n){_t(e,n);function e(t){t===void 0&&(t={});var i=n.call(this)||this;return i.watches=new Set,i.typenameDocumentCache=new Map,i.makeVar=$p,i.txCount=0,i.config=Ap(t),i.addTypename=!!i.config.addTypename,i.policies=new Up({cache:i,dataIdFromObject:i.config.dataIdFromObject,possibleTypes:i.config.possibleTypes,typePolicies:i.config.typePolicies}),i.init(),i}return e.prototype.init=function(){var t=this.data=new si.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=t.stump,this.resetResultCache()},e.prototype.resetResultCache=function(t){var i=this,r=this.storeReader,s=this.config.fragments;this.storeWriter=new zp(this,this.storeReader=new Fp({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:Dl(this.config),canon:t?void 0:r&&r.canon,fragments:s}),s),this.maybeBroadcastWatch=Xi(function(c,a){return i.broadcastWatch(c,a)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(c){var a=c.optimistic?i.optimisticData:i.data;if(ti(a)){var u=c.optimistic,f=c.id,d=c.variables;return a.makeCacheKey(c.query,c.callback,an({optimistic:u,id:f,variables:d}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(c){return c.resetCaching()})},e.prototype.restore=function(t){return this.init(),t&&this.data.replace(t),this},e.prototype.extract=function(t){return t===void 0&&(t=!1),(t?this.optimisticData:this.data).extract()},e.prototype.read=function(t){var i=t.returnPartialData,r=i===void 0?!1:i;try{return this.storeReader.diffQueryAgainstStore(k(k({},t),{store:t.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:r})).result||null}catch(s){if(s instanceof Ol)return null;throw s}},e.prototype.write=function(t){try{return++this.txCount,this.storeWriter.writeToStore(this.data,t)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.modify=function(t){if(ze.call(t,"id")&&!t.id)return!1;var i=t.optimistic?this.optimisticData:this.data;try{return++this.txCount,i.modify(t.id||"ROOT_QUERY",t.fields)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.diff=function(t){return this.storeReader.diffQueryAgainstStore(k(k({},t),{store:t.optimistic?this.optimisticData:this.data,rootId:t.id||"ROOT_QUERY",config:this.config}))},e.prototype.watch=function(t){var i=this;return this.watches.size||jp(this),this.watches.add(t),t.immediate&&this.maybeBroadcastWatch(t),function(){i.watches.delete(t)&&!i.watches.size&&Ec(i),i.maybeBroadcastWatch.forget(t)}},e.prototype.gc=function(t){an.reset();var i=this.optimisticData.gc();return t&&!this.txCount&&(t.resetResultCache?this.resetResultCache(t.resetResultIdentities):t.resetResultIdentities&&this.storeReader.resetCanon()),i},e.prototype.retain=function(t,i){return(i?this.optimisticData:this.data).retain(t)},e.prototype.release=function(t,i){return(i?this.optimisticData:this.data).release(t)},e.prototype.identify=function(t){if(_e(t))return t.__ref;try{return this.policies.identify(t)[0]}catch(i){__DEV__&&$.warn(i)}},e.prototype.evict=function(t){if(!t.id){if(ze.call(t,"id"))return!1;t=k(k({},t),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(t,this.data)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.reset=function(t){var i=this;return this.init(),an.reset(),t&&t.discardWatches?(this.watches.forEach(function(r){return i.maybeBroadcastWatch.forget(r)}),this.watches.clear(),Ec(this)):this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(t){var i=this.optimisticData.removeLayer(t);i!==this.optimisticData&&(this.optimisticData=i,this.broadcastWatches())},e.prototype.batch=function(t){var i=this,r=t.update,s=t.optimistic,c=s===void 0?!0:s,a=t.removeOptimistic,u=t.onWatchUpdated,f,d=function(v){var g=i,w=g.data,b=g.optimisticData;++i.txCount,v&&(i.data=i.optimisticData=v);try{return f=r(i)}finally{--i.txCount,i.data=w,i.optimisticData=b}},m=new Set;return u&&!this.txCount&&this.broadcastWatches(k(k({},t),{onWatchUpdated:function(v){return m.add(v),!1}})),typeof c=="string"?this.optimisticData=this.optimisticData.addLayer(c,d):c===!1?d(this.data):d(),typeof a=="string"&&(this.optimisticData=this.optimisticData.removeLayer(a)),u&&m.size?(this.broadcastWatches(k(k({},t),{onWatchUpdated:function(v,g){var w=u.call(this,v,g);return w!==!1&&m.delete(v),w}})),m.size&&m.forEach(function(v){return i.maybeBroadcastWatch.dirty(v)})):this.broadcastWatches(t),f},e.prototype.performTransaction=function(t,i){return this.batch({update:t,optimistic:i||i!==null})},e.prototype.transformDocument=function(t){if(this.addTypename){var i=this.typenameDocumentCache.get(t);return i||(i=Ws(t),this.typenameDocumentCache.set(t,i),this.typenameDocumentCache.set(i,i)),i}return t},e.prototype.transformForLink=function(t){var i=this.config.fragments;return i?i.transform(t):t},e.prototype.broadcastWatches=function(t){var i=this;this.txCount||this.watches.forEach(function(r){return i.maybeBroadcastWatch(r,t)})},e.prototype.broadcastWatch=function(t,i){var r=t.lastDiff,s=this.diff(t);i&&(t.optimistic&&typeof i.optimistic=="string"&&(s.fromOptimisticTransaction=!0),i.onWatchUpdated&&i.onWatchUpdated.call(this,t,s,r)===!1)||(!r||!$e(r.result,s.result))&&t.callback(t.lastDiff=s,r)},e}(Cp),Te;(function(n){n[n.loading=1]="loading",n[n.setVariables=2]="setVariables",n[n.fetchMore=3]="fetchMore",n[n.refetch=4]="refetch",n[n.poll=6]="poll",n[n.ready=7]="ready",n[n.error=8]="error"})(Te||(Te={}));function oi(n){return n?n<7:!1}var Hp=Object.assign,Kp=Object.hasOwnProperty,Cs=function(n){_t(e,n);function e(t){var i=t.queryManager,r=t.queryInfo,s=t.options,c=n.call(this,function(x){try{var O=x._subscription._observer;O&&!O.error&&(O.error=Yp)}catch{}var E=!c.observers.size;c.observers.add(x);var P=c.last;return P&&P.error?x.error&&x.error(P.error):P&&P.result&&x.next&&x.next(P.result),E&&c.reobserve().catch(function(){}),function(){c.observers.delete(x)&&!c.observers.size&&c.tearDownQuery()}})||this;c.observers=new Set,c.subscriptions=new Set,c.queryInfo=r,c.queryManager=i,c.isTornDown=!1;var a=i.defaultOptions.watchQuery,u=a===void 0?{}:a,f=u.fetchPolicy,d=f===void 0?"cache-first":f,m=s.fetchPolicy,v=m===void 0?d:m,g=s.initialFetchPolicy,w=g===void 0?v==="standby"?d:v:g;c.options=k(k({},s),{initialFetchPolicy:w,fetchPolicy:v}),c.queryId=r.queryId||i.generateQueryId();var b=ui(c.query);return c.queryName=b&&b.name&&b.name.value,c}return Object.defineProperty(e.prototype,"query",{get:function(){return this.queryManager.transform(this.options.query).document},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),e.prototype.result=function(){var t=this;return new Promise(function(i,r){var s={next:function(a){i(a),t.observers.delete(s),t.observers.size||t.queryManager.removeQuery(t.queryId),setTimeout(function(){c.unsubscribe()},0)},error:r},c=t.subscribe(s)})},e.prototype.getCurrentResult=function(t){t===void 0&&(t=!0);var i=this.getLastResult(!0),r=this.queryInfo.networkStatus||i&&i.networkStatus||Te.ready,s=k(k({},i),{loading:oi(r),networkStatus:r}),c=this.options.fetchPolicy,a=c===void 0?"cache-first":c;if(!(a==="network-only"||a==="no-cache"||a==="standby"||this.queryManager.transform(this.options.query).hasForcedResolvers)){var u=this.queryInfo.getDiff();(u.complete||this.options.returnPartialData)&&(s.data=u.result),$e(s.data,{})&&(s.data=void 0),u.complete?(delete s.partial,u.complete&&s.networkStatus===Te.loading&&(a==="cache-first"||a==="cache-only")&&(s.networkStatus=Te.ready,s.loading=!1)):s.partial=!0,__DEV__&&!u.complete&&!this.options.partialRefetch&&!s.loading&&!s.data&&!s.error&&Vl(u.missing)}return t&&this.updateLastResult(s),s},e.prototype.isDifferentFromLastResult=function(t,i){return!this.last||!$e(this.last.result,t)||i&&!$e(this.last.variables,i)},e.prototype.getLast=function(t,i){var r=this.last;if(r&&r[t]&&(!i||$e(r.variables,this.variables)))return r[t]},e.prototype.getLastResult=function(t){return this.getLast("result",t)},e.prototype.getLastError=function(t){return this.getLast("error",t)},e.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},e.prototype.refetch=function(t){var i,r={pollInterval:0},s=this.options.fetchPolicy;if(s==="cache-and-network"?r.fetchPolicy=s:s==="no-cache"?r.fetchPolicy="no-cache":r.fetchPolicy="network-only",__DEV__&&t&&Kp.call(t,"variables")){var c=ol(this.query),a=c.variableDefinitions;(!a||!a.some(function(u){return u.variable.name.value==="variables"}))&&__DEV__&&$.warn("Called refetch(".concat(JSON.stringify(t),") for query ").concat(((i=c.name)===null||i===void 0?void 0:i.value)||JSON.stringify(c),`, which does not declare a $variables variable.
Did you mean to call refetch(variables) instead of refetch({ variables })?`))}return t&&!$e(this.options.variables,t)&&(r.variables=this.options.variables=k(k({},this.options.variables),t)),this.queryInfo.resetLastWrite(),this.reobserve(r,Te.refetch)},e.prototype.fetchMore=function(t){var i=this,r=k(k({},t.query?t:k(k(k(k({},this.options),{query:this.query}),t),{variables:k(k({},this.options.variables),t.variables)})),{fetchPolicy:"no-cache"}),s=this.queryManager.generateQueryId(),c=this.queryInfo,a=c.networkStatus;c.networkStatus=Te.fetchMore,r.notifyOnNetworkStatusChange&&this.observe();var u=new Set;return this.queryManager.fetchQuery(s,r,Te.fetchMore).then(function(f){return i.queryManager.removeQuery(s),c.networkStatus===Te.fetchMore&&(c.networkStatus=a),i.queryManager.cache.batch({update:function(d){var m=t.updateQuery;m?d.updateQuery({query:i.query,variables:i.variables,returnPartialData:!0,optimistic:!1},function(v){return m(v,{fetchMoreResult:f.data,variables:r.variables})}):d.writeQuery({query:r.query,variables:r.variables,data:f.data})},onWatchUpdated:function(d){u.add(d.query)}}),f}).finally(function(){u.has(i.query)||$l(i)})},e.prototype.subscribeToMore=function(t){var i=this,r=this.queryManager.startGraphQLSubscription({query:t.document,variables:t.variables,context:t.context}).subscribe({next:function(s){var c=t.updateQuery;c&&i.updateQuery(function(a,u){var f=u.variables;return c(a,{subscriptionData:s,variables:f})})},error:function(s){if(t.onError){t.onError(s);return}__DEV__&&$.error("Unhandled GraphQL subscription error",s)}});return this.subscriptions.add(r),function(){i.subscriptions.delete(r)&&r.unsubscribe()}},e.prototype.setOptions=function(t){return this.reobserve(t)},e.prototype.setVariables=function(t){return $e(this.variables,t)?this.observers.size?this.result():Promise.resolve():(this.options.variables=t,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:t},Te.setVariables):Promise.resolve())},e.prototype.updateQuery=function(t){var i=this.queryManager,r=i.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,s=t(r,{variables:this.variables});s&&(i.cache.writeQuery({query:this.options.query,data:s,variables:this.variables}),i.broadcastQueries())},e.prototype.startPolling=function(t){this.options.pollInterval=t,this.updatePolling()},e.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},e.prototype.applyNextFetchPolicy=function(t,i){if(i.nextFetchPolicy){var r=i.fetchPolicy,s=r===void 0?"cache-first":r,c=i.initialFetchPolicy,a=c===void 0?s:c;s==="standby"||(typeof i.nextFetchPolicy=="function"?i.fetchPolicy=i.nextFetchPolicy(s,{reason:t,options:i,observable:this,initialFetchPolicy:a}):t==="variables-changed"?i.fetchPolicy=a:i.fetchPolicy=i.nextFetchPolicy)}return i.fetchPolicy},e.prototype.fetch=function(t,i){return this.queryManager.setObservableQuery(this),this.queryManager.fetchConcastWithInfo(this.queryId,t,i)},e.prototype.updatePolling=function(){var t=this;if(!this.queryManager.ssrMode){var i=this,r=i.pollingInfo,s=i.options.pollInterval;if(!s){r&&(clearTimeout(r.timeout),delete this.pollingInfo);return}if(!(r&&r.interval===s)){__DEV__?$(s,"Attempted to start a polling query without a polling interval."):$(s,13);var c=r||(this.pollingInfo={});c.interval=s;var a=function(){t.pollingInfo&&(oi(t.queryInfo.networkStatus)?u():t.reobserve({fetchPolicy:t.options.initialFetchPolicy==="no-cache"?"no-cache":"network-only"},Te.poll).then(u,u))},u=function(){var f=t.pollingInfo;f&&(clearTimeout(f.timeout),f.timeout=setTimeout(a,f.interval))};u()}}},e.prototype.updateLastResult=function(t,i){return i===void 0&&(i=this.variables),this.last=k(k({},this.last),{result:this.queryManager.assumeImmutableResults?t:hl(t),variables:i}),It(t.errors)||delete this.last.error,this.last},e.prototype.reobserveAsConcast=function(t,i){var r=this;this.isTornDown=!1;var s=i===Te.refetch||i===Te.fetchMore||i===Te.poll,c=this.options.variables,a=this.options.fetchPolicy,u=lr(this.options,t||{}),f=s?u:Hp(this.options,u);s||(this.updatePolling(),t&&t.variables&&!$e(t.variables,c)&&f.fetchPolicy!=="standby"&&f.fetchPolicy===a&&(this.applyNextFetchPolicy("variables-changed",f),i===void 0&&(i=Te.setVariables)));var d=f.variables&&k({},f.variables),m=this.fetch(f,i),v=m.concast,g=m.fromLink,w={next:function(b){r.reportResult(b,d)},error:function(b){r.reportError(b,d)}};return!s&&g&&(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=v,this.observer=w),v.addObserver(w),v},e.prototype.reobserve=function(t,i){return this.reobserveAsConcast(t,i).promise},e.prototype.observe=function(){this.reportResult(this.getCurrentResult(!1),this.variables)},e.prototype.reportResult=function(t,i){var r=this.getLastError();(r||this.isDifferentFromLastResult(t,i))&&((r||!t.partial||this.options.returnPartialData)&&this.updateLastResult(t,i),ei(this.observers,"next",t))},e.prototype.reportError=function(t,i){var r=k(k({},this.getLastResult()),{error:t,errors:t.graphQLErrors,networkStatus:Te.error,loading:!1});this.updateLastResult(r,i),ei(this.observers,"error",this.last.error=t)},e.prototype.hasObservers=function(){return this.observers.size>0},e.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(t){return t.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},e}(De);pl(Cs);function $l(n){var e=n.options,t=e.fetchPolicy,i=e.nextFetchPolicy;return t==="cache-and-network"||t==="network-only"?n.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(){return this.nextFetchPolicy=i,typeof i=="function"?i.apply(this,arguments):t}}):n.reobserve()}function Yp(n){__DEV__&&$.error("Unhandled error",n.message,n.stack)}function Vl(n){__DEV__&&n&&__DEV__&&$.debug("Missing cache result fields: ".concat(JSON.stringify(n)),n)}var Ql=function(){function n(e){var t=e.cache,i=e.client,r=e.resolvers,s=e.fragmentMatcher;this.selectionsToResolveCache=new WeakMap,this.cache=t,i&&(this.client=i),r&&this.addResolvers(r),s&&this.setFragmentMatcher(s)}return n.prototype.addResolvers=function(e){var t=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(i){t.resolvers=Ja(t.resolvers,i)}):this.resolvers=Ja(this.resolvers,e)},n.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},n.prototype.getResolvers=function(){return this.resolvers||{}},n.prototype.runResolvers=function(e){var t=e.document,i=e.remoteResult,r=e.context,s=e.variables,c=e.onlyRunForcedResolvers,a=c===void 0?!1:c;return Bt(this,void 0,void 0,function(){return jt(this,function(u){return t?[2,this.resolveDocument(t,i.data,r,s,this.fragmentMatcher,a).then(function(f){return k(k({},i),{data:f.result})})]:[2,i]})})},n.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},n.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},n.prototype.clientQuery=function(e){return js(["client"],e)&&this.resolvers?e:null},n.prototype.serverQuery=function(e){return ad(e)},n.prototype.prepareContext=function(e){var t=this.cache;return k(k({},e),{cache:t,getCacheKey:function(i){return t.identify(i)}})},n.prototype.addExportedVariables=function(e,t,i){return t===void 0&&(t={}),i===void 0&&(i={}),Bt(this,void 0,void 0,function(){return jt(this,function(r){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,t)||{},this.prepareContext(i),t).then(function(s){return k(k({},t),s.exportedVariables)})]:[2,k({},t)]})})},n.prototype.shouldForceResolvers=function(e){var t=!1;return Dt(e,{Directive:{enter:function(i){if(i.name.value==="client"&&i.arguments&&(t=i.arguments.some(function(r){return r.name.value==="always"&&r.value.kind==="BooleanValue"&&r.value.value===!0}),t))return Bs}}}),t},n.prototype.buildRootValueFromCache=function(e,t){return this.cache.diff({query:od(e),variables:t,returnPartialData:!0,optimistic:!1}).result},n.prototype.resolveDocument=function(e,t,i,r,s,c){return i===void 0&&(i={}),r===void 0&&(r={}),s===void 0&&(s=function(){return!0}),c===void 0&&(c=!1),Bt(this,void 0,void 0,function(){var a,u,f,d,m,v,g,w,b,x,O;return jt(this,function(E){return a=ar(e),u=Us(e),f=$s(u),d=this.collectSelectionsToResolve(a,f),m=a.operation,v=m?m.charAt(0).toUpperCase()+m.slice(1):"Query",g=this,w=g.cache,b=g.client,x={fragmentMap:f,context:k(k({},i),{cache:w,client:b}),variables:r,fragmentMatcher:s,defaultOperationType:v,exportedVariables:{},selectionsToResolve:d,onlyRunForcedResolvers:c},O=!1,[2,this.resolveSelectionSet(a.selectionSet,O,t,x).then(function(P){return{result:P,exportedVariables:x.exportedVariables}})]})})},n.prototype.resolveSelectionSet=function(e,t,i,r){return Bt(this,void 0,void 0,function(){var s,c,a,u,f,d=this;return jt(this,function(m){return s=r.fragmentMap,c=r.context,a=r.variables,u=[i],f=function(v){return Bt(d,void 0,void 0,function(){var g,w;return jt(this,function(b){return!t&&!r.selectionsToResolve.has(v)?[2]:rr(v,a)?un(v)?[2,this.resolveField(v,t,i,r).then(function(x){var O;typeof x<"u"&&u.push((O={},O[ln(v)]=x,O))})]:(ed(v)?g=v:(g=s[v.name.value],__DEV__?$(g,"No fragment named ".concat(v.name.value)):$(g,11)),g&&g.typeCondition&&(w=g.typeCondition.name.value,r.fragmentMatcher(i,w,c))?[2,this.resolveSelectionSet(g.selectionSet,t,i,r).then(function(x){u.push(x)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(f)).then(function(){return Gs(u)})]})})},n.prototype.resolveField=function(e,t,i,r){return Bt(this,void 0,void 0,function(){var s,c,a,u,f,d,m,v,g,w=this;return jt(this,function(b){return i?(s=r.variables,c=e.name.value,a=ln(e),u=c!==a,f=i[a]||i[c],d=Promise.resolve(f),(!r.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(m=i.__typename||r.defaultOperationType,v=this.resolvers&&this.resolvers[m],v&&(g=v[u?c:a],g&&(d=Promise.resolve(no.withValue(this.cache,g,[i,sr(e,s),r.context,{field:e,fragmentMap:r.fragmentMap}]))))),[2,d.then(function(x){var O,E;if(x===void 0&&(x=f),e.directives&&e.directives.forEach(function(I){I.name.value==="export"&&I.arguments&&I.arguments.forEach(function(N){N.name.value==="as"&&N.value.kind==="StringValue"&&(r.exportedVariables[N.value.value]=x)})}),!e.selectionSet||x==null)return x;var P=(E=(O=e.directives)===null||O===void 0?void 0:O.some(function(I){return I.name.value==="client"}))!==null&&E!==void 0?E:!1;if(Array.isArray(x))return w.resolveSubSelectedArray(e,t||P,x,r);if(e.selectionSet)return w.resolveSelectionSet(e.selectionSet,t||P,x,r)})]):[2,null]})})},n.prototype.resolveSubSelectedArray=function(e,t,i,r){var s=this;return Promise.all(i.map(function(c){if(c===null)return null;if(Array.isArray(c))return s.resolveSubSelectedArray(e,t,c,r);if(e.selectionSet)return s.resolveSelectionSet(e.selectionSet,t,c,r)}))},n.prototype.collectSelectionsToResolve=function(e,t){var i=function(c){return!Array.isArray(c)},r=this.selectionsToResolveCache;function s(c){if(!r.has(c)){var a=new Set;r.set(c,a),Dt(c,{Directive:function(u,f,d,m,v){u.name.value==="client"&&v.forEach(function(g){i(g)&&Ha(g)&&a.add(g)})},FragmentSpread:function(u,f,d,m,v){var g=t[u.name.value];__DEV__?$(g,"No fragment named ".concat(u.name.value)):$(g,12);var w=s(g);w.size>0&&(v.forEach(function(b){i(b)&&Ha(b)&&a.add(b)}),a.add(u),w.forEach(function(b){a.add(b)}))}})}return r.get(c)}return s(e)},n}(),An=new(fn?WeakMap:Map);function Zr(n,e){var t=n[e];typeof t=="function"&&(n[e]=function(){return An.set(n,(An.get(n)+1)%1e15),t.apply(this,arguments)})}function Nc(n){n.notifyTimeout&&(clearTimeout(n.notifyTimeout),n.notifyTimeout=void 0)}var es=function(){function n(e,t){t===void 0&&(t=e.generateQueryId()),this.queryId=t,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var i=this.cache=e.cache;An.has(i)||(An.set(i,0),Zr(i,"evict"),Zr(i,"modify"),Zr(i,"reset"))}return n.prototype.init=function(e){var t=e.networkStatus||Te.loading;return this.variables&&this.networkStatus!==Te.loading&&!$e(this.variables,e.variables)&&(t=Te.setVariables),$e(e.variables,this.variables)||(this.lastDiff=void 0),Object.assign(this,{document:e.document,variables:e.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:t}),e.observableQuery&&this.setObservableQuery(e.observableQuery),e.lastRequestId&&(this.lastRequestId=e.lastRequestId),this},n.prototype.reset=function(){Nc(this),this.dirty=!1},n.prototype.getDiff=function(e){e===void 0&&(e=this.variables);var t=this.getDiffOptions(e);if(this.lastDiff&&$e(t,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables=e);var i=this.observableQuery;if(i&&i.options.fetchPolicy==="no-cache")return{complete:!1};var r=this.cache.diff(t);return this.updateLastDiff(r,t),r},n.prototype.updateLastDiff=function(e,t){this.lastDiff=e?{diff:e,options:t||this.getDiffOptions()}:void 0},n.prototype.getDiffOptions=function(e){var t;return e===void 0&&(e=this.variables),{query:this.document,variables:e,returnPartialData:!0,optimistic:!0,canonizeResults:(t=this.observableQuery)===null||t===void 0?void 0:t.options.canonizeResults}},n.prototype.setDiff=function(e){var t=this,i=this.lastDiff&&this.lastDiff.diff;this.updateLastDiff(e),!this.dirty&&!$e(i&&i.result,e&&e.result)&&(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return t.notify()},0)))},n.prototype.setObservableQuery=function(e){var t=this;e!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=e,e?(e.queryInfo=this,this.listeners.add(this.oqListener=function(){var i=t.getDiff();i.fromOptimisticTransaction?e.observe():$l(e)})):delete this.oqListener)},n.prototype.notify=function(){var e=this;Nc(this),this.shouldNotify()&&this.listeners.forEach(function(t){return t(e)}),this.dirty=!1},n.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(oi(this.networkStatus)&&this.observableQuery){var e=this.observableQuery.options.fetchPolicy;if(e!=="cache-only"&&e!=="cache-and-network")return!1}return!0},n.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=n.prototype.cancel,this.subscriptions.forEach(function(t){return t.unsubscribe()});var e=this.observableQuery;e&&e.stopPolling()}},n.prototype.cancel=function(){},n.prototype.updateWatch=function(e){var t=this;e===void 0&&(e=this.variables);var i=this.observableQuery;if(!(i&&i.options.fetchPolicy==="no-cache")){var r=k(k({},this.getDiffOptions(e)),{watcher:this,callback:function(s){return t.setDiff(s)}});(!this.lastWatch||!$e(r,this.lastWatch))&&(this.cancel(),this.cancel=this.cache.watch(this.lastWatch=r))}},n.prototype.resetLastWrite=function(){this.lastWrite=void 0},n.prototype.shouldWrite=function(e,t){var i=this.lastWrite;return!(i&&i.dmCount===An.get(this.cache)&&$e(t,i.variables)&&$e(e.data,i.result.data))},n.prototype.markResult=function(e,t,i,r){var s=this,c=new Vt,a=It(e.errors)?e.errors.slice(0):[];if(this.reset(),"incremental"in e&&It(e.incremental)){var u=vl(this.getDiff().result,e);e.data=u}else if("hasNext"in e&&e.hasNext){var f=this.getDiff();e.data=c.merge(f.result,e.data)}this.graphQLErrors=a,i.fetchPolicy==="no-cache"?this.updateLastDiff({result:e.data,complete:!0},this.getDiffOptions(i.variables)):r!==0&&(As(e,i.errorPolicy)?this.cache.performTransaction(function(d){if(s.shouldWrite(e,i.variables))d.writeQuery({query:t,data:e.data,variables:i.variables,overwrite:r===1}),s.lastWrite={result:e,variables:i.variables,dmCount:An.get(s.cache)};else if(s.lastDiff&&s.lastDiff.diff.complete){e.data=s.lastDiff.diff.result;return}var m=s.getDiffOptions(i.variables),v=d.diff(m);s.stopped||s.updateWatch(i.variables),s.updateLastDiff(v,m),v.complete&&(e.data=v.result)}):this.lastWrite=void 0)},n.prototype.markReady=function(){return this.networkError=null,this.networkStatus=Te.ready},n.prototype.markError=function(e){return this.networkStatus=Te.error,this.lastWrite=void 0,this.reset(),e.graphQLErrors&&(this.graphQLErrors=e.graphQLErrors),e.networkError&&(this.networkError=e.networkError),e},n}();function As(n,e){e===void 0&&(e="none");var t=e==="ignore"||e==="all",i=!$i(n);return!i&&t&&n.data&&(i=!0),i}var Jp=Object.prototype.hasOwnProperty,Xp=function(){function n(e){var t=e.cache,i=e.link,r=e.defaultOptions,s=e.queryDeduplication,c=s===void 0?!1:s,a=e.onBroadcast,u=e.ssrMode,f=u===void 0?!1:u,d=e.clientAwareness,m=d===void 0?{}:d,v=e.localState,g=e.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(fn?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=t,this.link=i,this.defaultOptions=r||Object.create(null),this.queryDeduplication=c,this.clientAwareness=m,this.localState=v||new Ql({cache:t}),this.ssrMode=f,this.assumeImmutableResults=!!g,(this.onBroadcast=a)&&(this.mutationStore=Object.create(null))}return n.prototype.stop=function(){var e=this;this.queries.forEach(function(t,i){e.stopQueryNoBroadcast(i)}),this.cancelPendingFetches(__DEV__?new me("QueryManager stopped while query was in flight"):new me(14))},n.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach(function(t){return t(e)}),this.fetchCancelFns.clear()},n.prototype.mutate=function(e){var t,i,r=e.mutation,s=e.variables,c=e.optimisticResponse,a=e.updateQueries,u=e.refetchQueries,f=u===void 0?[]:u,d=e.awaitRefetchQueries,m=d===void 0?!1:d,v=e.update,g=e.onQueryUpdated,w=e.fetchPolicy,b=w===void 0?((t=this.defaultOptions.mutate)===null||t===void 0?void 0:t.fetchPolicy)||"network-only":w,x=e.errorPolicy,O=x===void 0?((i=this.defaultOptions.mutate)===null||i===void 0?void 0:i.errorPolicy)||"none":x,E=e.keepRootFields,P=e.context;return Bt(this,void 0,void 0,function(){var I,N,L,q,G,Q;return jt(this,function(Z){switch(Z.label){case 0:return __DEV__?$(r,"mutation option is required. You must specify your GraphQL document in the mutation option."):$(r,15),__DEV__?$(b==="network-only"||b==="no-cache","Mutations support only 'network-only' or 'no-cache' fetchPolicy strings. The default `network-only` behavior automatically writes mutation results to the cache. Passing `no-cache` skips the cache write."):$(b==="network-only"||b==="no-cache",16),I=this.generateMutationId(),N=this.transform(r),L=N.document,q=N.hasClientExports,r=this.cache.transformForLink(L),s=this.getVariables(r,s),q?[4,this.localState.addExportedVariables(r,s,P)]:[3,2];case 1:s=Z.sent(),Z.label=2;case 2:return G=this.mutationStore&&(this.mutationStore[I]={mutation:r,variables:s,loading:!0,error:null}),c&&this.markMutationOptimistic(c,{mutationId:I,document:r,variables:s,fetchPolicy:b,errorPolicy:O,context:P,updateQueries:a,update:v,keepRootFields:E}),this.broadcastQueries(),Q=this,[2,new Promise(function(Se,Re){return zr(Q.getObservableFromLink(r,k(k({},P),{optimisticResponse:c}),s,!1),function(ge){if($i(ge)&&O==="none")throw new Pn({graphQLErrors:gs(ge)});G&&(G.loading=!1,G.error=null);var we=k({},ge);return typeof f=="function"&&(f=f(we)),O==="ignore"&&$i(we)&&delete we.errors,Q.markMutationResult({mutationId:I,result:we,document:r,variables:s,fetchPolicy:b,errorPolicy:O,context:P,update:v,updateQueries:a,awaitRefetchQueries:m,refetchQueries:f,removeOptimistic:c?I:void 0,onQueryUpdated:g,keepRootFields:E})}).subscribe({next:function(ge){Q.broadcastQueries(),(!("hasNext"in ge)||ge.hasNext===!1)&&Se(ge)},error:function(ge){G&&(G.loading=!1,G.error=ge),c&&Q.cache.removeOptimistic(I),Q.broadcastQueries(),Re(ge instanceof Pn?ge:new Pn({networkError:ge}))}})})]}})})},n.prototype.markMutationResult=function(e,t){var i=this;t===void 0&&(t=this.cache);var r=e.result,s=[],c=e.fetchPolicy==="no-cache";if(!c&&As(r,e.errorPolicy)){if(Ln(r)||s.push({result:r.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}),Ln(r)&&It(r.incremental)){var a=t.diff({id:"ROOT_MUTATION",query:this.transform(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0}),u=void 0;a.result&&(u=vl(a.result,r)),typeof u<"u"&&(r.data=u,s.push({result:u,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}))}var f=e.updateQueries;f&&this.queries.forEach(function(m,v){var g=m.observableQuery,w=g&&g.queryName;if(!(!w||!Jp.call(f,w))){var b=f[w],x=i.queries.get(v),O=x.document,E=x.variables,P=t.diff({query:O,variables:E,returnPartialData:!0,optimistic:!1}),I=P.result,N=P.complete;if(N&&I){var L=b(I,{mutationResult:r,queryName:O&&hs(O)||void 0,queryVariables:E});L&&s.push({result:L,dataId:"ROOT_QUERY",query:O,variables:E})}}})}if(s.length>0||e.refetchQueries||e.update||e.onQueryUpdated||e.removeOptimistic){var d=[];if(this.refetchQueries({updateCache:function(m){c||s.forEach(function(b){return m.write(b)});var v=e.update,g=!xd(r)||Ln(r)&&!r.hasNext;if(v){if(!c){var w=m.diff({id:"ROOT_MUTATION",query:i.transform(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0});w.complete&&(r=k(k({},r),{data:w.result}),"incremental"in r&&delete r.incremental,"hasNext"in r&&delete r.hasNext)}g&&v(m,r,{context:e.context,variables:e.variables})}!c&&!e.keepRootFields&&g&&m.modify({id:"ROOT_MUTATION",fields:function(b,x){var O=x.fieldName,E=x.DELETE;return O==="__typename"?b:E}})},include:e.refetchQueries,optimistic:!1,removeOptimistic:e.removeOptimistic,onQueryUpdated:e.onQueryUpdated||null}).forEach(function(m){return d.push(m)}),e.awaitRefetchQueries||e.onQueryUpdated)return Promise.all(d).then(function(){return r})}return Promise.resolve(r)},n.prototype.markMutationOptimistic=function(e,t){var i=this,r=typeof e=="function"?e(t.variables):e;return this.cache.recordOptimisticTransaction(function(s){try{i.markMutationResult(k(k({},t),{result:{data:r}}),s)}catch(c){__DEV__&&$.error(c)}},t.mutationId)},n.prototype.fetchQuery=function(e,t,i){return this.fetchQueryObservable(e,t,i).promise},n.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach(function(t,i){e[i]={variables:t.variables,networkStatus:t.networkStatus,networkError:t.networkError,graphQLErrors:t.graphQLErrors}}),e},n.prototype.resetErrors=function(e){var t=this.queries.get(e);t&&(t.networkError=void 0,t.graphQLErrors=[])},n.prototype.transform=function(e){var t=this.transformCache;if(!t.has(e)){var i=this.cache.transformDocument(e),r=sd(i),s=this.localState.clientQuery(i),c=r&&this.localState.serverQuery(r),a={document:i,hasClientExports:Fh(i),hasForcedResolvers:this.localState.shouldForceResolvers(i),clientQuery:s,serverQuery:c,defaultVars:zs(ui(i)),asQuery:k(k({},i),{definitions:i.definitions.map(function(f){return f.kind==="OperationDefinition"&&f.operation!=="query"?k(k({},f),{operation:"query"}):f})})},u=function(f){f&&!t.has(f)&&t.set(f,a)};u(e),u(i),u(s),u(c)}return t.get(e)},n.prototype.getVariables=function(e,t){return k(k({},this.transform(e).defaultVars),t)},n.prototype.watchQuery=function(e){e=k(k({},e),{variables:this.getVariables(e.query,e.variables)}),typeof e.notifyOnNetworkStatusChange>"u"&&(e.notifyOnNetworkStatusChange=!1);var t=new es(this),i=new Cs({queryManager:this,queryInfo:t,options:e});return this.queries.set(i.queryId,t),t.init({document:i.query,observableQuery:i,variables:i.variables}),i},n.prototype.query=function(e,t){var i=this;return t===void 0&&(t=this.generateQueryId()),__DEV__?$(e.query,"query option is required. You must specify your GraphQL document in the query option."):$(e.query,17),__DEV__?$(e.query.kind==="Document",'You must wrap the query string in a "gql" tag.'):$(e.query.kind==="Document",18),__DEV__?$(!e.returnPartialData,"returnPartialData option only supported on watchQuery."):$(!e.returnPartialData,19),__DEV__?$(!e.pollInterval,"pollInterval option only supported on watchQuery."):$(!e.pollInterval,20),this.fetchQuery(t,e).finally(function(){return i.stopQuery(t)})},n.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},n.prototype.generateRequestId=function(){return this.requestIdCounter++},n.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},n.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},n.prototype.stopQueryInStoreNoBroadcast=function(e){var t=this.queries.get(e);t&&t.stop()},n.prototype.clearStore=function(e){return e===void 0&&(e={discardWatches:!0}),this.cancelPendingFetches(__DEV__?new me("Store reset while query was in flight (not completed in link chain)"):new me(21)),this.queries.forEach(function(t){t.observableQuery?t.networkStatus=Te.loading:t.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(e)},n.prototype.getObservableQueries=function(e){var t=this;e===void 0&&(e="active");var i=new Map,r=new Map,s=new Set;return Array.isArray(e)&&e.forEach(function(c){typeof c=="string"?r.set(c,!1):$h(c)?r.set(t.transform(c).document,!1):Le(c)&&c.query&&s.add(c)}),this.queries.forEach(function(c,a){var u=c.observableQuery,f=c.document;if(u){if(e==="all"){i.set(a,u);return}var d=u.queryName,m=u.options.fetchPolicy;if(m==="standby"||e==="active"&&!u.hasObservers())return;(e==="active"||d&&r.has(d)||f&&r.has(f))&&(i.set(a,u),d&&r.set(d,!0),f&&r.set(f,!0))}}),s.size&&s.forEach(function(c){var a=ys("legacyOneTimeQuery"),u=t.getQuery(a).init({document:c.query,variables:c.variables}),f=new Cs({queryManager:t,queryInfo:u,options:k(k({},c),{fetchPolicy:"network-only"})});$(f.queryId===a),u.setObservableQuery(f),i.set(a,f)}),__DEV__&&r.size&&r.forEach(function(c,a){c||__DEV__&&$.warn("Unknown query ".concat(typeof a=="string"?"named ":"").concat(JSON.stringify(a,null,2)," requested in refetchQueries options.include array"))}),i},n.prototype.reFetchObservableQueries=function(e){var t=this;e===void 0&&(e=!1);var i=[];return this.getObservableQueries(e?"all":"active").forEach(function(r,s){var c=r.options.fetchPolicy;r.resetLastResults(),(e||c!=="standby"&&c!=="cache-only")&&i.push(r.refetch()),t.getQuery(s).setDiff(null)}),this.broadcastQueries(),Promise.all(i)},n.prototype.setObservableQuery=function(e){this.getQuery(e.queryId).setObservableQuery(e)},n.prototype.startGraphQLSubscription=function(e){var t=this,i=e.query,r=e.fetchPolicy,s=e.errorPolicy,c=e.variables,a=e.context,u=a===void 0?{}:a;i=this.transform(i).document,c=this.getVariables(i,c);var f=function(m){return t.getObservableFromLink(i,u,m).map(function(v){r!=="no-cache"&&(As(v,s)&&t.cache.write({query:i,result:v.data,dataId:"ROOT_SUBSCRIPTION",variables:m}),t.broadcastQueries());var g=$i(v),w=$d(v);if(g||w){var b={};throw g&&(b.graphQLErrors=v.errors),w&&(b.protocolErrors=v.extensions[Xs]),new Pn(b)}return v})};if(this.transform(i).hasClientExports){var d=this.localState.addExportedVariables(i,c,u).then(f);return new De(function(m){var v=null;return d.then(function(g){return v=g.subscribe(m)},m.error),function(){return v&&v.unsubscribe()}})}return f(c)},n.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},n.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},n.prototype.removeQuery=function(e){this.fetchCancelFns.delete(e),this.queries.has(e)&&(this.getQuery(e).stop(),this.queries.delete(e))},n.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(e){return e.notify()})},n.prototype.getLocalState=function(){return this.localState},n.prototype.getObservableFromLink=function(e,t,i,r){var s=this,c;r===void 0&&(r=(c=t?.queryDeduplication)!==null&&c!==void 0?c:this.queryDeduplication);var a,u=this.transform(e).serverQuery;if(u){var f=this,d=f.inFlightLinkObservables,m=f.link,v={query:u,variables:i,operationName:hs(u)||void 0,context:this.prepareContext(k(k({},t),{forceFetch:!r}))};if(t=v.context,r){var g=d.get(u)||new Map;d.set(u,g);var w=an(i);if(a=g.get(w),!a){var b=new Sn([_s(m,v)]);g.set(w,a=b),b.beforeNext(function(){g.delete(w)&&g.size<1&&d.delete(u)})}}else a=new Sn([_s(m,v)])}else a=new Sn([De.of({data:{}})]),t=this.prepareContext(t);var x=this.transform(e).clientQuery;return x&&(a=zr(a,function(O){return s.localState.runResolvers({document:x,remoteResult:O,context:t,variables:i})})),a},n.prototype.getResultsFromLink=function(e,t,i){var r=e.lastRequestId=this.generateRequestId(),s=this.cache.transformForLink(this.transform(e.document).document);return zr(this.getObservableFromLink(s,i.context,i.variables),function(c){var a=gs(c),u=a.length>0;if(r>=e.lastRequestId){if(u&&i.errorPolicy==="none")throw e.markError(new Pn({graphQLErrors:a}));e.markResult(c,s,i,t),e.markReady()}var f={data:c.data,loading:!1,networkStatus:Te.ready};return u&&i.errorPolicy!=="ignore"&&(f.errors=a,f.networkStatus=Te.error),f},function(c){var a=Vd(c)?c:new Pn({networkError:c});throw r>=e.lastRequestId&&e.markError(a),a})},n.prototype.fetchQueryObservable=function(e,t,i){return this.fetchConcastWithInfo(e,t,i).concast},n.prototype.fetchConcastWithInfo=function(e,t,i){var r=this;i===void 0&&(i=Te.loading);var s=this.transform(t.query).document,c=this.getVariables(s,t.variables),a=this.getQuery(e),u=this.defaultOptions.watchQuery,f=t.fetchPolicy,d=f===void 0?u&&u.fetchPolicy||"cache-first":f,m=t.errorPolicy,v=m===void 0?u&&u.errorPolicy||"none":m,g=t.returnPartialData,w=g===void 0?!1:g,b=t.notifyOnNetworkStatusChange,x=b===void 0?!1:b,O=t.context,E=O===void 0?{}:O,P=Object.assign({},t,{query:s,variables:c,fetchPolicy:d,errorPolicy:v,returnPartialData:w,notifyOnNetworkStatusChange:x,context:E}),I=function(Q){P.variables=Q;var Z=r.fetchQueryByPolicy(a,P,i);return P.fetchPolicy!=="standby"&&Z.sources.length>0&&a.observableQuery&&a.observableQuery.applyNextFetchPolicy("after-fetch",t),Z},N=function(){return r.fetchCancelFns.delete(e)};this.fetchCancelFns.set(e,function(Q){N(),setTimeout(function(){return L.cancel(Q)})});var L,q;if(this.transform(P.query).hasClientExports)L=new Sn(this.localState.addExportedVariables(P.query,P.variables,P.context).then(I).then(function(Q){return Q.sources})),q=!0;else{var G=I(P.variables);q=G.fromLink,L=new Sn(G.sources)}return L.promise.then(N,N),{concast:L,fromLink:q}},n.prototype.refetchQueries=function(e){var t=this,i=e.updateCache,r=e.include,s=e.optimistic,c=s===void 0?!1:s,a=e.removeOptimistic,u=a===void 0?c?ys("refetchQueries"):void 0:a,f=e.onQueryUpdated,d=new Map;r&&this.getObservableQueries(r).forEach(function(v,g){d.set(g,{oq:v,lastDiff:t.getQuery(g).getDiff()})});var m=new Map;return i&&this.cache.batch({update:i,optimistic:c&&u||!1,removeOptimistic:u,onWatchUpdated:function(v,g,w){var b=v.watcher instanceof es&&v.watcher.observableQuery;if(b){if(f){d.delete(b.queryId);var x=f(b,g,w);return x===!0&&(x=b.refetch()),x!==!1&&m.set(b,x),x}f!==null&&d.set(b.queryId,{oq:b,lastDiff:w,diff:g})}}}),d.size&&d.forEach(function(v,g){var w=v.oq,b=v.lastDiff,x=v.diff,O;if(f){if(!x){var E=w.queryInfo;E.reset(),x=E.getDiff()}O=f(w,x,b)}(!f||O===!0)&&(O=w.refetch()),O!==!1&&m.set(w,O),g.indexOf("legacyOneTimeQuery")>=0&&t.stopQueryNoBroadcast(g)}),u&&this.cache.removeOptimistic(u),m},n.prototype.fetchQueryByPolicy=function(e,t,i){var r=this,s=t.query,c=t.variables,a=t.fetchPolicy,u=t.refetchWritePolicy,f=t.errorPolicy,d=t.returnPartialData,m=t.context,v=t.notifyOnNetworkStatusChange,g=e.networkStatus;e.init({document:this.transform(s).document,variables:c,networkStatus:i});var w=function(){return e.getDiff(c)},b=function(I,N){N===void 0&&(N=e.networkStatus||Te.loading);var L=I.result;__DEV__&&!d&&!$e(L,{})&&Vl(I.missing);var q=function(G){return De.of(k({data:G,loading:oi(N),networkStatus:N},I.complete?null:{partial:!0}))};return L&&r.transform(s).hasForcedResolvers?r.localState.runResolvers({document:s,remoteResult:{data:L},context:m,variables:c,onlyRunForcedResolvers:!0}).then(function(G){return q(G.data||void 0)}):f==="none"&&N===Te.refetch&&Array.isArray(I.missing)?q(void 0):q(L)},x=a==="no-cache"?0:i===Te.refetch&&u!=="merge"?1:2,O=function(){return r.getResultsFromLink(e,x,{variables:c,context:m,fetchPolicy:a,errorPolicy:f})},E=v&&typeof g=="number"&&g!==i&&oi(i);switch(a){default:case"cache-first":{var P=w();return P.complete?{fromLink:!1,sources:[b(P,e.markReady())]}:d||E?{fromLink:!0,sources:[b(P),O()]}:{fromLink:!0,sources:[O()]}}case"cache-and-network":{var P=w();return P.complete||d||E?{fromLink:!0,sources:[b(P),O()]}:{fromLink:!0,sources:[O()]}}case"cache-only":return{fromLink:!1,sources:[b(w(),e.markReady())]};case"network-only":return E?{fromLink:!0,sources:[b(w()),O()]}:{fromLink:!0,sources:[O()]};case"no-cache":return E?{fromLink:!0,sources:[b(e.getDiff()),O()]}:{fromLink:!0,sources:[O()]};case"standby":return{fromLink:!1,sources:[]}}},n.prototype.getQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new es(this,e)),this.queries.get(e)},n.prototype.prepareContext=function(e){e===void 0&&(e={});var t=this.localState.prepareContext(e);return k(k({},t),{clientAwareness:this.clientAwareness})},n}(),Lc=!1,Zp=function(){function n(e){var t=this;this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var i=e.uri,r=e.credentials,s=e.headers,c=e.cache,a=e.ssrMode,u=a===void 0?!1:a,f=e.ssrForceFetchDelay,d=f===void 0?0:f,m=e.connectToDevTools,v=m===void 0?typeof window=="object"&&!window.__APOLLO_CLIENT__&&__DEV__:m,g=e.queryDeduplication,w=g===void 0?!0:g,b=e.defaultOptions,x=e.assumeImmutableResults,O=x===void 0?!1:x,E=e.resolvers,P=e.typeDefs,I=e.fragmentMatcher,N=e.name,L=e.version,q=e.link;if(q||(q=i?new op({uri:i,credentials:r,headers:s}):fi.empty()),!c)throw __DEV__?new me(`To initialize Apollo Client, you must specify a 'cache' property in the options object. 
For more information, please visit: https://go.apollo.dev/c/docs`):new me(9);if(this.link=q,this.cache=c,this.disableNetworkFetches=u||d>0,this.queryDeduplication=w,this.defaultOptions=b||Object.create(null),this.typeDefs=P,d&&setTimeout(function(){return t.disableNetworkFetches=!1},d),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),v&&typeof window=="object"&&(window.__APOLLO_CLIENT__=this),!Lc&&v&&__DEV__&&(Lc=!0,typeof window<"u"&&window.document&&window.top===window.self&&!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__)){var G=window.navigator,Q=G&&G.userAgent,Z=void 0;typeof Q=="string"&&(Q.indexOf("Chrome/")>-1?Z="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":Q.indexOf("Firefox/")>-1&&(Z="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),Z&&__DEV__&&$.log("Download the Apollo DevTools for a better development experience: "+Z)}this.version=Cd,this.localState=new Ql({cache:c,client:this,resolvers:E,fragmentMatcher:I}),this.queryManager=new Xp({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,queryDeduplication:w,ssrMode:u,clientAwareness:{name:N,version:L},localState:this.localState,assumeImmutableResults:O,onBroadcast:v?function(){t.devToolsHookCb&&t.devToolsHookCb({action:{},state:{queries:t.queryManager.getQueryStore(),mutations:t.queryManager.mutationStore||{}},dataWithOptimisticResults:t.cache.extract(!0)})}:void 0})}return n.prototype.stop=function(){this.queryManager.stop()},n.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=Wr(this.defaultOptions.watchQuery,e)),this.disableNetworkFetches&&(e.fetchPolicy==="network-only"||e.fetchPolicy==="cache-and-network")&&(e=k(k({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},n.prototype.query=function(e){return this.defaultOptions.query&&(e=Wr(this.defaultOptions.query,e)),__DEV__?$(e.fetchPolicy!=="cache-and-network","The cache-and-network fetchPolicy does not work with client.query, because client.query can only return a single result. Please use client.watchQuery to receive multiple results from the cache and the network, or consider using a different fetchPolicy, such as cache-first or network-only."):$(e.fetchPolicy!=="cache-and-network",10),this.disableNetworkFetches&&e.fetchPolicy==="network-only"&&(e=k(k({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},n.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=Wr(this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},n.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},n.prototype.readQuery=function(e,t){return t===void 0&&(t=!1),this.cache.readQuery(e,t)},n.prototype.readFragment=function(e,t){return t===void 0&&(t=!1),this.cache.readFragment(e,t)},n.prototype.writeQuery=function(e){var t=this.cache.writeQuery(e);return e.broadcast!==!1&&this.queryManager.broadcastQueries(),t},n.prototype.writeFragment=function(e){var t=this.cache.writeFragment(e);return e.broadcast!==!1&&this.queryManager.broadcastQueries(),t},n.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},n.prototype.__requestRaw=function(e){return _s(this.link,e)},n.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(t){return t()}))}).then(function(){return e.reFetchObservableQueries()})},n.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(t){return t()}))})},n.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter(function(i){return i!==e})}},n.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter(function(i){return i!==e})}},n.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},n.prototype.refetchQueries=function(e){var t=this.queryManager.refetchQueries(e),i=[],r=[];t.forEach(function(c,a){i.push(a),r.push(c)});var s=Promise.all(r);return s.queries=i,s.results=r,s.catch(function(c){__DEV__&&$.debug("In client.refetchQueries, Promise.all promise rejected with error ".concat(c))}),s},n.prototype.getObservableQueries=function(e){return e===void 0&&(e="active"),this.queryManager.getObservableQueries(e)},n.prototype.extract=function(e){return this.cache.extract(e)},n.prototype.restore=function(e){return this.cache.restore(e)},n.prototype.addResolvers=function(e){this.localState.addResolvers(e)},n.prototype.setResolvers=function(e){this.localState.setResolvers(e)},n.prototype.getResolvers=function(){return this.localState.getResolvers()},n.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},n.prototype.setLink=function(e){this.link=this.queryManager.link=e},n}(),Qi=new Map,Ds=new Map,Ul=!0,er=!1;function zl(n){return n.replace(/[\s,]+/g," ").trim()}function ev(n){return zl(n.source.body.substring(n.start,n.end))}function tv(n){var e=new Set,t=[];return n.definitions.forEach(function(i){if(i.kind==="FragmentDefinition"){var r=i.name.value,s=ev(i.loc),c=Ds.get(r);c&&!c.has(s)?Ul&&console.warn("Warning: fragment with name "+r+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):c||Ds.set(r,c=new Set),c.add(s),e.has(s)||(e.add(s),t.push(i))}else t.push(i)}),k(k({},n),{definitions:t})}function nv(n){var e=new Set(n.definitions);e.forEach(function(i){i.loc&&delete i.loc,Object.keys(i).forEach(function(r){var s=i[r];s&&typeof s=="object"&&e.add(s)})});var t=n.loc;return t&&(delete t.startToken,delete t.endToken),n}function iv(n){var e=zl(n);if(!Qi.has(e)){var t=kh(n,{experimentalFragmentVariables:er,allowLegacyFragmentVariables:er});if(!t||t.kind!=="Document")throw new Error("Not a valid GraphQL document.");Qi.set(e,nv(tv(t)))}return Qi.get(e)}function Ye(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];typeof n=="string"&&(n=[n]);var i=n[0];return e.forEach(function(r,s){r&&r.kind==="Document"?i+=r.loc.source.body:i+=r,i+=n[s+1]}),iv(i)}function rv(){Qi.clear(),Ds.clear()}function sv(){Ul=!1}function ov(){er=!0}function av(){er=!1}var Xn={gql:Ye,resetCaches:rv,disableFragmentWarnings:sv,enableExperimentalFragmentVariables:ov,disableExperimentalFragmentVariables:av};(function(n){n.gql=Xn.gql,n.resetCaches=Xn.resetCaches,n.disableFragmentWarnings=Xn.disableFragmentWarnings,n.enableExperimentalFragmentVariables=Xn.enableExperimentalFragmentVariables,n.disableExperimentalFragmentVariables=Xn.disableExperimentalFragmentVariables})(Ye||(Ye={}));Ye.default=Ye;const cv=Xe('<div id="notificationButton" data-bs-toggle="modal" data-bs-target="#notificationModal"></div>'),lv=Xe(`<div class="modal fade " id="notificationModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"><div class="modal-dialog absolute top-[39vh] left-1/ "><div class="modal-content w-[50px] "><div class="modal-header"><h1 class="modal-title fs-5" id="exampleModalLabel">Play Chess with "<!>"</h1><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body">You've recieved a notification from "<!>" to play chess. Do you accept?</div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button><button type="button" class="btn btn-primary">Play Chess</button></div></div></div></div>`),lt=new Zp({uri:"https://gabrielmalek.com/graphql",cache:new Gp}),uv=Ye`
  mutation (
    $gameId: String!
    $requesterId: String!
    $requesterColor: String!
    $receiverId: String!
  ) {
    sendChessRequest(
      gameId: $gameId
      requesterId: $requesterId
      requesterColor: $requesterColor
      receiverId: $receiverId
    ) {
      id
    }
  }
`,Rc=Ye`
  query {
    getUsers {
      id
      username
      cat_url
    }
  }
`;Ye`
  mutation ($id: ID!) {
    deleteChessUser(id: $id) {
      id
    }
  }
`;const fv=Ye`
  subscription {
    chessUsersSub {
      id
      username
      cat_url
    }
  }
`,Mc=Ye`
  mutation ($id: ID!, $username: String!, $cat_url: String!) {
    addChessUser(id: $id, username: $username, cat_url: $cat_url) {
      id
    }
  }
`,hv=Ye`
  mutation ($id: ID!) {
    updateLastSeenChess(id: $id) {
      id
    }
  }
`,dv=Ye`
  subscription {
    chessRequestsSub {
      receiverId
      requesterId
      requesterColor
      gameId
    }
  }
`,pv=Ye`
  mutation (
    $fen: String!
    $gameId: String!
    $receiverId: String!
    $requesterId: String!
    $requesterColor: String!
  ) {
    addChessGame(
      fen: $fen
      gameId: $gameId
      receiverId: $receiverId
      requesterId: $requesterId
      requesterColor: $requesterColor
    ) {
      id
      fen
      receiverId
      requesterId
      requesterColor
      started
    }
  }
`,vv=Ye`
  subscription ($gameId: ID!) {
    chessGamesSub(id: $gameId) {
      id
      fen
      requesterColor
      receiverId
      requesterId
      started
      moves {
        from
        to
        endFen
      }
    }
  }
`,mv=Ye`
  mutation ($gameId: String!) {
    startChessGame(gameId: $gameId) {
      id
    }
  }
`;function gv({}){const[n,e]=he(new pe),[t,i]=he(""),[r,s]=he(""),[c,a]=he(!1),[u,f]=he(!1),[d,m]=he(""),[v,g]=he(""),[w,b]=he([]),[x,O]=he(null),[E,P]=he(null),[I,N]=he([]),[L,q]=he(),[G,Q]=he(!1);function Z(j){if(j==null)return;let M=j,oe=M.findIndex(ne=>ne.id==r()),ee=M[oe];if(oe!=0&&M.length>1){console.log("user index",M),M.splice(oe,1),M.unshift(ee),b(M);return}b(M)}sn(async()=>{let j=document.querySelectorAll(".piece");N(j),await ge(),await lt.query({query:Rc}).then(M=>(Z(M.data.getUsers),M.data.getUsers))}),lt.subscribe({query:fv}).subscribe({next:j=>{if(!we(r(),j.data.chessUsersSub)||!we(r(),w())||w().length!=j.data.chessUsersSub.length){if(j.data.chessUsersSub?.length==0||!j.data.chessUsersSub?.length==null)return;Z(j.data.chessUsersSub)}return j.data.users}}),lt.subscribe({query:dv}).subscribe({next:j=>{if(console.log(j.data.chessRequestsSub),j.data.chessRequestsSub.receiverId==r()){console.log("notification received from another user"),P(j.data.chessRequestsSub);for(let oe=0;oe<w().length;oe++)w()[oe].id==j.data.chessRequestsSub.requesterId&&O(w()[oe]);document.getElementById("notificationButton").click()}}});async function Se(){lt.query({query:Rc}).then(j=>(Z(j.data.getUsers),j.data.getUsers))}function Re(){u()!=!0&&lt.mutate({mutation:hv,variables:{id:r()}}).then(j=>{})}async function ge(){let j=sessionStorage.getItem("gabrielmalek/chess.data"),M=JSON.parse(j);if(j!=null){await s(M.userId),await i(M.userName),await a(!0),Re(),setInterval(Re,6e3),await Ne();return}j=localStorage.getItem("gabrielmalek/chess.data"),M=JSON.parse(j),j==null||(s(M.userId),i(M.userName))}function we(j,M){for(let oe=0;oe<M?.length;oe++)if(M[oe].id==j)return!0;return!1}async function Be(){return(await(await fetch("https://api.thecatapi.com/v1/images/search")).json())[0].url}async function Ne(){let j=await Be();if(w()==null){lt.mutate({mutation:Mc,variables:{id:r(),username:t(),cat_url:j}}).then(M=>{});return}we(r(),w())==!1&&await lt.mutate({mutation:Mc,variables:{id:r(),username:t(),cat_url:j}}).then(M=>{})}function J(){let j=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);return console.log("random id",j),j}function R(){let j=Math.random()>.5?"white":"black";return console.log("color",j),j}function Y(j){console.log("sending notification to",j.username);let M=J(),oe=r(),ee=R(),ne=j.id;lt.mutate({mutation:pv,variables:{fen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",gameId:M,receiverId:ne,requesterId:oe,requesterColor:ee}}),lt.mutate({mutation:uv,variables:{gameId:M,receiverId:ne,requesterId:oe,requesterColor:ee}}),st({gameId:M,receiverId:ne,requesterId:oe,requesterColor:ee})}function T(){let M=w().filter(oe=>oe.id!=r());b(M)}function le(){let j=document.querySelectorAll(".chessSquare"),M=document.querySelectorAll("section.piece");for(let ee=0;ee<M.length;ee++)M[ee].remove();let oe=[];for(let ee=0;ee<n().board.length;ee++)if(n().board[ee]!=" "){for(let ne=0;ne<M.length;ne++)if(M[ne].classList.contains(n().board[ee])&&!oe.includes(ne)){j[ee].appendChild(M[ne]),oe.push(ne);break}}for(let ee=0;ee<n().board.length;ee++){let ne=j[ee]?.querySelector(".piece");if(ne!=null&&n().board[ee]!=" ")if(ne.classList.contains(n().board[ee]))console.log("piece is correct");else{console.log("something is funky"),console.log("piece",ne),console.log("board",n().board[ee]);break}else if(ne==null&&n().board[ee]!=" "){console.log("something is funky"),console.log("piece",ne),console.log("board",n().board[ee]);for(let Pe=0;Pe<M.length;Pe++)if((M[Pe].classList.contains("p")||M[Pe].classList.contains("P"))&&!oe.includes(Pe)){console.log("found piece",M[Pe]);let K=M[Pe];K.classList.contains("p")?(K.classList.remove("p"),K.classList.add(n().board[ee])):(K.classList.remove("P"),K.classList.add(n().board[ee])),j[ee].appendChild(K)}break}}n().displayBoard()}function te(){let j=document.querySelectorAll(".chessSquare"),M=document.querySelectorAll("section.piece");for(let ne=0;ne<M.length;ne++)M[ne].remove();let oe=[],ee=0;for(let ne=n().board.length-1;ne>=0;ne--){if(n().board[ne]!=" "){for(let Pe=0;Pe<M.length;Pe++)if(M[Pe].classList.contains(n().board[ne])&&!oe.includes(Pe)){j[ee].appendChild(M[Pe]),oe.push(Pe);break}}ee++}ee=0;for(let ne=n().board.length-1;ne>=0;ne--){let Pe=j[ee]?.querySelector(".piece");if(Pe!=null&&n().board[ne]!=" "){if(!Pe.classList.contains(n().board[ne]))break}else if(Pe==null&&n().board[ne]!=" "){for(let K=0;K<M.length;K++)if((M[K].classList.contains("p")||M[K].classList.contains("P"))&&!oe.includes(K)){let ut=M[K];ut.classList.contains("p")?(ut.classList.remove("p"),ut.classList.add(n().board[ne])):(ut.classList.remove("P"),ut.classList.add(n().board[ne])),j[ee].appendChild(ut)}break}ee++}n().displayBoard()}async function Oe(j){if(j===void 0){d()=="white"?le():te();return}console.log(j);let M=j.data.chessGamesSub.moves[j.data.chessGamesSub.moves.length-1],oe=j.data.chessGamesSub.fen;oe!=n().fen&&(n().movePiece(M.from,M.to),Ve(oe),d()=="white"?le():te()),console.log(M),q({from:M?.from,to:M?.to});let ee=document.querySelectorAll(".chessSquare");for(let ne=0;ne<ee.length;ne++)ee[ne].id===L().from||ee[ne].id===L().to?ee[ne]?.classList?.add("lastMove"):ee[ne]?.classList?.remove("lastMove");n().findLegalMoves(n()).length==0&&(Q(!0),console.log("checkmate",G()),G()==!0&&alert("Checkmate"))}function Ve(j){let M=new pe(void 0,j);n().board=M.board,n().fen=M.fen,n().Pieces=M.Pieces}function st(j){console.log(j),lt.subscribe({query:vv,variables:{gameId:j.gameId}}).subscribe({next:M=>{if(u()==!0&&Oe(M),M.data.chessGamesSub.started==!0&&u()==!1&&(g(M.data.chessGamesSub.id),f(!0),T(),document.querySelector(".modal-backdrop")?.remove()),d()==""){let oe=M.data.chessGamesSub.requesterColor;console.log("requesterId",M.data.chessGamesSub),console.log("oldUserId",r()),M.data.chessGamesSub.requesterId==r()?m(oe):m(oe=="white"?"black":"white"),console.log("in game color",d())}}}),console.log("game created and subscribed to"),console.log("inGameColor",d())}function Qe(){lt.mutate({mutation:mv,variables:{gameId:E().gameId}}).then(j=>{console.log("game started",j),f(!0)})}return[ke(bt,{get when(){return At(()=>!c())()&&u()==!1},get children(){return ke(Mf,{oldUserName:t,oldUserId:r,setOldUserName:i,setOldUserId:s,setSessionStorageUser:a,addUserToGraphql:Ne,updateLastSeen:Re})}}),ke(bt,{get when(){return At(()=>!!c())()&&u()==!1},get children(){return ke(Uf,{users:w,userId:r,playChess:Y,refetchUsers:Se})}}),ke(bt,{get when(){return At(()=>d()=="white")()&&u()==!0},get children(){return ke(Sf,{client:lt,board:n,updateBoard:Oe,gql:Ye,gameId:v,setLastMove:q,lastMove:L})}}),ke(bt,{get when(){return u()==!1||d()=="black"&&u()==!0},get children(){return ke(Nf,{client:lt,board:n,updateBlackBoard:Oe,gql:Ye,gameId:v,setLastMove:q,lastMove:L})}}),ke(bt,{get when(){return u()==!1},get children(){return[cv.cloneNode(!0),(()=>{const j=lv.cloneNode(!0),M=j.firstChild,oe=M.firstChild,ee=oe.firstChild,ne=ee.firstChild,Pe=ne.firstChild,K=Pe.nextSibling;K.nextSibling;const ut=ee.nextSibling,hr=ut.firstChild,Gt=hr.nextSibling;Gt.nextSibling;const Ht=ut.nextSibling,Nt=Ht.firstChild,Lt=Nt.nextSibling;return j.style.setProperty("display","none"),rt(ne,()=>x()?.username,K),rt(ut,()=>x()?.username,Gt),Lt.$$click=()=>{st(E()),Qe()},j})()]}})]}li(["click"]);const yv=()=>ke(gv,{});mf(()=>ke(yv,{}),document.getElementById("root"))});export default bv();
