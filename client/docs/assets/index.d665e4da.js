(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const p of i.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();const ut={};function wr(c){ut.context=c}const br=(c,n)=>c===n,yr=Symbol("solid-track"),Mn={equals:br};let zs=to;const At=1,Bn=2,Xs={owned:null,cleanups:null,context:null,owner:null};var Oe=null;let Ot=null,Be=null,$e=null,bt=null,mi=0;function In(c,n){const t=Be,s=Oe,r=c.length===0,i=r?Xs:{owned:null,cleanups:null,context:null,owner:n||s},p=r?c:()=>c(()=>Ct(()=>qn(i)));Oe=i,Be=null;try{return an(p,!0)}finally{Be=t,Oe=s}}function Q(c,n){n=n?Object.assign({},Mn,n):Mn;const t={value:c,observers:null,observerSlots:null,comparator:n.equals||void 0},s=r=>(typeof r=="function"&&(r=r(t.value)),eo(t,r));return[Zs.bind(t),s]}function ht(c,n,t){const s=vi(c,n,!1,At);ln(s)}function _r(c,n,t){zs=Tr;const s=vi(c,n,!1,At);s.user=!0,bt?bt.push(s):ln(s)}function nt(c,n,t){t=t?Object.assign({},Mn,t):Mn;const s=vi(c,n,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=t.equals||void 0,ln(s),Zs.bind(s)}function Ct(c){const n=Be;Be=null;try{return c()}finally{Be=n}}function Ye(c){_r(()=>Ct(c))}function Js(c){return Oe===null||(Oe.cleanups===null?Oe.cleanups=[c]:Oe.cleanups.push(c)),c}function Pr(c,n){const t=Symbol("context");return{id:t,Provider:Sr(t),defaultValue:c}}function xr(c){let n;return(n=so(Oe,c.id))!==void 0?n:c.defaultValue}function Ar(c){const n=nt(c),t=nt(()=>pi(n()));return t.toArray=()=>{const s=t();return Array.isArray(s)?s:s!=null?[s]:[]},t}function Zs(){const c=Ot;if(this.sources&&(this.state||c))if(this.state===At||c)ln(this);else{const n=$e;$e=null,an(()=>On(this),!1),$e=n}if(Be){const n=this.observers?this.observers.length:0;Be.sources?(Be.sources.push(this),Be.sourceSlots.push(n)):(Be.sources=[this],Be.sourceSlots=[n]),this.observers?(this.observers.push(Be),this.observerSlots.push(Be.sources.length-1)):(this.observers=[Be],this.observerSlots=[Be.sources.length-1])}return this.value}function eo(c,n,t){let s=c.value;return(!c.comparator||!c.comparator(s,n))&&(c.value=n,c.observers&&c.observers.length&&an(()=>{for(let r=0;r<c.observers.length;r+=1){const i=c.observers[r],p=Ot&&Ot.running;p&&Ot.disposed.has(i),(p&&!i.tState||!p&&!i.state)&&(i.pure?$e.push(i):bt.push(i),i.observers&&no(i)),p||(i.state=At)}if($e.length>1e6)throw $e=[],new Error},!1)),n}function ln(c){if(!c.fn)return;qn(c);const n=Oe,t=Be,s=mi;Be=Oe=c,Cr(c,c.value,s),Be=t,Oe=n}function Cr(c,n,t){let s;try{s=c.fn(n)}catch(r){c.pure&&(c.state=At,c.owned&&c.owned.forEach(qn),c.owned=null),io(r)}(!c.updatedAt||c.updatedAt<=t)&&(c.updatedAt!=null&&"observers"in c?eo(c,s):c.value=s,c.updatedAt=t)}function vi(c,n,t,s=At,r){const i={fn:c,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:Oe,context:null,pure:t};return Oe===null||Oe!==Xs&&(Oe.owned?Oe.owned.push(i):Oe.owned=[i]),i}function Ln(c){const n=Ot;if(c.state===0||n)return;if(c.state===Bn||n)return On(c);if(c.suspense&&Ct(c.suspense.inFallback))return c.suspense.effects.push(c);const t=[c];for(;(c=c.owner)&&(!c.updatedAt||c.updatedAt<mi);)(c.state||n)&&t.push(c);for(let s=t.length-1;s>=0;s--)if(c=t[s],c.state===At||n)ln(c);else if(c.state===Bn||n){const r=$e;$e=null,an(()=>On(c,t[0]),!1),$e=r}}function an(c,n){if($e)return c();let t=!1;n||($e=[]),bt?t=!0:bt=[],mi++;try{const s=c();return kr(t),s}catch(s){$e||(bt=null),io(s)}}function kr(c){if($e&&(to($e),$e=null),c)return;const n=bt;bt=null,n.length&&an(()=>zs(n),!1)}function to(c){for(let n=0;n<c.length;n++)Ln(c[n])}function Tr(c){let n,t=0;for(n=0;n<c.length;n++){const s=c[n];s.user?c[t++]=s:Ln(s)}for(ut.context&&wr(),n=0;n<t;n++)Ln(c[n])}function On(c,n){const t=Ot;c.state=0;for(let s=0;s<c.sources.length;s+=1){const r=c.sources[s];r.sources&&(r.state===At||t?r!==n&&Ln(r):(r.state===Bn||t)&&On(r,n))}}function no(c){const n=Ot;for(let t=0;t<c.observers.length;t+=1){const s=c.observers[t];(!s.state||n)&&(s.state=Bn,s.pure?$e.push(s):bt.push(s),s.observers&&no(s))}}function qn(c){let n;if(c.sources)for(;c.sources.length;){const t=c.sources.pop(),s=c.sourceSlots.pop(),r=t.observers;if(r&&r.length){const i=r.pop(),p=t.observerSlots.pop();s<r.length&&(i.sourceSlots[p]=s,r[s]=i,t.observerSlots[s]=p)}}if(c.owned){for(n=0;n<c.owned.length;n++)qn(c.owned[n]);c.owned=null}if(c.cleanups){for(n=0;n<c.cleanups.length;n++)c.cleanups[n]();c.cleanups=null}c.state=0,c.context=null}function Er(c){return c instanceof Error||typeof c=="string"?c:new Error("Unknown error")}function io(c){throw c=Er(c),c}function so(c,n){return c?c.context&&c.context[n]!==void 0?c.context[n]:so(c.owner,n):void 0}function pi(c){if(typeof c=="function"&&!c.length)return pi(c());if(Array.isArray(c)){const n=[];for(let t=0;t<c.length;t++){const s=pi(c[t]);Array.isArray(s)?n.push.apply(n,s):n.push(s)}return n}return c}function Sr(c,n){return function(s){let r;return ht(()=>r=Ct(()=>(Oe.context={[c]:s.value},Ar(()=>s.children))),void 0),r}}const Ir=Symbol("fallback");function js(c){for(let n=0;n<c.length;n++)c[n]()}function Vr(c,n,t={}){let s=[],r=[],i=[],p=0,a=n.length>1?[]:null;return Js(()=>js(i)),()=>{let u=c()||[],b,w;return u[yr],Ct(()=>{let D=u.length,B,k,H,K,F,P,N,S,V;if(D===0)p!==0&&(js(i),i=[],s=[],r=[],p=0,a&&(a=[])),t.fallback&&(s=[Ir],r[0]=In(G=>(i[0]=G,t.fallback())),p=1);else if(p===0){for(r=new Array(D),w=0;w<D;w++)s[w]=u[w],r[w]=In($);p=D}else{for(H=new Array(D),K=new Array(D),a&&(F=new Array(D)),P=0,N=Math.min(p,D);P<N&&s[P]===u[P];P++);for(N=p-1,S=D-1;N>=P&&S>=P&&s[N]===u[S];N--,S--)H[S]=r[N],K[S]=i[N],a&&(F[S]=a[N]);for(B=new Map,k=new Array(S+1),w=S;w>=P;w--)V=u[w],b=B.get(V),k[w]=b===void 0?-1:b,B.set(V,w);for(b=P;b<=N;b++)V=s[b],w=B.get(V),w!==void 0&&w!==-1?(H[w]=r[b],K[w]=i[b],a&&(F[w]=a[b]),w=k[w],B.set(V,w)):i[b]();for(w=P;w<D;w++)w in H?(r[w]=H[w],i[w]=K[w],a&&(a[w]=F[w],a[w](w))):r[w]=In($);r=r.slice(0,p=D),s=u.slice(0)}return r});function $(D){if(i[w]=D,a){const[B,k]=Q(w);return a[w]=k,n(u[w],B)}return n(u[w])}}}function X(c,n){return Ct(()=>c(n||{}))}function $n(c){const n="fallback"in c&&{fallback:()=>c.fallback};return nt(Vr(()=>c.each,c.children,n||void 0))}function qe(c){let n=!1;const t=c.keyed,s=nt(()=>c.when,void 0,{equals:(r,i)=>n?r===i:!r==!i});return nt(()=>{const r=s();if(r){const i=c.children,p=typeof i=="function"&&i.length>0;return n=t||p,p?Ct(()=>i(r)):i}return c.fallback},void 0,void 0)}function Mr(c,n,t){let s=t.length,r=n.length,i=s,p=0,a=0,u=n[r-1].nextSibling,b=null;for(;p<r||a<i;){if(n[p]===t[a]){p++,a++;continue}for(;n[r-1]===t[i-1];)r--,i--;if(r===p){const w=i<s?a?t[a-1].nextSibling:t[i-a]:u;for(;a<i;)c.insertBefore(t[a++],w)}else if(i===a)for(;p<r;)(!b||!b.has(n[p]))&&n[p].remove(),p++;else if(n[p]===t[i-1]&&t[a]===n[r-1]){const w=n[--r].nextSibling;c.insertBefore(t[a++],n[p++].nextSibling),c.insertBefore(t[--i],w),n[r]=t[i]}else{if(!b){b=new Map;let $=a;for(;$<i;)b.set(t[$],$++)}const w=b.get(n[p]);if(w!=null)if(a<w&&w<i){let $=p,D=1,B;for(;++$<r&&$<i&&!((B=b.get(n[$]))==null||B!==w+D);)D++;if(D>w-a){const k=n[p];for(;a<w;)c.insertBefore(t[a++],k)}else c.replaceChild(t[a++],n[p++])}else p++;else n[p++].remove()}}}const Us="_$DX_DELEGATE";function Br(c,n,t,s={}){let r;return In(i=>{r=i,n===document?c():Se(n,c(),n.firstChild?null:void 0,t)},s.owner),()=>{r(),n.textContent=""}}function Ie(c,n,t){const s=document.createElement("template");s.innerHTML=c;let r=s.content.firstChild;return t&&(r=r.firstChild),r}function Nt(c,n=window.document){const t=n[Us]||(n[Us]=new Set);for(let s=0,r=c.length;s<r;s++){const i=c[s];t.has(i)||(t.add(i),n.addEventListener(i,Or))}}function Nn(c,n,t){t==null?c.removeAttribute(n):c.setAttribute(n,t)}function rn(c,n){n==null?c.removeAttribute("class"):c.className=n}function Lr(c,n,t,s){if(s)Array.isArray(t)?(c[`$$${n}`]=t[0],c[`$$${n}Data`]=t[1]):c[`$$${n}`]=t;else if(Array.isArray(t)){const r=t[0];c.addEventListener(n,t[0]=i=>r.call(c,t[1],i))}else c.addEventListener(n,t)}function oo(c,n,t){if(!n)return t?Nn(c,"style"):n;const s=c.style;if(typeof n=="string")return s.cssText=n;typeof t=="string"&&(s.cssText=t=void 0),t||(t={}),n||(n={});let r,i;for(i in t)n[i]==null&&s.removeProperty(i),delete t[i];for(i in n)r=n[i],r!==t[i]&&(s.setProperty(i,r),t[i]=r);return t}function Hs(c,n,t){return Ct(()=>c(n,t))}function Se(c,n,t,s){if(t!==void 0&&!s&&(s=[]),typeof n!="function")return Dn(c,n,s,t);ht(r=>Dn(c,n(),r,t),s)}function Or(c){const n=`$$${c.type}`;let t=c.composedPath&&c.composedPath()[0]||c.target;for(c.target!==t&&Object.defineProperty(c,"target",{configurable:!0,value:t}),Object.defineProperty(c,"currentTarget",{configurable:!0,get(){return t||document}}),ut.registry&&!ut.done&&(ut.done=!0,document.querySelectorAll("[id^=pl-]").forEach(s=>{for(;s&&s.nodeType!==8&&s.nodeValue!=="pl-"+c;){let r=s.nextSibling;s.remove(),s=r}s&&s.remove()}));t;){const s=t[n];if(s&&!t.disabled){const r=t[`${n}Data`];if(r!==void 0?s.call(t,r,c):s.call(t,c),c.cancelBubble)return}t=t._$host||t.parentNode||t.host}}function Dn(c,n,t,s,r){for(ut.context&&!t&&(t=[...c.childNodes]);typeof t=="function";)t=t();if(n===t)return t;const i=typeof n,p=s!==void 0;if(c=p&&t[0]&&t[0].parentNode||c,i==="string"||i==="number"){if(ut.context)return t;if(i==="number"&&(n=n.toString()),p){let a=t[0];a&&a.nodeType===3?a.data=n:a=document.createTextNode(n),t=Qt(c,t,s,a)}else t!==""&&typeof t=="string"?t=c.firstChild.data=n:t=c.textContent=n}else if(n==null||i==="boolean"){if(ut.context)return t;t=Qt(c,t,s)}else{if(i==="function")return ht(()=>{let a=n();for(;typeof a=="function";)a=a();t=Dn(c,a,t,s)}),()=>t;if(Array.isArray(n)){const a=[],u=t&&Array.isArray(t);if(gi(a,n,t,r))return ht(()=>t=Dn(c,a,t,s,!0)),()=>t;if(ut.context){if(!a.length)return t;for(let b=0;b<a.length;b++)if(a[b].parentNode)return t=a}if(a.length===0){if(t=Qt(c,t,s),p)return t}else u?t.length===0?Ws(c,a,s):Mr(c,t,a):(t&&Qt(c),Ws(c,a));t=a}else if(n instanceof Node){if(ut.context&&n.parentNode)return t=p?[n]:n;if(Array.isArray(t)){if(p)return t=Qt(c,t,s,n);Qt(c,t,null,n)}else t==null||t===""||!c.firstChild?c.appendChild(n):c.replaceChild(n,c.firstChild);t=n}}return t}function gi(c,n,t,s){let r=!1;for(let i=0,p=n.length;i<p;i++){let a=n[i],u=t&&t[i];if(a instanceof Node)c.push(a);else if(!(a==null||a===!0||a===!1))if(Array.isArray(a))r=gi(c,a,u)||r;else if(typeof a=="function")if(s){for(;typeof a=="function";)a=a();r=gi(c,Array.isArray(a)?a:[a],Array.isArray(u)?u:[u])||r}else c.push(a),r=!0;else{const b=String(a);u&&u.nodeType===3&&u.data===b?c.push(u):c.push(document.createTextNode(b))}}return r}function Ws(c,n,t=null){for(let s=0,r=n.length;s<r;s++)c.insertBefore(n[s],t)}function Qt(c,n,t,s){if(t===void 0)return c.textContent="";const r=s||document.createTextNode("");if(n.length){let i=!1;for(let p=n.length-1;p>=0;p--){const a=n[p];if(r!==a){const u=a.parentNode===c;!i&&!p?u?c.replaceChild(r,a):c.insertBefore(r,t):u&&a.remove()}else i=!0}}else c.insertBefore(r,t);return[r]}var Nr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dr={exports:{}};/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(c,n){(function(t,s){c.exports=s()})(Nr,function(){const t="transitionend",s=l=>{let e=l.getAttribute("data-bs-target");if(!e||e==="#"){let o=l.getAttribute("href");if(!o||!o.includes("#")&&!o.startsWith("."))return null;o.includes("#")&&!o.startsWith("#")&&(o=`#${o.split("#")[1]}`),e=o&&o!=="#"?o.trim():null}return e},r=l=>{const e=s(l);return e&&document.querySelector(e)?e:null},i=l=>{const e=s(l);return e?document.querySelector(e):null},p=l=>{l.dispatchEvent(new Event(t))},a=l=>!(!l||typeof l!="object")&&(l.jquery!==void 0&&(l=l[0]),l.nodeType!==void 0),u=l=>a(l)?l.jquery?l[0]:l:typeof l=="string"&&l.length>0?document.querySelector(l):null,b=l=>{if(!a(l)||l.getClientRects().length===0)return!1;const e=getComputedStyle(l).getPropertyValue("visibility")==="visible",o=l.closest("details:not([open])");if(!o)return e;if(o!==l){const d=l.closest("summary");if(d&&d.parentNode!==o||d===null)return!1}return e},w=l=>!l||l.nodeType!==Node.ELEMENT_NODE||!!l.classList.contains("disabled")||(l.disabled!==void 0?l.disabled:l.hasAttribute("disabled")&&l.getAttribute("disabled")!=="false"),$=l=>{if(!document.documentElement.attachShadow)return null;if(typeof l.getRootNode=="function"){const e=l.getRootNode();return e instanceof ShadowRoot?e:null}return l instanceof ShadowRoot?l:l.parentNode?$(l.parentNode):null},D=()=>{},B=l=>{l.offsetHeight},k=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,H=[],K=()=>document.documentElement.dir==="rtl",F=l=>{var e;e=()=>{const o=k();if(o){const d=l.NAME,h=o.fn[d];o.fn[d]=l.jQueryInterface,o.fn[d].Constructor=l,o.fn[d].noConflict=()=>(o.fn[d]=h,l.jQueryInterface)}},document.readyState==="loading"?(H.length||document.addEventListener("DOMContentLoaded",()=>{for(const o of H)o()}),H.push(e)):e()},P=l=>{typeof l=="function"&&l()},N=(l,e,o=!0)=>{if(!o)return void P(l);const d=(m=>{if(!m)return 0;let{transitionDuration:_,transitionDelay:A}=window.getComputedStyle(m);const L=Number.parseFloat(_),O=Number.parseFloat(A);return L||O?(_=_.split(",")[0],A=A.split(",")[0],1e3*(Number.parseFloat(_)+Number.parseFloat(A))):0})(e)+5;let h=!1;const f=({target:m})=>{m===e&&(h=!0,e.removeEventListener(t,f),P(l))};e.addEventListener(t,f),setTimeout(()=>{h||p(e)},d)},S=(l,e,o,d)=>{const h=l.length;let f=l.indexOf(e);return f===-1?!o&&d?l[h-1]:l[0]:(f+=o?1:-1,d&&(f=(f+h)%h),l[Math.max(0,Math.min(f,h-1))])},V=/[^.]*(?=\..*)\.|.*/,G=/\..*/,R=/::\d+$/,W={};let T=1;const E={mouseenter:"mouseover",mouseleave:"mouseout"},se=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function be(l,e){return e&&`${e}::${T++}`||l.uidEvent||T++}function de(l){const e=be(l);return l.uidEvent=e,W[e]=W[e]||{},W[e]}function ee(l,e,o=null){return Object.values(l).find(d=>d.callable===e&&d.delegationSelector===o)}function ye(l,e,o){const d=typeof e=="string",h=d?o:e||o;let f=ie(l);return se.has(f)||(f=l),[d,h,f]}function ge(l,e,o,d,h){if(typeof e!="string"||!l)return;let[f,m,_]=ye(e,o,d);e in E&&(m=(te=>function(z){if(!z.relatedTarget||z.relatedTarget!==z.delegateTarget&&!z.delegateTarget.contains(z.relatedTarget))return te.call(this,z)})(m));const A=de(l),L=A[_]||(A[_]={}),O=ee(L,m,f?o:null);if(O)return void(O.oneOff=O.oneOff&&h);const I=be(m,e.replace(V,"")),le=f?function(U,te,z){return function ne(Ae){const Te=U.querySelectorAll(te);for(let{target:ce}=Ae;ce&&ce!==this;ce=ce.parentNode)for(const we of Te)if(we===ce)return x(Ae,{delegateTarget:ce}),ne.oneOff&&v.off(U,Ae.type,te,z),z.apply(ce,[Ae])}}(l,o,m):function(U,te){return function z(ne){return x(ne,{delegateTarget:U}),z.oneOff&&v.off(U,ne.type,te),te.apply(U,[ne])}}(l,m);le.delegationSelector=f?o:null,le.callable=m,le.oneOff=h,le.uidEvent=I,L[I]=le,l.addEventListener(_,le,f)}function me(l,e,o,d,h){const f=ee(e[o],d,h);f&&(l.removeEventListener(o,f,Boolean(h)),delete e[o][f.uidEvent])}function _e(l,e,o,d){const h=e[o]||{};for(const f of Object.keys(h))if(f.includes(d)){const m=h[f];me(l,e,o,m.callable,m.delegationSelector)}}function ie(l){return l=l.replace(G,""),E[l]||l}const v={on(l,e,o,d){ge(l,e,o,d,!1)},one(l,e,o,d){ge(l,e,o,d,!0)},off(l,e,o,d){if(typeof e!="string"||!l)return;const[h,f,m]=ye(e,o,d),_=m!==e,A=de(l),L=A[m]||{},O=e.startsWith(".");if(f===void 0){if(O)for(const I of Object.keys(A))_e(l,A,I,e.slice(1));for(const I of Object.keys(L)){const le=I.replace(R,"");if(!_||e.includes(le)){const U=L[I];me(l,A,m,U.callable,U.delegationSelector)}}}else{if(!Object.keys(L).length)return;me(l,A,m,f,h?o:null)}},trigger(l,e,o){if(typeof e!="string"||!l)return null;const d=k();let h=null,f=!0,m=!0,_=!1;e!==ie(e)&&d&&(h=d.Event(e,o),d(l).trigger(h),f=!h.isPropagationStopped(),m=!h.isImmediatePropagationStopped(),_=h.isDefaultPrevented());let A=new Event(e,{bubbles:f,cancelable:!0});return A=x(A,o),_&&A.preventDefault(),m&&l.dispatchEvent(A),A.defaultPrevented&&h&&h.preventDefault(),A}};function x(l,e){for(const[o,d]of Object.entries(e||{}))try{l[o]=d}catch{Object.defineProperty(l,o,{configurable:!0,get:()=>d})}return l}const M=new Map,ue={set(l,e,o){M.has(l)||M.set(l,new Map);const d=M.get(l);d.has(e)||d.size===0?d.set(e,o):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(d.keys())[0]}.`)},get:(l,e)=>M.has(l)&&M.get(l).get(e)||null,remove(l,e){if(!M.has(l))return;const o=M.get(l);o.delete(e),o.size===0&&M.delete(l)}};function oe(l){if(l==="true")return!0;if(l==="false")return!1;if(l===Number(l).toString())return Number(l);if(l===""||l==="null")return null;if(typeof l!="string")return l;try{return JSON.parse(decodeURIComponent(l))}catch{return l}}function j(l){return l.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const J={setDataAttribute(l,e,o){l.setAttribute(`data-bs-${j(e)}`,o)},removeDataAttribute(l,e){l.removeAttribute(`data-bs-${j(e)}`)},getDataAttributes(l){if(!l)return{};const e={},o=Object.keys(l.dataset).filter(d=>d.startsWith("bs")&&!d.startsWith("bsConfig"));for(const d of o){let h=d.replace(/^bs/,"");h=h.charAt(0).toLowerCase()+h.slice(1,h.length),e[h]=oe(l.dataset[d])}return e},getDataAttribute:(l,e)=>oe(l.getAttribute(`data-bs-${j(e)}`))};class ve{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,o){const d=a(o)?J.getDataAttribute(o,"config"):{};return{...this.constructor.Default,...typeof d=="object"?d:{},...a(o)?J.getDataAttributes(o):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,o=this.constructor.DefaultType){for(const h of Object.keys(o)){const f=o[h],m=e[h],_=a(m)?"element":(d=m)==null?`${d}`:Object.prototype.toString.call(d).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(f).test(_))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${h}" provided type "${_}" but expected type "${f}".`)}var d}}class he extends ve{constructor(e,o){super(),(e=u(e))&&(this._element=e,this._config=this._getConfig(o),ue.set(this._element,this.constructor.DATA_KEY,this))}dispose(){ue.remove(this._element,this.constructor.DATA_KEY),v.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,o,d=!0){N(e,o,d)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return ue.get(u(e),this.DATA_KEY)}static getOrCreateInstance(e,o={}){return this.getInstance(e)||new this(e,typeof o=="object"?o:null)}static get VERSION(){return"5.2.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const Me=(l,e="hide")=>{const o=`click.dismiss${l.EVENT_KEY}`,d=l.NAME;v.on(document,o,`[data-bs-dismiss="${d}"]`,function(h){if(["A","AREA"].includes(this.tagName)&&h.preventDefault(),w(this))return;const f=i(this)||this.closest(`.${d}`);l.getOrCreateInstance(f)[e]()})};class it extends he{static get NAME(){return"alert"}close(){if(v.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),v.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(e){return this.each(function(){const o=it.getOrCreateInstance(this);if(typeof e=="string"){if(o[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);o[e](this)}})}}Me(it,"close"),F(it);const kt='[data-bs-toggle="button"]';class rt extends he{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each(function(){const o=rt.getOrCreateInstance(this);e==="toggle"&&o[e]()})}}v.on(document,"click.bs.button.data-api",kt,l=>{l.preventDefault();const e=l.target.closest(kt);rt.getOrCreateInstance(e).toggle()}),F(rt);const Z={find:(l,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,l)),findOne:(l,e=document.documentElement)=>Element.prototype.querySelector.call(e,l),children:(l,e)=>[].concat(...l.children).filter(o=>o.matches(e)),parents(l,e){const o=[];let d=l.parentNode.closest(e);for(;d;)o.push(d),d=d.parentNode.closest(e);return o},prev(l,e){let o=l.previousElementSibling;for(;o;){if(o.matches(e))return[o];o=o.previousElementSibling}return[]},next(l,e){let o=l.nextElementSibling;for(;o;){if(o.matches(e))return[o];o=o.nextElementSibling}return[]},focusableChildren(l){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(o=>`${o}:not([tabindex^="-"])`).join(",");return this.find(e,l).filter(o=>!w(o)&&b(o))}},cn={endCallback:null,leftCallback:null,rightCallback:null},dn={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class q extends ve{constructor(e,o){super(),this._element=e,e&&q.isSupported()&&(this._config=this._getConfig(o),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return cn}static get DefaultType(){return dn}static get NAME(){return"swipe"}dispose(){v.off(this._element,".bs.swipe")}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),P(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const o=e/this._deltaX;this._deltaX=0,o&&P(o>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(v.on(this._element,"pointerdown.bs.swipe",e=>this._start(e)),v.on(this._element,"pointerup.bs.swipe",e=>this._end(e)),this._element.classList.add("pointer-event")):(v.on(this._element,"touchstart.bs.swipe",e=>this._start(e)),v.on(this._element,"touchmove.bs.swipe",e=>this._move(e)),v.on(this._element,"touchend.bs.swipe",e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType==="pen"||e.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const g="next",re="prev",Y="left",yt="right",Ne="slid.bs.carousel",Re="carousel",ze="active",ft={ArrowLeft:yt,ArrowRight:Y},pt={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},gt={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Xe extends he{constructor(e,o){super(e,o),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Z.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Re&&this.cycle()}static get Default(){return pt}static get DefaultType(){return gt}static get NAME(){return"carousel"}next(){this._slide(g)}nextWhenVisible(){!document.hidden&&b(this._element)&&this.next()}prev(){this._slide(re)}pause(){this._isSliding&&p(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?v.one(this._element,Ne,()=>this.cycle()):this.cycle())}to(e){const o=this._getItems();if(e>o.length-1||e<0)return;if(this._isSliding)return void v.one(this._element,Ne,()=>this.to(e));const d=this._getItemIndex(this._getActive());if(d===e)return;const h=e>d?g:re;this._slide(h,o[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&v.on(this._element,"keydown.bs.carousel",e=>this._keydown(e)),this._config.pause==="hover"&&(v.on(this._element,"mouseenter.bs.carousel",()=>this.pause()),v.on(this._element,"mouseleave.bs.carousel",()=>this._maybeEnableCycle())),this._config.touch&&q.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const o of Z.find(".carousel-item img",this._element))v.on(o,"dragstart.bs.carousel",d=>d.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(Y)),rightCallback:()=>this._slide(this._directionToOrder(yt)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new q(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const o=ft[e.key];o&&(e.preventDefault(),this._slide(this._directionToOrder(o)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const o=Z.findOne(".active",this._indicatorsElement);o.classList.remove(ze),o.removeAttribute("aria-current");const d=Z.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);d&&(d.classList.add(ze),d.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const o=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=o||this._config.defaultInterval}_slide(e,o=null){if(this._isSliding)return;const d=this._getActive(),h=e===g,f=o||S(this._getItems(),d,h,this._config.wrap);if(f===d)return;const m=this._getItemIndex(f),_=I=>v.trigger(this._element,I,{relatedTarget:f,direction:this._orderToDirection(e),from:this._getItemIndex(d),to:m});if(_("slide.bs.carousel").defaultPrevented||!d||!f)return;const A=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(m),this._activeElement=f;const L=h?"carousel-item-start":"carousel-item-end",O=h?"carousel-item-next":"carousel-item-prev";f.classList.add(O),B(f),d.classList.add(L),f.classList.add(L),this._queueCallback(()=>{f.classList.remove(L,O),f.classList.add(ze),d.classList.remove(ze,O,L),this._isSliding=!1,_(Ne)},d,this._isAnimated()),A&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Z.findOne(".active.carousel-item",this._element)}_getItems(){return Z.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return K()?e===Y?re:g:e===Y?g:re}_orderToDirection(e){return K()?e===re?Y:yt:e===re?yt:Y}static jQueryInterface(e){return this.each(function(){const o=Xe.getOrCreateInstance(this,e);if(typeof e!="number"){if(typeof e=="string"){if(o[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);o[e]()}}else o.to(e)})}}v.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(l){const e=i(this);if(!e||!e.classList.contains(Re))return;l.preventDefault();const o=Xe.getOrCreateInstance(e),d=this.getAttribute("data-bs-slide-to");return d?(o.to(d),void o._maybeEnableCycle()):J.getDataAttribute(this,"slide")==="next"?(o.next(),void o._maybeEnableCycle()):(o.prev(),void o._maybeEnableCycle())}),v.on(window,"load.bs.carousel.data-api",()=>{const l=Z.find('[data-bs-ride="carousel"]');for(const e of l)Xe.getOrCreateInstance(e)}),F(Xe);const mt="show",un="collapse",hn="collapsing",Fn='[data-bs-toggle="collapse"]',go={parent:null,toggle:!0},mo={parent:"(null|element)",toggle:"boolean"};class Dt extends he{constructor(e,o){super(e,o),this._isTransitioning=!1,this._triggerArray=[];const d=Z.find(Fn);for(const h of d){const f=r(h),m=Z.find(f).filter(_=>_===this._element);f!==null&&m.length&&this._triggerArray.push(h)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return go}static get DefaultType(){return mo}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(h=>h!==this._element).map(h=>Dt.getOrCreateInstance(h,{toggle:!1}))),e.length&&e[0]._isTransitioning||v.trigger(this._element,"show.bs.collapse").defaultPrevented)return;for(const h of e)h.hide();const o=this._getDimension();this._element.classList.remove(un),this._element.classList.add(hn),this._element.style[o]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const d=`scroll${o[0].toUpperCase()+o.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(hn),this._element.classList.add(un,mt),this._element.style[o]="",v.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[o]=`${this._element[d]}px`}hide(){if(this._isTransitioning||!this._isShown()||v.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,B(this._element),this._element.classList.add(hn),this._element.classList.remove(un,mt);for(const o of this._triggerArray){const d=i(o);d&&!this._isShown(d)&&this._addAriaAndCollapsedClass([o],!1)}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(hn),this._element.classList.add(un),v.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(e=this._element){return e.classList.contains(mt)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=u(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Fn);for(const o of e){const d=i(o);d&&this._addAriaAndCollapsedClass([o],this._isShown(d))}}_getFirstLevelChildren(e){const o=Z.find(":scope .collapse .collapse",this._config.parent);return Z.find(e,this._config.parent).filter(d=>!o.includes(d))}_addAriaAndCollapsedClass(e,o){if(e.length)for(const d of e)d.classList.toggle("collapsed",!o),d.setAttribute("aria-expanded",o)}static jQueryInterface(e){const o={};return typeof e=="string"&&/show|hide/.test(e)&&(o.toggle=!1),this.each(function(){const d=Dt.getOrCreateInstance(this,o);if(typeof e=="string"){if(d[e]===void 0)throw new TypeError(`No method named "${e}"`);d[e]()}})}}v.on(document,"click.bs.collapse.data-api",Fn,function(l){(l.target.tagName==="A"||l.delegateTarget&&l.delegateTarget.tagName==="A")&&l.preventDefault();const e=r(this),o=Z.find(e);for(const d of o)Dt.getOrCreateInstance(d,{toggle:!1}).toggle()}),F(Dt);var Fe="top",Qe="bottom",Ke="right",je="left",fn="auto",Rt=[Fe,Qe,Ke,je],Tt="start",qt="end",wi="clippingParents",jn="viewport",$t="popper",bi="reference",Un=Rt.reduce(function(l,e){return l.concat([e+"-"+Tt,e+"-"+qt])},[]),Hn=[].concat(Rt,[fn]).reduce(function(l,e){return l.concat([e,e+"-"+Tt,e+"-"+qt])},[]),yi="beforeRead",_i="read",Pi="afterRead",xi="beforeMain",Ai="main",Ci="afterMain",ki="beforeWrite",Ti="write",Ei="afterWrite",Si=[yi,_i,Pi,xi,Ai,Ci,ki,Ti,Ei];function lt(l){return l?(l.nodeName||"").toLowerCase():null}function Je(l){if(l==null)return window;if(l.toString()!=="[object Window]"){var e=l.ownerDocument;return e&&e.defaultView||window}return l}function Et(l){return l instanceof Je(l).Element||l instanceof Element}function Ze(l){return l instanceof Je(l).HTMLElement||l instanceof HTMLElement}function Wn(l){return typeof ShadowRoot<"u"&&(l instanceof Je(l).ShadowRoot||l instanceof ShadowRoot)}const Qn={name:"applyStyles",enabled:!0,phase:"write",fn:function(l){var e=l.state;Object.keys(e.elements).forEach(function(o){var d=e.styles[o]||{},h=e.attributes[o]||{},f=e.elements[o];Ze(f)&&lt(f)&&(Object.assign(f.style,d),Object.keys(h).forEach(function(m){var _=h[m];_===!1?f.removeAttribute(m):f.setAttribute(m,_===!0?"":_)}))})},effect:function(l){var e=l.state,o={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,o.popper),e.styles=o,e.elements.arrow&&Object.assign(e.elements.arrow.style,o.arrow),function(){Object.keys(e.elements).forEach(function(d){var h=e.elements[d],f=e.attributes[d]||{},m=Object.keys(e.styles.hasOwnProperty(d)?e.styles[d]:o[d]).reduce(function(_,A){return _[A]="",_},{});Ze(h)&&lt(h)&&(Object.assign(h.style,m),Object.keys(f).forEach(function(_){h.removeAttribute(_)}))})}},requires:["computeStyles"]};function at(l){return l.split("-")[0]}var St=Math.max,pn=Math.min,Ft=Math.round;function Kn(){var l=navigator.userAgentData;return l!=null&&l.brands?l.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Ii(){return!/^((?!chrome|android).)*safari/i.test(Kn())}function jt(l,e,o){e===void 0&&(e=!1),o===void 0&&(o=!1);var d=l.getBoundingClientRect(),h=1,f=1;e&&Ze(l)&&(h=l.offsetWidth>0&&Ft(d.width)/l.offsetWidth||1,f=l.offsetHeight>0&&Ft(d.height)/l.offsetHeight||1);var m=(Et(l)?Je(l):window).visualViewport,_=!Ii()&&o,A=(d.left+(_&&m?m.offsetLeft:0))/h,L=(d.top+(_&&m?m.offsetTop:0))/f,O=d.width/h,I=d.height/f;return{width:O,height:I,top:L,right:A+O,bottom:L+I,left:A,x:A,y:L}}function Gn(l){var e=jt(l),o=l.offsetWidth,d=l.offsetHeight;return Math.abs(e.width-o)<=1&&(o=e.width),Math.abs(e.height-d)<=1&&(d=e.height),{x:l.offsetLeft,y:l.offsetTop,width:o,height:d}}function Vi(l,e){var o=e.getRootNode&&e.getRootNode();if(l.contains(e))return!0;if(o&&Wn(o)){var d=e;do{if(d&&l.isSameNode(d))return!0;d=d.parentNode||d.host}while(d)}return!1}function vt(l){return Je(l).getComputedStyle(l)}function vo(l){return["table","td","th"].indexOf(lt(l))>=0}function _t(l){return((Et(l)?l.ownerDocument:l.document)||window.document).documentElement}function gn(l){return lt(l)==="html"?l:l.assignedSlot||l.parentNode||(Wn(l)?l.host:null)||_t(l)}function Mi(l){return Ze(l)&&vt(l).position!=="fixed"?l.offsetParent:null}function zt(l){for(var e=Je(l),o=Mi(l);o&&vo(o)&&vt(o).position==="static";)o=Mi(o);return o&&(lt(o)==="html"||lt(o)==="body"&&vt(o).position==="static")?e:o||function(d){var h=/firefox/i.test(Kn());if(/Trident/i.test(Kn())&&Ze(d)&&vt(d).position==="fixed")return null;var f=gn(d);for(Wn(f)&&(f=f.host);Ze(f)&&["html","body"].indexOf(lt(f))<0;){var m=vt(f);if(m.transform!=="none"||m.perspective!=="none"||m.contain==="paint"||["transform","perspective"].indexOf(m.willChange)!==-1||h&&m.willChange==="filter"||h&&m.filter&&m.filter!=="none")return f;f=f.parentNode}return null}(l)||e}function Yn(l){return["top","bottom"].indexOf(l)>=0?"x":"y"}function Xt(l,e,o){return St(l,pn(e,o))}function Bi(l){return Object.assign({},{top:0,right:0,bottom:0,left:0},l)}function Li(l,e){return e.reduce(function(o,d){return o[d]=l,o},{})}const Oi={name:"arrow",enabled:!0,phase:"main",fn:function(l){var e,o=l.state,d=l.name,h=l.options,f=o.elements.arrow,m=o.modifiersData.popperOffsets,_=at(o.placement),A=Yn(_),L=[je,Ke].indexOf(_)>=0?"height":"width";if(f&&m){var O=function(Ce,xe){return Bi(typeof(Ce=typeof Ce=="function"?Ce(Object.assign({},xe.rects,{placement:xe.placement})):Ce)!="number"?Ce:Li(Ce,Rt))}(h.padding,o),I=Gn(f),le=A==="y"?Fe:je,U=A==="y"?Qe:Ke,te=o.rects.reference[L]+o.rects.reference[A]-m[A]-o.rects.popper[L],z=m[A]-o.rects.reference[A],ne=zt(f),Ae=ne?A==="y"?ne.clientHeight||0:ne.clientWidth||0:0,Te=te/2-z/2,ce=O[le],we=Ae-I[L]-O[U],ae=Ae/2-I[L]/2+Te,fe=Xt(ce,ae,we),Pe=A;o.modifiersData[d]=((e={})[Pe]=fe,e.centerOffset=fe-ae,e)}},effect:function(l){var e=l.state,o=l.options.element,d=o===void 0?"[data-popper-arrow]":o;d!=null&&(typeof d!="string"||(d=e.elements.popper.querySelector(d)))&&Vi(e.elements.popper,d)&&(e.elements.arrow=d)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ut(l){return l.split("-")[1]}var wo={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ni(l){var e,o=l.popper,d=l.popperRect,h=l.placement,f=l.variation,m=l.offsets,_=l.position,A=l.gpuAcceleration,L=l.adaptive,O=l.roundOffsets,I=l.isFixed,le=m.x,U=le===void 0?0:le,te=m.y,z=te===void 0?0:te,ne=typeof O=="function"?O({x:U,y:z}):{x:U,y:z};U=ne.x,z=ne.y;var Ae=m.hasOwnProperty("x"),Te=m.hasOwnProperty("y"),ce=je,we=Fe,ae=window;if(L){var fe=zt(o),Pe="clientHeight",Ce="clientWidth";fe===Je(o)&&vt(fe=_t(o)).position!=="static"&&_==="absolute"&&(Pe="scrollHeight",Ce="scrollWidth"),(h===Fe||(h===je||h===Ke)&&f===qt)&&(we=Qe,z-=(I&&fe===ae&&ae.visualViewport?ae.visualViewport.height:fe[Pe])-d.height,z*=A?1:-1),h!==je&&(h!==Fe&&h!==Qe||f!==qt)||(ce=Ke,U-=(I&&fe===ae&&ae.visualViewport?ae.visualViewport.width:fe[Ce])-d.width,U*=A?1:-1)}var xe,Ve=Object.assign({position:_},L&&wo),Ge=O===!0?function(ot){var Ue=ot.x,et=ot.y,He=window.devicePixelRatio||1;return{x:Ft(Ue*He)/He||0,y:Ft(et*He)/He||0}}({x:U,y:z}):{x:U,y:z};return U=Ge.x,z=Ge.y,A?Object.assign({},Ve,((xe={})[we]=Te?"0":"",xe[ce]=Ae?"0":"",xe.transform=(ae.devicePixelRatio||1)<=1?"translate("+U+"px, "+z+"px)":"translate3d("+U+"px, "+z+"px, 0)",xe)):Object.assign({},Ve,((e={})[we]=Te?z+"px":"",e[ce]=Ae?U+"px":"",e.transform="",e))}const zn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(l){var e=l.state,o=l.options,d=o.gpuAcceleration,h=d===void 0||d,f=o.adaptive,m=f===void 0||f,_=o.roundOffsets,A=_===void 0||_,L={placement:at(e.placement),variation:Ut(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:h,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Ni(Object.assign({},L,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:m,roundOffsets:A})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Ni(Object.assign({},L,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:A})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var mn={passive:!0};const Xn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(l){var e=l.state,o=l.instance,d=l.options,h=d.scroll,f=h===void 0||h,m=d.resize,_=m===void 0||m,A=Je(e.elements.popper),L=[].concat(e.scrollParents.reference,e.scrollParents.popper);return f&&L.forEach(function(O){O.addEventListener("scroll",o.update,mn)}),_&&A.addEventListener("resize",o.update,mn),function(){f&&L.forEach(function(O){O.removeEventListener("scroll",o.update,mn)}),_&&A.removeEventListener("resize",o.update,mn)}},data:{}};var bo={left:"right",right:"left",bottom:"top",top:"bottom"};function vn(l){return l.replace(/left|right|bottom|top/g,function(e){return bo[e]})}var yo={start:"end",end:"start"};function Di(l){return l.replace(/start|end/g,function(e){return yo[e]})}function Jn(l){var e=Je(l);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Zn(l){return jt(_t(l)).left+Jn(l).scrollLeft}function ei(l){var e=vt(l),o=e.overflow,d=e.overflowX,h=e.overflowY;return/auto|scroll|overlay|hidden/.test(o+h+d)}function Ri(l){return["html","body","#document"].indexOf(lt(l))>=0?l.ownerDocument.body:Ze(l)&&ei(l)?l:Ri(gn(l))}function Jt(l,e){var o;e===void 0&&(e=[]);var d=Ri(l),h=d===((o=l.ownerDocument)==null?void 0:o.body),f=Je(d),m=h?[f].concat(f.visualViewport||[],ei(d)?d:[]):d,_=e.concat(m);return h?_:_.concat(Jt(gn(m)))}function ti(l){return Object.assign({},l,{left:l.x,top:l.y,right:l.x+l.width,bottom:l.y+l.height})}function qi(l,e,o){return e===jn?ti(function(d,h){var f=Je(d),m=_t(d),_=f.visualViewport,A=m.clientWidth,L=m.clientHeight,O=0,I=0;if(_){A=_.width,L=_.height;var le=Ii();(le||!le&&h==="fixed")&&(O=_.offsetLeft,I=_.offsetTop)}return{width:A,height:L,x:O+Zn(d),y:I}}(l,o)):Et(e)?function(d,h){var f=jt(d,!1,h==="fixed");return f.top=f.top+d.clientTop,f.left=f.left+d.clientLeft,f.bottom=f.top+d.clientHeight,f.right=f.left+d.clientWidth,f.width=d.clientWidth,f.height=d.clientHeight,f.x=f.left,f.y=f.top,f}(e,o):ti(function(d){var h,f=_t(d),m=Jn(d),_=(h=d.ownerDocument)==null?void 0:h.body,A=St(f.scrollWidth,f.clientWidth,_?_.scrollWidth:0,_?_.clientWidth:0),L=St(f.scrollHeight,f.clientHeight,_?_.scrollHeight:0,_?_.clientHeight:0),O=-m.scrollLeft+Zn(d),I=-m.scrollTop;return vt(_||f).direction==="rtl"&&(O+=St(f.clientWidth,_?_.clientWidth:0)-A),{width:A,height:L,x:O,y:I}}(_t(l)))}function $i(l){var e,o=l.reference,d=l.element,h=l.placement,f=h?at(h):null,m=h?Ut(h):null,_=o.x+o.width/2-d.width/2,A=o.y+o.height/2-d.height/2;switch(f){case Fe:e={x:_,y:o.y-d.height};break;case Qe:e={x:_,y:o.y+o.height};break;case Ke:e={x:o.x+o.width,y:A};break;case je:e={x:o.x-d.width,y:A};break;default:e={x:o.x,y:o.y}}var L=f?Yn(f):null;if(L!=null){var O=L==="y"?"height":"width";switch(m){case Tt:e[L]=e[L]-(o[O]/2-d[O]/2);break;case qt:e[L]=e[L]+(o[O]/2-d[O]/2)}}return e}function Ht(l,e){e===void 0&&(e={});var o=e,d=o.placement,h=d===void 0?l.placement:d,f=o.strategy,m=f===void 0?l.strategy:f,_=o.boundary,A=_===void 0?wi:_,L=o.rootBoundary,O=L===void 0?jn:L,I=o.elementContext,le=I===void 0?$t:I,U=o.altBoundary,te=U!==void 0&&U,z=o.padding,ne=z===void 0?0:z,Ae=Bi(typeof ne!="number"?ne:Li(ne,Rt)),Te=le===$t?bi:$t,ce=l.rects.popper,we=l.elements[te?Te:le],ae=function(Ue,et,He,De){var ct=et==="clippingParents"?function(ke){var We=Jt(gn(ke)),tt=["absolute","fixed"].indexOf(vt(ke).position)>=0&&Ze(ke)?zt(ke):ke;return Et(tt)?We.filter(function(Pt){return Et(Pt)&&Vi(Pt,tt)&&lt(Pt)!=="body"}):[]}(Ue):[].concat(et),dt=[].concat(ct,[He]),Wt=dt[0],Le=dt.reduce(function(ke,We){var tt=qi(Ue,We,De);return ke.top=St(tt.top,ke.top),ke.right=pn(tt.right,ke.right),ke.bottom=pn(tt.bottom,ke.bottom),ke.left=St(tt.left,ke.left),ke},qi(Ue,Wt,De));return Le.width=Le.right-Le.left,Le.height=Le.bottom-Le.top,Le.x=Le.left,Le.y=Le.top,Le}(Et(we)?we:we.contextElement||_t(l.elements.popper),A,O,m),fe=jt(l.elements.reference),Pe=$i({reference:fe,element:ce,strategy:"absolute",placement:h}),Ce=ti(Object.assign({},ce,Pe)),xe=le===$t?Ce:fe,Ve={top:ae.top-xe.top+Ae.top,bottom:xe.bottom-ae.bottom+Ae.bottom,left:ae.left-xe.left+Ae.left,right:xe.right-ae.right+Ae.right},Ge=l.modifiersData.offset;if(le===$t&&Ge){var ot=Ge[h];Object.keys(Ve).forEach(function(Ue){var et=[Ke,Qe].indexOf(Ue)>=0?1:-1,He=[Fe,Qe].indexOf(Ue)>=0?"y":"x";Ve[Ue]+=ot[He]*et})}return Ve}function _o(l,e){e===void 0&&(e={});var o=e,d=o.placement,h=o.boundary,f=o.rootBoundary,m=o.padding,_=o.flipVariations,A=o.allowedAutoPlacements,L=A===void 0?Hn:A,O=Ut(d),I=O?_?Un:Un.filter(function(te){return Ut(te)===O}):Rt,le=I.filter(function(te){return L.indexOf(te)>=0});le.length===0&&(le=I);var U=le.reduce(function(te,z){return te[z]=Ht(l,{placement:z,boundary:h,rootBoundary:f,padding:m})[at(z)],te},{});return Object.keys(U).sort(function(te,z){return U[te]-U[z]})}const Fi={name:"flip",enabled:!0,phase:"main",fn:function(l){var e=l.state,o=l.options,d=l.name;if(!e.modifiersData[d]._skip){for(var h=o.mainAxis,f=h===void 0||h,m=o.altAxis,_=m===void 0||m,A=o.fallbackPlacements,L=o.padding,O=o.boundary,I=o.rootBoundary,le=o.altBoundary,U=o.flipVariations,te=U===void 0||U,z=o.allowedAutoPlacements,ne=e.options.placement,Ae=at(ne),Te=A||(Ae!==ne&&te?function(ke){if(at(ke)===fn)return[];var We=vn(ke);return[Di(ke),We,Di(We)]}(ne):[vn(ne)]),ce=[ne].concat(Te).reduce(function(ke,We){return ke.concat(at(We)===fn?_o(e,{placement:We,boundary:O,rootBoundary:I,padding:L,flipVariations:te,allowedAutoPlacements:z}):We)},[]),we=e.rects.reference,ae=e.rects.popper,fe=new Map,Pe=!0,Ce=ce[0],xe=0;xe<ce.length;xe++){var Ve=ce[xe],Ge=at(Ve),ot=Ut(Ve)===Tt,Ue=[Fe,Qe].indexOf(Ge)>=0,et=Ue?"width":"height",He=Ht(e,{placement:Ve,boundary:O,rootBoundary:I,altBoundary:le,padding:L}),De=Ue?ot?Ke:je:ot?Qe:Fe;we[et]>ae[et]&&(De=vn(De));var ct=vn(De),dt=[];if(f&&dt.push(He[Ge]<=0),_&&dt.push(He[De]<=0,He[ct]<=0),dt.every(function(ke){return ke})){Ce=Ve,Pe=!1;break}fe.set(Ve,dt)}if(Pe)for(var Wt=function(ke){var We=ce.find(function(tt){var Pt=fe.get(tt);if(Pt)return Pt.slice(0,ke).every(function(Tn){return Tn})});if(We)return Ce=We,"break"},Le=te?3:1;Le>0&&Wt(Le)!=="break";Le--);e.placement!==Ce&&(e.modifiersData[d]._skip=!0,e.placement=Ce,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ji(l,e,o){return o===void 0&&(o={x:0,y:0}),{top:l.top-e.height-o.y,right:l.right-e.width+o.x,bottom:l.bottom-e.height+o.y,left:l.left-e.width-o.x}}function Ui(l){return[Fe,Ke,Qe,je].some(function(e){return l[e]>=0})}const Hi={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(l){var e=l.state,o=l.name,d=e.rects.reference,h=e.rects.popper,f=e.modifiersData.preventOverflow,m=Ht(e,{elementContext:"reference"}),_=Ht(e,{altBoundary:!0}),A=ji(m,d),L=ji(_,h,f),O=Ui(A),I=Ui(L);e.modifiersData[o]={referenceClippingOffsets:A,popperEscapeOffsets:L,isReferenceHidden:O,hasPopperEscaped:I},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":O,"data-popper-escaped":I})}},Wi={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(l){var e=l.state,o=l.options,d=l.name,h=o.offset,f=h===void 0?[0,0]:h,m=Hn.reduce(function(O,I){return O[I]=function(le,U,te){var z=at(le),ne=[je,Fe].indexOf(z)>=0?-1:1,Ae=typeof te=="function"?te(Object.assign({},U,{placement:le})):te,Te=Ae[0],ce=Ae[1];return Te=Te||0,ce=(ce||0)*ne,[je,Ke].indexOf(z)>=0?{x:ce,y:Te}:{x:Te,y:ce}}(I,e.rects,f),O},{}),_=m[e.placement],A=_.x,L=_.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=A,e.modifiersData.popperOffsets.y+=L),e.modifiersData[d]=m}},ni={name:"popperOffsets",enabled:!0,phase:"read",fn:function(l){var e=l.state,o=l.name;e.modifiersData[o]=$i({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},Qi={name:"preventOverflow",enabled:!0,phase:"main",fn:function(l){var e=l.state,o=l.options,d=l.name,h=o.mainAxis,f=h===void 0||h,m=o.altAxis,_=m!==void 0&&m,A=o.boundary,L=o.rootBoundary,O=o.altBoundary,I=o.padding,le=o.tether,U=le===void 0||le,te=o.tetherOffset,z=te===void 0?0:te,ne=Ht(e,{boundary:A,rootBoundary:L,padding:I,altBoundary:O}),Ae=at(e.placement),Te=Ut(e.placement),ce=!Te,we=Yn(Ae),ae=we==="x"?"y":"x",fe=e.modifiersData.popperOffsets,Pe=e.rects.reference,Ce=e.rects.popper,xe=typeof z=="function"?z(Object.assign({},e.rects,{placement:e.placement})):z,Ve=typeof xe=="number"?{mainAxis:xe,altAxis:xe}:Object.assign({mainAxis:0,altAxis:0},xe),Ge=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ot={x:0,y:0};if(fe){if(f){var Ue,et=we==="y"?Fe:je,He=we==="y"?Qe:Ke,De=we==="y"?"height":"width",ct=fe[we],dt=ct+ne[et],Wt=ct-ne[He],Le=U?-Ce[De]/2:0,ke=Te===Tt?Pe[De]:Ce[De],We=Te===Tt?-Ce[De]:-Pe[De],tt=e.elements.arrow,Pt=U&&tt?Gn(tt):{width:0,height:0},Tn=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Is=Tn[et],Vs=Tn[He],En=Xt(0,Pe[De],Pt[De]),dr=ce?Pe[De]/2-Le-En-Is-Ve.mainAxis:ke-En-Is-Ve.mainAxis,ur=ce?-Pe[De]/2+Le+En+Vs+Ve.mainAxis:We+En+Vs+Ve.mainAxis,ci=e.elements.arrow&&zt(e.elements.arrow),hr=ci?we==="y"?ci.clientTop||0:ci.clientLeft||0:0,Ms=(Ue=Ge?.[we])!=null?Ue:0,fr=ct+ur-Ms,Bs=Xt(U?pn(dt,ct+dr-Ms-hr):dt,ct,U?St(Wt,fr):Wt);fe[we]=Bs,ot[we]=Bs-ct}if(_){var Ls,pr=we==="x"?Fe:je,gr=we==="x"?Qe:Ke,Lt=fe[ae],Sn=ae==="y"?"height":"width",Os=Lt+ne[pr],Ns=Lt-ne[gr],di=[Fe,je].indexOf(Ae)!==-1,Ds=(Ls=Ge?.[ae])!=null?Ls:0,Rs=di?Os:Lt-Pe[Sn]-Ce[Sn]-Ds+Ve.altAxis,qs=di?Lt+Pe[Sn]+Ce[Sn]-Ds-Ve.altAxis:Ns,$s=U&&di?function(mr,vr,ui){var Fs=Xt(mr,vr,ui);return Fs>ui?ui:Fs}(Rs,Lt,qs):Xt(U?Rs:Os,Lt,U?qs:Ns);fe[ae]=$s,ot[ae]=$s-Lt}e.modifiersData[d]=ot}},requiresIfExists:["offset"]};function Po(l,e,o){o===void 0&&(o=!1);var d,h,f=Ze(e),m=Ze(e)&&function(I){var le=I.getBoundingClientRect(),U=Ft(le.width)/I.offsetWidth||1,te=Ft(le.height)/I.offsetHeight||1;return U!==1||te!==1}(e),_=_t(e),A=jt(l,m,o),L={scrollLeft:0,scrollTop:0},O={x:0,y:0};return(f||!f&&!o)&&((lt(e)!=="body"||ei(_))&&(L=(d=e)!==Je(d)&&Ze(d)?{scrollLeft:(h=d).scrollLeft,scrollTop:h.scrollTop}:Jn(d)),Ze(e)?((O=jt(e,!0)).x+=e.clientLeft,O.y+=e.clientTop):_&&(O.x=Zn(_))),{x:A.left+L.scrollLeft-O.x,y:A.top+L.scrollTop-O.y,width:A.width,height:A.height}}function xo(l){var e=new Map,o=new Set,d=[];function h(f){o.add(f.name),[].concat(f.requires||[],f.requiresIfExists||[]).forEach(function(m){if(!o.has(m)){var _=e.get(m);_&&h(_)}}),d.push(f)}return l.forEach(function(f){e.set(f.name,f)}),l.forEach(function(f){o.has(f.name)||h(f)}),d}var Ki={placement:"bottom",modifiers:[],strategy:"absolute"};function Gi(){for(var l=arguments.length,e=new Array(l),o=0;o<l;o++)e[o]=arguments[o];return!e.some(function(d){return!(d&&typeof d.getBoundingClientRect=="function")})}function wn(l){l===void 0&&(l={});var e=l,o=e.defaultModifiers,d=o===void 0?[]:o,h=e.defaultOptions,f=h===void 0?Ki:h;return function(m,_,A){A===void 0&&(A=f);var L,O,I={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ki,f),modifiersData:{},elements:{reference:m,popper:_},attributes:{},styles:{}},le=[],U=!1,te={state:I,setOptions:function(ne){var Ae=typeof ne=="function"?ne(I.options):ne;z(),I.options=Object.assign({},f,I.options,Ae),I.scrollParents={reference:Et(m)?Jt(m):m.contextElement?Jt(m.contextElement):[],popper:Jt(_)};var Te,ce,we=function(ae){var fe=xo(ae);return Si.reduce(function(Pe,Ce){return Pe.concat(fe.filter(function(xe){return xe.phase===Ce}))},[])}((Te=[].concat(d,I.options.modifiers),ce=Te.reduce(function(ae,fe){var Pe=ae[fe.name];return ae[fe.name]=Pe?Object.assign({},Pe,fe,{options:Object.assign({},Pe.options,fe.options),data:Object.assign({},Pe.data,fe.data)}):fe,ae},{}),Object.keys(ce).map(function(ae){return ce[ae]})));return I.orderedModifiers=we.filter(function(ae){return ae.enabled}),I.orderedModifiers.forEach(function(ae){var fe=ae.name,Pe=ae.options,Ce=Pe===void 0?{}:Pe,xe=ae.effect;if(typeof xe=="function"){var Ve=xe({state:I,name:fe,instance:te,options:Ce});le.push(Ve||function(){})}}),te.update()},forceUpdate:function(){if(!U){var ne=I.elements,Ae=ne.reference,Te=ne.popper;if(Gi(Ae,Te)){I.rects={reference:Po(Ae,zt(Te),I.options.strategy==="fixed"),popper:Gn(Te)},I.reset=!1,I.placement=I.options.placement,I.orderedModifiers.forEach(function(xe){return I.modifiersData[xe.name]=Object.assign({},xe.data)});for(var ce=0;ce<I.orderedModifiers.length;ce++)if(I.reset!==!0){var we=I.orderedModifiers[ce],ae=we.fn,fe=we.options,Pe=fe===void 0?{}:fe,Ce=we.name;typeof ae=="function"&&(I=ae({state:I,options:Pe,name:Ce,instance:te})||I)}else I.reset=!1,ce=-1}}},update:(L=function(){return new Promise(function(ne){te.forceUpdate(),ne(I)})},function(){return O||(O=new Promise(function(ne){Promise.resolve().then(function(){O=void 0,ne(L())})})),O}),destroy:function(){z(),U=!0}};if(!Gi(m,_))return te;function z(){le.forEach(function(ne){return ne()}),le=[]}return te.setOptions(A).then(function(ne){!U&&A.onFirstUpdate&&A.onFirstUpdate(ne)}),te}}var Ao=wn(),Co=wn({defaultModifiers:[Xn,ni,zn,Qn]}),ii=wn({defaultModifiers:[Xn,ni,zn,Qn,Wi,Fi,Qi,Oi,Hi]});const Yi=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:wn,detectOverflow:Ht,createPopperBase:Ao,createPopper:ii,createPopperLite:Co,top:Fe,bottom:Qe,right:Ke,left:je,auto:fn,basePlacements:Rt,start:Tt,end:qt,clippingParents:wi,viewport:jn,popper:$t,reference:bi,variationPlacements:Un,placements:Hn,beforeRead:yi,read:_i,afterRead:Pi,beforeMain:xi,main:Ai,afterMain:Ci,beforeWrite:ki,write:Ti,afterWrite:Ei,modifierPhases:Si,applyStyles:Qn,arrow:Oi,computeStyles:zn,eventListeners:Xn,flip:Fi,hide:Hi,offset:Wi,popperOffsets:ni,preventOverflow:Qi},Symbol.toStringTag,{value:"Module"})),zi="dropdown",ko="ArrowUp",Xi="ArrowDown",Ji="click.bs.dropdown.data-api",Zi="keydown.bs.dropdown.data-api",Zt="show",It='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',To=`${It}.show`,bn=".dropdown-menu",Eo=K()?"top-end":"top-start",So=K()?"top-start":"top-end",Io=K()?"bottom-end":"bottom-start",Vo=K()?"bottom-start":"bottom-end",Mo=K()?"left-start":"right-start",Bo=K()?"right-start":"left-start",Lo={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Oo={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class st extends he{constructor(e,o){super(e,o),this._popper=null,this._parent=this._element.parentNode,this._menu=Z.next(this._element,bn)[0]||Z.prev(this._element,bn)[0]||Z.findOne(bn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Lo}static get DefaultType(){return Oo}static get NAME(){return zi}toggle(){return this._isShown()?this.hide():this.show()}show(){if(w(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!v.trigger(this._element,"show.bs.dropdown",e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const o of[].concat(...document.body.children))v.on(o,"mouseover",D);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Zt),this._element.classList.add(Zt),v.trigger(this._element,"shown.bs.dropdown",e)}}hide(){if(w(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!v.trigger(this._element,"hide.bs.dropdown",e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))v.off(o,"mouseover",D);this._popper&&this._popper.destroy(),this._menu.classList.remove(Zt),this._element.classList.remove(Zt),this._element.setAttribute("aria-expanded","false"),J.removeDataAttribute(this._menu,"popper"),v.trigger(this._element,"hidden.bs.dropdown",e)}}_getConfig(e){if(typeof(e=super._getConfig(e)).reference=="object"&&!a(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${zi.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(Yi===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:a(this._config.reference)?e=u(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const o=this._getPopperConfig();this._popper=ii(e,this._menu,o)}_isShown(){return this._menu.classList.contains(Zt)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return Mo;if(e.classList.contains("dropstart"))return Bo;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const o=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains("dropup")?o?So:Eo:o?Vo:Io}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(o=>Number.parseInt(o,10)):typeof e=="function"?o=>e(o,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(J.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...typeof this._config.popperConfig=="function"?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:o}){const d=Z.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(h=>b(h));d.length&&S(d,o,e===Xi,!d.includes(o)).focus()}static jQueryInterface(e){return this.each(function(){const o=st.getOrCreateInstance(this,e);if(typeof e=="string"){if(o[e]===void 0)throw new TypeError(`No method named "${e}"`);o[e]()}})}static clearMenus(e){if(e.button===2||e.type==="keyup"&&e.key!=="Tab")return;const o=Z.find(To);for(const d of o){const h=st.getInstance(d);if(!h||h._config.autoClose===!1)continue;const f=e.composedPath(),m=f.includes(h._menu);if(f.includes(h._element)||h._config.autoClose==="inside"&&!m||h._config.autoClose==="outside"&&m||h._menu.contains(e.target)&&(e.type==="keyup"&&e.key==="Tab"||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const _={relatedTarget:h._element};e.type==="click"&&(_.clickEvent=e),h._completeHide(_)}}static dataApiKeydownHandler(e){const o=/input|textarea/i.test(e.target.tagName),d=e.key==="Escape",h=[ko,Xi].includes(e.key);if(!h&&!d||o&&!d)return;e.preventDefault();const f=this.matches(It)?this:Z.prev(this,It)[0]||Z.next(this,It)[0]||Z.findOne(It,e.delegateTarget.parentNode),m=st.getOrCreateInstance(f);if(h)return e.stopPropagation(),m.show(),void m._selectMenuItem(e);m._isShown()&&(e.stopPropagation(),m.hide(),f.focus())}}v.on(document,Zi,It,st.dataApiKeydownHandler),v.on(document,Zi,bn,st.dataApiKeydownHandler),v.on(document,Ji,st.clearMenus),v.on(document,"keyup.bs.dropdown.data-api",st.clearMenus),v.on(document,Ji,It,function(l){l.preventDefault(),st.getOrCreateInstance(this).toggle()}),F(st);const es=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ts=".sticky-top",yn="padding-right",ns="margin-right";class si{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,yn,o=>o+e),this._setElementAttributes(es,yn,o=>o+e),this._setElementAttributes(ts,ns,o=>o-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,yn),this._resetElementAttributes(es,yn),this._resetElementAttributes(ts,ns)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,o,d){const h=this.getWidth();this._applyManipulationCallback(e,f=>{if(f!==this._element&&window.innerWidth>f.clientWidth+h)return;this._saveInitialAttribute(f,o);const m=window.getComputedStyle(f).getPropertyValue(o);f.style.setProperty(o,`${d(Number.parseFloat(m))}px`)})}_saveInitialAttribute(e,o){const d=e.style.getPropertyValue(o);d&&J.setDataAttribute(e,o,d)}_resetElementAttributes(e,o){this._applyManipulationCallback(e,d=>{const h=J.getDataAttribute(d,o);h!==null?(J.removeDataAttribute(d,o),d.style.setProperty(o,h)):d.style.removeProperty(o)})}_applyManipulationCallback(e,o){if(a(e))o(e);else for(const d of Z.find(e,this._element))o(d)}}const is="show",ss="mousedown.bs.backdrop",No={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Do={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class os extends ve{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return No}static get DefaultType(){return Do}static get NAME(){return"backdrop"}show(e){if(!this._config.isVisible)return void P(e);this._append();const o=this._getElement();this._config.isAnimated&&B(o),o.classList.add(is),this._emulateAnimation(()=>{P(e)})}hide(e){this._config.isVisible?(this._getElement().classList.remove(is),this._emulateAnimation(()=>{this.dispose(),P(e)})):P(e)}dispose(){this._isAppended&&(v.off(this._element,ss),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=u(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),v.on(e,ss,()=>{P(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){N(e,this._getElement(),this._config.isAnimated)}}const rs=".bs.focustrap",ls="backward",Ro={autofocus:!0,trapElement:null},qo={autofocus:"boolean",trapElement:"element"};class as extends ve{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Ro}static get DefaultType(){return qo}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),v.off(document,rs),v.on(document,"focusin.bs.focustrap",e=>this._handleFocusin(e)),v.on(document,"keydown.tab.bs.focustrap",e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,v.off(document,rs))}_handleFocusin(e){const{trapElement:o}=this._config;if(e.target===document||e.target===o||o.contains(e.target))return;const d=Z.focusableChildren(o);d.length===0?o.focus():this._lastTabNavDirection===ls?d[d.length-1].focus():d[0].focus()}_handleKeydown(e){e.key==="Tab"&&(this._lastTabNavDirection=e.shiftKey?ls:"forward")}}const cs="hidden.bs.modal",ds="show.bs.modal",us="modal-open",hs="show",oi="modal-static",$o={backdrop:!0,focus:!0,keyboard:!0},Fo={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Vt extends he{constructor(e,o){super(e,o),this._dialog=Z.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new si,this._addEventListeners()}static get Default(){return $o}static get DefaultType(){return Fo}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||v.trigger(this._element,ds,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(us),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){this._isShown&&!this._isTransitioning&&(v.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(hs),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){for(const e of[window,this._dialog])v.off(e,".bs.modal");this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new os({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new as({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const o=Z.findOne(".modal-body",this._dialog);o&&(o.scrollTop=0),B(this._element),this._element.classList.add(hs),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,v.trigger(this._element,"shown.bs.modal",{relatedTarget:e})},this._dialog,this._isAnimated())}_addEventListeners(){v.on(this._element,"keydown.dismiss.bs.modal",e=>{if(e.key==="Escape")return this._config.keyboard?(e.preventDefault(),void this.hide()):void this._triggerBackdropTransition()}),v.on(window,"resize.bs.modal",()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),v.on(this._element,"mousedown.dismiss.bs.modal",e=>{v.one(this._element,"click.dismiss.bs.modal",o=>{this._element===e.target&&this._element===o.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(us),this._resetAdjustments(),this._scrollBar.reset(),v.trigger(this._element,cs)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(v.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,o=this._element.style.overflowY;o==="hidden"||this._element.classList.contains(oi)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(oi),this._queueCallback(()=>{this._element.classList.remove(oi),this._queueCallback(()=>{this._element.style.overflowY=o},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,o=this._scrollBar.getWidth(),d=o>0;if(d&&!e){const h=K()?"paddingLeft":"paddingRight";this._element.style[h]=`${o}px`}if(!d&&e){const h=K()?"paddingRight":"paddingLeft";this._element.style[h]=`${o}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,o){return this.each(function(){const d=Vt.getOrCreateInstance(this,e);if(typeof e=="string"){if(d[e]===void 0)throw new TypeError(`No method named "${e}"`);d[e](o)}})}}v.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(l){const e=i(this);["A","AREA"].includes(this.tagName)&&l.preventDefault(),v.one(e,ds,d=>{d.defaultPrevented||v.one(e,cs,()=>{b(this)&&this.focus()})});const o=Z.findOne(".modal.show");o&&Vt.getInstance(o).hide(),Vt.getOrCreateInstance(e).toggle(this)}),Me(Vt),F(Vt);const fs="show",ps="showing",gs="hiding",ms=".offcanvas.show",vs="hidePrevented.bs.offcanvas",ws="hidden.bs.offcanvas",jo={backdrop:!0,keyboard:!0,scroll:!1},Uo={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class wt extends he{constructor(e,o){super(e,o),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return jo}static get DefaultType(){return Uo}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||v.trigger(this._element,"show.bs.offcanvas",{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new si().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(ps),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(fs),this._element.classList.remove(ps),v.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:e})},this._element,!0))}hide(){this._isShown&&(v.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(gs),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(fs,gs),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new si().reset(),v.trigger(this._element,ws)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new os({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{this._config.backdrop!=="static"?this.hide():v.trigger(this._element,vs)}:null})}_initializeFocusTrap(){return new as({trapElement:this._element})}_addEventListeners(){v.on(this._element,"keydown.dismiss.bs.offcanvas",e=>{e.key==="Escape"&&(this._config.keyboard?this.hide():v.trigger(this._element,vs))})}static jQueryInterface(e){return this.each(function(){const o=wt.getOrCreateInstance(this,e);if(typeof e=="string"){if(o[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);o[e](this)}})}}v.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(l){const e=i(this);if(["A","AREA"].includes(this.tagName)&&l.preventDefault(),w(this))return;v.one(e,ws,()=>{b(this)&&this.focus()});const o=Z.findOne(ms);o&&o!==e&&wt.getInstance(o).hide(),wt.getOrCreateInstance(e).toggle(this)}),v.on(window,"load.bs.offcanvas.data-api",()=>{for(const l of Z.find(ms))wt.getOrCreateInstance(l).show()}),v.on(window,"resize.bs.offcanvas",()=>{for(const l of Z.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(l).position!=="fixed"&&wt.getOrCreateInstance(l).hide()}),Me(wt),F(wt);const Ho=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Wo=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Qo=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Ko=(l,e)=>{const o=l.nodeName.toLowerCase();return e.includes(o)?!Ho.has(o)||Boolean(Wo.test(l.nodeValue)||Qo.test(l.nodeValue)):e.filter(d=>d instanceof RegExp).some(d=>d.test(o))},bs={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Go={allowList:bs,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Yo={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},zo={entry:"(string|element|function|null)",selector:"(string|element)"};class Xo extends ve{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Go}static get DefaultType(){return Yo}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[h,f]of Object.entries(this._config.content))this._setContent(e,f,h);const o=e.children[0],d=this._resolvePossibleFunction(this._config.extraClass);return d&&o.classList.add(...d.split(" ")),o}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[o,d]of Object.entries(e))super._typeCheckConfig({selector:o,entry:d},zo)}_setContent(e,o,d){const h=Z.findOne(d,e);h&&((o=this._resolvePossibleFunction(o))?a(o)?this._putElementInTemplate(u(o),h):this._config.html?h.innerHTML=this._maybeSanitize(o):h.textContent=o:h.remove())}_maybeSanitize(e){return this._config.sanitize?function(o,d,h){if(!o.length)return o;if(h&&typeof h=="function")return h(o);const f=new window.DOMParser().parseFromString(o,"text/html"),m=[].concat(...f.body.querySelectorAll("*"));for(const _ of m){const A=_.nodeName.toLowerCase();if(!Object.keys(d).includes(A)){_.remove();continue}const L=[].concat(..._.attributes),O=[].concat(d["*"]||[],d[A]||[]);for(const I of L)Ko(I,O)||_.removeAttribute(I.nodeName)}return f.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return typeof e=="function"?e(this):e}_putElementInTemplate(e,o){if(this._config.html)return o.innerHTML="",void o.append(e);o.textContent=e.textContent}}const Jo=new Set(["sanitize","allowList","sanitizeFn"]),ri="fade",_n="show",ys=".modal",_s="hide.bs.modal",Pn="hover",Ps="focus",Zo={AUTO:"auto",TOP:"top",RIGHT:K()?"left":"right",BOTTOM:"bottom",LEFT:K()?"right":"left"},er={allowList:bs,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},tr={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Mt extends he{constructor(e,o){if(Yi===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,o),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return er}static get DefaultType(){return tr}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),v.off(this._element.closest(ys),_s,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=v.trigger(this._element,this.constructor.eventName("show")),o=($(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!o)return;this._disposePopper();const d=this._getTipElement();this._element.setAttribute("aria-describedby",d.getAttribute("id"));const{container:h}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(h.append(d),v.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(d),d.classList.add(_n),"ontouchstart"in document.documentElement)for(const f of[].concat(...document.body.children))v.on(f,"mouseover",D);this._queueCallback(()=>{v.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!v.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(_n),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))v.off(e,"mouseover",D);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),v.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const o=this._getTemplateFactory(e).toHtml();if(!o)return null;o.classList.remove(ri,_n),o.classList.add(`bs-${this.constructor.NAME}-auto`);const d=(h=>{do h+=Math.floor(1e6*Math.random());while(document.getElementById(h));return h})(this.constructor.NAME).toString();return o.setAttribute("id",d),this._isAnimated()&&o.classList.add(ri),o}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Xo({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ri)}_isShown(){return this.tip&&this.tip.classList.contains(_n)}_createPopper(e){const o=typeof this._config.placement=="function"?this._config.placement.call(this,e,this._element):this._config.placement,d=Zo[o.toUpperCase()];return ii(this._element,e,this._getPopperConfig(d))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(o=>Number.parseInt(o,10)):typeof e=="function"?o=>e(o,this._element):e}_resolvePossibleFunction(e){return typeof e=="function"?e.call(this._element):e}_getPopperConfig(e){const o={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:d=>{this._getTipElement().setAttribute("data-popper-placement",d.state.placement)}}]};return{...o,...typeof this._config.popperConfig=="function"?this._config.popperConfig(o):this._config.popperConfig}}_setListeners(){const e=this._config.trigger.split(" ");for(const o of e)if(o==="click")v.on(this._element,this.constructor.eventName("click"),this._config.selector,d=>{this._initializeOnDelegatedTarget(d).toggle()});else if(o!=="manual"){const d=o===Pn?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),h=o===Pn?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");v.on(this._element,d,this._config.selector,f=>{const m=this._initializeOnDelegatedTarget(f);m._activeTrigger[f.type==="focusin"?Ps:Pn]=!0,m._enter()}),v.on(this._element,h,this._config.selector,f=>{const m=this._initializeOnDelegatedTarget(f);m._activeTrigger[f.type==="focusout"?Ps:Pn]=m._element.contains(f.relatedTarget),m._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},v.on(this._element.closest(ys),_s,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,o){clearTimeout(this._timeout),this._timeout=setTimeout(e,o)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const o=J.getDataAttributes(this._element);for(const d of Object.keys(o))Jo.has(d)&&delete o[d];return e={...o,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:u(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const o in this._config)this.constructor.Default[o]!==this._config[o]&&(e[o]=this._config[o]);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const o=Mt.getOrCreateInstance(this,e);if(typeof e=="string"){if(o[e]===void 0)throw new TypeError(`No method named "${e}"`);o[e]()}})}}F(Mt);const nr={...Mt.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},ir={...Mt.DefaultType,content:"(null|string|element|function)"};class xn extends Mt{static get Default(){return nr}static get DefaultType(){return ir}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const o=xn.getOrCreateInstance(this,e);if(typeof e=="string"){if(o[e]===void 0)throw new TypeError(`No method named "${e}"`);o[e]()}})}}F(xn);const xs="click.bs.scrollspy",en="active",As="[href]",sr={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},or={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class tn extends he{constructor(e,o){super(e,o),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return sr}static get DefaultType(){return or}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=u(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(o=>Number.parseFloat(o))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(v.off(this._config.target,xs),v.on(this._config.target,xs,As,e=>{const o=this._observableSections.get(e.target.hash);if(o){e.preventDefault();const d=this._rootElement||window,h=o.offsetTop-this._element.offsetTop;if(d.scrollTo)return void d.scrollTo({top:h,behavior:"smooth"});d.scrollTop=h}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(o=>this._observerCallback(o),e)}_observerCallback(e){const o=m=>this._targetLinks.get(`#${m.target.id}`),d=m=>{this._previousScrollData.visibleEntryTop=m.target.offsetTop,this._process(o(m))},h=(this._rootElement||document.documentElement).scrollTop,f=h>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=h;for(const m of e){if(!m.isIntersecting){this._activeTarget=null,this._clearActiveClass(o(m));continue}const _=m.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(f&&_){if(d(m),!h)return}else f||_||d(m)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=Z.find(As,this._config.target);for(const o of e){if(!o.hash||w(o))continue;const d=Z.findOne(o.hash,this._element);b(d)&&(this._targetLinks.set(o.hash,o),this._observableSections.set(o.hash,d))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(en),this._activateParents(e),v.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))Z.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(en);else for(const o of Z.parents(e,".nav, .list-group"))for(const d of Z.prev(o,".nav-link, .nav-item > .nav-link, .list-group-item"))d.classList.add(en)}_clearActiveClass(e){e.classList.remove(en);const o=Z.find("[href].active",e);for(const d of o)d.classList.remove(en)}static jQueryInterface(e){return this.each(function(){const o=tn.getOrCreateInstance(this,e);if(typeof e=="string"){if(o[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);o[e]()}})}}v.on(window,"load.bs.scrollspy.data-api",()=>{for(const l of Z.find('[data-bs-spy="scroll"]'))tn.getOrCreateInstance(l)}),F(tn);const rr="ArrowLeft",Cs="ArrowRight",lr="ArrowUp",ks="ArrowDown",An="active",Ts="fade",li="show",Es='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ai=`.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${Es}`;class Bt extends he{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),v.on(this._element,"keydown.bs.tab",o=>this._keydown(o)))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const o=this._getActiveElem(),d=o?v.trigger(o,"hide.bs.tab",{relatedTarget:e}):null;v.trigger(e,"show.bs.tab",{relatedTarget:o}).defaultPrevented||d&&d.defaultPrevented||(this._deactivate(o,e),this._activate(e,o))}_activate(e,o){e&&(e.classList.add(An),this._activate(i(e)),this._queueCallback(()=>{e.getAttribute("role")==="tab"?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),v.trigger(e,"shown.bs.tab",{relatedTarget:o})):e.classList.add(li)},e,e.classList.contains(Ts)))}_deactivate(e,o){e&&(e.classList.remove(An),e.blur(),this._deactivate(i(e)),this._queueCallback(()=>{e.getAttribute("role")==="tab"?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),v.trigger(e,"hidden.bs.tab",{relatedTarget:o})):e.classList.remove(li)},e,e.classList.contains(Ts)))}_keydown(e){if(![rr,Cs,lr,ks].includes(e.key))return;e.stopPropagation(),e.preventDefault();const o=[Cs,ks].includes(e.key),d=S(this._getChildren().filter(h=>!w(h)),e.target,o,!0);d&&(d.focus({preventScroll:!0}),Bt.getOrCreateInstance(d).show())}_getChildren(){return Z.find(ai,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,o){this._setAttributeIfNotExists(e,"role","tablist");for(const d of o)this._setInitialAttributesOnChild(d)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const o=this._elemIsActive(e),d=this._getOuterElement(e);e.setAttribute("aria-selected",o),d!==e&&this._setAttributeIfNotExists(d,"role","presentation"),o||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const o=i(e);o&&(this._setAttributeIfNotExists(o,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(o,"aria-labelledby",`#${e.id}`))}_toggleDropDown(e,o){const d=this._getOuterElement(e);if(!d.classList.contains("dropdown"))return;const h=(f,m)=>{const _=Z.findOne(f,d);_&&_.classList.toggle(m,o)};h(".dropdown-toggle",An),h(".dropdown-menu",li),d.setAttribute("aria-expanded",o)}_setAttributeIfNotExists(e,o,d){e.hasAttribute(o)||e.setAttribute(o,d)}_elemIsActive(e){return e.classList.contains(An)}_getInnerElement(e){return e.matches(ai)?e:Z.findOne(ai,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each(function(){const o=Bt.getOrCreateInstance(this);if(typeof e=="string"){if(o[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);o[e]()}})}}v.on(document,"click.bs.tab",Es,function(l){["A","AREA"].includes(this.tagName)&&l.preventDefault(),w(this)||Bt.getOrCreateInstance(this).show()}),v.on(window,"load.bs.tab",()=>{for(const l of Z.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))Bt.getOrCreateInstance(l)}),F(Bt);const Ss="hide",Cn="show",kn="showing",ar={animation:"boolean",autohide:"boolean",delay:"number"},cr={animation:!0,autohide:!0,delay:5e3};class nn extends he{constructor(e,o){super(e,o),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return cr}static get DefaultType(){return ar}static get NAME(){return"toast"}show(){v.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Ss),B(this._element),this._element.classList.add(Cn,kn),this._queueCallback(()=>{this._element.classList.remove(kn),v.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(v.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(kn),this._queueCallback(()=>{this._element.classList.add(Ss),this._element.classList.remove(kn,Cn),v.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Cn),super.dispose()}isShown(){return this._element.classList.contains(Cn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,o){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=o;break;case"focusin":case"focusout":this._hasKeyboardInteraction=o}if(o)return void this._clearTimeout();const d=e.relatedTarget;this._element===d||this._element.contains(d)||this._maybeScheduleHide()}_setListeners(){v.on(this._element,"mouseover.bs.toast",e=>this._onInteraction(e,!0)),v.on(this._element,"mouseout.bs.toast",e=>this._onInteraction(e,!1)),v.on(this._element,"focusin.bs.toast",e=>this._onInteraction(e,!0)),v.on(this._element,"focusout.bs.toast",e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const o=nn.getOrCreateInstance(this,e);if(typeof e=="string"){if(o[e]===void 0)throw new TypeError(`No method named "${e}"`);o[e](this)}})}}return Me(nn),F(nn),{Alert:it,Button:rt,Carousel:Xe,Collapse:Dt,Dropdown:st,Modal:Vt,Offcanvas:wt,Popover:xn,ScrollSpy:tn,Tab:Bt,Toast:nn,Tooltip:Mt}})})(Dr);const Kt="b",Gt="k",hi="n",Qs="p",Yt="q";class C{x;y;state=!0;constructor(n,t){this.x=n,this.y=t}}class y{start;end;boardStartIndex;boardEndIndex;constructor(n,t,s,r){if(s&&(this.start=s),r&&(this.end=r),s&&r){this.boardStartIndex=this.convertToBoardIndex(s),this.boardEndIndex=this.convertToBoardIndex(r);return}n&&t?(this.boardStartIndex=n.x+n.y*8,this.boardEndIndex=t.x+t.y*8,this.start=this.convertToBoardPosition(this.boardStartIndex),this.end=this.convertToBoardPosition(this.boardEndIndex)):(this.start="a8",this.end="a8",this.boardStartIndex=0,this.boardEndIndex=0)}toString(){return this.start+"-"+this.end}convertToBoardIndex(n){if(n.length!=2)throw new Error("Invalid position");let t=n[0],s=n[1],r=t.charCodeAt(0)-97,i=8-parseInt(s);return r+i*8}convertToBoardPosition(n){if(n<0||n>63)throw new Error("Invalid index: "+n);let t=n%8,s=Math.floor(n/8),r=String.fromCharCode(t+97),i=8-s;return r+i}testConverToBoardIndex(){let n=[];n.push(this.convertToBoardIndex("a8")==0),n.push(this.convertToBoardIndex("b8")==1),n.push(this.convertToBoardIndex("c8")==2),n.push(this.convertToBoardIndex("d8")==3),n.push(this.convertToBoardIndex("e8")==4),n.push(this.convertToBoardIndex("f8")==5),n.push(this.convertToBoardIndex("g8")==6),n.push(this.convertToBoardIndex("h8")==7),n.push(this.convertToBoardIndex("a7")==8),n.push(this.convertToBoardIndex("b7")==9),n.push(this.convertToBoardIndex("c7")==10),n.push(this.convertToBoardIndex("d7")==11),n.push(this.convertToBoardIndex("e7")==12),n.push(this.convertToBoardIndex("f7")==13),n.push(this.convertToBoardIndex("g7")==14),n.push(this.convertToBoardIndex("h7")==15),n.push(this.convertToBoardIndex("a6")==16);for(let t=0;t<n.length;t++)if(!n[t])throw new Error("Convert to board Index failed failed")}runAllTests(){this.testConverToBoardIndex(),console.log("All tests ran for move class")}}class xt{position;pos;boardIndex;constructor(n,t){n?(this.position=n,this.boardIndex=this.convertToBoardIndex(n),this.pos=new C(this.convertToBoardIndex(n)%8,Math.floor(this.convertToBoardIndex(n)/8))):t?(this.boardIndex=t,this.position=this.convertToBoardPosition(t),this.pos=new C(t%8,Math.floor(t/8))):(this.position="a8",this.boardIndex=0,this.pos=new C(0,0))}moveTo(n){this.position=n,this.boardIndex=this.convertToBoardIndex(n),this.pos=new C(this.boardIndex%8,Math.floor(this.boardIndex/8))}getPosition(){return this.position}getIndex(){return this.boardIndex}convertToBoardIndex(n){if(n.length!=2)throw new Error("Invalid position");let t=n[0],s=n[1],r=t.charCodeAt(0)-97,i=8-parseInt(s);return r+i*8}testConvertToBoardIndex(){let n=[];n.push(this.convertToBoardIndex("a8")==0),n.push(this.convertToBoardIndex("b8")==1),n.push(this.convertToBoardIndex("c8")==2),n.push(this.convertToBoardIndex("d8")==3),n.push(this.convertToBoardIndex("e8")==4),n.push(this.convertToBoardIndex("f8")==5),n.push(this.convertToBoardIndex("g8")==6),n.push(this.convertToBoardIndex("h8")==7),n.push(this.convertToBoardIndex("a7")==8),n.push(this.convertToBoardIndex("b7")==9),n.push(this.convertToBoardIndex("c7")==10),n.push(this.convertToBoardIndex("d7")==11),n.push(this.convertToBoardIndex("e7")==12),n.push(this.convertToBoardIndex("f7")==13),n.push(this.convertToBoardIndex("g7")==14),n.push(this.convertToBoardIndex("h7")==15),n.push(this.convertToBoardIndex("a6")==16);for(let t=0;t<n.length;t++)if(!n[t])throw new Error("Convert to board Index failed failed")}convertToBoardPosition(n){let t=n%8,s=Math.floor(n/8),r=String.fromCharCode(t+97),i=8-s;return r+i}testConvertToPosition(){let n=[];n.push(this.convertToBoardPosition(0)=="a8"),n.push(this.convertToBoardPosition(0)=="a8"),n.push(this.convertToBoardPosition(0)=="a8"),n.push(this.convertToBoardPosition(1)=="b8"),n.push(this.convertToBoardPosition(2)=="c8"),n.push(this.convertToBoardPosition(3)=="d8"),n.push(this.convertToBoardPosition(4)=="e8"),n.push(this.convertToBoardPosition(5)=="f8"),n.push(this.convertToBoardPosition(6)=="g8"),n.push(this.convertToBoardPosition(7)=="h8"),n.push(this.convertToBoardPosition(8)=="a7"),n.push(this.convertToBoardPosition(9)=="b7"),n.push(this.convertToBoardPosition(10)=="c7"),n.push(this.convertToBoardPosition(11)=="d7"),n.push(this.convertToBoardPosition(12)=="e7"),n.push(this.convertToBoardPosition(13)=="f7"),n.push(this.convertToBoardPosition(14)=="g7"),n.push(this.convertToBoardPosition(15)=="h7"),n.push(this.convertToBoardPosition(16)=="a6");for(let t=0;t<n.length;t++)if(!n[t])throw new Error("Convert to position failed")}runAllTests(){this.testConvertToBoardIndex(),this.testConvertToPosition(),console.log("All tests ran for position class")}}class Ee{position;color;type;constructor(n,t,s){this.position=new xt(n),this.color=t,this.type=s}move(n){this.position.moveTo(n)}getPosition(){return this.position.getPosition()}getIndex(){return this.position.getIndex()}getPos(){return this.position}convertToBoardIndex(n){if(n.length!=2)throw new Error("Invalid position");let t=n[0],s=n[1],r=t.charCodeAt(0)-97,i=8-parseInt(s);return r+i*8}testConverToBoardIndex(){let n=[];n.push(this.convertToBoardIndex("a8")==0),n.push(this.convertToBoardIndex("b8")==1),n.push(this.convertToBoardIndex("c8")==2),n.push(this.convertToBoardIndex("d8")==3),n.push(this.convertToBoardIndex("e8")==4),n.push(this.convertToBoardIndex("f8")==5),n.push(this.convertToBoardIndex("g8")==6),n.push(this.convertToBoardIndex("h8")==7),n.push(this.convertToBoardIndex("a7")==8),n.push(this.convertToBoardIndex("b7")==9),n.push(this.convertToBoardIndex("c7")==10),n.push(this.convertToBoardIndex("d7")==11),n.push(this.convertToBoardIndex("e7")==12),n.push(this.convertToBoardIndex("f7")==13),n.push(this.convertToBoardIndex("g7")==14),n.push(this.convertToBoardIndex("h7")==15),n.push(this.convertToBoardIndex("a6")==16);for(let t=0;t<n.length;t++)if(!n[t])throw new Error("Convert to board Index failed failed")}runAllTests(){this.testConverToBoardIndex(),console.log("All tests ran for piece class")}}class pe{Pieces;currentTurnColor="white";fen="";board=[];halfMoveClock=0;fullMoveNumber=1;castlingRights="KQkq";enPassantTargetSquare="-";legalMoves=[];inCheck=!1;checkMate=!1;capturedPieces=[];constructor(n,t){n||(n=["r","n","b","q","k","b","n","r","p","p","p","p","p","p","p","p"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","P","P","P","P","P","P","P","P","R","N","B","Q","K","B","N","R"]);const s=/^([rnbqkpRNBQKP1-8]+\/){7}([rnbqkpRNBQKP1-8]+)\s[bw]\s(-|K?Q?k?q?)\s(-|[a-h][36])\s(0|[1-9][0-9]*)\s([1-9][0-9]*)/;if(t!=null&&t.match(s)){let r=t.split(" ");n=this.fenToBoard(t),this.castlingRights=r[2],this.enPassantTargetSquare=r[3],r[1]==="w"?this.currentTurnColor="white":this.currentTurnColor="black",this.halfMoveClock=parseInt(r[4]),this.fullMoveNumber=parseInt(r[5])}else if(t!=null&&!t.match(s))throw new Error("Invalid fen: "+t);this.Pieces=[];for(let r=0;r<n.length;r++){let i=n[r];if(i!=" "){let p=i==i.toUpperCase()?"white":"black",a=i.toLowerCase(),u=this.convertToPosition(r);this.Pieces.push(new Ee(u,p,a))}}this.board=n,t!=null?this.fen=t:this.fen=this.boardToFen()}convertToPosition(n){let t=String.fromCharCode(97+n%8),s=8-Math.floor(n/8);return t+s}displayBoard(){let n="";for(let t=0;t<8;t++){for(let s=0;s<8;s++)n+=this.Piece(new C(s,t))===" "?" - ":" "+(this.Piece(new C(s,t)).color==="black"?this.Piece(new C(s,t)).type:this.Piece(new C(s,t)).type.toUpperCase())+" ";n!=null&&console.log(`${8-t}| `+n),n=""}console.log("    _  _  _  _  _  _  _  _"),console.log("    A  B  C  D  E  F  G  H")}fenToBoard(n){let t=[],i=n.split(" ")[0].split("/");for(let p=0;p<i.length;p++){let u=i[p].split("");for(let b=0;b<u.length;b++){let w=u[b];if(w.match(/[1-8]/))for(let $=0;$<parseInt(w);$++)t.push(" ");else t.push(w)}}return t.length===63&&t.push(" "),t}boardToFen(){let n="",t=0;for(let s=0;s<64;s++){let r=this.getPieceAtBoardIndex(s);r===""?(t++,(t===8||s%8===7)&&(n+=t,s!=63&&(n+="/"),t=0)):(t!==0&&(n+=t,t=0),n+=r.color==="white"?r.type.toUpperCase():r.type.toLowerCase(),r.getIndex()%8===7&&s!==63&&(n+="/",t=0))}return n+=" "+this.currentTurnColor[0]+" ",n+=this.castlingRights+" ",n+=this.enPassantTargetSquare+" ",n+=this.halfMoveClock+" ",n+=this.fullMoveNumber,n}getPieceAtBoardIndex(n){for(let t=0;t<this.Pieces.length;t++)if(this.Pieces[t].getIndex()===n)return this.Pieces[t];return""}movePiece(n,t){let s=new y(void 0,void 0,n,t);s.boardEndIndex;let r=this.getPieceIndex(n),i=this.Pieces[r];if(i?.type===void 0)throw this.displayBoard(),console.log(this.Pieces),console.log(this.fen),console.log(n),new Error("Invalid move");if(i.type!="p"?this.halfMoveClock++:this.halfMoveClock=0,this.enPassantTargetSquare!="-"&&i.type==="p"){let p=new xt(n),a=new xt(t);if(i.color==="white"&&p.pos.y===3&&a.position===t){let u=a.boardIndex+8,b=this.getPieceAtBoardIndex(u);this.board[u]=" ",this.Pieces.splice(this.Pieces.indexOf(b),1)}if(i.color==="black"&&p.pos.y===4&&a.position===t){let u=a.boardIndex-8,b=this.getPieceAtBoardIndex(u);this.board[u]=" ",this.Pieces.splice(this.Pieces.indexOf(b),1)}}if(i.type=="p"&&Math.abs(i.getIndex()-s.boardEndIndex)==16){let p="-";i.color==="white"?p=this.convertToPosition(s.boardEndIndex+8):p=this.convertToPosition(s.boardEndIndex-8),this.enPassantTargetSquare=p}else this.enPassantTargetSquare="-";if(i.type==="k"){if(i.color==="white"){let p=new xt(n),a=new xt(t);if(p.pos.x-a.pos.x===2&&this.castlingRights.includes("Q")){this.convertToPosition(p.boardIndex-4);let u=this.convertToPosition(p.boardIndex-1),b=this.getPieceAtBoardIndex(p.boardIndex-4);this.castlingRights=this.castlingRights.replace("KQ",""),b.color!=null&&b.move(u)}if(p.pos.x-a.pos.x===-2&&this.castlingRights.includes("K")){this.convertToPosition(p.boardIndex+3);let u=this.convertToPosition(p.boardIndex+1),b=this.getPieceAtBoardIndex(p.boardIndex+3);console.log(u),console.log(b),this.castlingRights=this.castlingRights.replace("KQ",""),b.color!=null&&b.move(u)}this.castlingRights=this.castlingRights.replace("KQ","")}else{let p=new xt(n),a=new xt(t);if(p.pos.x-a.pos.x===2&&this.castlingRights.includes("q")){this.convertToPosition(p.boardIndex-4);let u=this.convertToPosition(p.boardIndex-1),b=this.getPieceAtBoardIndex(p.boardIndex-4);this.castlingRights=this.castlingRights.replace("kq",""),b.color!=null&&b.move(u)}if(p.pos.x-a.pos.x===-2&&this.castlingRights.includes("k")){this.convertToPosition(p.boardIndex+3);let u=this.convertToPosition(p.boardIndex+1),b=this.getPieceAtBoardIndex(p.boardIndex+3);this.castlingRights=this.castlingRights.replace("kq",""),b.color!=null&&b.move(u)}this.castlingRights=this.castlingRights.replace("kq","")}this.castlingRights===""&&(this.castlingRights="-")}if(this.currentTurnColor==="black"&&this.fullMoveNumber++,i.type==="r"&&(i.color==="white"?i.getIndex()===0?this.castlingRights=this.castlingRights.replace("Q",""):i.getIndex()===7&&(this.castlingRights=this.castlingRights.replace("K","")):i.getIndex()===56?this.castlingRights=this.castlingRights.replace("q",""):i.getIndex()===63&&(this.castlingRights=this.castlingRights.replace("k",""))),this.getPieceIndex(t)!==-1){let p=this.getPieceIndex(t),a=this.Pieces[p];a.type==="r"&&(a.color==="white"?a.getIndex()===56?this.castlingRights=this.castlingRights.replace("Q",""):a.getIndex()===63&&(this.castlingRights=this.castlingRights.replace("K","")):a.getIndex()===0?this.castlingRights=this.castlingRights.replace("q",""):a.getIndex()===7&&(this.castlingRights=this.castlingRights.replace("k",""))),this.capturedPieces.push(a),this.Pieces.splice(p,1),this.halfMoveClock=0}i.move(t),this.currentTurnColor=this.currentTurnColor==="white"?"black":"white",this.fen=this.boardToFen(),this.board=this.fenToBoard(this.fen),this.inCheck=this.isInCheck(this)}getPieceIndex(n){let t=-1;for(let s=0;s<this.Pieces.length;s++)if(this.Pieces[s].getPosition()==n){t=s;break}return t}getPieceAtPosition(n){let t="";for(let s=0;s<this.Pieces.length;s++){let r=this.Pieces[s];if(r.getPosition()==n)return r}return t}testConvertToPosition(){let n=[];n.push(this.convertToPosition(0)=="a8"),n.push(this.convertToPosition(1)=="b8"),n.push(this.convertToPosition(2)=="c8"),n.push(this.convertToPosition(3)=="d8"),n.push(this.convertToPosition(4)=="e8"),n.push(this.convertToPosition(5)=="f8"),n.push(this.convertToPosition(6)=="g8"),n.push(this.convertToPosition(7)=="h8"),n.push(this.convertToPosition(8)=="a7"),n.push(this.convertToPosition(9)=="b7"),n.push(this.convertToPosition(10)=="c7"),n.push(this.convertToPosition(11)=="d7"),n.push(this.convertToPosition(12)=="e7"),n.push(this.convertToPosition(13)=="f7"),n.push(this.convertToPosition(14)=="g7"),n.push(this.convertToPosition(15)=="h7"),n.push(this.convertToPosition(16)=="a6");for(let t=0;t<n.length;t++)if(!n[t])throw new Error("Convert to position failed")}testFenToBoard(){let n=[];n.push(this.fenToBoard("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1")),n.push(this.fenToBoard("rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1"));for(let s=0;s<n.length;s++)if(!n[s])throw new Error("Fen to board failed");t(n[0],["r","n","b","q","k","b","n","r","p","p","p","p","p","p","p","p"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","P","P","P","P","P","P","P","P","R","N","B","Q","K","B","N","R"]),t(n[1],["r","n","b","q","k","b","n","r","p","p","p","p","p","p","p","p"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","P"," "," "," "," "," "," "," "," "," "," "," ","P","P","P","P"," ","P","P","P","R","N","B","Q","K","B","N","R"]);function t(s,r){if(s===r)return!0;if(s==null||r==null)throw console.log(s,r),new Error("Fen to board failed");if(s.length!==r.length)throw console.log(s,r),new Error("Fen to board failed");for(var i=0;i<s.length;++i)if(s[i]!==r[i])throw console.log(s,r),new Error("Fen to board failed");return!0}}testBoardToFen(){let n=[],t=new pe;n.push(t.boardToFen()=="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"),t.movePiece("e2","e4"),n.push(t.boardToFen()=="rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1");for(let s=0;s<n.length;s++)if(!n[s])throw new Error("Board to fen failed, test "+(s+1)+" failed"+t.boardToFen())}testConstructors(){let n=new pe,t=[];t.push(n.Pieces[0]?.getPosition()=="a8"),t.push(n.Pieces[0].color=="black"),t.push(n.Pieces[0].type=="r"),t.push(n.Pieces[1]?.getPosition()=="b8"),t.push(n.Pieces[1].color=="black"),t.push(n.Pieces[1].type=="n"),t.push(n.Pieces[2]?.getPosition()=="c8"),t.push(n.Pieces[2].color=="black"),t.push(n.Pieces[2].type=="b"),t.push(n.Pieces[3]?.getPosition()=="d8");for(let i=0;i<t.length;i++)if(!t[i])throw new Error("Board constructor 1 failed "+i);let s=new pe([],"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1");t=[],t.push(s.Pieces[0]?.getPosition()=="a8"),t.push(s.Pieces[0].color=="black"),t.push(s.Pieces[0].type=="r"),t.push(s.Pieces[1]?.getPosition()=="b8"),t.push(s.Pieces[1].color=="black"),t.push(s.Pieces[1].type=="n"),t.push(s.Pieces[2]?.getPosition()=="c8"),t.push(s.Pieces[2].color=="black"),t.push(s.Pieces[2].type=="b"),t.push(s.Pieces[3]?.getPosition()=="d8");for(let i=0;i<t.length;i++)if(!t[i])throw new Error("Board constructor 2 failed"+i);let r=new pe([],"rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1");t=[],t.push(r.Pieces[0]?.getPosition()=="a8"),t.push(r.Pieces[0].color=="black"),t.push(r.Pieces[0].type=="r"),t.push(r.currentTurnColor=="black");for(let i=0;i<t.length;i++)if(!t[i])throw new Error("Board constructor 3 failed"+i)}findPseudoLegalMoves(n){let t=[];for(let s=0;s<n.Pieces.length;s++){let r=n.Pieces[s];if(n.currentTurnColor===r.color)switch(r.type){case"p":t.push(...this.findPawnMoves(r,n));break;case"r":t.push(...this.findRookMoves(r,n));break;case"n":t.push(...this.findKnightMoves(r,n));break;case"b":t.push(...this.findBishopMoves(r,n));break;case"q":t.push(...this.findQueenMoves(r,n));break;case"k":t.push(...this.findKingMoves(r,n));break}}return t}testFindPseudoLegalMoves(){let n=new pe,t=this.findPseudoLegalMoves(n),s=[];s.push(t.length==20);for(let r=0;r<s.length;r++)if(!s[r])throw new Error("Find legal moves failed, test "+(r+1)+" failed");n=new pe([],"rnbqkbnr/1ppp1ppp/8/p3pP2/4P3/8/PPPP2PP/RNBQKBNR w KQkq e6 0 4"),t=this.findPseudoLegalMoves(n),s=[],s.push(t.length==30);for(let r=0;r<s.length;r++)if(!s[r])throw new Error("Find legal moves failed, test "+(r+1)+" failed")}findLegalMoves(n){let t=n.findPseudoLegalMoves(n),s=[];for(let r=0;r<t.length;r++){let i=new pe([],n.boardToFen());i.movePiece(t[r].start,t[r].end),i.currentTurnColor=i.currentTurnColor==="white"?"black":"white",this.isInCheck(i)||s.push(t[r])}return n.legalMoves=s,s}testFindLegalMoves(){let n=new pe,t=this.findLegalMoves(n),s=[];s.push(t.length==20),n=new pe([],"rnb1k1nr/pppp1ppp/8/2b1p3/P3q3/8/1PPP1PPP/RNBQKB1R w KQkq - 0 6"),t=this.findLegalMoves(n),s.push(t.length==2),n=new pe([],"rnbqkbnr/1ppp1ppp/8/p3Q3/4P3/8/PPPP1PPP/RNB1KBNR b KQkq - 0 3"),t=this.findLegalMoves(n),s.push(t.length==3),n=new pe([],"rnbqkbnr/p1p1pppp/1p6/3pP3/8/8/PPPP1PPP/RNBQKBNR w KQkq d6 0 3"),t=this.findLegalMoves(n),s.push(t.length==31);for(let r=0;r<s.length;r++)if(!s[r])throw new Error("Find legal moves failed, test "+(r+1)+" failed")}isInCheck(n){let t=new pe([],n.boardToFen()),s=!0;for(let p=0;p<t.board.length;p++)t.board[p]!="-"&&(s=!1);s&&(console.log("empty board"),console.log(n.boardToFen())),t.currentTurnColor=t.currentTurnColor=="white"?"black":"white";let r=t.findPseudoLegalMoves(t),i;for(let p=0;p<n.Pieces.length;p++)n.Pieces[p].type=="k"&&n.Pieces[p].color==n.currentTurnColor&&(i=n.Pieces[p].getIndex());r.length==0&&(console.log("main board"),n.displayBoard(),console.log(n.fen),console.log("thingy"),t.displayBoard(),console.log(t.fen));for(let p=0;p<r.length;p++)if(r[p].boardEndIndex==i)return!0;return!1}testIsInCheck(){let n=new pe,t=[];t.push(!this.isInCheck(n));for(let s=0;s<t.length;s++)if(!t[s])throw new Error("Is in check failed, test "+(s+1)+" failed")}Piece(n){let t=n.x+n.y*8;for(let s=0;s<this.Pieces.length;s++)if(this.Pieces[s].getIndex()==t)return this.Pieces[s];return" "}addPiece(n){this.Pieces.push(n),this.board[n.getIndex()]!=null&&this.board[n.getIndex()]!=" "&&console.log("ERROR: PIECE ALREADY EXISTS AT THIS LOCATION",n),this.board[n.getIndex()]=n.type}findPawnMoves(n,t){let s=[],r=n.getIndex(),i=new C(r%8,Math.floor(r/8)),p=n.color;if(p!=this.currentTurnColor)return s;if(p=="white"){let a=new C(i.x,i.y-1);t.Piece(a)==" "&&i.y!=0&&s.push(new y(i,a));let u=new C(i.x,i.y-2);t.Piece(u)==" "&&t.Piece(a)==" "&&i.y==6&&s.push(new y(i,u));let b=new C(i.x-1,i.y-1);t.Piece(b)!=" "&&t.Piece(b)?.color=="black"&&i.x-1>=0&&i.y-1>=0&&s.push(new y(i,b));let w=new C(i.x+1,i.y-1);if(t.Piece(w)!=" "&&t.Piece(w)?.color=="black"&&i.x+1<=7&&i.y-1>=0&&s.push(new y(i,w)),t.enPassantTargetSquare!="-"&&i.y==3){let $=new C(t.enPassantTargetSquare.charCodeAt(0)-97,8-parseInt(t.enPassantTargetSquare[1]));sn($,w)===!0&&s.push(new y(i,w)),sn($,b)===!0&&s.push(new y(i,b))}}else{let a=new C(i.x,i.y+1);t.Piece(a)==" "&&i.y!=7&&s.push(new y(i,a));let u=new C(i.x,i.y+2);t.Piece(u)==" "&&t.Piece(a)==" "&&i.y==1&&s.push(new y(i,u));let b=new C(i.x-1,i.y+1);t.Piece(b)!=" "&&t.Piece(b)?.color=="white"&&i.x-1>=0&&i.y+1<=7&&s.push(new y(i,b));let w=new C(i.x+1,i.y+1);if(t.Piece(w)!=" "&&t.Piece(w)?.color=="white"&&i.x+1<=7&&i.y+1<=7&&s.push(new y(i,w)),t.enPassantTargetSquare!="-"&&i.y===4){let $=new C(t.enPassantTargetSquare.charCodeAt(0)-97,8-parseInt(t.enPassantTargetSquare[1]));sn($,w)===!0&&s.push(new y(i,w)),sn($,b)===!0&&s.push(new y(i,b))}}return s}testFindPawnMoves(){let n=new pe,t=this.findPawnMoves(n.Piece(new C(0,6)),n),s=[];s.push(t.length==2),s.push(t[0].toString()=="a2-a3"),s.push(t[1].toString()=="a2-a4");for(let i=0;i<s.length;i++)if(s[i]==!1){console.log("testFindPawnMoves failed");return}s=[],t=this.findPawnMoves(n.Pieces[16],n),s.push(t.length==2),s.push(t[0].toString()=="a2-a3"),s.push(t[1].toString()=="a2-a4");for(let i=0;i<s.length;i++)if(s[i]==!1){console.log("testFindPawnMoves failed");return}n=new pe([]);let r=new Ee("a5","black",Qs);n.addPiece(r),r=new Ee("a4","white",Qs),n.addPiece(r),t=this.findPawnMoves(r,n),s=[],s.push(t.length==0);for(let i=0;i<s.length;i++)if(s[i]==!1){console.error("testFindPawnMoves failed");return}}findRookMoves(n,t){let s=[],r=n.getIndex(),i=new C(r%8,Math.floor(r/8)),p=n.color;if(p!=t.currentTurnColor)return s;if(p==="white"){for(let a=i.y-1;a>=0;a--){let u=new C(i.x,a);if(t.Piece(u)===" ")s.push(new y(i,u));else if(t.Piece(u)?.color==="black"){s.push(new y(i,u));break}else break}for(let a=i.y+1;a<=7;a++){let u=new C(i.x,a);if(t.Piece(u)===" ")s.push(new y(i,u));else if(t.Piece(u)?.color==="black"){s.push(new y(i,u));break}else break}for(let a=i.x-1;a>=0;a--){let u=new C(a,i.y);if(t.Piece(u)===" ")s.push(new y(i,u));else if(t.Piece(u)?.color==="black"){s.push(new y(i,u));break}else break}for(let a=i.x+1;a<=7;a++){let u=new C(a,i.y);if(t.Piece(u)===" ")s.push(new y(i,u));else if(t.Piece(u)?.color==="black"){s.push(new y(i,u));break}else break}}else{for(let a=i.y-1;a>=0;a--){let u=new C(i.x,a);if(t.Piece(u)===" ")s.push(new y(i,u));else if(t.Piece(u)?.color==="white"){s.push(new y(i,u));break}else break}for(let a=i.y+1;a<=7;a++){let u=new C(i.x,a);if(t.Piece(u)===" ")s.push(new y(i,u));else if(t.Piece(u)?.color==="white"){s.push(new y(i,u));break}else break}for(let a=i.x-1;a>=0;a--){let u=new C(a,i.y);if(t.Piece(u)===" ")s.push(new y(i,u));else if(t.Piece(u)?.color==="white"){s.push(new y(i,u));break}else break}for(let a=i.x+1;a<=7;a++){let u=new C(a,i.y);if(t.Piece(u)===" ")s.push(new y(i,u));else if(t.Piece(u)?.color==="white"){s.push(new y(i,u));break}else break}}return s}testFindRookMoves(){let n=new pe([],"rnbqkbnr/1ppppppp/8/p7/P7/8/1PPPPPPP/RNBQKBNR w KQkq a6 0 2"),t=n.findRookMoves(n.Piece(new C(0,7)),n),s=[];s.push(t.length===2);for(let r=0;r<s.length;r++)if(s[r]==!1){console.log("testFindRookMoves failed");return}}findKnightMoves(n,t){let s=[],r=n.getIndex(),i=new C(r%8,Math.floor(r/8)),p=n.color;if(p!=t.currentTurnColor)return s;if(p==="white"){if(i.x-2>=0&&i.y-1>=0){let a=new C(i.x-2,i.y-1);t.Piece(a)===" "?s.push(new y(i,a)):t.Piece(a)?.color==="black"&&s.push(new y(i,a))}if(i.x+2<=7&&i.y-1>=0){let a=new C(i.x+2,i.y-1);t.Piece(a)===" "?s.push(new y(i,a)):t.Piece(a)?.color==="black"&&s.push(new y(i,a))}if(i.x-2>=0&&i.y+1<=7){let a=new C(i.x-2,i.y+1);t.Piece(a)===" "?s.push(new y(i,a)):t.Piece(a)?.color==="black"&&s.push(new y(i,a))}if(i.x+2<=7&&i.y+1<=7){let a=new C(i.x+2,i.y+1);t.Piece(a)===" "?s.push(new y(i,a)):t.Piece(a)?.color==="black"&&s.push(new y(i,a))}if(i.x-1>=0&&i.y-2>=0){let a=new C(i.x-1,i.y-2);t.Piece(a)===" "?s.push(new y(i,a)):t.Piece(a)?.color==="black"&&s.push(new y(i,a))}if(i.x-1>=0&&i.y+2<=7){let a=new C(i.x-1,i.y+2);t.Piece(a)===" "?s.push(new y(i,a)):t.Piece(a)?.color==="black"&&s.push(new y(i,a))}if(i.x+1<=7&&i.y-2>=0){let a=new C(i.x+1,i.y-2);t.Piece(a)===" "?s.push(new y(i,a)):t.Piece(a)?.color==="black"&&s.push(new y(i,a))}if(i.x+1<=7&&i.y+2<=7){let a=new C(i.x+1,i.y+2);t.Piece(a)===" "?s.push(new y(i,a)):t.Piece(a)?.color==="black"&&s.push(new y(i,a))}}else{if(i.x-2>=0&&i.y-1>=0){let a=new C(i.x-2,i.y-1);t.Piece(a)===" "?s.push(new y(i,a)):t.Piece(a)?.color==="white"&&s.push(new y(i,a))}if(i.x+2<=7&&i.y-1>=0){let a=new C(i.x+2,i.y-1);t.Piece(a)===" "?s.push(new y(i,a)):t.Piece(a)?.color==="white"&&s.push(new y(i,a))}if(i.x-2>=0&&i.y+1<=7){let a=new C(i.x-2,i.y+1);t.Piece(a)===" "?s.push(new y(i,a)):t.Piece(a)?.color==="white"&&s.push(new y(i,a))}if(i.x+2<=7&&i.y+1<=7){let a=new C(i.x+2,i.y+1);t.Piece(a)===" "?s.push(new y(i,a)):t.Piece(a)?.color==="white"&&s.push(new y(i,a))}if(i.x-1>=0&&i.y-2>=0){let a=new C(i.x-1,i.y-2);t.Piece(a)===" "?s.push(new y(i,a)):t.Piece(a)?.color==="white"&&s.push(new y(i,a))}if(i.x-1>=0&&i.y+2<=7){let a=new C(i.x-1,i.y+2);t.Piece(a)===" "?s.push(new y(i,a)):t.Piece(a)?.color==="white"&&s.push(new y(i,a))}if(i.x+1<=7&&i.y-2>=0){let a=new C(i.x+1,i.y-2);t.Piece(a)===" "?s.push(new y(i,a)):t.Piece(a)?.color==="white"&&s.push(new y(i,a))}if(i.x+1<=7&&i.y+2<=7){let a=new C(i.x+1,i.y+2);t.Piece(a)===" "?s.push(new y(i,a)):t.Piece(a)?.color==="white"&&s.push(new y(i,a))}}return s}testFindKnightMoves(){let n=new pe([]),t=[];n.currentTurnColor="white";let s=new Ee("c3","white",hi);n.addPiece(s);let r=n.findKnightMoves(s,n);t.push(r.length===8),n=new pe([]),s=new Ee("c3","black",hi),n.addPiece(s),n.currentTurnColor="black",r=n.findKnightMoves(s,n),t.push(r.length===8),n=new pe([]),s=new Ee("a1","white",hi),n.addPiece(s),r=n.findKnightMoves(s,n),t.push(r.length===2);for(let i=0;i<t.length;i++)if(!t[i]){console.log("testFindKnightMoves failed at test "+i);return}}findBishopMoves(n,t){let s=[],r=n.getIndex(),i=new C(r%8,Math.floor(r/8)),p=n.color;if(p!=t.currentTurnColor)return s;if(p==="white"){for(let a=1;a<=7&&!(i.x-a<0||i.y-a<0);a++){let u=new C(i.x-a,i.y-a);if(t.Piece(u)===" ")s.push(new y(i,u));else if(t.Piece(u)?.color==="black"){s.push(new y(i,u));break}else break}for(let a=1;a<=7&&!(i.x+a>7||i.y-a<0);a++){let u=new C(i.x+a,i.y-a);if(t.Piece(u)===" ")s.push(new y(i,u));else if(t.Piece(u)?.color==="black"){s.push(new y(i,u));break}else break}for(let a=1;a<=7&&!(i.x-a<0||i.y+a>7);a++){let u=new C(i.x-a,i.y+a);if(t.Piece(u)===" ")s.push(new y(i,u));else if(t.Piece(u)?.color==="black"){s.push(new y(i,u));break}else break}for(let a=1;a<=7&&!(i.x+a>7||i.y+a>7);a++){let u=new C(i.x+a,i.y+a);if(t.Piece(u)===" ")s.push(new y(i,u));else if(t.Piece(u)?.color==="black"){s.push(new y(i,u));break}else break}}else{for(let a=1;a<=7&&!(i.x-a<0||i.y+a>7);a++){let u=new C(i.x-a,i.y+a);if(t.Piece(u)===" ")s.push(new y(i,u));else if(t.Piece(u)?.color==="white"){s.push(new y(i,u));break}else break}for(let a=1;a<=7&&!(i.x+a>7||i.y+a>7);a++){let u=new C(i.x+a,i.y+a);if(t.Piece(u)===" ")s.push(new y(i,u));else if(t.Piece(u)?.color==="white"){s.push(new y(i,u));break}else break}for(let a=1;a<=7&&!(i.x-a<0||i.y-a<0);a++){let u=new C(i.x-a,i.y-a);if(t.Piece(u)===" ")s.push(new y(i,u));else if(t.Piece(u)?.color==="white"){s.push(new y(i,u));break}else break}for(let a=1;a<=7&&!(i.x+a>7||i.y-a<0);a++){let u=new C(i.x+a,i.y-a);if(t.Piece(u)===" ")s.push(new y(i,u));else if(t.Piece(u)?.color==="white"){s.push(new y(i,u));break}else break}}return s}testFindBishopMoves(){let n=new pe([]),t=new Ee("a2","white",Kt);n.addPiece(t);let s=n.findBishopMoves(t,n);if(s.length!==7){console.log("testFindBishopMoves failed 0");return}if(n=new pe([]),t=new Ee("a2","black",Kt),n.addPiece(t),n.currentTurnColor="black",s=n.findBishopMoves(t,n),s.length!==7){console.log("testFindBishopMoves failed 1");return}if(n=new pe([]),t=new Ee("a2","white",Kt),n.addPiece(t),n.currentTurnColor="black",t=new Ee("b3","black",Kt),n.addPiece(t),s=n.findBishopMoves(t,n),s.length!==9){console.log("testFindBishopMoves failed 2");return}if(n=new pe([]),t=new Ee("a2","black",Kt),n.addPiece(t),t=new Ee("b3","white",Kt),n.addPiece(t),s=n.findBishopMoves(t,n),s.length!==9){console.log("testFindBishopMoves failed 3");return}}findQueenMoves(n,t){let s=this.findRookMoves(n,t);return s.push(...this.findBishopMoves(n,t)),s}testFindQueenMoves(){let n=new pe([]),t=new Ee("a2","white",Yt);n.addPiece(t);let s=n.findQueenMoves(t,n);if(s.length!==21){console.log(s),console.error("testFindQueenMoves failed 0");return}if(n=new pe([]),t=new Ee("a2","black",Yt),n.addPiece(t),n.currentTurnColor="black",s=n.findQueenMoves(t,n),s.length!==21){n.displayBoard(),console.log(s),console.error("testFindQueenMoves failed 1");return}if(n=new pe([]),t=new Ee("a2","white",Yt),n.addPiece(t),n.currentTurnColor="black",t=new Ee("b3","black",Yt),n.addPiece(t),s=n.findQueenMoves(t,n),s.length!==23){console.error("testFindQueenMoves failed 2");return}if(n=new pe([]),t=new Ee("a2","black",Yt),n.addPiece(t),t=new Ee("b3","white",Yt),n.addPiece(t),s=n.findQueenMoves(t,n),s.length!==23){console.error("testFindQueenMoves failed 3");return}}findKingMoves(n,t){let s=[],r=n.getPos().pos;if(n.color==="black"){let i=new C(r.x,r.y+1);t.Piece(i)===" "&&r.y+1<=7?s.push(new y(r,i)):t.Piece(i)?.color==="white"&&r.y+1<=7&&s.push(new y(r,i)),i=new C(r.x,r.y-1),t.Piece(i)===" "&&r.y-1>=0?s.push(new y(r,i)):t.Piece(i)?.color==="white"&&r.y-1>=0&&s.push(new y(r,i)),i=new C(r.x+1,r.y),t.Piece(i)===" "&&r.x+1<=7?s.push(new y(r,i)):t.Piece(i)?.color==="white"&&r.x+1<=7&&s.push(new y(r,i)),i=new C(r.x-1,r.y),t.Piece(i)===" "&&r.x-1>=0?s.push(new y(r,i)):t.Piece(i)?.color==="white"&&r.x-1>=0&&s.push(new y(r,i)),i=new C(r.x+1,r.y+1),t.Piece(i)===" "&&r.x+1<=7&&r.y+1<=7?s.push(new y(r,i)):t.Piece(i)?.color==="white"&&r.x+1<=7&&r.y+1<=7&&s.push(new y(r,i)),i=new C(r.x-1,r.y+1),t.Piece(i)===" "&&r.x-1>=0&&r.y+1<=7?s.push(new y(r,i)):t.Piece(i)?.color==="white"&&r.x-1>=0&&r.y+1<=7&&s.push(new y(r,i)),i=new C(r.x+1,r.y-1),t.Piece(i)===" "&&r.x+1<=7&&r.y-1>=0?s.push(new y(r,i)):t.Piece(i)?.color==="white"&&r.x+1<=7&&r.y-1>=0&&s.push(new y(r,i)),i=new C(r.x-1,r.y-1),t.Piece(i)===" "&&r.x-1>=0&&r.y-1>=0?s.push(new y(r,i)):t.Piece(i)?.color==="white"&&r.x-1>=0&&r.y-1>=0&&s.push(new y(r,i)),i=new C(r.x+2,r.y),t.Piece(i)===" "&&r.x+2===6&&r.y===0&&this.inCheck===!1&&t.Piece(new C(r.x+1,r.y))===" "&&t.castlingRights.includes("k")&&s.push(new y(r,i)),i=new C(r.x-2,r.y),t.Piece(i)===" "&&r.x-2===2&&r.y===0&&this.inCheck===!1&&t.Piece(new C(r.x-1,r.y))===" "&&t.Piece(i)===" "&&t.castlingRights.includes("q")&&s.push(new y(r,i))}else{let i=new C(r.x,r.y+1);t.Piece(i)===" "&&r.y+1<=7?s.push(new y(r,i)):t.Piece(i)?.color==="black"&&r.y+1<=7&&s.push(new y(r,i)),i=new C(r.x,r.y-1),t.Piece(i)===" "&&r.y-1>=0?s.push(new y(r,i)):t.Piece(i)?.color==="black"&&r.y-1>=0&&s.push(new y(r,i)),i=new C(r.x+1,r.y),t.Piece(i)===" "&&r.x+1<=7?s.push(new y(r,i)):t.Piece(i)?.color==="black"&&r.x+1<=7&&s.push(new y(r,i)),i=new C(r.x-1,r.y),t.Piece(i)===" "&&r.x-1>=0?s.push(new y(r,i)):t.Piece(i)?.color==="black"&&r.x-1>=0&&s.push(new y(r,i)),i=new C(r.x+1,r.y+1),t.Piece(i)===" "&&r.x+1<=7&&r.y+1<=7?s.push(new y(r,i)):t.Piece(i)?.color==="black"&&r.x+1<=7&&r.y+1<=7&&s.push(new y(r,i)),i=new C(r.x-1,r.y+1),t.Piece(i)===" "&&r.x-1>=0&&r.y+1<=7?s.push(new y(r,i)):t.Piece(i)?.color==="black"&&r.x-1>=0&&r.y+1<=7&&s.push(new y(r,i)),i=new C(r.x+1,r.y-1),t.Piece(i)===" "&&r.x+1<=7&&r.y-1>=0?s.push(new y(r,i)):t.Piece(i)?.color==="black"&&r.x+1<=7&&r.y-1>=0&&s.push(new y(r,i)),i=new C(r.x-1,r.y-1),t.Piece(i)===" "&&r.x-1>=0&&r.y-1>=0?s.push(new y(r,i)):t.Piece(i)?.color==="black"&&r.x-1>=0&&r.y-1>=0&&s.push(new y(r,i)),i=new C(r.x+2,r.y),t.Piece(i)===" "&&r.x+2===6&&r.y===7&&this.inCheck===!1&&t.Piece(new C(r.x+1,r.y))===" "&&t.castlingRights.includes("K")&&s.push(new y(r,i)),i=new C(r.x-2,r.y),t.Piece(i)===" "&&r.x-2===2&&r.y===7&&this.inCheck===!1&&t.Piece(new C(r.x-1,r.y))===" "&&t.Piece(i)===" "&&t.castlingRights.includes("Q")&&s.push(new y(r,i))}return s}testFindKingMoves(){let n=new pe([]),t=new Ee("a2","white",Gt);n.addPiece(t);let s=n.findKingMoves(t,n);if(s.length!==5){console.error("testFindKingMoves failed 0",s);return}if(n=new pe([]),t=new Ee("a2","black",Gt),n.addPiece(t),n.currentTurnColor="black",s=n.findKingMoves(t,n),s.length!==5){console.error("testFindKingMoves failed 1");return}if(n=new pe([]),t=new Ee("a2","white",Gt),n.addPiece(t),n.currentTurnColor="black",t=new Ee("b3","black",Gt),n.addPiece(t),s=n.findKingMoves(t,n),s.length!==8){console.error("testFindKingMoves failed 2");return}if(n=new pe([]),t=new Ee("a2","black",Gt),n.addPiece(t),t=new Ee("b3","white",Gt),n.addPiece(t),s=n.findKingMoves(t,n),s.length!==8){console.error("testFindKingMoves failed 3");return}}runAllTests(){this.testConvertToPosition(),this.testConstructors(),this.testBoardToFen(),this.testFenToBoard(),this.testFindPawnMoves(),this.testFindRookMoves(),this.testFindKnightMoves(),this.testFindBishopMoves(),this.testFindQueenMoves(),this.testFindKingMoves(),this.testFindPseudoLegalMoves(),this.testIsInCheck(),this.testFindLegalMoves(),console.log("All tests ran for board class")}}class ro{runAllTests(){new y(void 0,void 0,"a2","a4").runAllTests(),new xt("a2").runAllTests(),new Ee("a2","white","pawn").runAllTests(),new pe().runAllTests(),console.log("All tests ran for chessClasses.ts")}}function sn(c,n){return c&&n&&typeof c=="object"&&typeof n=="object"?Object.keys(c).length===Object.keys(n).length&&Object.keys(c).reduce(function(t,s){return t&&sn(c[s],n[s])},!0):c===n}const lo=Pr();function ao(c){const[n,t]=Q({x:0,y:0}),[s,r]=Q({x:0,y:0}),[i,p]=Q(!1),[a,u]=Q(null),[b,w]=Q(null),[$,D]=Q({x:0,y:0}),[B,k]=Q(null),[H,K]=Q(null),[F,P]=Q({x:0,y:0}),[N,S]=Q({x:0,y:0}),[V,G]=Q(!1),[R,W]=Q(null),[T,E]=Q(null),[se,be]=Q({x:0,y:0}),[de,ee]=Q(null),[ye,ge]=Q(null),[me,_e]=Q([]),ie=[],v=[];Ye(()=>{document.addEventListener("pointermove",q=>{t({x:q.clientX,y:q.clientY}),i()&&a()&&(a().ref.style.transform=`translate(${n().x-s().x+$().x}px, ${n().y-s().y+$().y}px)`,a().ref.style.zIndex=100,a().rectangle=a().ref.getBoundingClientRect(),B()?.length>0&&K(rt(B())))}),document.addEventListener("pointerup",q=>{a()!=null&&(a().dragEnd(H()),v.forEach(g=>{g(q)}),a()?.ref&&(a().ref.style.transform=`translate(${0}px, ${.1}px)`,a().ref.style.zIndex=0),p(!1),w(a()),u(null))}),document.addEventListener("virtualpointermove",q=>{P({x:q.clientX,y:q.clientY}),V()&&R()&&(R().ref.style.transform=`translate(${F().x-N().x+se().x}px, ${F().y-N().y+se().y}px)`,R().ref.style.zIndex=100,R().rectangle=R().ref.getBoundingClientRect(),de()?.length>0&&ge(dn(de())))}),document.addEventListener("virtualpointerup",q=>{R()!=null&&(R().dragEnd(ye()),v.forEach(g=>{g(q)}),R()?.ref&&(R().ref.style.transform=`translate(${0}px, ${.1}px)`,R().ref.style.zIndex=0),G(!1),E(R()),W(null))})});const x=(q,g)=>{g!==void 0&&g.dragStart.push(q)},M=q=>{ie.push(q)},ue=q=>{v.push(q)},oe=(q,g)=>{g!==void 0&&(g.dragEnd=q)},j=(q,g)=>{g!==void 0&&(g.hoverOver=q)},J=(q,g)=>{g!==void 0&&(g.hoverOut=q)},ve=q=>{let g={id:q,startingPosition:{x:0,y:0},dragStart:[],dragEnd:()=>{},ref:null,rectangle:null,data:{}};return Ye(()=>{g.ref.addEventListener("pointerdown",re=>{if(!g.ref.classList.contains("noDrag")){u(g);for(let Y=0;Y<g.dragStart.length;Y++)g.dragStart[Y](g);for(let Y=0;Y<ie.length;Y++)ie[Y](g);D(Me(re.target.getAttribute("style"))),r({x:re.clientX,y:re.clientY}),p(!0),g.rectangle=g.ref.getBoundingClientRect()}}),g.ref.addEventListener("virtualpointerdown",re=>{W(g);for(let Y=0;Y<g.dragStart.length;Y++)g.dragStart[Y](g);for(let Y=0;Y<ie.length;Y++)ie[Y](g);be(Me(re.target.getAttribute("style"))),S({x:re.clientX,y:re.clientY}),G(!0),g.rectangle=g.ref.getBoundingClientRect()})}),g},he=q=>{let g={id:q,startingPosition:{x:0,y:0},hoverOver:()=>{},hoverOut:()=>{},ref:null,rectangle:null,hovering:!1,occupied:!1,droppable:!0};return _e([...me(),g]),Ye(()=>{g.rectangle=g.ref.getBoundingClientRect(),g.ref.querySelector(".piece")!==null&&(g.occupied=!0),document.addEventListener("pointermove",()=>{if(a()==null||a().rectangle==null)return;let re=a().ref.getBoundingClientRect(),Y=g.ref.getBoundingClientRect();if(re.top>Y.bottom||re.right<Y.left||re.bottom<Y.top||re.left>Y.right){if(kt(g),!g.hovering)return;g.hovering=!1,g.hoverOut(a())}else{if(g.ref===H()?.ref){if(g.hovering)return;g.hovering=!0,g.hoverOver(a())}else g.hovering=!1,g.hoverOut(a());it(g)}}),document.addEventListener("pointerdown",()=>{if(a()==null||a().rectangle==null)return;let re=a().ref.getBoundingClientRect(),Y=g.ref.getBoundingClientRect();if(re.top>Y.bottom||re.right<Y.left||re.bottom<Y.top||re.left>Y.right){if(kt(g),!g.hovering)return;g.hovering=!1,g.hoverOut(a())}else{if(g.ref===H()?.ref){if(g.hovering)return;g.hovering=!0,g.hoverOver(a())}else g.hovering=!1,g.hoverOut(a());it(g)}B()?.length>0&&K(rt(B()))}),document.addEventListener("pointerup",()=>{!g.hovering||(g.hovering=!1,g.hoverOut(b()),b()!=null&&g.droppable!==!1&&(g.ref.querySelector(".piece")!==null?g.ref.querySelector(".piece").remove():g.ref.querySelector(".circle")!==null&&g.ref.querySelector(".circle").remove(),g.ref.appendChild(b().ref)))}),document.addEventListener("virtualpointermove",()=>{if(R()==null||R().rectangle==null)return;let re=R().ref.getBoundingClientRect(),Y=g.ref.getBoundingClientRect();if(re.top>Y.bottom||re.right<Y.left||re.bottom<Y.top||re.left>Y.right){if(cn(g),!g.hovering)return;g.hovering=!1,g.hoverOut(R())}else{if(g.ref===ye()?.ref){if(g.hovering)return;g.hovering=!0,g.hoverOver(R())}else g.hovering=!1,g.hoverOut(R());Z(g)}}),document.addEventListener("virtualpointerdown",()=>{if(R()==null||R().rectangle==null)return;let re=R().ref.getBoundingClientRect(),Y=g.ref.getBoundingClientRect();if(re.top>Y.bottom||re.right<Y.left||re.bottom<Y.top||re.left>Y.right){if(cn(g),!g.hovering)return;g.hovering=!1,g.hoverOut(R())}else{if(g.ref===ye()?.ref){if(g.hovering)return;g.hovering=!0,g.hoverOver(R())}else g.hovering=!1,g.hoverOut(R());Z(g)}de()?.length>0&&ge(dn(de()))}),document.addEventListener("virtualpointerup",()=>{!g.hovering||(g.hovering=!1,g.hoverOut(T()),T()!=null&&g.droppable!==!1&&(g.ref.querySelector(".piece")!==null?g.ref.querySelector(".piece").remove():g.ref.querySelector(".circle")!==null&&g.ref.querySelector(".circle").remove(),g.ref.appendChild(T().ref)))})}),me()[me().length-1]};function Me(q){if(q===null)return{x:0,y:0};let g=q.split("translate(")[0],re;return g&&(re=q.split("translate(")[1].split(")")[0].split("px, ")),{x:parseInt(re[0]),y:parseInt(re[1])}}function it(q){B()==null&&k([q]),!B().includes(q)&&(B()?.includes(q)||k([...B(),q]))}function kt(q){B()!=null&&(!B()?.includes(q)||B().includes(q)&&k(B()?.filter(g=>g!==q)))}function rt(q){if(q==null)return;let g=a().ref.getBoundingClientRect();return q.sort((Y,yt)=>{let Ne=Y.ref.getBoundingClientRect(),Re=yt.ref.getBoundingClientRect(),ze,ft,pt,gt,Xe,mt;return g.x>Ne.x?ze=Ne.right-g.x:ze=g.right-Ne.x,g.bottom>Ne.bottom?ft=Ne.bottom-g.top:ft=g.bottom-Ne.top,Xe=ze*ft,g.x>Re.x?pt=Re.right-g.x:pt=g.right-Re.x,g.bottom>Re.bottom?gt=Re.bottom-g.top:gt=g.bottom-Re.top,mt=pt*gt,mt-Xe})[0]}function Z(q){de()==null&&ee([q]),!de().includes(q)&&(de()?.includes(q)||ee([...de(),q]))}function cn(q){de()!=null&&(!de()?.includes(q)||de().includes(q)&&ee(de()?.filter(g=>g!==q)))}function dn(q){if(q==null)return;let g=R().ref.getBoundingClientRect();return q.sort((Y,yt)=>{let Ne=Y.ref.getBoundingClientRect(),Re=yt.ref.getBoundingClientRect(),ze,ft,pt,gt,Xe,mt;return g.x>Ne.x?ze=Ne.right-g.x:ze=g.right-Ne.x,g.bottom>Ne.bottom?ft=Ne.bottom-g.top:ft=g.bottom-Ne.top,Xe=ze*ft,g.x>Re.x?pt=Re.right-g.x:pt=g.right-Re.x,g.bottom>Re.bottom?gt=Re.bottom-g.top:gt=g.bottom-Re.top,mt=pt*gt,mt-Xe})[0]}return X(lo.Provider,{value:{onDragEnd:oe,onDragStart:x,createDraggable:ve,onHoverOver:j,createDroppable:he,onHoverOut:J,onGlobalDragStart:M,onGlobalDragEnd:ue},get children(){return c.children}})}const Ks=()=>xr(lo);class Rr{from;to;type;constructor(n,t,s){this.from=n,this.to=t,this.type=s}}class on{id;username;CatUrl;last_seen=Date.now();inGame=!1;constructor(n,t,s){this.id=n,this.username=t,this.CatUrl=s}}class qr{from;fromUserColor;to;gameID;type="createGame";constructor(n,t){this.from=n,this.to=t,this.fromUserColor=Math.random()>.5?"white":"black",this.gameID=this.generateRandomId()}generateRandomId(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}}class Vn{x;y;constructor(n,t){this.x=n,this.y=t}}class fi{from;to;position;screen;type="virtualMouseEvent";eventType;chessBoardWidth;constructor(n,t,s,r,i){this.from=n,this.to=t,this.position=s,this.screen=new Vn(window.innerWidth,window.innerHeight),this.chessBoardWidth=r,this.eventType=i}}class $r{from;to;previousFen;crowning=!1;eating=!1;atePiece="";crownedTo="";castle=!1;turnColor="";enPassant=!1;enPassantSquare="";constructor(n,t,s){this.from=n,this.to=t,this.previousFen=s}}class Fr{fen;from;to;type="chessGameUpdate";turn;moves;constructor(n,t,s,r,i){this.fen=n,this.from=t,this.to=s,this.turn=r,this.moves=i}}const jr=Ie('<div class="number-right" style="pointer-events: none;"></div>'),Ur=Ie('<div class="number-left" style="pointer-events: none;"></div>'),Hr=Ie("<div></div>"),Wr=Ie('<section><div class=""> </div></section>');function co({pieceClassName:c,className:n,id:t,board:s,draggableId:r,updateBoard:i,eatenPieces:p,setDisplayInlay:a,setDisplayInlayX:u,inlaySelection:b,displayInlay:w,style:$,color:D,setLastMove:B,lastMove:k,movePieceSound:H,capturePieceSound:K,setMoves:F,moves:P,allPieces:N,setAllPieces:S}){Ye(()=>{window.movePiece=function(T,E){s().movePiece(T,E),i()},window.board=s});const V=({id:T,className:E,draggable:se,draggableClass:be})=>{const{onHoverOver:de,createDroppable:ee,onHoverOut:ye,onGlobalDragStart:ge,onGlobalDragEnd:me}=Ks(),_e=ee(T);return de(ie=>{_e.ref.classList.add("hovered")},_e),ye(ie=>{_e.ref.classList.remove("hovered")},_e),ge(ie=>{if(!R()&&!w())if(ie.data.legalPieceMoves.includes(_e.id)){if(_e.ref.children.length===0||_e.ref.querySelector(".piece")==null){_e.droppable=!0;let v=document.createElement("section");v.classList.add("circle"),_e.ref.appendChild(v)}else if(_e.ref.children.length>0&&_e.ref.querySelector(".piece")!=null){_e.droppable=!0;let v;for(let x=0;x<_e.ref.children.length;x++)_e.ref.children[x].classList.contains("piece")&&(v=_e.ref.children[x]);v.children[0]?.classList.add("circle")}}else _e.droppable=!1}),me(ie=>{if(ie.srcElement.classList?.contains("piece")){if(D!==s().currentTurnColor)return}else if(D==s().currentTurnColor)return;let v=_e.ref.querySelectorAll("section.circle");for(let M=0;M<v.length;M++)v[M].remove();let x=_e.ref.querySelectorAll("div.circle");for(let M=0;M<x.length;M++)x[M].classList.remove("circle")}),se.getAttribute("class").length===0&&(se=void 0),(()=>{const ie=Hr.cloneNode(!0),v=_e.ref;return typeof v=="function"?Hs(v,ie):_e.ref=ie,Nn(ie,"id",T),rn(ie,E),Se(ie,X(qe,{when:se!=null,children:se}),null),Se(ie,X(qe,{get when(){return T[1]==="8"&&D==="black"||T[1]==="1"&&D==="white"},get children(){const x=jr.cloneNode(!0);return Se(x,()=>T[0]),x}}),null),Se(ie,X(qe,{get when(){return T[0]==="h"&&D==="black"||T[0]==="a"&&D==="white"},get children(){const x=Ur.cloneNode(!0);return Se(x,()=>T[1]),x}}),null),ht(x=>oo(ie,$,x)),ie})()},G=({className:T,id:E})=>{const{onDragStart:se,onDragEnd:be,createDraggable:de}=Ks(),ee=de(E);let ye,ge;se(()=>{if(w())return;ye=ee.ref.parentElement.id;let ie=s().findLegalMoves(s());ie.length===0&&(s().checkMate=!0);let v=[];for(let x=0;x<ie.length;x++)ie[x].start==ye&&v.push(ie[x].end);ee.data.legalPieceMoves=v},ee),be(async ie=>{if(w()||R()||ie===null)return;let v=ie.ref.querySelector(".piece");if(await W(1),v?.id===ee?.id?ge=ee.ref.parentElement.id:ge=ie.ref.id,ie.ref.querySelector(".circle")===void 0||s().checkMate)return;for(let oe=0;oe<s().legalMoves.length&&!(s().legalMoves[oe].start===ye&&s().legalMoves[oe].end===ge);oe++)if(oe===s().legalMoves.length-1)return;if(ge===ye)return;let x=new $r(ye,ge,s().fen);if(s().enPassantTargetSquare===ge&&(x.enPassant=!0,x.enPassantSquare=s().enPassantTargetSquare,s().currentTurnColor==="white"?x.enPassantSquare=x.enPassantSquare[0]+(parseInt(x.enPassantSquare[1])-1).toString():x.enPassantSquare=x.enPassantSquare[0]+(parseInt(x.enPassantSquare[1])+1).toString(),x.atePiece=s().getPieceAtPosition(x.enPassantSquare)?.type),x.turnColor=s().currentTurnColor,s().getPieceAtPosition(ye)?.type==="k"){let oe=ye[0],j=ge[0];Math.abs(oe.charCodeAt(0)-j.charCodeAt(0))===2&&(x.castle=!0)}if(v?.classList?.contains("piece")){p.push(v);let oe=v?.querySelectorAll(".circle");for(let j=0;j<oe.length;j++)oe[j].remove();S([...N(),v]),x.eating=!0,x.atePiece=s().getPieceAtPosition(ge)?.type,K.play()}else H.play();s().movePiece(ye,ge);let M=s().getPieceAtPosition(ge);M.type==="p"&&M.color===D&&(ge[1]==="8"||ge[1]==="1")&&(x.crowning=!0,a(!0),u(M.position.pos.x)),F([...P(),x]),i(),(v?.classList?.contains("number-right")||v?.classList?.contains("number-left"))&&ie.ref.appendChild(v),B({from:ye,to:ge});let ue=document.querySelectorAll(".chessSquare");for(let oe=0;oe<ue.length;oe++)ue[oe].id===k().from||ue[oe].id===k().to?ue[oe]?.classList?.add("lastMove"):ue[oe]?.classList?.remove("lastMove")},ee);const me=c.toUpperCase()===c?"white":"black",_e=D===me;return(()=>{const ie=Wr.cloneNode(!0),v=ee.ref;return typeof v=="function"?Hs(v,ie):ee.ref=ie,rn(ie,`${T} ${_e?"canDrag":"noDrag"}`),Nn(ie,"id",E),ie})()};function R(){for(let T=0;T<s().Pieces.length;T++)if(s().Pieces[T].type==="p"&&s().Pieces[T].color!=D&&(s().Pieces[T].position.pos.y===0||s().Pieces[T].position.pos.y===7))return!0}const W=T=>new Promise(E=>setTimeout(E,T));return X(V,{className:n,get draggable(){return X(G,{className:`${c!=" "?c+" piece":""}`,id:r})},id:t})}const Qr=Ie('<div class="catLogo"></div>');function Rn({catLink:c}){return(()=>{const n=Qr.cloneNode(!0);return ht(t=>oo(n,`background-image: url(${c})`,t)),n})()}const Kr=Ie('<div class="ScoreNPieces"><div class="score"></div></div>'),Gr=Ie('<section><div class=""> </div></section>');function uo({color:c,board:n}){const[t,s]=Q([]),[r,i]=Q(0);return Ye(()=>{console.log(n()),document.addEventListener("boardUpdated",()=>{s([]),i(0);let p=n().capturedPieces;for(let a=0;a<p.length;a++)switch(p[a].color!=c&&s([...t(),p[a]]),p[a].type){case"p":p[a].color==c?i(r()+-1):i(r()+1);break;case"n":p[a].color==c?i(r()+-3):i(r()+3);break;case"b":p[a].color==c?i(r()+-3):i(r()+3);break;case"r":p[a].color==c?i(r()+-5):i(r()+5);break;case"q":p[a].color==c?i(r()+-9):i(r()+9)}})}),(()=>{const p=Kr.cloneNode(!0),a=p.firstChild;return Se(a,(()=>{const u=nt(()=>r()!=0);return()=>u()?r():""})()),Se(p,X($n,{get each(){return t()},children:u=>(()=>{const b=Gr.cloneNode(!0);return ht(()=>rn(b,`eatenPiece ${c=="white"?u.type:u.type.toUpperCase()}`)),b})()}),null),p})()}const ho="data:audio/mpeg;base64,SUQzBAAAAAABH1RFTkMAAAALAAADUHJvIFRvb2xzAFRYWFgAAAAjAAADb3JpZ2luYXRvcl9yZWZlcmVuY2UAYWFPNEt0IUJLdlNrAFREUkMAAAAMAAADMjAxOS0wNC0yMQBUWFhYAAAAGgAAA3RpbWVfcmVmZXJlbmNlADE3MjgwMDAwMABUU1NFAAAADwAAA0xhdmY1OC4yOS4xMDAAAAAAAAAAAAAAAP/7VAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEluZm8AAAAPAAAACAAADMAALS0tLS0tLS0tLS0tS0tLS0tLS0tLS0tLaWlpaWlpaWlpaWlpaYeHh4eHh4eHh4eHh6WlpaWlpaWlpaWlpaXDw8PDw8PDw8PDw8Ph4eHh4eHh4eHh4eHh////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQE5gAAAAAAAAzAei0vIf/7lGQAAAMuHciFc0ACKuFWcqGYABC8uU9ZrIAQvopiQzUgADDQIHQuY1I5kkbmEQMZCOBo5LGfhoY3Q5wCCG7FcZeABikmmUyCEDYxYSDJgwFBCeTceaYaoQlKYUGq8uYBgjTQICBQBgl7O5DEOXqSxunjcvp8+///nXp6enpKSkpMGQ8AAAAAVASoEJwMWaIIFnEIOBiwgDC0xA4+sH1AgUBA4XeD/KHP/KOBB2Iz/8oc4PgAAAV9uRSW0SBsALDmsjFUiIVimojFGpsmc0mEHFEgmImJJGdXBQmCU7d1xiRADooPLkDg3Tlo1aDtFMBZFBHFy8KHqaa4WEtu/DhbYDWszG5ukhTXYo8butg1ayrU0pl/f/3Wgvdbk5SZ3O1cr+W98/79S93//LKmEAY9bwE5c274qni5H6i+zFmyQGVb9iwZ0OLDTNIQtIz9JN/B44YsS8DsQxmDdxty3QJkkDLoPRNX/t/KqgA/AQBAxudAcqzBpfMoGwyjGTUw1P/7lGQKjNP7PEoXciAAMKIIwuy8AA40mRItpHRAvgnjjPSKCMvrY0aVAMPiIWG3ouayUpjwZmEhIIwqYgDJigBC2gLABTENAWoLgckQqLhHCQIMjBYcIJGJAiDJF01GVNT02U5w6Ymqkkq1o2RZToLqSUtSSWu3mJrRpLqW1J/3WrutaKKLTM9mwMnW54TBIAGFVQwoBg8EHKXCBUOHL9KRM69DVlqA5E1S5NUpxHiEnmW4ucVtnVdo/gj6n/RrCIeMjIUgxXINrUzbAEyO4OajQEgBVIMREDMUw3IcNDWTru83qTNagzJCciABx9FmgqgQNEgUFMWrKzNaZW77AQ0wAJsgbBUUAkiSRY4CjAJEG/tUL0goDpAuD7n0KNdIodOvt29UXOgUNVm1Xu+z+ixQcg53hkEpCFI8eoMUHKeQUgQEE6BpMpOCCDHKVHHAfXCFxiNQbqBdFFRRHGsgUjbVBCADEgMKGps3iDRM0aBOSPgcfGbNBjqeY45m9Uxgif/7lGQPjNNfIsMTeCtANMJ4kWMpOguUTwwtZYzA/InhQawhmKXTNCmRp5MVDOU1/A3D4dVADBS8Vgh54GUt0FgsCkLuOpTUciUDuFmhr2R5aCScrDJHGOjw66jPSLou5cks/9C9hKt65fbxCGR12hUqwEw5IgHIQUIpsF3EyB3sSWMNwxgDIjKkoDEJCkU5YqdqzP3kiKhkneX0NGrTjtZSzCLdP2oAvMgcm5DmDHnTqnTWgKIZwydHMZpYcXMG3Bt2YmmGDjFGj4raZzajqdEAqPzLvQY5a44rs5OAqNDz21SsJBpx2pinhsBHHrW6/1ertWxdFC6kMRXqeq2l96eK5CnRDHlY0HNg1NPRF9R0w4mMNcRMn+KTIFYmDImSMBQgecB/CuAHYZKokKsCz36tsNXiyaeNwksVdC/8AWiwSWpCUIAsSwTGQoGE5hscCkptEJssKg5g0Z4VZyyhxHhwBZka4OGGSIGtSk0ZRZGMcFkRqGWmOqxCsj40bgcsg//7lGQfDtL/IEKDellwSQKIMGd4Ggx4TwYtc0aQ9YjhxbxoiEeWJ246o3+K9t3wx/VytFNdclWyUV6+1Ewr6jWhvrdlvy7wBZExnztBL8DMEbOFGyERtxgBEo3SGNxVTKjcRm5goKBAZYM1YvPWgqY0vRfEJQYKCmjsZVFld0+7h4ZWtQ7INGw/RkkC4uXSEQASUYVRANQMqMZhOkDBSQBXoyqRgwynKh+YKFAOjRgYHGFinQIGNAGJiCxhMkeBpgsjas4THpuGIRFo9NXbv3KaRCRxwqNLAit5UBKeWi307S2//I2KJEsq76Nt/4yVZ5uowi25CHEwEGMPDjNogxGOkjbc0CMEoJ5YcfMmRAyV/VhDJiCyQVAQQlsvFb87ZgZrzKqCpZj33R4SVdrRuYprI0BmkhpQXnap5yP+ZKqm3zZoTMZ/CmI8x4x0UOBzKYbeIobmZZnPGnjEiqIxKMmVoPGMFvHCFY0ZCIG9y4BQc8VVaYkmvvbDXrbOXaenpf/7lGQoD/LbH7+DemMwTSPIEG8naExogvgObYlBTY8fwb0lmG8tWwfjGz//yvZ9DkAYHAycYyUNTOTEjXGAw93MsfQSemCox1SgYKamTuhACElghTDoSIA01gsyEMAQVAGwRiDsIeuwhTFYKi8s1AzCwOaim284yvHVLQpWNhUnmREkJOALFU5M6DY6jOKQg5wPTn6uNFagMsH4gRybSBkMxAAK2U6onMOOzPyQxolMHAAQPD0WAQhHNO0OS1Fl9LggA2EY4m68tDf4XfhirsVuZi09Z1pL3R5AzknH//5ZsRAhmPAprSYnqbRmmHpgBwDVDA4kfNdWThk0ws5PiQTJFsylw4pAQHjwZTABS3LZwqgGRzdV9MuZ6mgtQRAECyM45NEvStZXzx+ZDLxXpzYYF/TVjAIHzBxIwIbM7FDG1QARhqB+dPJg6bOtfTyVY5NBOCcDBjsxsOMtNjGFk+4TM3NCI2BTHbFVlWoy3gIyABx4io7bFXutzXJA8+c1Z//7lGQmD/LYID6DeTPAVgQH0G8GhAuUgPYOaStBNI5fgbyVoQtTT/eYX/qrSCTKRW1TaF9Eo2ckRFDeLgZlGodSREXAO5JprwOmJjBgdOpmDFpgRAZHHArOMiGTUhswQCDB4vsYTDB0+4Id8yjW4509JXslUzGzSylk0HbW/di7Kmi9cC2LF6nrVOIAYZ5NRnwWjKgNKL4xsDjRsrM1EQBU8xIyQRJCNGexCePiaCuCQZuUpkFZi05gnIhQJfGfTrmeZ2RIc4Sb87CHCkDGZC2OhaKsZ3tXO6yFwpH46V1YhPrzT2d8SVVVgQFGNFxltsaWxHmtAEXCagNShSFHCRo1IVMXMwRicYxvGnBCBBTfVdAVGGS1gplphc5orBJt93mg+/NOKgdzXJ21IPMQRVAHJ211RoSJjscXTKEAS9TSRI3dZPKOTVyQzsxBcYmEb8SGJqZk4OaeDmHXp7+i4giUIFAEe/zhP+glTdbmyd35Q1vCW7BxY8gc7PsyvK9Jqf/7lGQmj/KeID2DeTOwVEPH0HNoPgoQUPYMbyGJVA8egc0Nce6rSTHaP6X/GAYJDUWIBggPmP4cZ2HoVCgQ2GgDppP+bPLmsmh1LMZoWGFBRNGFwS9AyRCgYFwUDAosBtEwaECgJNK9bmWWapqtCGGGVVnvt9yzd4hzBHBtDuoCGEETSxADNAKJThz4zIDMPPDTUoyI5OINzb0gy8sNQgTOCYyNTNOGzSjUyZgsSJHGIKZCKACRqbNacVmzgSOJtN+rqZjk/pNV7tqigVI2yiT5MEggw0NRYTmPkYaBdpuogGWwWYPA5FKzcg6OTpI8uQ2yEyI8w+g2uc9VApSEo4HVyyCcZqmaQCtrpMPZIw3sSZDIL2dZ62a73yt3lIubUMfRLMwVMCeNOSMA/Hxp18xg7J6iJxZAoVNJFMVgDUUE/zU1cQeZCgs1Bsx8IywQ1ZwVDgoq8S7nGglUrxqavVA0t1vVXdmta2bz/+YYVVJJdGFVFF83z0w841aMFgTShP/7lEQtj/JfFLiDW9ICSeJ3AGssWEAAAaQAAAAgAAA0gAAABDSGTXyjF3DZrwOZO9wyHRWAyzQOCZKSCAoKLog0RDMMJROf90k9mHq9BI7ULmz05WPEhs0x27/3fUSJTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",Yr=Ie('<div class="arrows"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-7 h-7"><path stroke-linecap="round" stroke-linejoin="round" d="M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"></path></svg></div><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-7 h-7"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5"></path></svg></div><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-7 h-7"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path></svg></div><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-7 h-7"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"></path></svg></div></div>');class zr{constructor(n,t){this.ID=n,this.crownedTo=t}}function Xr({moves:c,allPieces:n,setAllPieces:t}){let s=[];function r(){let P=window.innerHeight,N=document.querySelector(".arrows"),G=document.querySelector(".chessBoard").getBoundingClientRect().height,T=document.querySelector(".userNameWidgetHolder").getBoundingClientRect().height,E=G+T*2,se=(P-E)/2+E;N.style.top=`${se}px`}const[i,p]=Q(-1),[a,u]=Q([]),b=new Audio(ho);let w=!1;Ye(()=>{s=[...n()],r(),window.addEventListener("resize",()=>{r()}),document.addEventListener("boardUpdated",async P=>{p(c().length-1),w=!1,s=[...n()],console.log(n()),console.log(s),document.possiblePieces=s,document.allPieces=n})});async function $(P){return new Promise(N=>setTimeout(N,P))}async function D(P,N=!0){let S=document.getElementById(P.to)?.querySelector(".piece"),V=document.getElementById(P.to),G=document.getElementById(P.from),R=V?.getBoundingClientRect(),W={x:R?.x+R?.width/2,y:R?.y+R?.height/2},T=G?.getBoundingClientRect(),E={x:T?.x+T?.width/2,y:T?.y+T?.height/2},se={x:E.x-W.x,y:E.y-W.y},be=Math.sqrt(se.x**2+se.y**2),de={x:se.x/be,y:se.y/be};if(!!S){for(let ee=0;ee<be;ee++)S.style.transform=`translate(${de.x*ee}px, ${de.y*ee}px)`,ee%20===0&&N?await $(.001):ee%200===0&&await $(.001);if(console.log("in reverse move function",P),P.crowning){S.classList.remove(P.crownedTo),P.turnColor==="white"?S.classList.add("P"):S.classList.add("p");let ee=new zr(S.id,P.crownedTo);u([...a(),ee])}if(G?.appendChild(S),P.atePiece!=""&&!P.enPassant){let ee=P.atePiece;P.turnColor==="white"&&(ee=ee.toLowerCase()),P.turnColor==="black"&&(ee=ee.toUpperCase());let ye;for(let ge=0;ge<s.length;ge++)if(s[ge].classList.contains(ee)){ye=s[ge],s.splice(ge,1);break}if(!ye){S.style.transform="translate(0.1px, 0.1px)",console.log("could not find piece");return}V?.appendChild(ye)}if(S.style.transform="translate(0.1px, 0.1px)",P.enPassant){let ee=document.createElement("section");ee.classList.add("piece"),P.turnColor==="black"?ee.classList.add(P.atePiece.toUpperCase()):ee.classList.add(P.atePiece.toLowerCase()),document.getElementById(P.enPassantSquare)?.appendChild(ee)}N&&b.play()}}async function B(P,N=!0,S=!1){let V=P,G=document.querySelectorAll(".chessSquare");for(let me=0;me<G.length;me++)G[me].id===V.from||G[me].id===V.to?G[me]?.classList?.add("lastMove"):G[me]?.classList?.remove("lastMove");let R=document.getElementById(P.from)?.querySelector(".piece"),W=document.getElementById(P.from),T=document.getElementById(P.to),E=W?.getBoundingClientRect(),se={x:E?.x+E?.width/2,y:E?.y+E?.height/2},be=T?.getBoundingClientRect(),de={x:be?.x+be?.width/2,y:be?.y+be?.height/2},ee={x:de.x-se.x,y:de.y-se.y},ye=Math.sqrt(ee.x**2+ee.y**2),ge={x:ee.x/ye,y:ee.y/ye};try{for(let me=0;me<ye;me++)R.style.transform=`translate(${ge.x*me}px, ${ge.y*me}px)`,me%15===0&&N&&!S?await $(1):me%200===0&&!S&&await $(1);P.crowning&&(R.classList.remove("p"),R.classList.remove("P"),R.classList.add(P.crownedTo)),T?.querySelector(".piece")&&(s.push(T?.querySelector(".piece")),T?.querySelector(".piece")?.remove()),T?.appendChild(R),R.style.transform="translate(0.1px, 0.1px)",P.enPassant&&document.getElementById(P.enPassantSquare)?.querySelector(".piece")?.remove(),N&&b.play()}catch(me){console.log(me)}}async function k(){for(let P=i();P>-1;P--)await H(!1);b.play()}async function H(P=!0){if(w=!0,c().length===0){w=!1;return}if(i()===-1){w=!1;return}await D(c()[i()],P);let N=c()[i()-1];if(N!=null){let S=document.querySelectorAll(".chessSquare");for(let V=0;V<S.length;V++)S[V].id===N.from||S[V].id===N.to?S[V]?.classList?.add("lastMove"):S[V]?.classList?.remove("lastMove")}else{let S=document.querySelectorAll(".chessSquare");for(let V=0;V<S.length;V++)S[V]?.classList?.remove("lastMove")}if(c()[i()]?.castle){let S=c()[i()].to,V;switch(S){case"g1":V=document.getElementById("f1")?.querySelector(".piece"),document.getElementById("h1")?.appendChild(V);break;case"c1":V=document.getElementById("d1")?.querySelector(".piece"),document.getElementById("a1")?.appendChild(V);break;case"g8":V=document.getElementById("f8")?.querySelector(".piece"),document.getElementById("h8")?.appendChild(V);break;case"c8":V=document.getElementById("d8")?.querySelector(".piece"),document.getElementById("a8")?.appendChild(V)}}p(i()-1),w=!1}async function K(P=!0,N=!1){if(w=!0,c().length===0){w=!1;return}if(i()===c().length-1){w=!1;return}if(await B(c()[i()+1],P,N),p(i()+1),c()[i()]?.castle){let S=c()[i()].to,V;switch(S){case"g1":V=document.getElementById("h1")?.querySelector(".piece"),document.getElementById("f1")?.appendChild(V);break;case"c1":V=document.getElementById("a1")?.querySelector(".piece"),document.getElementById("d1")?.appendChild(V);break;case"g8":V=document.getElementById("h8")?.querySelector(".piece"),document.getElementById("f8")?.appendChild(V);break;case"c8":V=document.getElementById("a8")?.querySelector(".piece"),document.getElementById("d8")?.appendChild(V)}}w=!1}async function F(P=!1){for(let N=i();N<c().length-1;N++)await K(!1,P);b.play()}return(()=>{const P=Yr.cloneNode(!0),N=P.firstChild,S=N.nextSibling,V=S.nextSibling,G=V.nextSibling;return N.$$click=async()=>{w===!1&&k()},S.$$click=async()=>{w===!1&&H()},V.$$click=async()=>{w===!1&&K()},G.$$click=async()=>{w===!1&&F()},P})()}Nt(["click"]);const Jr=Ie('<div class="userNameWidgetHolder user"><div class="userNameWidget"><div class="userName"></div></div></div>');function fo({user:c,color:n,board:t,moves:s,allPieces:r,setAllPieces:i}){function p(){let b=document.querySelector(".chessBoard").getBoundingClientRect().height,w=window.innerHeight,$=document.querySelector(".userNameWidgetHolder.user");$.getBoundingClientRect(),$.style.top=`${b+(w-b)/2}px`}return Ye(()=>{p(),window.addEventListener("resize",()=>{p()})}),[(()=>{const a=Jr.cloneNode(!0),u=a.firstChild,b=u.firstChild;return Se(b,()=>c()?.username||"404 not found"),Se(u,X(Rn,{get catLink(){return nt(()=>!!c()?.CatUrl)()?c()?.CatUrl:"https://cdn2.thecatapi.com/images/dt5.jpg"}}),null),Se(a,X(uo,{color:n,board:t}),null),a})(),X(Xr,{moves:s,allPieces:r,setAllPieces:i})]}const Zr=Ie('<div class="userNameWidgetHolder opponent"><div class="userNameWidget"><div class="userName"></div></div></div>');function po({opponent:c,color:n,board:t}){function s(){let p=document.querySelector(".chessBoard").getBoundingClientRect().height,a=window.innerHeight,u=document.querySelector(".userNameWidgetHolder.opponent"),w=u.getBoundingClientRect().height;u.style.top=`${(a-p)/2-w}px`}return Ye(()=>{s(),window.addEventListener("resize",()=>{s()})}),(()=>{const r=Zr.cloneNode(!0),i=r.firstChild,p=i.firstChild;return Se(p,()=>c()?.username||"404 not found"),Se(i,X(Rn,{get catLink(){return nt(()=>!!c()?.CatUrl)()?c()?.CatUrl:"https://cdn2.thecatapi.com/images/dt5.jpg"}}),null),Se(r,X(uo,{color:n,board:t}),null),r})()}const el=Ie('<div><div class="chessInlaySquare" id="queenSelection"><div class="piece Q"></div></div><div class="chessInlaySquare" id="knightSelection"><div class="piece N"></div></div><div class="chessInlaySquare" id="rookSelection"><div class="piece R"></div></div><div class="chessInlaySquare" id="bishopSelection"><div class="piece B"></div></div></div>'),tl=Ie('<div class="chessBoard"></div>');let nl=new ro;nl.runAllTests();function il({board:c,updateBoard:n,setLastMove:t,lastMove:s,movePieceSound:r,capturePieceSound:i,setMoves:p,moves:a,user:u,opponent:b,inGame:w,allPieces:$,setAllPieces:D}){c().displayBoard();let B=k();function k(){let W=[];for(let T=0;T<8;T++)for(let E=0;E<8;E++)W.push(`${String.fromCharCode(97+E)}${8-T}`);return W}let H=[];const[K,F]=Q(!1),[P,N]=Q("00"),[S,V]=Q("");P()+"";async function G(W){V(W),F(!1);let T=a()[a().length-1];T.crownedTo=W.toLowerCase();let E=a().splice(0,a().length-1);E.push(T),p(E);let se=c().getPieceAtBoardIndex(parseInt(P())),be=se.type;se.type=W.toLowerCase(),c().board[parseInt(P())]=W,c().fen=c().boardToFen(),console.log(se);let de=document.getElementById(se.position.position)?.children[0];console.log("previous type:"+be),de?.classList.remove(be.toUpperCase()),de?.classList.add(W.toUpperCase()),await R(10),n()}function R(W){return new Promise(T=>setTimeout(T,W))}return[X(qe,{get when(){return w()},get children(){return X(po,{opponent:b,color:"black",board:c})}}),(()=>{const W=tl.cloneNode(!0);return Se(W,X(ao,{get children(){return[X(qe,{get when(){return K()},get children(){const T=el.cloneNode(!0),E=T.firstChild,se=E.nextSibling,be=se.nextSibling,de=be.nextSibling;return E.$$click=()=>G("Q"),se.$$click=()=>G("N"),be.$$click=()=>G("R"),de.$$click=()=>G("B"),ht(()=>rn(T,`chessInlay ml-[${P()}]`)),T}}),X($n,{get each(){return c().board},children:(T,E)=>X(co,{get style(){return E()},get pieceClassName(){return c().board[E()]},get className(){return`chessSquare ${E()%16<8?E()%2==0?"lighterBackground":"":E()%2==0?"":"lighterBackground"}`},get id(){return B[E()]},board:c,updateBoard:n,get draggableId(){return sl()},eatenPieces:H,setDisplayInlay:F,setDisplayInlayX:N,inlaySelection:S,displayInlay:K,color:"white",setLastMove:t,lastMove:s,movePieceSound:r,capturePieceSound:i,setMoves:p,moves:a,allPieces:$,setAllPieces:D})})]}})),W})(),X(qe,{get when(){return w()},get children(){return X(fo,{user:u,color:"white",board:c,moves:a,allPieces:$,setAllPieces:D})}})]}function sl(){return Math.random().toString(36).substr(2,9)}Nt(["click"]);const ol=Ie('<div><div class="chessInlaySquare" id="queenSelection"><div class="piece q"></div></div><div class="chessInlaySquare" id="knightSelection"><div class="piece n"></div></div><div class="chessInlaySquare" id="rookSelection"><div class="piece r"></div></div><div class="chessInlaySquare" id="bishopSelection"><div class="piece b"></div></div></div>'),rl=Ie('<div class="chessBoard"></div>');let ll=new ro;ll.runAllTests();function al({board:c,updateBlackBoard:n,setLastMove:t,lastMove:s,movePieceSound:r,capturePieceSound:i,setMoves:p,moves:a,user:u,opponent:b,inGame:w,allPieces:$,setAllPieces:D}){c().displayBoard();let B=k();function k(){let W=[];for(let T=0;T<8;T++)for(let E=0;E<8;E++)W.push(`${String.fromCharCode(97+E)}${8-T}`);return W}let H=[];const[K,F]=Q(!1),[P,N]=Q("00"),[S,V]=Q("");async function G(W){V(W),F(!1);let T=a()[a().length-1];T.crownedTo=W.toLowerCase();let E=a().splice(0,a().length-1);E.push(T),p(E);let se=c().getPieceAtBoardIndex(63-(7-parseInt(P()))),be=se.type;console.log(se),se.type=W,c().board[63-(7-parseInt(P()))]=W,c().fen=c().boardToFen(),console.log(se);let de=document.getElementById(se.position.position)?.children[0];console.log("previous type:"+be),de?.classList.remove(be),de?.classList.add(W),await R(10),n()}function R(W){return new Promise(T=>setTimeout(T,W))}return[X(qe,{get when(){return w()},get children(){return X(po,{opponent:b,color:"white",board:c})}}),(()=>{const W=rl.cloneNode(!0);return Se(W,X(ao,{get children(){return[X(qe,{get when(){return K()},get children(){const T=ol.cloneNode(!0),E=T.firstChild,se=E.nextSibling,be=se.nextSibling,de=be.nextSibling;return E.$$click=()=>G("q"),se.$$click=()=>G("n"),be.$$click=()=>G("r"),de.$$click=()=>G("b"),ht(()=>rn(T,`chessInlay ml-[${7-parseInt(P())}]`)),T}}),X($n,{get each(){return c().board},children:(T,E)=>X(co,{get style(){return E()},get pieceClassName(){return c().board[c().board.length-1-E()]},get className(){return`chessSquare ${(c().board.length-1-E())%16<8?(c().board.length-1-E())%2==0?"lighterBackground":"":(c().board.length-1-E())%2==0?"":"lighterBackground"}`},get id(){return B[c().board.length-1-E()]},board:c,updateBoard:n,get draggableId(){return cl()},eatenPieces:H,setDisplayInlay:F,setDisplayInlayX:N,inlaySelection:S,displayInlay:K,color:"black",setLastMove:t,lastMove:s,movePieceSound:r,capturePieceSound:i,setMoves:p,moves:a,allPieces:$,setAllPieces:D})})]}})),W})(),X(qe,{get when(){return w()},get children(){return X(fo,{user:u,color:"black",board:c,moves:a,allPieces:$,setAllPieces:D})}})]}function cl(){return Math.random().toString(36).substr(2,9)}Nt(["click"]);const dl=Ie(`<div class="glassOverlay"><label for="username">Choose your username</label><div class="userNameInput"><input type="username" placeholder="username" id="userNameInput"></div><button class="submitUsernameButton">LET'S GO<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 arrow"><path stroke-linecap="round" stroke-linejoin="round" d="M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"></path></svg></button></div>`),ul=({user:c,setUser:n,setInSession:t,chessWebSocket:s})=>{let r="";const[i,p]=Q(""),a=async()=>{if(r===""){alert("Please enter a username");return}if(r.length>10&&(r=r.slice(0,10)),r===c()?.username){let w=new on(Gs(),r,i());sessionStorage.setItem("gabrielmalek/chess.data",JSON.stringify({id:w.id,username:w.username,CatUrl:w.CatUrl})),localStorage.setItem("gabrielmalek/chess.data",JSON.stringify({id:w.id,username:w.username,CatUrl:w.CatUrl})),n(w),t(!0),s.beginPinging(c);return}let b=new on(Gs(),r,i());n(b),console.log(),s.beginPinging(c),console.log(b,b.id),s.pingWebSocket(b),sessionStorage.setItem("gabrielmalek/chess.data",JSON.stringify({id:b.id,username:b.username,CatUrl:b.CatUrl})),localStorage.setItem("gabrielmalek/chess.data",JSON.stringify({id:b.id,username:b.username,CatUrl:b.CatUrl})),t(!0)};async function u(){return(await(await fetch("https://api.thecatapi.com/v1/images/search")).json())[0].url}return Ye(()=>{document.addEventListener("keyup",function(w){w.key==="Enter"&&a()});let b=document.getElementById("userNameInput");b?.focus(),console.log(c()?.username),c()?.username!==void 0&&(b.value=c()?.username,r=b.value),u().then(w=>{p(w)})}),(()=>{const b=dl.cloneNode(!0),w=b.firstChild,$=w.nextSibling,D=$.firstChild,B=$.nextSibling;return D.$$keyup=k=>r=k.currentTarget.value,B.$$click=()=>a(),b})()};function Gs(){let c="";for(let n=0;n<20;n++)c+=Math.floor(Math.random()*10);return c}Nt(["keyup","click"]);const hl=Ie('<div class="bellContainer"><div class="dropdown"><button class="bellIcon" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="dropdownMenuButton"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16"><path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0M3.124 7.5A8.969 8.969 0 015.292 3m13.416 0a8.969 8.969 0 012.168 4.5"></path></svg></button><div class="dropdown-menu" aria-labelledby="dropdownMenuButton"></div></div></div>');function fl({onClick:c,notifications:n}){return c=()=>{console.log("bell clicked"),console.log(n());let t=document.querySelector(".dropdown-menu");console.log(t),t.style.display=="block"?t.style.display="none":t.style.display="block",t.innerHTML="";for(let s=0;s<n().length;s++){let r=document.createElement("div"),i=document.createElement("div"),p=document.createElement("div");p.classList.add("username"),p.innerText=n()[s].from.username,r.classList.add("dropdown-item"),r.id=n()[s].from.id,i.classList.add("text"),i.classList.add("notificationText"),i.appendChild(p),i.innerHTML="\u{1F514}&nbsp"+i.innerHTML+"&nbsp wants to play ",r.appendChild(i),t.appendChild(r),console.log(r,"hi")}},Ye(()=>{document.addEventListener("click",function(t){let s=document.querySelector(".dropdown-menu"),r=document.querySelector(".bellIcon"),i=t.target;do{if(i==r)return;i=i.parentNode}while(i);s.style.display="none"})}),(()=>{const t=hl.cloneNode(!0),s=t.firstChild,r=s.firstChild;return Lr(r,"click",c,!0),t})()}Nt(["click"]);const pl=Ie('<div class="glassOverlay"><ul class="list"><li class="listItem" id="mainUser"><div class="text"></div></li></ul></div>'),gl=Ie('<div class="absolute left-3 text-red-500">Notification sent!</div>'),ml=Ie('<div class="modal fade " id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"><div class="modal-dialog absolute top-[39vh] left-1/ "><div class="modal-content w-[50px] "><div class="modal-header"><h1 class="modal-title fs-5" id="exampleModalLabel">Play Chess with </h1><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body">Play online with this player right now!</div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button><button type="button" class="btn btn-primary">Play Chess</button></div></div></div></div>'),vl=Ie('<li class="listItem" data-bs-toggle="modal" data-bs-target="#exampleModal"><div class="text"></div></li>');function wl({users:c,user:n,setNotificationUser:t,onNotificationReceived:s,chessWebSocket:r}){const[i,p]=Q(),[a,u]=Q(!1),[b,w]=Q([]),[$,D]=Q([]),[B,k]=Q(!1);Ye(()=>{document.addEventListener("notification",F=>{console.log("notification event received");const P=JSON.parse(F.data);if(s(P),P.type!="promptForGame")return;t(P.from),console.log("notification received:",P);for(let S=0;S<b().length;S++)if(b()[S].from.id==P.from.id)return;let N=b();N.push(P),w(N),k(!0)})});function H(F){p(F),document.getElementById("exampleModal")?.style.setProperty("display","flex")}async function K(F){for(let N=0;N<$().length;N++)if($()[N].to.id==F.to.id)return;let P=$();P.push(F),D(P),r.sendNotification(F)}return[X(qe,{get when(){return B()},get children(){return X(fl,{notifications:b,onClick:()=>{}})}}),(()=>{const F=pl.cloneNode(!0),P=F.firstChild,N=P.firstChild,S=N.firstChild;return Se(S,()=>n().username),Se(N,X(Rn,{get catLink(){return n().CatUrl}}),null),Se(P,X($n,{get each(){return c()},children:V=>(()=>{const G=vl.cloneNode(!0),R=G.firstChild;return G.$$click=()=>H(V),Se(R,()=>V.username),Se(G,X(Rn,{get catLink(){return V.CatUrl}}),null),ht(()=>Nn(G,"id",V.id)),G})()}),null),F})(),(()=>{const F=ml.cloneNode(!0),P=F.firstChild,N=P.firstChild,S=N.firstChild,V=S.firstChild;V.firstChild;const G=S.nextSibling,R=G.nextSibling,W=R.firstChild,T=W.nextSibling;return Se(V,(()=>{const E=nt(()=>i()!=null);return()=>E()?`${i()?.username}`:""})(),null),Se(R,X(qe,{get when(){return a()},get children(){return gl.cloneNode(!0)}}),W),T.$$click=()=>{let E=new Rr(n(),i(),"promptForGame");K(E),a()==!1&&u(!0)},F})()]}Nt(["click"]);const bl=""+new URL("capture.7158a77f.mp3",import.meta.url).href,yl=Ie('<div class="canvas-container"><canvas id="canvas"></canvas></div>');function _l({}){return Ye(()=>{const c=document.getElementById("canvas"),n=c.getContext("2d");c.width=window.innerWidth,c.height=window.innerHeight;const t=300,s=8;let r=[8,18,51],i=[.5,1];class p{constructor(k,H,K,F,P){this.x=k,this.y=H,this.speed_x=K,this.speed_y=F,this.radius=P,this.color="rgb(255, 255, 255, .2)"}update(){this.x+=this.speed_x,this.y+=this.speed_y,(this.x+this.radius>c.width||this.x-this.radius<0)&&(this.speed_x*=-1),(this.y+this.radius>c.height||this.y-this.radius<0)&&(this.speed_y*=-1),this.handleCollisions()}handleCollisions(){for(const k of a)if(k!==this){const H=k.x-this.x,K=k.y-this.y,F=Math.sqrt(H**2+K**2);if(F<2*this.radius){const P=2*this.radius-F,N=Math.atan2(K,H);this.x-=.5*P*Math.cos(N),this.y-=.5*P*Math.sin(N);const S=Math.atan2(K,H),V=Math.atan2(this.speed_y,this.speed_x),G=Math.sqrt(this.speed_x**2+this.speed_y**2),R=Math.sqrt(k.speed_x**2+k.speed_y**2),W=(G*Math.cos(V-S)*(this.radius-k.radius)+2*k.radius*R*Math.cos(S))/(this.radius+k.radius),T=(G*Math.sin(V-S)*(this.radius-k.radius)+2*k.radius*R*Math.sin(S))/(this.radius+k.radius),E=(R*Math.cos(S-V)*(k.radius-this.radius)+2*this.radius*G*Math.cos(S))/(this.radius+k.radius),se=(R*Math.sin(S-V)*(k.radius-this.radius)+2*this.radius*G*Math.sin(S))/(this.radius+k.radius);this.speed_x=W,this.speed_y=T,k.speed_x=E,k.speed_y=se}}}draw(k){k.beginPath(),k.arc(this.x,this.y,this.radius,0,Math.PI*2),k.fillStyle=this.color,k.fill(),k.closePath()}}const a=[];for(let B=0;B<t;B++){const k=b(s,c.width-s),H=b(s,c.height-s),K=w(...i)*$(),F=w(...i)*$(),P=new p(k,H,K,F,s);a.push(P)}function u(){requestAnimationFrame(u),n.fillStyle=`rgb(${r[0]}, ${r[1]}, ${r[2]})`,n.fillRect(0,0,c.width,c.height);for(const B of a)B.update(),B.draw(n)}u();function b(B,k){return Math.floor(Math.random()*(k-B+1))+B}function w(B,k){return Math.random()*(k-B)+B}function $(){return Math.random()<.5?-1:1}window.addEventListener("resize",()=>{console.log("resize");let B=window.innerWidth,k=window.innerHeight;c.width=B,c.height=k;for(const H of a)H.x=D(H.x,B,H.radius),H.y=D(H.y,k,H.radius)});function D(B,k,H){return Math.min(Math.max(B,H),k-H)}}),yl.cloneNode(!0)}class Pl{url="wss://gabrielmalek.com/v1/api/chessSub";ws;setWS;pingsSinceResponse=0;board;setBoard;setUser;user;pings=0;crownedIndex=-1;moves;setMoves;constructor(n,t,s,r,i,p){this.board=n,this.setBoard=t,this.setUser=r,this.user=s;let[a,u]=Q(this.createWS(this.url));this.ws=a,console.log("ws",this.ws()),this.setWS=u,this.createListeners(),this.moves=i,this.setMoves=p}sendChessUpdate(n,t,s,r){let i=new Fr(n.fen,t,s,n.currentTurnColor,r);this.ws().send(JSON.stringify(i))}unloadWebSockets(){window.onbeforeunload=()=>{this.ws().close()}}createWS(n){return new WebSocket(n)}pingWebSocket(n){if(this.ws().readyState!=3&&this.ws().readyState===1){if(this.pings<-10&&(this.pings=0),this.pings>5){this.ws().close(),this.pings=0;return}this.pings++,this.ws().send(JSON.stringify(n))}}beginPinging(n){setInterval(()=>{this.pingWebSocket(n())},3e3)}reconnectWebSocket(){this.setWS(this.createWS(this.url)),this.createListeners()}createListeners(){this.ws().addEventListener("open",()=>{console.log("ws open")}),this.ws().addEventListener("close",()=>{console.log("ws closed"),this.reconnectWebSocket()}),this.ws().addEventListener("message",async n=>{this.pings--;let t=JSON.parse(n.data);if(t.users){this.pingsSinceResponse--;let s=new CustomEvent("usersUpdated");s.data=t.users,document.dispatchEvent(s)}if(t.type==="promptForGame"||t.type=="createGame"){let s=new CustomEvent("notification");s.data=t,document.dispatchEvent(s)}if(t.type==="chessGameUpdate"&&(await this.sleep(100),console.log("chess game update",t),t.fen!=this.board().fen)){console.log(t.fen,"vs",this.board().fen);let s=new pe(void 0,t.fen);console.log("new board",s),this.board().fen=t.fen,this.board().board=s.board,this.board().currentTurnColor=s.currentTurnColor,this.board().capturedPieces=s.capturedPieces,this.board().Pieces=s.Pieces,this.board().checkMate=s.checkMate,this.board().enPassantTargetSquare=s.enPassantTargetSquare,this.board().halfMoveClock=s.halfMoveClock,this.board().fullMoveNumber=s.fullMoveNumber,this.board().inCheck=s.inCheck,this.board().legalMoves=s.legalMoves,this.mergeMoves(t.moves);let r=this.moves()[this.moves().length-1],i=document.querySelectorAll(".chessSquare");for(let u=0;u<i.length;u++)i[u].id===r.from||i[u].id===r.to?i[u]?.classList?.add("lastMove"):i[u]?.classList?.remove("lastMove");let p=new CustomEvent("forceBoardUpdate");if(document.dispatchEvent(p),this.pawnsAtEndOfBoard()){let u=new CustomEvent("crowned");u.data=s,document.dispatchEvent(u)}}})}mergeMoves(n){let t=[...this.moves()];for(let s=0;s<n.length;s++){let r=!1;for(let i=0;i<this.moves().length;i++)if(n[s].from===this.moves()[i].from&&n[s].to===this.moves()[i].to){r=!0,n[s].crowning&&!this.moves()[i].crowning&&(t[i].crowning=!0,t[i].crownedTo=n[s].crownedTo);break}r||t.push(n[s])}console.log("new moves",t),console.log(t.length,"vs",this.moves().length,"vs",n.length),this.setMoves(t)}async sleep(n){return new Promise(t=>setTimeout(t,n))}sendNotification(n){this.ws().send(JSON.stringify(n))}pawnsAtEndOfBoard(){let n=[],t=[];for(let s=0;s<8;s++)this.board().board[s]==="P"&&(n.push(this.board().board[s]),this.crownedIndex=s);for(let s=56;s<64;s++)this.board().board[s]==="p"&&(t.push(this.board().board[s]),this.crownedIndex=s);return n.length>0||t.length>0}close(){this.ws().close()}generateUserid(){let n="";for(let t=0;t<20;t++)n+=Math.floor(Math.random()*10);return n}}class Ys{ws;initialized=!1;virtualCursor;self;opponent;constructor(n,t,s){this.ws=n,this.virtualCursor=this.createVirtualCursor(),this.self=t,this.opponent=s}init(){this.initialized=!0,this.catchWedSocketEvents(),this.sendMouseEvents()}catchWedSocketEvents(){this.ws().addEventListener("message",n=>{if(JSON.parse(n.data).type!="virtualMouseEvent")return;let s=JSON.parse(n.data);this.triggerVirtualMouseEvent(s)}),this.ws().addEventListener("close",async()=>{await this.sleep(1e3),this.catchWedSocketEvents()})}triggerVirtualMouseEvent(n){let t,s,r,i;switch(n.eventType){case"pointermove":s=this.setVirtualPosition(n),t=new Event("virtualpointermove"),t.clientX=s.x,t.clientY=s.y,document.dispatchEvent(t);break;case"pointerdown":if(s=this.setVirtualPosition(n),r=document.elementsFromPoint(s.x,s.y),i=r[1],i.classList.contains("canDrag"))return;t=new Event("virtualpointerdown"),t.clientX=s.x,t.clientY=s.y,i.dispatchEvent(t),document.dispatchEvent(t),this.virtualCursor.style.backgroundColor="rgba(255, 0, 0, 0.541)";break;case"pointerup":t=new Event("virtualpointerup"),document.dispatchEvent(t),this.virtualCursor.style.backgroundColor="rgba(255, 0, 0, 0)";break}}sendMouseEvents(){let n=document.querySelector(".chessBoard");document.addEventListener("pointermove",t=>{if(!this.initialized)return;let s=n?.offsetWidth,r=new Vn(t.clientX,t.clientY),i=new fi(this.self,this.opponent,r,s,"pointermove");this.ws().send(JSON.stringify(i))}),document.addEventListener("pointerdown",t=>{let s=n?.offsetWidth,r=new Vn(t.clientX,t.clientY),i=new fi(this.self,this.opponent,r,s,"pointerdown");this.ws().send(JSON.stringify(i))}),document.addEventListener("pointerup",t=>{let s=n?.offsetWidth,r=new Vn(t.clientX,t.clientY),i=new fi(this.self,this.opponent,r,s,"pointerup");this.ws().send(JSON.stringify(i))})}setVirtualPosition(n){let t=document.querySelector(".oponentsCursor"),s=window.innerWidth,r=window.innerHeight,i=n.position.x,p=n.position.y,a=n.screen.x/2,u=n.screen.y/2,b=i-a,w=p-u,$=s/2,D=r/2,B=document.querySelector(".chessBoard").offsetWidth,k=B,H=B/n.chessBoardWidth,K=k/n.chessBoardWidth,F=b*H,P=w*K;$=window.innerWidth/2,D=window.innerHeight/2;let N=$-F,S=D-P;return t.style.transform=`translate(${N-this.cursorWidth/2}px, ${S-this.cursorWidth/2}px)`,{x:N,y:S}}createVirtualCursor(){let n=document.createElement("div");return n.classList.add("oponentsCursor"),document.body.appendChild(n),this.cursorWidth=n.offsetHeight,n}async sleep(n){return new Promise(t=>setTimeout(t,n))}}const xl=Ie('<div id="notificationButton" data-bs-toggle="modal" data-bs-target="#notificationModal"></div>'),Al=Ie(`<div class="modal fade " id="notificationModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"><div class="modal-dialog absolute top-[39vh] left-1/ "><div class="modal-content w-[50px] "><div class="modal-header"><h1 class="modal-title fs-5" id="exampleModalLabel">Play Chess with "<!>"</h1><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body">You've recieved a notification from "<!>" to play chess. Do you accept?</div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button><button type="button" class="btn btn-primary">Play Chess</button></div></div></div></div>`);function Cl({}){const c=new Audio(ho),n=new Audio(bl),[t,s]=Q(new pe),[r,i]=Q(!1),[p,a]=Q(""),[u,b]=Q([]),[w,$]=Q();Q(!1);const[D,B]=Q([]),[k,H]=Q(),[K,F]=Q(),[P,N]=Q([]),[S,V]=Q(!1),[G,R]=Q(),[W,T]=Q(null),E=new Pl(t,s,k,H,D,B);Js(()=>{E.ws()&&E.close()}),Ye(async()=>{window.users=P,ee(),se(),document.addEventListener("mousedown",x=>de(x)),document.ws=E.ws()});function se(){document.addEventListener("usersUpdated",x=>{let M=x.data.filter(ue=>k().id!=ue.id);N([...M])}),document.addEventListener("notification",x=>{_e(x.data)}),document.addEventListener("updateUser",x=>{let M=document.querySelector("#mainUser");M.querySelector(".catLogo").style.backgroundImage="nothing"}),document.addEventListener("updateBoard",x=>{me(x.data)}),document.addEventListener("crowned",x=>{console.log("listened to crowned event"),console.log("event data",x.data),be(x.data)}),document.addEventListener("forceBoardUpdate",x=>{ye(),c.play()})}function be(x){console.log("crowned event received",x);let M=E.crownedIndex;console.log("crowned index",M);let ue=t().getPieceAtBoardIndex(M);console.log("crowned pawn",ue);let oe=ue.type;console.log("previous type",oe);let j=x.board[M];console.log("new piece type",j);let J=j.toLowerCase();ue.type=J,t().board[M]=j;let ve=document.getElementById(ue.position.position)?.children[0];ve?.classList.remove(oe),ve?.classList.add(j);let he=D()[D().length-1];he.crownedTo=j,he.crowning=!0;let Me=D().splice(0,D().length-1);Me.push(he),B(Me),ye()}function de(x){x.detail>1&&x.preventDefault()}async function ee(){let x=sessionStorage.getItem("gabrielmalek/chess.data"),M=JSON.parse(x);if(x==null)console.log("session storage null");else{console.log("session storage not null");let ue=new on(M.id,M.username,M.CatUrl);H(ue),V(!0),E.beginPinging(k),console.log("should be pinging");return}if(x=localStorage.getItem("gabrielmalek/chess.data"),M=JSON.parse(x),x==null)console.log("local storage null");else{let ue=new on(M.id,M.username,M.CatUrl);if(ue.username==""||ue.username==null)return;H(ue),V(!1)}}async function ye(){let x=document.querySelectorAll(".chessSquare"),M=[];if(M.push(...document.querySelectorAll("section.piece")),M.push(...u()),p()=="white"){for(let j=0;j<M.length;j++)M[j].remove();let oe=[];for(let j=0;j<t().board.length;j++)if(t().board[j]!=" "){for(let J=0;J<M.length;J++)if(M[J].classList.contains(t().board[j])&&!oe.includes(J)){x[j].appendChild(M[J]),oe.push(J);break}}for(let j=0;j<t().board.length;j++){let J=x[j]?.querySelector(".piece");if(J!=null&&t().board[j]!=" "){if(!J.classList.contains(t().board[j])){console.log("something is funky"),console.log("piece",J),console.log("board",t().board[j]);break}}else if(J==null&&t().board[j]!=" "){console.log("something is funky"),console.log("piece",J),console.log("board",t().board[j]);for(let ve=0;ve<M.length;ve++)if((M[ve].classList.contains("p")||M[ve].classList.contains("P"))&&!oe.includes(ve)){console.log("found piece",M[ve]);let he=M[ve];he.classList.contains("p")?(he.classList.remove("p"),he.classList.add(t().board[j])):(he.classList.remove("P"),he.classList.add(t().board[j])),x[j].appendChild(he)}break}}}else if(p()=="black"){for(let J=0;J<M.length;J++)M[J].remove();let oe=[],j=0;for(let J=t().board.length-1;J>=0;J--){if(t().board[J]!=" "){for(let ve=0;ve<M.length;ve++)if(M[ve].classList.contains(t().board[J])&&!oe.includes(ve)){x[j].appendChild(M[ve]),oe.push(ve);break}}j++}j=0;for(let J=t().board.length-1;J>=0;J--){let ve=x[j]?.querySelector(".piece");if(ve!=null&&t().board[J]!=" "){if(!ve.classList.contains(t().board[J]))break}else if(ve==null&&t().board[J]!=" "){for(let he=0;he<M.length;he++)if((M[he].classList.contains("p")||M[he].classList.contains("P"))&&!oe.includes(he)){let Me=M[he];Me.classList.contains("p")?(Me.classList.remove("p"),Me.classList.add(t().board[J])):(Me.classList.remove("P"),Me.classList.add(t().board[J])),x[j].appendChild(Me)}break}j++}}let ue=new Event("boardUpdated");document.dispatchEvent(ue),ge()}function ge(){t().findLegalMoves(t());let x=t().isInCheck(t()),M=document.querySelector(".checked");if(M?.classList.remove("checked"),x){for(let ue=0;ue<t().Pieces.length;ue++)if(t().Pieces[ue].type=="k"&&t().Pieces[ue].color==t().currentTurnColor){console.log("made it here");let oe=t().Pieces[ue];console.log("king",oe),console.log("king position",oe.getPosition());let j=document.getElementById(oe.getPosition());console.log("UIKingSquare",j),j?.classList.add("checked")}}}async function me(x){if(x===void 0){console.log("DATA",x),await ye(),E.sendChessUpdate(t(),k(),K(),D());return}}function _e(x){T(x),x.type=="promptForGame"?(T(x),document.querySelector("#notificationButton").click()):x.type=="createGame"?(T(x),a(x.fromUserColor),F(x.to),i(!0),new Ys(E.ws,k(),x.to).init(),v()):x.type=="position"}async function ie(x){console.log("we must create a game");let M=new qr(x.from,x.to);try{E.ws().send(JSON.stringify(M)),a(M.fromUserColor==="white"?"black":"white"),console.log("oppoent",x.from);let ue=new on(x.from.id,x.from.username,x.from.CatUrl);F(x.from),i(!0),new Ys(E.ws,k(),x.from).init(),v()}catch(ue){console.log("error: ",ue)}}function v(){let x=document.querySelector(".modal-backdrop ");x?.remove()}return[X(_l,{}),X(qe,{get when(){return nt(()=>!S())()&&r()==!1},get children(){return X(ul,{user:k,setUser:H,setInSession:V,chessWebSocket:E})}}),X(qe,{get when(){return nt(()=>!!S())()&&r()==!1},get children(){return X(wl,{users:P,user:k,setNotificationUser:R,onNotificationReceived:_e,chessWebSocket:E})}}),X(qe,{get when(){return nt(()=>p()=="white")()&&r()==!0},get children(){return X(il,{board:t,updateBoard:me,setLastMove:$,lastMove:w,movePieceSound:c,capturePieceSound:n,setMoves:B,moves:D,user:k,opponent:K,inGame:r,allPieces:u,setAllPieces:b})}}),X(qe,{get when(){return r()==!1||p()=="black"&&r()==!0},get children(){return X(al,{board:t,updateBlackBoard:me,setLastMove:$,lastMove:w,movePieceSound:c,capturePieceSound:n,setMoves:B,moves:D,user:k,opponent:K,inGame:r,allPieces:u,setAllPieces:b})}}),X(qe,{get when(){return r()==!1},get children(){return[xl.cloneNode(!0),(()=>{const x=Al.cloneNode(!0),M=x.firstChild,ue=M.firstChild,oe=ue.firstChild,j=oe.firstChild,J=j.firstChild,ve=J.nextSibling;ve.nextSibling;const he=oe.nextSibling,Me=he.firstChild,it=Me.nextSibling;it.nextSibling;const kt=he.nextSibling,rt=kt.firstChild,Z=rt.nextSibling;return x.style.setProperty("display","none"),Se(j,()=>G()?.username,ve),Se(he,()=>G()?.username,it),Z.$$click=()=>{ie(W())},x})()]}})]}Nt(["click"]);const kl=()=>X(Cl,{});Br(()=>X(kl,{}),document.getElementById("root"));
